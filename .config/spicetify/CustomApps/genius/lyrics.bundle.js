!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=2234)}({

2273:function(e,t,require){
"use strict";
const _global = require(1);
const liveAPI = require(2);
const center = require(13);
const cosmosAPI = require(11).default;
const language = require(1076);
const eventTarget = require(58);
const offlineHandler = require(819);
const LyricSheetReact = require(2274);
const LyricSheetViewReact = require(2275);
const navbarHandler = require(1000);

const noLyricMessages = [
    language.get("desktop.lyrics.app.noLyrics0"),
    language.get("desktop.lyrics.app.noLyrics1"),
    language.get("desktop.lyrics.app.noLyrics2"),
    language.get("desktop.lyrics.app.noLyrics3")
];
const localStorage = _global.localStorage;

function LyricApp(e, t, n) {
    // Add providers name and their functions here:
    this.providers = {
        Genius: {
            initFunc: this.initGenius,
            fetchFunc: this.fetchGenius,
        },
        Musixmatch: {
            initFunc: this.initMusixmatch,
            fetchFunc: this.fetchMusixmatch,
        },
    };
    this.container = e;
    this.lyricsSheet = null;
    this._prevLastTrackTimestamp = null;
    this._lastScrollPosition = 0;
    this._lastScrollDirection = 0;
    this._scrollEventTicking = !1;
    this._lyricsIndex = -1;
    this._lastNoLyricsMessage = null;
    this._hasSyncedLyrics = !1;
    this._fullScreenContainerHeight = 0;
    this.lastProvider = null;
    this.lastTrackInfo = null;
    this.versionContainer = null;
};

LyricApp.prototype.initGenius = function() {
    function getChildDeep(parent, isDeep = false) {
        let acc = "";

        if (!parent.children) {
            return acc;
        }

        for (const child of parent.children) {
            if (typeof child == "string") {
                acc += child;
            } else if (child.children) {
                acc += getChildDeep(child, true);
            }
            if (!isDeep) {
                acc += "\n";
            }
        }
        return acc.trim();
    }

    function getJSON(url) {
        return new Promise((resolve, reject) => {
            cosmosAPI.resolver.get(url, (error, result) => {
                if (error) {
                    reject(error);
                }

                resolve(JSON.parse(result._body).response);
            });
        });
    }

    async function getNote(el, id) {
        const response = await getJSON(`https://genius.com/api/annotations/${id}`);

        let note = "";

        // Authors annotations
        if (response.referent && response.referent.classification == "verified") {
            const referents = await getJSON(`https://genius.com/api/referents/${id}`);
            for (const ref of referents.referent.annotations) {
                note += getChildDeep(ref.body.dom);
            }
        }

        // Users annotations
        if (!note && response.annotation) {
            note = getChildDeep(response.annotation.body.dom);
        }

        // Users comments
        if (!note && response.annotation && response.annotation.top_comment) {
            note += getChildDeep(response.annotation.top_comment.body.dom);
        }

        el.setAttribute("data-tooltip", note);
    }

    const lyricObserver = new window.MutationObserver(changed => {
        for (const note of this.container.getElementsByTagName("a")) {
            let id = note.getAttribute("data-id");
            if (!id) {
                id = note.getAttribute("href").match(/\/(\d+)\//);
                if (!id) {
                    return;
                }
                id = id[1];
            }
            note.setAttribute("href", `https://genius.com/${id}`);
            getNote(note, id);
        }
    });
    lyricObserver.observe(this.container, { childList: true, subtree: true });
};

LyricApp.prototype.fetchGenius = function(info) {
    const url = `https://genius.com/api/search/song?per_page=10&q=${encodeURIComponent(info.artist)}%20${encodeURIComponent(info.title)}`;

    function downloadLyricFromLink(result) {
        if (!result) {
            this._handleFetchLyrics({}, info);
            return;
        }

        cosmosAPI.resolver.get(result.url, (error, geniusSite) => {
            if (error) {
                this._handleFetchLyrics({}, info);
                return;
            }
            let lyrics = geniusSite._body.match(/<div class="lyrics">(.+?)<\/div>/s);
            if (lyrics) {
                lyrics = lyrics[1];
            } else {
                const lyricsSections = geniusSite._body.match(/<div class="Lyrics__Container.+?>.+?<\/div>/sg);
                lyrics = "";
                for (const section of lyricsSections) {
                    const fragment = section.match(/<div class="Lyrics__Container.+?>(.+?)<\/div>/s);
                    if (fragment) {
                        lyrics += fragment[1];
                    }
                }
                if (!lyrics.length) {
                    eventTarget.dispatchEvent({
                        type: "forceError",
                        params: {
                            title: "Could not parse lyrics or lyrics does not exist.",
                            message: `If problem persists, file an Issue on <a href="https://github.com/khanhas/genius-spicetify">https://github.com/khanhas/genius-spicetify</a>`,
                        },
                    });
                    return;
                }
            }

            this._handleFetchLyrics({ lines: [lyrics] }, info);
        })
    }
    cosmosAPI.resolver.get(url, (error, geniusSearch) => {
        if (error) {
            this._handleFetchLyrics({}, info);
            return;
        }

        const hits = JSON.parse(geniusSearch._body).response.sections[0].hits
            .map(item => ({
                title: item.result.full_title,
                url: item.result.url,
            }));
        console.log(hits);
        this.handleMultipleVersions(hits, downloadLyricFromLink);
    })
};

LyricApp.prototype.initMusixmatch = function() {
    const setting = __spotify.app_manifest["Musixmatch"];
    if (!setting || !setting.UserToken) {
        eventTarget.dispatchEvent({
            type: "forceError",
            params: {
                title: "You haven't configured Musixmatch.",
                message: `Follow this instruction: <a href="https://github.com/khanhas/genius-spicetify#musicxmatch">https://github.com/khanhas/genius-spicetify#musicxmatch</a>`,
            },
        });
    }
};

LyricApp.prototype.fetchMusixmatch = function(info) {
    const baseURL = `https://apic-desktop.musixmatch.com/ws/1.1/macro.subtitles.get?format=json&namespace=lyrics_synched&subtitle_format=mxm&app_id=web-desktop-app-v1.0&`;

    const durr = info.duration / 1000;

    const params = {
        q_album: info.album,
        q_artist: info.artist,
        q_artists: info.artist,
        q_track: info.title,
        track_spotify_id: info.uri,
        q_duration: durr,
        f_subtitle_length: Math.floor(durr),
        usertoken: __spotify.app_manifest["Musixmatch"].UserToken,
    };

    const finalURL = baseURL + Object.keys(params)
        .map(key => key + "=" + encodeURIComponent(params[key]))
        .join("&");

    cosmosAPI.resolver.get({
        url: finalURL,
        headers: {
            authority: "apic-desktop.musixmatch.com",
            cookie: "x-mxm-token-guid=",
        },
    }, (error, mxmSearch) => {
        if (error) {
            console.error(error);
            this._handleFetchLyrics({}, info);
            return;
        }

        try {
            const body = mxmSearch.getJSONBody().message.body.macro_calls;

            if (body["matcher.track.get"].message.header.status_code !== 200) {
                console.info(`Requested error: ${body["matcher.track.get"].message.header.mode}`, info);
                this._handleFetchLyrics({}, info);
                return;
            }

            const meta = body["matcher.track.get"].message.body;
            const hasSynced = meta.track.has_subtitles;
            const hasNoSynced = meta.track.has_lyrics;

            if (hasSynced) {
                // TODO: Support multiple subtitle choices
                const subtitle = body["track.subtitles.get"].message.body.subtitle_list[0].subtitle;

                const lines = JSON.parse(subtitle.subtitle_body)
                    .map(line => ({
                        text: line.text || "⋯",
                        time: line.time.total * 1000,
                    }));

                this._handleFetchLyrics({ lines }, info);

            } else if (hasNoSynced) {
                const lines = body["track.lyrics.get"].message.body.lyrics.lyrics_body.split("\n");
                this._handleFetchLyrics({ lines }, info);

            } else {
                this._handleFetchLyrics({}, info);
                console.info("Lyric is actually not found");
            }

        } catch {
            this._handleFetchLyrics({}, info);
            console.info("Cannot parse lyric:", info)
        }
    });
};

LyricApp.prototype.init = function (e) {
    this.options = "object" == typeof e ? e : {};
    eventTarget.addEventListener("fetchLyrics", this._testOnline.bind(this));
    eventTarget.addEventListener("checkLyricsIndex", this._checkLyricsIndex.bind(this));
    eventTarget.addEventListener("updateLyricsDisplay", this._updateLyricsDisplay.bind(this));
    eventTarget.addEventListener("adPlayback", this._resetLyricsSheet.bind(this));

    if (!this.lyricsSheet) {
        this.lyricsSheet = new LyricSheetReact;
        this.lyricsSheetView = new LyricSheetViewReact(this.container)
    }

    this.versionContainer = document.getElementById("lyrics-versions");

    this.lastProvider = localStorage.getItem("lyric.last.provider");

    if (!this.lastProvider || !this.providers[this.lastProvider]) {
        this.lastProvider = Object.keys(this.providers)[0];
        localStorage.setItem("lyric.last.provider", this.lastProvider);
    }

    navbarHandler.addItems(Object.keys(this.providers));

    if (this.lastProvider &&
        this.providers[this.lastProvider] &&
        this.providers[this.lastProvider].initFunc
    ) {
        navbarHandler.activateItem("spotify:app:genius:" + this.lastProvider);
        this.providers[this.lastProvider].initFunc.call(this);
    }

    center.on("navbar-change", this._changeService.bind(this));
};

LyricApp.prototype._fetchLyrics = function(info) {
    this.lastTrackInfo = info;

    if (!this.lastProvider || !this.providers[this.lastProvider]) {
        return;
    }

    const cached = this.lyricsSheet.checkCache(this.lastProvider, info.uri);
    if (cached) {
        this._handleFetchLyrics(cached, info);
        return;
    }

    if (this.providers[this.lastProvider].fetchFunc) {
        this.providers[this.lastProvider].fetchFunc.call(this, info);
    }
};

LyricApp.prototype._changeService = function ({ id }) {
    this.lastProvider = id.split(":")[3];
    localStorage.setItem("lyric.last.provider", this.lastProvider);

    if (this.lastProvider &&
        this.providers[this.lastProvider] &&
        this.providers[this.lastProvider].initFunc
    ) {
        this.providers[this.lastProvider].initFunc.call(this);
    }

    if (this.lyricsSheetView && this.lastTrackInfo) {
        this._testOnline({ params: this.lastTrackInfo });
    }
}

LyricApp.prototype.handleMultipleVersions = function(items, callback) {
    if (items.length > 1) {
        this.versionsViewShow();
        this.versionsViewReset();
        items.forEach(item => {
            const container = document.createElement("button");
            container.onclick = () => {
                callback.bind(this)(item)
            };
            container.className = "button button-with-stroke added";
            container.innerText = item.title;
            this.versionContainer.append(container);
        })
    } else {
        this.versionContainer.classList.add("hidden");
    }

    callback.bind(this)(items[0]);
}

LyricApp.prototype.versionsViewHide = function() {
    if (this.versionContainer) {
        this.versionContainer.classList.add("hidden");
    }
}

LyricApp.prototype.versionsViewShow = function() {
    if (this.versionContainer) {
        this.versionContainer.classList.remove("hidden");
    }
}

LyricApp.prototype.versionsViewReset = function() {
    if (this.versionContainer) {
        this.versionContainer.innerHTML = "";
    }
}

LyricApp.prototype._resetLyricsSheet=function(){this._hasSyncedLyrics=!1,this.lyricsSheet.update(),this.lyricsSheetView.resetView(),this.versionsViewHide()},LyricApp.prototype._testOnline=function(e){liveAPI("spotify:client").query("session(language, online)",(t,n)=>{if(t)throw t;if(n.session.online){if(!e||!e.params.uri)return;this._resetLyricsSheet(),this._fetchLyrics(e.params)}else this._resetLyricsSheet(),offlineHandler.enable({title:language.get("desktop.lyrics.app.offlineTitle"),message:language.get("desktop.lyrics.app.offlineMessage"),onWentOnline:function(){window.location.reload()}})})},LyricApp.prototype._handleFetchLyrics=function(e,t){if(this.lyricsSheet.update({lines: e.lines, provider: this.lastProvider, uri: t.uri}),e.lines&&e.lines.length&&!this.options.forceNoLyrics)!this._checkForSyncData(e)||this.options.forceNoSyncLyrics?(this._hasSyncedLyrics=!1,this.lyricsSheetView.renderNoSyncLyrics(e),this.container.addEventListener("scroll",this._handleScrollEvent.bind(this,t)),setTimeout(this._setFullScreenContainerHeight.bind(this),10)):(this._hasSyncedLyrics=!0,this.lyricsSheetView.resetView(),cosmosAPI.resolver.get("sp://player/v2/main/state",(function(e,t){if(e)return;const n=JSON.parse(t.toJSON().body),o=n.timestamp;n.position_as_of_timestamp=n.position_as_of_timestamp+Date.now()-o,eventTarget.dispatchEvent({type:"updateTrack",params:n})})));else{this._hasSyncedLyrics=!1;const e=this._getNoLyricsMessage(noLyricMessages);this.lyricsSheetView.renderNoLyrics(e)}},
LyricApp.prototype._checkForSyncData=function(e){if(!e.lines||!e.lines.length)return!1;let t=!1;return e.lines.map((function(e){void 0!==e.time&&"number"==typeof e.time&&(t=!0)})),t},LyricApp.prototype._updateLyricsDisplay=function(e){if(!e||!e.params||!this._hasSyncedLyrics)return;const t=e.params.lastTrackTimestamp;if(t!==this._prevLastTrackTimestamp){this._prevLastTrackTimestamp=t,this._lyricsIndex=this._getCurrentLyricsIndex(t);const e=this._getNextLines(this._lyricsIndex);this.lyricsSheetView.forceUpdate({lines:e})}},LyricApp.prototype._checkLyricsIndex=function(e){if(!(e&&e.params&&void 0!==e.params.currentProgress&&e.params.trackUri&&this._hasSyncedLyrics))return;const t=e.params.currentProgress,n=-1===this._lyricsIndex?0:this._lyricsIndex;if(n<=this.lyricsSheet.lines.length-1&&(t>this.lyricsSheet.lines[n].time||-1===this._lyricsIndex)){const t=this._getNextLines(this._lyricsIndex);this.lyricsSheetView.update({lines:t}),this._lyricsIndex++}},LyricApp.prototype._getCurrentLyricsIndex=function(e){if(!this.lyricsSheet||!this.lyricsSheet.lines||void 0===e)return 0;const t=this.lyricsSheet.lines;for(let n=0,i=t.length;n<i;n++)if(t[n].time>e)return n-1;return t.length-1},LyricApp.prototype._resetLyricsIndex=function(){this._lyricsIndex=-1},LyricApp.prototype._getNextLines=function(e){const t=-1===e?0:e||0,n=-1===e?[""]:[];for(let e=t;e<t+4;e++)e<=this.lyricsSheet.lines.length-1?n.push(this.lyricsSheet.lines[e].text):n.push("");return n},LyricApp.prototype._getNoLyricsMessage=function(e){if(!e)return this._lastNoLyricsMessage="","";const t=e[Math.floor(Math.random()*e.length)];return this._lastNoLyricsMessage=t,t},LyricApp.prototype._handleScrollEvent=function(e){if(!this._scrollEventTicking){let t=1;this.container.scrollTop<this._lastScrollPosition&&(t=-1),window.requestAnimationFrame(this._scrollTick.bind(this,t,e))}this._lastScrollPosition=this.container.scrollTop,this._scrollEventTicking=!0},LyricApp.prototype._scrollTick=function(e,t){e!==this._lastScrollDirection&&(this._lastScrollDirection=e),this._scrollEventTicking=!1},LyricApp.prototype._setFullScreenContainerHeight=function(){const e=this.container.firstChild;e&&(this._fullScreenContainerHeight=e.getBoundingClientRect().height)},e.exports=LyricApp},

1000: function(e,t,require) {
    'use strict';

    const $ = require(9);
    const _global = require(1);
    const live = require(2);
    const center = require(13);

    const NAVBAR_ATTR_NAME = 'data-navbar';
    const ITEM_ID_ATTR_NAME = 'data-navbar-item-id';
    const ACTIVE_ID_ATTR_NAME = 'data-navbar-active-id';
    const CLASSNAME_ACTIVE = 'active';
    const OVERFLOW_MENU_ID = 'navbar-overflow-menu';

    const APPLICATION_MODEL_URI = 'spotify:application';

    let navbarOverflowItems;
    let isShowingNavbarOverflow;
    let shouldShowNavbarOverflow;

    const getSelector = function (name, optOperator, optMatcher) {
        if (optOperator && optMatcher) {
            return `[${name}${optOperator}"${optMatcher}"` + ']';
        }
        return `[${name}]`;
    };

    const updateOverflowMenu = function () {
        const moreMenuItem = document.querySelector('[data-navbar-item-id=navbar-overflow-menu]');
        if (!moreMenuItem) {
            return;
        }

        const canBeOpen = navbarOverflowItems && navbarOverflowItems.length;
        if (!canBeOpen) {
            shouldShowNavbarOverflow = false;
        }

        // There's no check for isShowingNavbarOverflow, the event is intentionally
        // resent on update, to support resizing.
        if (shouldShowNavbarOverflow) {
            isShowingNavbarOverflow = true;
            const descriptors = navbarOverflowItems.map(function (item) {
                const link = item.querySelector('a[href]');

                // The text is in the <a> element inside the item.
                return {
                    name: item.firstElementChild && item.firstElementChild.textContent || '',
                    id: item.getAttribute(ITEM_ID_ATTR_NAME),
                    url: link && link.getAttribute('href'),
                    active: item.classList.contains('active')
                };
            });

            const targetRect = moreMenuItem.getBoundingClientRect();
            _global.top.postMessage({
                type: 'show-navbar-overflow',
                items: descriptors,
                right: targetRect.right,
                top: targetRect.bottom
            }, '*');
        }

        if (!shouldShowNavbarOverflow && isShowingNavbarOverflow) {
            isShowingNavbarOverflow = false;
            _global.top.postMessage({
                type: 'hide-navbar-overflow'
            }, '*');
        }
    };

    const getTabsForId = function (tabId) {
        if (!tabId) {
            return [];
        }
        // This is intentionally selecting on all of the document
        const tabs = document.querySelectorAll(getSelector(ITEM_ID_ATTR_NAME, '=', tabId));
        return Array.prototype.slice.call(tabs);
    };

    const getNavbar = function (optNode) {
        return document.documentElement.querySelector(getSelector(NAVBAR_ATTR_NAME));
    };

    const getActiveTab = function () {
        const navbar = getNavbar();
        if (!navbar) return null;
        const activeTabId = navbar.getAttribute(ACTIVE_ID_ATTR_NAME);
        const activeTabs = getTabsForId(activeTabId);
        return activeTabs[0];
    };

    const getTabs = function () {
        const tabs = document.querySelectorAll(getSelector(ITEM_ID_ATTR_NAME));
        return Array.prototype.slice.call(tabs);
    };

    const setActive = function (id) {
        const navbar = getNavbar();
        if (!navbar) {
            return;
        }

        const tabs = getTabs();
        if (!tabs.length) {
            return;
        }

        navbar.setAttribute(ACTIVE_ID_ATTR_NAME, id);

        // Remove the active class name from all tabs except the ones that should be active
        tabs.forEach(function (_tab) {
            if (_tab.getAttribute(ITEM_ID_ATTR_NAME) !== id) {
                _tab.classList.remove(CLASSNAME_ACTIVE);
            } else {
                _tab.classList.add(CLASSNAME_ACTIVE);
            }
        });

        center.emit('navbar-change', { id: id });
    };

    const handleClick = function (event, tab) {
        const id = tab.getAttribute(ITEM_ID_ATTR_NAME);
        if (id === OVERFLOW_MENU_ID) {
            shouldShowNavbarOverflow = true;
            updateOverflowMenu();
            return;
        }

        setActive(id);

        // Prevent any default click action (like link navigation)
        event.preventDefault();
        event.stopPropagation();
    };

    const hideOverflow = function () {
        if (isShowingNavbarOverflow) {
            shouldShowNavbarOverflow = false;
            updateOverflowMenu();
        }
    };

    const onMessage = function (message) {
        if (message.data && message.data.name === 'navbar-overflow-click') {
            setActive(message.data.itemId);
        }

        if (message.data && message.data.name === 'hide-navbar-overflow') {
            hideOverflow();
        }
    };

    const getFirstTabId = function () {
        const tab = document.querySelector(getSelector(ITEM_ID_ATTR_NAME));
        if (tab) {
            if (tab.getAttribute(ITEM_ID_ATTR_NAME) === OVERFLOW_MENU_ID) {
                return null;
            }
            return tab.getAttribute(ITEM_ID_ATTR_NAME);
        }
        return null;
    };

    // Hack to get around bridge bug (reported at WP-471) where WP reports
    // the uri with the arguments as well.
    const fixAppURI = function (uri) {
        return uri.split(':').slice(0, 3).join(':');
    };

    const updateForNode = function (node) {
        const navbar = getNavbar(node);
        if (!navbar) return;

        live(APPLICATION_MODEL_URI).query('appURI, arguments', function (error, data) {
            if (error) throw error;

            let fullAppURI = fixAppURI(data.appURI);
            const activeTab = getActiveTab();

            if (data.arguments) {
                fullAppURI += `:${data.arguments}`;
            } else if (activeTab) {
                fullAppURI = activeTab.getAttribute(ITEM_ID_ATTR_NAME);
            } else {
                fullAppURI += `:${getFirstTabId()}`;
            }

            setActive(fullAppURI);
        });
    };

    function updateForOverflow(node) {
        const navbar = getNavbar(node);
        if (!navbar) return;

        const itemSelector = '[data-navbar] > [data-navbar-item-id]:not(.overflow-menu-button)';
        let items = node.querySelectorAll(itemSelector);
        if (!items) {
            return;
        }

        items = Array.prototype.slice.call(items);

        const overflowMenuButton = navbar.querySelector('.overflow-menu-button');

        // If we have less than two items, only show the navbar and be done. We need
        // at least two items for messurement and chances are a "more" menu won't be
        // needed.
        if (items.length < 2) {
            navbar.style.visibility = 'visible';
            if (overflowMenuButton) {
                overflowMenuButton.style.display = 'none';
            }
            return;
        }

        const navbarWidth = getWidth(navbar);
        if (!navbarWidth) {
            // The navbar isn't rendered. Bail out.
            return;
        }

        // Reset to the initial rendering state to be able to measure items.
        if (overflowMenuButton) {
            overflowMenuButton.style.display = 'inline';
        }

        items.forEach(function (item) {
            item.style.display = 'block';
            item.classList.remove('last-visible');
        });

        const sizing = measureNavbar(items, overflowMenuButton);

        // If stuff doesn't completely fit, reduce the available space by the "more"
        // menu with, then calculate what needs to go in it.
        let availableSpace = navbarWidth;
        let firstOverflown = getFirstOverflownIndex(availableSpace, sizing.itemWidths);
        const needsMoreMenu = items.length !== firstOverflown;

        if (needsMoreMenu) {
            availableSpace -= sizing.overflowMenuButtonWidth;
            firstOverflown = getFirstOverflownIndex(availableSpace, sizing.itemWidths);
        }

        if (!navbarOverflowItems) {
            navbarOverflowItems = [];
        }
        navbarOverflowItems.length = 0;

        items.forEach(function (item, i) {
            const shouldBeInOverflow = i >= firstOverflown;
            if (shouldBeInOverflow) {
                navbarOverflowItems.push(item);
            }

            // If we don't draw an overflow menu, set the last-visible class on the
            // very last item so its margin-right is removed.
            const isLastInNotOverflown = !needsMoreMenu && i === items.length - 1;

            item.style.display = shouldBeInOverflow ? 'none' : 'block';
            item.classList.toggle('last-visible', isLastInNotOverflown);
        });

        if (overflowMenuButton) {
            overflowMenuButton.style.display = needsMoreMenu ? 'inline' : 'none';
        }

        // Update items and position, possibly close the menu
        updateOverflowMenu();
        navbar.style.visibility = 'visible';
    }

    function handleResize() {
        updateForOverflow(document.body);
    }

    function measureNavbar(items, overflowMenuButton) {
        // Find out what the margin per item is my messuring beween the first 2 items.
        const item1 = items[0];
        const item2 = items[1];

        const right1 = Math.floor(item1.getBoundingClientRect().right);
        const left2 = Math.floor(item2.getBoundingClientRect().left);
        const marginPerSide = (left2 - right1) / 2;

        let itemWidths = [];
        if (items) {
            itemWidths = items.map(function (item, i, all) {
                const marginLeft = i === 0 ? 0 : marginPerSide;
                const marginRight = i === all.length - 1 ? 0 : marginPerSide;
                return getWidth(item) + marginLeft + marginRight;
            });
        }

        // When the overflowMenuButton is showns, it's always at the end, so it has
        // no right margin.
        let overflowMenuButtonWidth = 0;
        if (overflowMenuButton) {
            overflowMenuButtonWidth = getWidth(overflowMenuButton) + marginPerSide;
        }

        return {
            itemWidths: itemWidths,
            overflowMenuButtonWidth: overflowMenuButtonWidth
        };
    }

    function getWidth(element) {
        return element && element.offsetWidth || 0;
    }

    function getFirstOverflownIndex(space, sizes) {
        let count = 0;
        let used = 0;
        while (sizes[count] !== undefined && used < space) {
            used += sizes[count];
            // This is actually expected to return up to .length of the sizes.
            // That will be the case when everything fits.
            count++;
        }
        if (used < space) {
            return count;
        }
        return count - 1;
    }

    const onApplicationChange = function (event) {
        if ('arguments' in event || 'active' in event) {
            updateForNode(document.documentElement);
        }
    };

    let isAttached = false;

    e.exports.update = function update(node) {
        if (!isAttached) return;

        updateForNode(node || document.documentElement);
        updateForOverflow(node || document.documentElement);
    };

    e.exports.addItems = function (ids) {
        const navbar = getNavbar();
        for (const id of ids) {
            const item = document.createElement("li");
            item.setAttribute("data-navbar-item-id", "spotify:app:genius:" + id)
            const link = document.createElement("a");
            link.href = "spotify:app:genius:" + id;
            link.text = id;
            link.draggable = false;
            item.appendChild(link);
            navbar.append(item);
        }

        const ofItem = document.createElement("li");
        ofItem.className = "overflow-menu-button";
        ofItem.style.display = "none";
        ofItem.setAttribute("data-navbar-item-id", "navbar-overflow-menu")
        const ofLink = document.createElement("a");
        ofLink.text = "...";
        ofLink.draggable = false;
        ofItem.appendChild(ofLink);
        navbar.append(ofItem);
        handleResize();
    }

    e.exports.activateItem = setActive;

    e.exports.attach = function attach() {
        if (isAttached) return;
        isAttached = true;

        $(document).delegate('click', getSelector(ITEM_ID_ATTR_NAME), handleClick);
        window.addEventListener('message', onMessage);
        live(APPLICATION_MODEL_URI).on('update', onApplicationChange);
        window.addEventListener('resize', handleResize);
        center.on('navbar-hide', hideOverflow);
    };

    e.exports.detach = function detach() {
        if (!isAttached) return;
        isAttached = false;

        navbarOverflowItems = null;
        isShowingNavbarOverflow = false;
        shouldShowNavbarOverflow = false;

        $(document).undelegate('click', getSelector(ITEM_ID_ATTR_NAME), handleClick);
        window.removeEventListener('message', onMessage);
        live(APPLICATION_MODEL_URI).off('update', onApplicationChange);
        window.removeEventListener('resize', handleResize);
        center.off('navbar-hide', hideOverflow);
    };
},
0:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return l}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s}function l(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e}},1:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},10:function(e,t,n){},100:function(e,t,n){"use strict";var i=a(n(40)),o=a(n(61));function a(e){return e&&e.__esModule?e:{default:e}}const s=Array.prototype.slice;let l="en",r=new Intl.NumberFormat(l),p=new Intl.PluralRules(l);const d={},k=function(e){let t=s.call(arguments,1),n={};const i=t[t.length-1];"object"==typeof i&&"hash"in i&&(n=t.pop());const o=n.hash,a="object"==typeof d[e]?d[e][p.select(t[0])]||d[e].other:d[e];return a?(Array.isArray(t[0])&&(t=t[0]),a.replace(/\{([\w-]+)\}/g,(function(e,n){const i=+n;let a;return"number"==typeof(a=isNaN(i)?o[n]:t[i])&&(a=r.format(a)),null!==a?a:""}))):""};k.displayName="loc",k.register=function(e){return(0,i.default)(d,e),this},k.setLocale=function(e){l=e,r=new Intl.NumberFormat((0,o.default)(l,"intl")),p=new Intl.PluralRules((0,o.default)(l,"intl"))},e.exports=k},102:function(e,t,n){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new a(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(252),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(1))},103:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.addDebouncedScrollListener=function(e,t,o){if(null!==t&&"function"!=typeof t)throw new TypeError("The callback provided to addDebouncedScrollListener as parameter 2 is not a function.");if(void 0!==o&&"function"!=typeof o)throw new TypeError("The callback provided to addDebouncedScrollListener as parameter 3 is not a function.");n.has(e)||(e.addEventListener("scroll",p),n.set(e,[]));const a=++r,s={id:a,readFunction:t,writeFunction:o};return i[a]=e,n.get(e).push(s),a},t.removeDebouncedScrollListener=function(e){const t=i[e];if(t){delete i[e];const o=n.get(t);if(o)for(let t=0;t<o.length;t++)if(o[t].id===e){o.splice(t,1);break}0===o.length&&(t.removeEventListener("scroll",p),n.delete(t))}},t.requestFrame=c,t.cancelFrame=function(e){for(let t=0;t<o.length;t++)if(o[t].id===e){o.splice(t,1);break}0!==l&&0===o.length&&(window.cancelAnimationFrame(l),l=0)},t._reset=function(){n=new e.Map,i={},o=[],a=!1,s=null,l=0,r=0};let n=new e.Map,i={},o=[],a=!1,s=null,l=0,r=0;function p(e){if(s=e,!a){a=!0;const t=n.get(e.target);if(t){let e;c(()=>{a=!1,k(e=t.slice(),s)},()=>{u(e,s)})}}}function d(e){l=0;const t=o;o=[],k(t,e),u(t,e)}function k(e,t){e.forEach(e=>{e.readFunction&&e.readFunction(t)})}function u(e,t){e.forEach(e=>{"function"==typeof e.writeFunction&&e.writeFunction(t)})}function c(e,t){if(null!==e&&"function"!=typeof e)throw new TypeError("The callback provided to requestFrame as parameter 1 is not a function.");if(void 0!==t&&"function"!=typeof t)throw new TypeError("The callback provided to requestFrame as parameter 2 is not a function.");0===l&&(l=window.requestAnimationFrame(d));const n=++r,i={id:n,readFunction:e,writeFunction:t};return o.push(i),n}}).call(this,n(1))},104:function(e,t,n){var i=n(36);e.exports=function(e,t,n){t=i(t,n);var o=!1;if(null==e)return o;for(var a=-1,s=e.length;++a<s;)if(t(e[a],a,e)){o=!0;break}return o}},105:function(e,t,n){var i=n(33);function o(e,t){return e===t}e.exports=function(e,t){return t=t||o,i(e,(function(e,n,i){for(var o=i.length;++n<o;)if(t(e,i[n]))return!1;return!0}))}},106:function(e,t,n){"use strict";(function(t){var i=n(269);function o(e){var t=Math.pow(2,31),n=Math.floor(e||Math.random()*(t-1));this._max=t,this._nextInt=function(){return n=(1103515245*n+12345)%t}}function a(){this._index=0,this._items=[]}function s(e,t){this.buf=e,this.pos=0|t}function l(e,t){for(;t--;)e[t]=~e[t]}o.prototype.nextBoolean=function(){return!!(this._nextInt()%2)},o.prototype.nextInt=function(e,t){return void 0===t&&(t=e,e=0),t=void 0===t?this._max:t,e+Math.floor(this.nextFloat()*(t-e))},o.prototype.nextFloat=function(e,t){return void 0===t&&(t=e,e=0),e+((t=void 0===t?1:t)-e)*this._nextInt()/this._max},o.prototype.nextString=function(e,t){e|=0;var n="";(t=t||"aA").indexOf("a")>-1&&(n+="abcdefghijklmnopqrstuvwxyz"),t.indexOf("A")>-1&&(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),t.indexOf("#")>-1&&(n+="0123456789"),t.indexOf("!")>-1&&(n+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var i=[],o=0;o<e;o++)i.push(this.choice(n));return i.join("")},o.prototype.nextBuffer=function(e){var n,i=[];for(n=0;n<e;n++)i.push(this.nextInt(256));return new t(i)},o.prototype.choice=function(e){var t=e.length;if(!t)throw new Error("choosing from empty array");return e[this.nextInt(t)]},a.prototype.push=function(e){var t,n=this._items,i=0|n.length;for(n.push(e);i>0&&n[i].index<n[t=i-1>>1].index;)e=n[i],n[i]=n[t],n[t]=e,i=t},a.prototype.pop=function(){var e=this._items,t=e.length-1|0,n=e[0];if(!n||n.index>this._index)return null;if(this._index++,!t)return e.pop(),n;e[0]=e.pop();for(var i,o,a,s,l,r,p,d=t>>1,k=0;k<d&&(s=e[k],o=k+1<<1,r=e[i=1+(k<<1)],!(p=e[o])||r.index<=p.index?(l=r,a=i):(l=p,a=o),!(l.index>=s.index));)e[a]=s,e[k]=l,k=a;return n},s.prototype.isValid=function(){return this.pos<=this.buf.length},s.prototype.getValue=function(){return this.buf.slice(0,this.pos)},s.prototype.readBoolean=function(){return!!this.buf[this.pos++]},s.prototype.skipBoolean=function(){this.pos++},s.prototype.writeBoolean=function(e){this.buf[this.pos++]=!!e},s.prototype.readInt=s.prototype.readLong=function(){var e,t,n,i,o=0,a=0,s=this.buf;do{t=128&(e=s[this.pos++]),o|=(127&e)<<a,a+=7}while(t&&a<28);if(t){n=o,i=268435456;do{n+=(127&(e=s[this.pos++]))*i,i*=128}while(128&e);return(n%2?-(n+1):n)/2}return o>>1^-(1&o)},s.prototype.skipInt=s.prototype.skipLong=function(){for(var e=this.buf;128&e[this.pos++];);},s.prototype.writeInt=s.prototype.writeLong=function(e){var t,n,i=this.buf;if(e>=-1073741824&&e<1073741824){n=e>=0?e<<1:~e<<1|1;do{i[this.pos]=127&n,n>>=7}while(n&&(i[this.pos++]|=128))}else{t=e>=0?2*e:2*-e-1;do{i[this.pos]=127&t,t/=128}while(t>=1&&(i[this.pos++]|=128))}this.pos++},s.prototype.readFloat=function(){var e=this.buf,t=this.pos;if(this.pos+=4,!(this.pos>e.length))return this.buf.readFloatLE(t)},s.prototype.skipFloat=function(){this.pos+=4},s.prototype.writeFloat=function(e){var t=this.buf,n=this.pos;if(this.pos+=4,!(this.pos>t.length))return this.buf.writeFloatLE(e,n)},s.prototype.readDouble=function(){var e=this.buf,t=this.pos;if(this.pos+=8,!(this.pos>e.length))return this.buf.readDoubleLE(t)},s.prototype.skipDouble=function(){this.pos+=8},s.prototype.writeDouble=function(e){var t=this.buf,n=this.pos;if(this.pos+=8,!(this.pos>t.length))return this.buf.writeDoubleLE(e,n)},s.prototype.readFixed=function(e){var n=this.pos;if(this.pos+=e,!(this.pos>this.buf.length)){var i=new t(e);return this.buf.copy(i,0,n,n+e),i}},s.prototype.skipFixed=function(e){this.pos+=e},s.prototype.writeFixed=function(e,t){t=t||e.length;var n=this.pos;this.pos+=t,this.pos>this.buf.length||e.copy(this.buf,n,0,t)},s.prototype.readBytes=function(){return this.readFixed(this.readLong())},s.prototype.skipBytes=function(){var e=this.readLong();this.pos+=e},s.prototype.writeBytes=function(e){var t=e.length;this.writeLong(t),this.writeFixed(e,t)},s.prototype.readString=function(){var e=this.readLong(),t=this.pos,n=this.buf;if(this.pos+=e,!(this.pos>n.length))return this.buf.utf8Slice(t,t+e)},s.prototype.skipString=function(){var e=this.readLong();this.pos+=e},s.prototype.writeString=function(e){var n=t.byteLength(e);this.writeLong(n);var i=this.pos;this.pos+=n,this.pos>this.buf.length||this.buf.utf8Write(e,i,n)},s.prototype.writeBinary=function(e,t){var n=this.pos;this.pos+=t,this.pos>this.buf.length||this.buf.write(e,n,t,"binary")},s.prototype.matchBoolean=function(e){return this.buf[this.pos++]-e.buf[e.pos++]},s.prototype.matchInt=s.prototype.matchLong=function(e){var t=this.readLong(),n=e.readLong();return t===n?0:t<n?-1:1},s.prototype.matchFloat=function(e){var t=this.readFloat(),n=e.readFloat();return t===n?0:t<n?-1:1},s.prototype.matchDouble=function(e){var t=this.readDouble(),n=e.readDouble();return t===n?0:t<n?-1:1},s.prototype.matchFixed=function(e,t){return this.readFixed(t).compare(e.readFixed(t))},s.prototype.matchBytes=s.prototype.matchString=function(e){var t=this.readLong(),n=this.pos;this.pos+=t;var i=e.readLong(),o=e.pos;e.pos+=i;var a=this.buf.slice(n,this.pos),s=e.buf.slice(o,e.pos);return a.compare(s)},s.prototype.unpackLongBytes=function(){var e,n,i=new t(8),o=0,a=0,s=6,r=this.buf;for(n=1&(e=r[this.pos++]),i.fill(0),o|=(127&e)>>1;128&e;)o|=(127&(e=r[this.pos++]))<<s,(s+=7)>=8&&(s-=8,i[a++]=o,o>>=8);return i[a]=o,n&&l(i,8),i},s.prototype.packLongBytes=function(e){var t,n=(128&e[7])>>7,i=this.buf,o=1,a=0,s=3;n?(l(e,8),t=1):t=0;for(var r=[e.readUIntLE(0,3),e.readUIntLE(3,3),e.readUIntLE(6,2)];s&&!r[--s];);for(;a<s;)for(t|=r[a++]<<o,o+=24;o>7;)i[this.pos++]=127&t|128,t>>=7,o-=7;t|=r[s]<<o;do{i[this.pos]=127&t,t>>=7}while(t&&(i[this.pos++]|=128));this.pos++,n&&l(e,8)},e.exports={abstractFunction:function(){throw new Error("abstract")},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},compare:function(e,t){return e===t?0:e<t?-1:1},getHash:function(e,t){t=t||"md5";var n=i.createHash(t);return n.end(e),n.read()},toMap:function(e,t){var n,i,o={};for(n=0;n<e.length;n++)o[t(i=e[n])]=i;return o},singleIndexOf:function(e,t){var n,i,o=-1;if(!e)return-1;for(n=0,i=e.length;n<i;n++)if(e[n]===t){if(o>=0)return-2;o=n}return o},hasDuplicates:function(e,t){var n,i,o,a={};for(n=0,i=e.length;n<i;n++){if(o=e[n],t&&(o=t(o)),a[o])return!0;a[o]=!0}return!1},Lcg:o,OrderedQueue:a,Tap:s}}).call(this,n(39).Buffer)},107:function(e,t,n){(function(e){var i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++)n[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return n},o=/%[sdj%]/g;t.format=function(e){if(!g(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}n=1;for(var i=arguments,a=i.length,s=String(e).replace(o,(function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}})),r=i[n];n<a;r=i[++n])f(r)||!h(r)?s+=" "+r:s+=" "+l(r);return s},t.deprecate=function(n,i){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,i).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}};var a,s={};function l(e,n){var i={seen:[],stylize:p};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),m(n)?i.showHidden=n:n&&t._extend(i,n),z(i.showHidden)&&(i.showHidden=!1),z(i.depth)&&(i.depth=2),z(i.colors)&&(i.colors=!1),z(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=r),d(i,e,i.depth)}function r(e,t){var n=l.styles[t];return n?"["+l.colors[n][0]+"m"+e+"["+l.colors[n][1]+"m":e}function p(e,t){return e}function d(e,n,i){if(e.customInspect&&n&&w(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(i,e);return g(o)||(o=d(e,o,i)),o}var a=function(e,t){if(z(t))return e.stylize("undefined","undefined");if(g(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(y(t))return e.stylize(""+t,"number");if(m(t))return e.stylize(""+t,"boolean");if(f(t))return e.stylize("null","null")}(e,n);if(a)return a;var s=Object.keys(n),l=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),v(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return k(n);if(0===s.length){if(w(n)){var r=n.name?": "+n.name:"";return e.stylize("[Function"+r+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return e.stylize(Date.prototype.toString.call(n),"date");if(v(n))return k(n)}var p,h="",S=!1,x=["{","}"];(c(n)&&(S=!0,x=["[","]"]),w(n))&&(h=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(h=" "+RegExp.prototype.toString.call(n)),_(n)&&(h=" "+Date.prototype.toUTCString.call(n)),v(n)&&(h=" "+k(n)),0!==s.length||S&&0!=n.length?i<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),p=S?function(e,t,n,i,o){for(var a=[],s=0,l=t.length;s<l;++s)j(t,String(s))?a.push(u(e,t,n,i,String(s),!0)):a.push("");return o.forEach((function(o){o.match(/^\d+$/)||a.push(u(e,t,n,i,o,!0))})),a}(e,n,i,l,s):s.map((function(t){return u(e,n,i,l,t,S)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(p,h,x)):x[0]+h+x[1]}function k(e){return"["+Error.prototype.toString.call(e)+"]"}function u(e,t,n,i,o,a){var s,l,r;if((r=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?l=r.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):r.set&&(l=e.stylize("[Setter]","special")),j(i,o)||(s="["+o+"]"),l||(e.seen.indexOf(r.value)<0?(l=f(n)?d(e,r.value,null):d(e,r.value,n-1)).indexOf("\n")>-1&&(l=a?l.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+l.split("\n").map((function(e){return"   "+e})).join("\n")):l=e.stylize("[Circular]","special")),z(s)){if(a&&o.match(/^\d+$/))return l;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+l}function c(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function f(e){return null===e}function y(e){return"number"==typeof e}function g(e){return"string"==typeof e}function z(e){return void 0===e}function b(e){return h(e)&&"[object RegExp]"===S(e)}function h(e){return"object"==typeof e&&null!==e}function _(e){return h(e)&&"[object Date]"===S(e)}function v(e){return h(e)&&("[object Error]"===S(e)||e instanceof Error)}function w(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function x(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(z(a)&&(a=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(a)){var i=e.pid;s[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,i,e)}}else s[n]=function(){};return s[n]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=c,t.isBoolean=m,t.isNull=f,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=g,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=z,t.isRegExp=b,t.isObject=h,t.isDate=_,t.isError=v,t.isFunction=w,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(271);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(){var e=new Date,t=[x(e.getHours()),x(e.getMinutes()),x(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",T(),t.format.apply(t,arguments))},t.inherits=n(272),t._extend=function(e,t){if(!t||!h(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e};var A="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function E(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(A&&e[A]){var t;if("function"!=typeof(t=e[A]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,A,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,i=new Promise((function(e,i){t=e,n=i})),o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);o.push((function(e,i){e?n(e):t(i)}));try{e.apply(this,o)}catch(e){n(e)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),A&&Object.defineProperty(t,A,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=A,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var a=this,s=function(){return o.apply(a,arguments)};t.apply(this,n).then((function(t){e.nextTick(s,null,t)}),(function(t){e.nextTick(E,t,s)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,i(t)),n}}).call(this,n(26))},1076:function(e,t,n){"use strict";const i=n(60)({ar:n(2236),cs:n(2237),de:n(2238),el:n(2239),en:n(2240),es:n(2241),"es-419":n(2242),fi:n(2243),fr:n(2244),"fr-CA":n(2245),he:n(2246),hu:n(2247),id:n(2248),it:n(2249),ja:n(2250),ko:n(2251),nl:n(2252),pl:n(2253),"pt-BR":n(2254),ru:n(2255),sv:n(2256),th:n(2257),tr:n(2258),vi:n(2259),"zh-Hant":n(2260),ms:n(2261)});e.exports=i},108:function(e,t,n){"use strict";(function(e){var i=p(n(109)),o=p(n(20)),a=p(n(37)),s=p(n(71)),l=p(n(277)),r=p(n(11));function p(e){return e&&e.__esModule?e:{default:e}}function d(t,n){const o=t||{};i.default.getReferrer(o,(t,o,a,s)=>{if(t)return void n(t);let p=s;const d=i.default.getReferrerVersion();if(!p){const t=e.__spotify&&e.__spotify.app_manifest;t&&(p=t.BundleIdentifier||null)}const k={station:"radio",stations:"radio","radio-hub":"radio","daily-mix-hub":"radio"};p&&k[p]&&(p=k[p]);const u=a?{referrerIdentifier:a}:null,c=new l.default.Player(r.default.resolver,o,p,d,u);n(c)})}let k,u;function c(e,t){const n=t||e.context_metadata["zelda.context_uri"]||e.context_uri||e.track&&e.track.uri||null,i=m(n);return delete e.context_uri,n?(e.variant={uri:n},e.context={uri:i}):(e.variant=null,e.context=null),e.track=e.track||null,e.index=e.index||null,e.track?(e.uid=e.track.uid,delete e.track.uid):e.uid=null,function e(t){let n;for(const i in t)t.hasOwnProperty(i)&&(n=i.replace(/_(.)/g,(e,t)=>t.toUpperCase()),t[i]instanceof Object?t[n]=e(t[i]):t[n]=t[i],n!==i&&delete t[i]);return t}(e)}function m(e){if(!e)return e;const t=a.default.parse(e);let n=e;t&&(n=t.originUri);const i=s.default.parse(n);return i&&(n=i.originUri),n}t.play=function(e,t,n){d(t,(function(i){const o={pages:[{tracks:e}],metadata:{"zelda.context_uri":t.context},entity_uri:m(t.context)},a={};"number"==typeof t.index?a.skip_to={page_index:0,track_index:t.index}:(t.uid||t.uri)&&(a.skip_to={},t.uid?a.skip_to.track_uid=t.uid:t.uri&&(a.skip_to.track_uri=t.uri)),"number"==typeof t.seekTo&&(a.seek_to=t.seekTo),i.play(o,a,n)}))},t.playFromResolver=function(e,t,n){d(t,i=>{o.default.sanitizeURL(e,(e,o)=>{if(e)return void(n&&n(e));const a={uri:o,url:`context://${encodeURI(o)}`};let s=null;"number"==typeof t.index?s={skip_to:{page_index:0,track_index:t.index}}:t.trackUri&&(s={skip_to:{track_uri:t.trackUri}}),"number"==typeof t.seekTo&&(s.seek_to=t.seekTo),i.play(a,s,n)})})},t.playContext=function(e,t,n){t.uid||t.uri||t.page?(t.skip_to={},t.uid?t.skip_to.track_uid=t.uid:t.uri&&(t.skip_to.track_uri=t.uri),t.page&&(t.skip_to.page_index=t.page)):t.range?t.skip_to={page_index:0,track_index:t.range.start}:"number"==typeof t.index&&(t.skip_to={page_index:0,track_index:t.index}),d(t,(function(i){i.play(e,t||{},n)}))},t.pause=function(e){d(null,t=>{t.pause(e)})},t.resume=function(e){d(null,t=>{t.resume(e)})},t.update=function(e,t,n){d(t,(function(i){const o={pages:[{tracks:e}],metadata:{"zelda.context_uri":t.context},entity_uri:m(t.context)};i.update(o,n)}))},t.subscribe=function(e,t={}){let n;return k=!1,d(null,i=>{k||(n=i.subscribe((t,n)=>{t?e(t):e(null,c(n.getJSONBody()))},t))}),{unsubscribe:()=>{k=!0,n&&(n.cancel(),n=null)}}},t.onError=function(e){return d(null,t=>{u=t.onError(e)}),()=>{u&&(u.cancel(),u=null)}},t.getState=function(e){d(null,t=>{t.getState((t,n)=>{t?e(t,null):e(null,c(n.getJSONBody()))})})},t.addContext=c,t.updateContext=function(e,t){d(null,(function(n){n.update(e,t)}))}}).call(this,n(1))},109:function(e,t,n){"use strict";(function(e){const i=n(2),o=n(21),a=n(108),s=n(5).logWarn,l={page:null,uid:null,trackUri:null,index:null,source:"unknown",reason:"unknown"};function r(e,t){e?e.query("track(playable)",(function(e,n){e?t(e):t(null,n.track.playable)}),i.ASAP):t(null,!1)}function p(e,t){const n=i("spotify:player").get("referrer"),o=i("spotify:player").get("referrerBaseUri");n?(o||s(`referrer field is set on the player model (${n}), but referrerBaseUri isn't`),t(null,n,o||"","")):e.viewUri&&e.referrerId?t(null,e.viewUri,e.referrerId,e.featureId):i("spotify:application").get("appURI","arguments",(function(n,i,o){if(n)t(n);else{const n=e.viewUri||(o?`${i}:${o}`:i);t(null,n,i,"")}}))}function d(){return e.__spotify.app_version}t.getReferrer=p,t.getReferrerVersion=d,t.getFirstPlayableRow=function(e,t,n){let i=t.start;r(e.get(i),(function o(a,s){s?n(null,i):i===t.end-1?n(null,t.start):r(e.get(++i),o)}))},t.isRowPlayable=r,t.getPlayOptions=function(e,t){p(e,(function(n,i,a,s){n?t(n):(Object.keys(l).forEach((function(t){void 0===e[t]&&(e[t]=l[t])})),e.range&&(e.range=new o(e.range[0],e.range[1])),e.viewUri=i,e.referrerId=a,e.referrerVersion=d(),e.featureId=s,t(null,e))}))},t.getTracksFromRows=function(e){return e.map((t,n)=>{const i=t&&t.get("track");if(i){const t=i.serialize(1),o={};return t.manifestId&&(o["media.manifest_id"]=t.manifestId),t.mediaTypeEnum&&(o["media.type"]=2===t.mediaTypeEnum?"video":"audio"),{uri:t.uri,uid:e.keys[n],metadata:o}}return null})},t.getPlayerState=function(e){a.getState(e)},t.subscribeForPlayerState=function(e){return a.subscribe(e)}}).call(this,n(1))},11:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Action",{enumerable:!0,get:function(){return i.Action}}),Object.defineProperty(t,"Request",{enumerable:!0,get:function(){return i.Request}}),Object.defineProperty(t,"Response",{enumerable:!0,get:function(){return o.Response}}),Object.defineProperty(t,"Resolver",{enumerable:!0,get:function(){return a.Resolver}}),t.resolver=t.default=void 0;var i=n(84),o=n(86),a=n(152);const s=e.window||{},l=s._getSpotifyModule&&"function"==typeof s._getSpotifyModule&&s._getSpotifyModule("bridge"),r=l?new a.Resolver(l):new a.NullResolver;t.resolver=r;var p={Action:i.Action,Request:i.Request,Response:o.Response,Resolver:a.Resolver,resolver:r};t.default=p}).call(this,n(1))},110:function(e,t){function n(){}function i(e,t){return Math.floor(Math.random()*(t-e+1))+e}n.maxFromBits=function(e){return Math.pow(2,e)},n.limitUI04=n.maxFromBits(4),n.limitUI06=n.maxFromBits(6),n.limitUI08=n.maxFromBits(8),n.limitUI12=n.maxFromBits(12),n.limitUI14=n.maxFromBits(14),n.limitUI16=n.maxFromBits(16),n.limitUI32=n.maxFromBits(32),n.limitUI40=n.maxFromBits(40),n.limitUI48=n.maxFromBits(48),n.randomUI04=function(){return i(0,n.limitUI04-1)},n.randomUI06=function(){return i(0,n.limitUI06-1)},n.randomUI08=function(){return i(0,n.limitUI08-1)},n.randomUI12=function(){return i(0,n.limitUI12-1)},n.randomUI14=function(){return i(0,n.limitUI14-1)},n.randomUI16=function(){return i(0,n.limitUI16-1)},n.randomUI32=function(){return i(0,n.limitUI32-1)},n.randomUI40=function(){return(0|Math.random()*(1<<30))+(0|1024*Math.random())*(1<<30)},n.randomUI48=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},n.paddedString=function(e,t,n){n=n||"0";for(var i=t-(e=String(e)).length;i>0;i>>>=1,n+=n)1&i&&(e=n+e);return e},n.prototype.fromParts=function(e,t,i,o,a,s){return this.version=i>>12&15,this.hex=n.paddedString(e.toString(16),8)+"-"+n.paddedString(t.toString(16),4)+"-"+n.paddedString(i.toString(16),4)+"-"+n.paddedString(o.toString(16),2)+n.paddedString(a.toString(16),2)+"-"+n.paddedString(s.toString(16),12),this},n.prototype.toString=function(){return this.hex},n.prototype.toURN=function(){return"urn:uuid:"+this.hex},n.prototype.toBytes=function(){for(var e=this.hex.split("-"),t=[],n=0,i=0;i<e.length;i++)for(var o=0;o<e[i].length;o+=2)t[n++]=parseInt(e[i].substr(o,2),16);return t},n.prototype.equals=function(e){return e instanceof UUID&&this.hex===e.hex},n.getTimeFieldValues=function(e){var t=e-Date.UTC(1582,9,15),n=t/4294967296*1e4&268435455;return{low:1e4*(268435455&t)%4294967296,mid:65535&n,hi:n>>>16,timestamp:t}},n._create4=function(){return(new n).fromParts(n.randomUI32(),n.randomUI16(),16384|n.randomUI12(),128|n.randomUI06(),n.randomUI08(),n.randomUI48())},n._create1=function(){var e=(new Date).getTime(),t=n.randomUI14(),i=1099511627776*(1|n.randomUI08())+n.randomUI40(),o=n.randomUI04(),a=0;e!=a?(e<a&&t++,a=e,o=n.randomUI04()):Math.random()<.25&&o<9984?o+=1+n.randomUI04():t++;var s=n.getTimeFieldValues(a),l=s.low+o,r=4095&s.hi|4096,p=(t&=16383)>>>8|128,d=255&t;return(new n).fromParts(l,s.mid,r,p,d,i)},n.create=function(e){return this["_create"+(e=e||4)]()},n.fromTime=function(e,t){t=t||!1;var i=n.getTimeFieldValues(e),o=i.low,a=4095&i.hi|4096;return!1===t?(new n).fromParts(o,i.mid,a,0,0,0):(new n).fromParts(o,i.mid,a,128|n.limitUI06,n.limitUI08-1,n.limitUI48-1)},n.firstFromTime=function(e){return n.fromTime(e,!1)},n.lastFromTime=function(e){return n.fromTime(e,!0)},n.fromURN=function(e){var t;return(t=/^(?:urn:uuid:|\{)?([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{2})([0-9a-f]{2})-([0-9a-f]{12})(?:\})?$/i.exec(e))?(new n).fromParts(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),parseInt(t[4],16),parseInt(t[5],16),parseInt(t[6],16)):null},n.fromBytes=function(e){if(e.length<5)return null;for(var t="",i=0,o=[4,2,2,2,6],a=0;a<o.length;a++){for(var s=0;s<o[a];s++){var l=e[i++].toString(16);1==l.length&&(l="0"+l),t+=l}6!==o[a]&&(t+="-")}return n.fromURN(t)},n.fromBinary=function(e){for(var t=[],i=0;i<e.length;i++)if(t[i]=e.charCodeAt(i),t[i]>255||t[i]<0)throw new Error("Unexpected byte in binary data.");return n.fromBytes(t)},n.new=function(){return this.create(4)},n.newTS=function(){return this.create(1)},e.exports=n},112:function(e,t,n){"use strict";(function(t){const i=n(23),o=n(32),a=n(2),s=n(17),l=n(20),r=n(5).logError,p=i({constructor:function(e){this.endpoints=e,this.onPublish=this.onPublish.bind(this),this.waitQueue=[],this.onWait=this.onWait.bind(this),this.fetch=this.fetch.bind(this)},onPublish:function(e,t){if("added"in t){const n=this.endpoints,i=!!t.added;e.update({added:i});const o=i?"post":"delete";this._publish(o,[e],(function(t,o){t?(e.update({added:!i}),t.response&&507===t.response.getStatusCode()&&l.post({url:"sp://messages/v1/container/user-message",body:{id:"collection-limit-exceeded"}})):(l.post({url:n.broadcast,body:{uri:e.uri,isInCollection:i,added:i}}),o&&o.items&&o.items.forEach((function(e){e.added=e.isInCollection,l.post({url:n.broadcast,body:e})})))}))}},onWait:function(e,t){s(t,"added")&&this.fetch(e)},fetch:function(e){const t=this.waitQueue;t.push(e),1===t.length&&o.immediate(this._fetchBatch,this)},_fetchBatch:function(){const e=this.waitQueue;0!==e.length&&(this.waitQueue=[],this._contains(e,(function(t,n){t&&(!t.response||t.response&&404!==t.response.getStatusCode())?r(t):e.forEach((function(e,i){let o=!1;t||(o=n[i]),e.update({added:o})}))})))},_contains:function(e,t){const n=this.endpoints.isInCollection,i=this._getRequestBody(e);l.post({url:n,body:i},(function(e,n){t(e,n&&n.body&&n.body.found)}))},_publish:function(e,t,n){const i=this.endpoints.updateIsInCollection,o=this._getRequestBody(t);l[e]({url:i,body:o},(function(e,t){n(e,t&&t.body)}))},_getRequestBody:function(e){return{items:e.map((function(e){return e.uri})),source:t.__spotify&&t.__spotify.app_uri||null}}});p.onBroadcast=function(e,t){if(e)return void r(e);let n;"added"in t.body?n=t.body.added:"isInCollection"in t.body&&(n=t.body.isInCollection),a(t.body.uri).update({added:n})},e.exports=p}).call(this,n(1))},113:function(e){e.exports=JSON.parse('{"album":"album","artist":"artist","artistAbout":"artist/about","artistAlbums":"artist/albums","artistBio":"artist/bio","artistConcerts":"artist/concerts","artistGallery":"artist/gallery","artistPlaylists":"artist/playlists","artistRelated":"artist/related","artistWorks":"artist/works","browse":"browse","browseCharts":"browse/charts","browseDiscover":"browse/discover","browseGenres":"browse/genres","browseNewReleases":"browse/newreleases","browsePodcasts":"browse/podcasts","browseVideos":"browse/videos","charts":"charts","chartsChart":"charts/chart","chartsRegional":"charts/regional","chartsSocial":"charts/social","chartsViral":"charts/viral","collection":"collection","collectionAlbums":"collection/albums","collectionAlbumsAlbum":"collection/albums/album","collectionArtists":"collection/artists","collectionArtistsArtist":"collection/artists/artist","collectionPlaylists":"collection/playlists","collectionRadio":"collection/radio","collectionRecentlyPlayed":"collection/recently-played","collectionShows":"collection/shows","collectionSongs":"collection/songs","concert":"concert","concerts":"concerts","concertsCitysearch":"concerts/citysearch","concertsConcert":"concerts/concert","debug":"debug","experimentalFeatures":"experiments","lyrics":"lyrics","legacyLyrics":"legacyLyrics","home":"home","madeForYou":"made-for-you","moments":"moments","momentsCategory":"moments/category","music":"music","musicCategory":"music/category","now":"now","nowplaying":"nowplaying","nowplayingDevicepicker":"connect/devicepicker","nowplayingHistory":"nowplaying/history","nowplayingQueue":"nowplaying/queue","party":"party","partyAddFriends":"party/add-friends","partyEnableBluetooth":"party/enable-bluetooth","partyEnableNearby":"party/enable-nearby","partyPreset":"party/preset","partyQueue":"party/queue","playlist":"playlist","playlistFolder":"playlist/folder","profile":"profile","profileActivity":"profile/activity","profileArtists":"profile/artists","profileFollowers":"profile/followers","profileFollowing":"profile/following","profilePlaylists":"profile/playlists","radio":"radio","radioDailyMixes":"radio/daily-mixes","radioStation":"radio/station","running":"running","runningCategory":"running/category","runningSetup":"running/setup","search":"search","searchAlbums":"search/albums","searchArtists":"search/artists","searchGenres":"search/genres","searchPlaylists":"search/playlists","searchProfiles":"search/profiles","searchRadio":"search/radio","searchShows":"search/shows","searchSongs":"search/songs","searchVideos":"search/videos","settings":"settings","show":"show","shows":"shows","showsAudio":"shows/audio","showsCategory":"shows/category","showsNetwork":"shows/network","showsVideo":"shows/video","song":"song","unknown":"unknown","unknownUncovered":"unknown/uncovered","work":"work"}')},115:function(e,t,n){(function(t){!function(){"use strict";var n="undefined"!=typeof window,i="function"==typeof Object.defineProperty;if(n&&window.__modDefFn)e.exports=window.__modDefFn;else{var o,a,s=[];k();var l=function(e){var t=!s.length;s.push(e),t&&o()};n&&!window.__modDefFn&&(i?Object.defineProperty(window,"__modDefFn",{value:l}):window.__modDefFn=l),l.use={auto:k,dom:r,immediate:p,timeout:d},e.exports=l}function r(){if(a=window.location.origin||window.location.protocol+"//"+window.location.hostname,o=window.postMessage.bind(window,"@execute_deferreds",a),!window.__hasDeferredHandler){i?Object.defineProperty(window,"__hasDeferredHandler",{value:1}):window.__hasDeferredHandler=1;var e=function(e){e.origin!=a&&"@execute_deferreds"!=e.data||u()};window.addEventListener?window.addEventListener("message",e):window.attachEvent("onmessage",e)}}function p(){o=t.bind(null,u)}function d(){o=setTimeout.bind(null,u,10)}function k(){n&&window.postMessage?r():void 0!==t?p():d()}function u(){var e=s.splice(0);if(e.length)for(var t=0,n=e.length;t<n;t++)try{e[t]()}finally{}}}()}).call(this,n(102).setImmediate)},116:function(e,t,n){"use strict";const i=n(44),o=n(43);o.implement({on:function(e,t,n){return this.forEach((function(a){const s=o(a),l=e+(n?":capture":"");i.prototype.on.call(s,l,t);const r=s._domListeners||(s._domListeners={});if(!r[l]){const t=function(e){i.prototype.emit.call(s,l,e||window.event,i.EMIT_SYNC)};a.addEventListener(e,t,n||!1),r[l]=t}}))},off:function(e,t,n){return this.forEach((function(a){const s=o(a),l=e+(n?":capture":""),r=s._domListeners,p=s._listeners;if(r&&p){const n=r[l];if(n&&(i.prototype.off.call(s,l,t),!s._listeners||!s._listeners[e])){a.removeEventListener(e,n,!1),delete r[e];for(const e in r)if(r.hasOwnProperty(e))return;delete s._domListeners}}}))},emit:function(){const e=arguments;return this.forEach((function(t){i.prototype.emit.apply(o(t),e)}))}}),e.exports=o},1165:function(e,t,n){},117:function(e,t,n){"use strict";var i=/([-.*+?^${}()|[\]\/\\])/g,o=/\\/g,a=function(e){return(e+"").replace(i,"\\$1")},s=function(e){return(e+"").replace(o,"")},l=RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+a(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])")),r=function(e){this.combinator=e||" ",this.tag="*"};r.prototype.toString=function(){if(!this.raw){var e,t,n="";if(n+=this.tag||"*",this.id&&(n+="#"+this.id),this.classes&&(n+="."+this.classList.join(".")),this.attributes)for(e=0;t=this.attributes[e++];)n+="["+t.name+(t.operator?t.operator+'"'+t.value+'"':"")+"]";if(this.pseudos)for(e=0;t=this.pseudos[e++];)n+=":"+t.name,t.value&&(n+="("+t.value+")");this.raw=n}return this.raw};var p=function(){this.length=0};p.prototype.toString=function(){if(!this.raw){for(var e,t="",n=0;e=this[n++];)1!==n&&(t+=" ")," "!==e.combinator&&(t+=e.combinator+" "),t+=e;this.raw=t}return this.raw};var d=function(e,t,n,i,o,l,d,k,u,c,m,f,y,g,z,b){var h,_;if((t||!this.length)&&(h=this[this.length++]=new p,t))return"";if(h||(h=this[this.length-1]),(n||i||!h.length)&&(_=h[h.length++]=new r(n)),_||(_=h[h.length-1]),o)_.tag=s(o);else if(l)_.id=s(l);else if(d){var v=s(d),w=_.classes||(_.classes={});if(!w[v]){w[v]=a(d);var S=_.classList||(_.classList=[]);S.push(v),S.sort()}}else y?(b=b||z,(_.pseudos||(_.pseudos=[])).push({type:1==f.length?"class":"element",name:s(y),escapedName:a(y),value:b?s(b):null,escapedValue:b?a(b):null})):k&&(m=m?a(m):null,(_.attributes||(_.attributes=[])).push({operator:u,name:s(k),escapedName:a(k),value:m?s(m):null,escapedValue:m?a(m):null}));return""},k=function(e){this.length=0;for(var t,n=this,i=e;e;){if((t=e.replace(l,(function(){return d.apply(n,arguments)})))===e)throw new Error(i+" is an invalid expression");e=t}};k.prototype.toString=function(){if(!this.raw){for(var e,t=[],n=0;e=this[n++];)t.push(e);this.raw=t.join(", ")}return this.raw};var u={};e.exports=function(e){return null==e?null:(e=(""+e).replace(/^\s+|\s+$/g,""),u[e]||(u[e]=new k(e)))}},118:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n(290));const o=n(31),a=n(43),s=function(e,t){return o(i.default.parse(t||"*"),(function(t){return`${e} ${t}`})).join(", ")},l=Array.prototype.push;a.implement({search:function(e){if(1===this.length)return a(i.default.search(e,this[0],new a));let t=[];for(let n=0;n<this.length;n++){const o=this[n];l.apply(t,i.default.search(e,o))}return(t=a(t))&&t.sort()},find:function(e){if(1===this.length)return a(i.default.find(e,this[0]));for(let t=0;t<this.length;t++){const n=this[t],o=i.default.find(e,n);if(o)return a(o)}return null},sort:function(){return i.default.sort(this)},matches:function(e){return i.default.matches(this[0],e)},contains:function(e){return i.default.contains(this[0],e)},nextSiblings:function(e){return this.search(s("~",e))},nextSibling:function(e){return this.find(s("+",e))},previousSiblings:function(e){return this.search(s("!~",e))},previousSibling:function(e){return this.find(s("!+",e))},children:function(e){return this.search(s(">",e))},firstChild:function(e){return this.find(s("^",e))},lastChild:function(e){return this.find(s("!^",e))},parent:function(e){const t=[];for(let n=0;n<this.length;n++){let o=this[n].parentNode;for(;o&&o!==document;){if(!e||i.default.matches(o,e)){t.push(o);break}o=o.parentNode}}return a(t)},parents:function(e){const t=[];for(let n=0;n<this.length;n++){let o=this[n];for(;o&&o!==document;)e&&!i.default.matches(o,e)||t.push(o),o=o.parentNode}return a(t)}}),e.exports=a},119:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i={name:"OperationCanceledError",message:"An async operation was cancelled"};class o{constructor(e){this.source=e,this.requestId=e.requestId}isCanceled(){return this.requestId!==this.source.requestId}throwIfCanceled(){if(this.isCanceled())throw i}errorIfCanceled(){if(this.isCanceled())return i}operationCanceledError(){return i}}t.default=class{constructor(){this.requestId=0}token(){return new o(this)}cancel(){this.requestId++}}},12:function(e,t,n){"use strict";function i(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}function o(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)}function a(e){return"[object DOMError]"===Object.prototype.toString.call(e)}function s(e){return"[object DOMException]"===Object.prototype.toString.call(e)}function l(e){return"[object String]"===Object.prototype.toString.call(e)}function r(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function p(e){return"[object Object]"===Object.prototype.toString.call(e)}function d(e){return"undefined"!=typeof Event&&e instanceof Event}function k(e){return"undefined"!=typeof Element&&e instanceof Element}function u(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function c(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function m(e){return p(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"j",(function(){return l})),n.d(t,"h",(function(){return r})),n.d(t,"g",(function(){return p})),n.d(t,"f",(function(){return d})),n.d(t,"c",(function(){return k})),n.d(t,"i",(function(){return u})),n.d(t,"l",(function(){return c})),n.d(t,"k",(function(){return m}))},121:function(e,t,n){"use strict";(function(t){const i=n(296),o=n(276),a=n(62);function s(){this._global=t.top||t,o.call(this),this._messageHandler=this._messageHandler.bind(this)}i(s,o),s.prototype.EVENTS=s.EVENTS={REQUEST_STATE:"navigation_request_state"},s.prototype.METHOD=s.METHOD={OPEN:"open",TOGGLE:"toggle"},s.prototype._messageHandler=function(e){if(!e.data.type)return;const t=e.data.type;if(t===s.EVENTS.REQUEST_STATE){const n={state:a.unserialize(e.data.state),method:e.data.method};e.data.extra&&(n.extra=JSON.parse(e.data.extra)),this.emitSync(t,n)}},s.prototype.attachListener=function(){this._global.addEventListener("message",this._messageHandler)},s.prototype.detachListener=function(){this._global.removeEventListener("message",this._messageHandler)},s.prototype.openURI=function(e,t={}){this.requestOpenState(new a(e),t)},s.prototype.toggleURI=function(e){this.requestToggleState(new a(e))},s.prototype.requestOpenState=function(e,t={}){this.requestState(e,this.METHOD.OPEN,t)},s.prototype.requestToggleState=function(e){this.requestState(e,this.METHOD.TOGGLE)},s.prototype.requestState=function(e,t,n=null){if(!e)throw new TypeError("AppState not set");if(!t)throw new TypeError("Method not set");const i={type:this.EVENTS.REQUEST_STATE,method:t,state:e.serialize()};n&&(i.extra=JSON.stringify(n)),this._global.postMessage(i,"*")},e.exports=s}).call(this,n(1))},122:function(e,t,n){"use strict";(function(e){var i=n(103);const o=n(13),a=n(125);let s,l=!1,r=0,p=null,d=null,k=0,u=!1,c=0,m=0,f=0,y=0,g=null,z=null;const b=function(e){const t=document.documentElement;let n,i;for(i=e;i!==t;i=i.parentNode)if(n=i.getAttribute("data-class-sticky"))return n;return"sticky-top"},h=function(t){"thead"===t.nodeName.toLowerCase()&&t.stickyClone&&function(e){const t=e.stickyClone;t.parentNode&&t.parentNode.removeChild(t),e.stickyListSwapListener&&o.off("list-swap",e.stickyListSwapListener),e.style.removeProperty("visibility"),delete e.stickyClone,delete e.stickyListSwapListener}(t),t.classList.remove(b(t));const n=t.closest("[data-glue-page-header]");n&&(n.classList.remove("glue-page-header--with-active-sticky-header"),e.onPageHeaderToggleStickyMode&&e.onPageHeaderToggleStickyMode(!1)),t.removeAttribute("data-sticky-active",""),t.style.right="",t.style.left="",t.style.position="",t.style.top=""},_=function(e){const t=(z===document?document.body:z).getAttribute("data-top-bar-height");m=parseInt(t,10)||0,y=z===document?window.scrollY:z.scrollTop,g=function(e){const t=s+e,n=document.querySelectorAll("[data-sticky]");if(t>(s=Date.now())&&p&&n.length===p.length){let e=!0;for(let t=0;t<n.length;t++)e=e&&n[t]===p[t].node;if(e)return{nodes:p,root:d}}return d=z===document?document.documentElement.getBoundingClientRect():{top:(d=z.getBoundingClientRect()).top-y,right:d.right,bottom:d.bottom,left:d.left,width:d.width,height:d.height},{nodes:p=Array.prototype.map.call(document.querySelectorAll("[data-sticky]"),(function(e){const t=e.parentNode.getBoundingClientRect(),n=e.getBoundingClientRect();return{stickyClassName:b(e),node:e,rect:{top:t.top,height:n.height,left:t.left,right:t.right}}})),root:d}}(e)},v=function(){const t=y+m,n=g.root.width;let i=g.root.top,s=m;const l=g.nodes;!function(){const e=document.querySelectorAll("[data-sticky-active]:not([data-sticky])");for(let t=0,n=e.length;t<n;t++)e[t].isStickyClone||h(e[t])}(),0===l.length&&e.onPageHeaderToggleStickyMode&&e.onPageHeaderToggleStickyMode(!1),l.forEach((function(r,p){const d=r.node,k=r.rect,u=d.stickyClone,c=r.stickyClassName;let m=u||d;if(k.top-i<t){const r=l[p-1];if(r){const e=r.node,n=r.rect;if(e.hasAttribute("data-sticky-single")&&e.classList.contains(c)){const o=Math.abs(k.top-g.root.top-(t+s));if(o<n.height){const t=s-n.height-o;e.style.top=`${t}px`,i-=o,s-=o}else h(e),i-=n.height,s-=n.height}}const u=k.left-g.root.left,f=k.right-g.root.left;if(m.classList.contains(c))m.style.right=`${n-f}px`,m.style.left=`${u}px`,m.style.top=`${s}px`;else{"thead"!==d.nodeName.toLowerCase()||d.stickyClone||(m=function(e){const t=document.createElement("div"),n=e.cloneNode(!0),i=e.parentNode.cloneNode(!1);i.appendChild(n).removeAttribute("data-sticky"),t.appendChild(i),t.className="sticky-clone",t.isStickyClone=!0;const s=function(t){const i=n.parentNode;i&&i.getAttribute("data-uri")&&(i.setAttribute("data-uri",t.after),a.update(e.parentNode))};return o.on("list-swap",s),e.parentNode.parentNode.appendChild(t),e.style.visibility="hidden",e.stickyListSwapListener=s,e.stickyClone=t,t}(d)),m.classList.add(c);const t=m.closest("[data-glue-page-header]");t&&(t.classList.add("glue-page-header--with-active-sticky-header"),e.onPageHeaderToggleStickyMode&&e.onPageHeaderToggleStickyMode(!0)),m.setAttribute("data-sticky-active",""),m.setAttribute("data-ta-id","sticky-node"),m.style.right=`${n-f}px`,m.style.left=`${u}px`,m.style.position="fixed",m.style.top=`${s}px`}s+=k.height,i+=k.height}else m.classList.contains(c)&&h(d)})),k=s},w=function(){_(0),v()},S=function(){u&&y>0&&((0,i.requestFrame)(()=>{f=window.scrollX,y=window.scrollY},()=>{S()}),window.scrollTo(f,y-c))},x=function(e){const t=e.clientY-k;if(t>0&&t<20){const e=(20-Math.max(0,t))/20;c=20*e,u||(u=!0,S())}else u=!1},P=function(){u=!1,document.removeEventListener("dragover",x),document.removeEventListener("dragend",P),document.removeEventListener("mouseup",P)},T=function(){document.addEventListener("dragover",x),document.addEventListener("dragend",P),document.addEventListener("mouseup",P)};t.DEFAULT_STICKY_CLASS_NAME="sticky-top",t.attach=function(){l||(l=!0,z||(z=document),r=(0,i.addDebouncedScrollListener)(z,()=>{_(4e3)},()=>{v()}),window.addEventListener("resize",w),document.addEventListener("mousedown",T),e.top&&e.top.document&&e.top.document.addEventListener("mousedown",T))},t.detach=function(){l&&(l=!1,(0,i.removeDebouncedScrollListener)(r),window.removeEventListener("resize",w),document.removeEventListener("mousedown",T),e.top&&e.top.document&&e.top.document.removeEventListener("mousedown",T),p=null,d=null,k=0,u=!1,c=0,z=null)},t.update=function(){l&&(p=null,d=null,_(4e3),v())},t.setScrollNode=function(e){z=e},t._getStickyClassName=b}).call(this,n(1))},123:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},124:function(e,t,n){"use strict";const i=n(21);t.getInsertOperations=function(e,t){return[{type:"insert",index:t,values:e}]},t.getRemoveOperations=function(e){const t=i.fromIndices(e);let n=0;const o=[];for(let e,i=0;t[i];i++)e=t[i],o.push({type:"remove",index:e.start-n,length:e.length}),n+=e.length;return o},t.getMoveOperations=function(e,t){let n=0,o=t;const a=i.fromIndices(e);let s,l,r;for(s=0;a[s];s++)if((l=a[s]).start<=t&&l.end>=t){r=l;break}const p=[];for(s=0;a[s];s++){const e=(l=a[s]).length;let i,d=l.start-n;if(r)if(l.end<r.start)d=l.start-n,i=r.start-e,n+=e;else{if(l===r){o=Math.max(o,l.end);continue}d=l.start,i=o,o=Math.max(o,i+e)}else l.end<t?(d=l.start-n,i=o-e,n+=e):(d=l.start,i=o,o=Math.max(o,i+e));p.push({type:"move",from:d,length:e,to:i})}return p}},125:function(e,t,n){"use strict";const i=n(2),o=n(13),a=n(37),s=n(96),l=n(9),r="tl-sort-asc",p=function(e,t,n){const i=e.data("uri"),o=void 0!==t?t:a.getQuery(i),s=void 0!==n?n:a.getDirection(i),p=e.search("[data-sort]");if(p)for(let e=0;e<p.length;e++){const t=l(p[e]);t.removeClass(`${r} tl-sort-desc`),t.data("sort")===o&&t.addClass("asc"===s?r:"tl-sort-desc")}},d=function(e,t){const n=t.parent("[data-list]");if(!n)return;const l=n.data("uri");if(!l)return;const r=a.getQuery(l),d=a.getDirection(l);let k=t.data("sort");let u=r===k?"asc"===d?"desc":"asc":"asc";const c=r===k&&"desc"===d,m=a.getOriginUri(l)||l;let f;c?(f=m,k=null,u=null):f=a.create(m,u,k),i(f).get("rows",(function(){})),p(n,k,u),o.emit("sort-header-click",{uri:m,requested:{query:k||null,direction:u||null},current:{query:r||null,direction:d||null}}),o.emit("list-swap",{before:l,after:f}),s.log({pageuri:i("spotify:application").get("appURI")||"unknown",feature_id:"zlink",section_id:"sort-header",target_uri:f,interaction_type:"hit",user_intent:"sort",timestamp:Math.round(Date.now()/1e3)})},k=function(e,t){d(0,t.previousSibling())};let u=!1;t.update=function(e){if(!u)return;const t=l(e)||l(document),n=t.matches("[data-list]")?[t]:t.search("[data-list]");if(n)for(let e=0;e<n.length;e++){const t=l(n[e]);t.search("[data-sort]")&&p(t)}},t.attach=function(){u||(u=!0,l(document).delegate("click","[data-sort]",d),l(document).delegate("click","[data-sort-previous]",k))},t.detach=function(){u&&(u=!1,l(document).undelegate("click","[data-sort]",d),l(document).undelegate("click","[data-sort-previous]",k))}},1254:function(e,t,n){const i=n(2271),o={};for(const e of Object.keys(i))o[i[e]]=e;const a={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};e.exports=a;for(const e of Object.keys(a)){if(!("channels"in a[e]))throw new Error("missing channels property: "+e);if(!("labels"in a[e]))throw new Error("missing channel labels property: "+e);if(a[e].labels.length!==a[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:n}=a[e];delete a[e].channels,delete a[e].labels,Object.defineProperty(a[e],"channels",{value:t}),Object.defineProperty(a[e],"labels",{value:n})}function s(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}a.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,i=e[2]/255,o=Math.min(t,n,i),a=Math.max(t,n,i),s=a-o;let l,r;a===o?l=0:t===a?l=(n-i)/s:n===a?l=2+(i-t)/s:i===a&&(l=4+(t-n)/s),(l=Math.min(60*l,360))<0&&(l+=360);const p=(o+a)/2;return[l,100*(r=a===o?0:p<=.5?s/(a+o):s/(2-a-o)),100*p]},a.rgb.hsv=function(e){let t,n,i,o,a;const s=e[0]/255,l=e[1]/255,r=e[2]/255,p=Math.max(s,l,r),d=p-Math.min(s,l,r),k=function(e){return(p-e)/6/d+.5};return 0===d?(o=0,a=0):(a=d/p,t=k(s),n=k(l),i=k(r),s===p?o=i-n:l===p?o=1/3+t-i:r===p&&(o=2/3+n-t),o<0?o+=1:o>1&&(o-=1)),[360*o,100*a,100*p]},a.rgb.hwb=function(e){const t=e[0],n=e[1];let i=e[2];return[a.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(n,i))),100*(i=1-1/255*Math.max(t,Math.max(n,i)))]},a.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,i=e[2]/255,o=Math.min(1-t,1-n,1-i);return[100*((1-t-o)/(1-o)||0),100*((1-n-o)/(1-o)||0),100*((1-i-o)/(1-o)||0),100*o]},a.rgb.keyword=function(e){const t=o[e];if(t)return t;let n,a=1/0;for(const t of Object.keys(i)){const o=s(e,i[t]);o<a&&(a=o,n=t)}return n},a.keyword.rgb=function(e){return i[e]},a.rgb.xyz=function(e){let t=e[0]/255,n=e[1]/255,i=e[2]/255;return[100*(.4124*(t=t>.04045?((t+.055)/1.055)**2.4:t/12.92)+.3576*(n=n>.04045?((n+.055)/1.055)**2.4:n/12.92)+.1805*(i=i>.04045?((i+.055)/1.055)**2.4:i/12.92)),100*(.2126*t+.7152*n+.0722*i),100*(.0193*t+.1192*n+.9505*i)]},a.rgb.lab=function(e){const t=a.rgb.xyz(e);let n=t[0],i=t[1],o=t[2];return[116*(i=(i/=100)>.008856?i**(1/3):7.787*i+16/116)-16,500*((n=(n/=95.047)>.008856?n**(1/3):7.787*n+16/116)-i),200*(i-(o=(o/=108.883)>.008856?o**(1/3):7.787*o+16/116))]},a.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,i=e[2]/100;let o,a,s;if(0===n)return[s=255*i,s,s];const l=2*i-(o=i<.5?i*(1+n):i+n-i*n),r=[0,0,0];for(let e=0;e<3;e++)(a=t+1/3*-(e-1))<0&&a++,a>1&&a--,s=6*a<1?l+6*(o-l)*a:2*a<1?o:3*a<2?l+(o-l)*(2/3-a)*6:l,r[e]=255*s;return r},a.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,i=e[2]/100,o=n;const a=Math.max(i,.01);return n*=(i*=2)<=1?i:2-i,o*=a<=1?a:2-a,[t,100*(0===i?2*o/(a+o):2*n/(i+n)),100*((i+n)/2)]},a.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let i=e[2]/100;const o=Math.floor(t)%6,a=t-Math.floor(t),s=255*i*(1-n),l=255*i*(1-n*a),r=255*i*(1-n*(1-a));switch(i*=255,o){case 0:return[i,r,s];case 1:return[l,i,s];case 2:return[s,i,r];case 3:return[s,l,i];case 4:return[r,s,i];case 5:return[i,s,l]}},a.hsv.hsl=function(e){const t=e[0],n=e[1]/100,i=e[2]/100,o=Math.max(i,.01);let a,s;s=(2-n)*i;const l=(2-n)*o;return a=n*o,[t,100*(a=(a/=l<=1?l:2-l)||0),100*(s/=2)]},a.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,i=e[2]/100;const o=n+i;let a;o>1&&(n/=o,i/=o);const s=Math.floor(6*t),l=1-i;a=6*t-s,0!=(1&s)&&(a=1-a);const r=n+a*(l-n);let p,d,k;switch(s){default:case 6:case 0:p=l,d=r,k=n;break;case 1:p=r,d=l,k=n;break;case 2:p=n,d=l,k=r;break;case 3:p=n,d=r,k=l;break;case 4:p=r,d=n,k=l;break;case 5:p=l,d=n,k=r}return[255*p,255*d,255*k]},a.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,i=e[2]/100,o=e[3]/100;return[255*(1-Math.min(1,t*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o)),255*(1-Math.min(1,i*(1-o)+o))]},a.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,i=e[2]/100;let o,a,s;return o=(o=3.2406*t+-1.5372*n+-.4986*i)>.0031308?1.055*o**(1/2.4)-.055:12.92*o,a=(a=-.9689*t+1.8758*n+.0415*i)>.0031308?1.055*a**(1/2.4)-.055:12.92*a,s=(s=.0557*t+-.204*n+1.057*i)>.0031308?1.055*s**(1/2.4)-.055:12.92*s,[255*(o=Math.min(Math.max(0,o),1)),255*(a=Math.min(Math.max(0,a),1)),255*(s=Math.min(Math.max(0,s),1))]},a.xyz.lab=function(e){let t=e[0],n=e[1],i=e[2];return[116*(n=(n/=100)>.008856?n**(1/3):7.787*n+16/116)-16,500*((t=(t/=95.047)>.008856?t**(1/3):7.787*t+16/116)-n),200*(n-(i=(i/=108.883)>.008856?i**(1/3):7.787*i+16/116))]},a.lab.xyz=function(e){let t,n,i;const o=(n=(e[0]+16)/116)**3,a=(t=e[1]/500+n)**3,s=(i=n-e[2]/200)**3;return n=o>.008856?o:(n-16/116)/7.787,t=a>.008856?a:(t-16/116)/7.787,i=s>.008856?s:(i-16/116)/7.787,[t*=95.047,n*=100,i*=108.883]},a.lab.lch=function(e){const t=e[0],n=e[1],i=e[2];let o;return(o=360*Math.atan2(i,n)/2/Math.PI)<0&&(o+=360),[t,Math.sqrt(n*n+i*i),o]},a.lch.lab=function(e){const t=e[0],n=e[1],i=e[2]/360*2*Math.PI;return[t,n*Math.cos(i),n*Math.sin(i)]},a.rgb.ansi16=function(e,t=null){const[n,i,o]=e;let s=null===t?a.rgb.hsv(e)[2]:t;if(0===(s=Math.round(s/50)))return 30;let l=30+(Math.round(o/255)<<2|Math.round(i/255)<<1|Math.round(n/255));return 2===s&&(l+=60),l},a.hsv.ansi16=function(e){return a.rgb.ansi16(a.hsv.rgb(e),e[2])},a.rgb.ansi256=function(e){const t=e[0],n=e[1],i=e[2];return t===n&&n===i?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(i/255*5)},a.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];const n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},a.ansi256.rgb=function(e){if(e>=232){const t=10*(e-232)+8;return[t,t,t]}let t;return e-=16,[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},a.rgb.hex=function(e){const t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},a.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let n=t[0];3===t[0].length&&(n=n.split("").map(e=>e+e).join(""));const i=parseInt(n,16);return[i>>16&255,i>>8&255,255&i]},a.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,i=e[2]/255,o=Math.max(Math.max(t,n),i),a=Math.min(Math.min(t,n),i),s=o-a;let l,r;return r=s<=0?0:o===t?(n-i)/s%6:o===n?2+(i-t)/s:4+(t-n)/s,r/=6,[360*(r%=1),100*s,100*(l=s<1?a/(1-s):0)]},a.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,i=n<.5?2*t*n:2*t*(1-n);let o=0;return i<1&&(o=(n-.5*i)/(1-i)),[e[0],100*i,100*o]},a.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,i=t*n;let o=0;return i<1&&(o=(n-i)/(1-i)),[e[0],100*i,100*o]},a.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,i=e[2]/100;if(0===n)return[255*i,255*i,255*i];const o=[0,0,0],a=t%1*6,s=a%1,l=1-s;let r=0;switch(Math.floor(a)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=l,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=l,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=l}return r=(1-n)*i,[255*(n*o[0]+r),255*(n*o[1]+r),255*(n*o[2]+r)]},a.hcg.hsv=function(e){const t=e[1]/100,n=t+e[2]/100*(1-t);let i=0;return n>0&&(i=t/n),[e[0],100*i,100*n]},a.hcg.hsl=function(e){const t=e[1]/100,n=e[2]/100*(1-t)+.5*t;let i=0;return n>0&&n<.5?i=t/(2*n):n>=.5&&n<1&&(i=t/(2*(1-n))),[e[0],100*i,100*n]},a.hcg.hwb=function(e){const t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},a.hwb.hcg=function(e){const t=e[1]/100,n=1-e[2]/100,i=n-t;let o=0;return i<1&&(o=(n-i)/(1-i)),[e[0],100*i,100*o]},a.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},a.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},a.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},a.gray.hsl=function(e){return[0,0,e[0]]},a.gray.hsv=a.gray.hsl,a.gray.hwb=function(e){return[0,100,e[0]]},a.gray.cmyk=function(e){return[0,0,0,e[0]]},a.gray.lab=function(e){return[e[0],0,0]},a.gray.hex=function(e){const t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},a.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},1255:function(e,t,n){"use strict";e.exports={getTrackIdFromUri:function(e){const t=/^spotify:track:(.*)/;let n=null;return!!(e.match(t)&&e.match(t).length>1)&&(n=e.match(t)[1])},intToRGB:e=>{const t=e>>16,n=e-(t<<16)>>8;return[t,n,e-(t<<16)-(n<<8)]}}},127:function(e,t,n){"use strict";const i=n(9),o=n(76),a=n(83),s=n(48),l=n(64),r="[data-list-item]",p="selected",d="selection-focus",k="selection-focus-touch";let u;function c(e){const t=document.activeElement&&i(document.activeElement).matches("input, textarea"),n=document.activeElement&&i(document.activeElement).matches("button");!function(e){const t=e.getBoundingClientRect();return t.top>=0&&t.bottom<=document.documentElement.clientHeight}(e)||t||n||e.focus()}function m(e){const t=e?[e]:s.elements,n=[];return t.forEach((function(e){const t=i(e).search(`${r}.${p}`);t&&Array.prototype.push.apply(n,t)})),n}t.update=function(e,{focusAsync:t=!0}={}){const n=m(e),f=function(e){const t=[],n=s.elements;return a.selections.forEach((function(o,a){if(!o)return;const l=s.getLiveList(a);if(!l)return;let p=n[a];if(e&&!n[a].contains(e)&&(p=null),!p)return;const d=i(p).search(r);if(!d)return;const k=d.filter((function(e){const t=+e.getAttribute("data-index"),n=l.keys[t];return!!o[n]}));Array.prototype.push.apply(t,k)})),t}(e),y=o(n,f),g=o(f,n);n.forEach((function(e){i(e).removeClass(d),i(e).removeClass(k)})),y.forEach((function(e){i(e).removeClass(p)})),g.forEach((function(e){i(e).addClass(p)}));const z=a.getFocus();if(z){const e=l.getNodeFromPosition(z);e&&(clearTimeout(u),t?u=setTimeout((function(){c(e)}),0):c(e),i(e).addClass(d),a.wasFocusTriggeredByTouch()&&i(e).addClass(k))}},t.getSelectedRows=m},128:function(e,t,n){"use strict";const i=n(2),o=n(7);function a(e){const t=o.from(e);if(!t)return"";const n=t.type;return n===o.Type.TRACK||n===o.Type.LOCAL?function(e){const t=i(e),n=t.get("name");if(!n)return"";const o=t.get("artists");if(!o||0===o.length)return n;const a=o.get(0,o.length).map((function(e){return e.get("name")})).join(", ");return a?s(n,a):n}(e):n===o.Type.ARTIST||n===o.Type.LOCAL_ARTIST?function(e){return i(e).get("name")||""}(e):n===o.Type.ALBUM||n===o.Type.LOCAL_ALBUM?function(e){const t=i(e),n=t.get("name");if(!n)return"";const o=t.get("artists");if(!o||0===o.length)return n;const a=o.get(0).get("name");return a?s(a,n):n}(e):n===o.Type.PLAYLIST||n===o.Type.PLAYLIST_V2?function(e){const t=i(e),n=t.get("name");if(!n)return"";const o=t.get("owner"),a=o&&(o.get("name")||o.get("username"));return a?s(n,a):n}(e):n===o.Type.USER||n===o.Type.PROFILE?function(e){const t=i(e).get("name");if(t)return t;const n=o.fromString(e);return n&&n.username||""}(e):n===o.Type.FOLDER?function(e){return i(e).get("name")}(e):n===o.Type.STATION?function(e){return i(e).get("name")}(e):n===o.Type.EPISODE?function(e){return i(e).get("name")}(e):n===o.Type.SHOW?function(e){return i(e).get("name")}(e):""}function s(e,t){return`${e} – ${t}`}t.getForUri=a,t.getForElement=function(e){let t=e.getAttribute("data-drag-text");if(t)return t;let n=e.getAttribute("data-uri");if(!n){const t=o.from(e.getAttribute("href"));n=t?t.toURI():""}return n&&(t=a(n))?t:(t=e.getAttribute("title"))||e.textContent}},129:function(e,t,n){"use strict";e.exports=function(e){let t=e;const n=[];for(;t;)t.matches&&t.matches("[data-log-context]")&&n.unshift(t.getAttribute("data-log-context")),t=t.parentNode;return n.join("/")||null}},13:function(e,t,n){"use strict";const i=n(44);e.exports=new i},130:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchMadeFors=function(e,t){const n=e.map(e=>l(e,t));return Promise.all(n)},t.fetchMadeFor=l,t.buildMadeFor=r,t.originalPlaylistUri=function(e){return a.default.getOriginUri(e)||e},t.allowsFeedback=function(e){return!!e&&"1"===e["like-feedback-available"]},t.getFeedback=function({inCollection:e,formatListAttributes:t,metadata:n}){if(e||n&&"true"===n["collection.in_collection"])return"up";if(t&&"1"===t["dislike-feedback-selected"])return"down";return null},t.getMadeForAttributionEnabled=t.splitFeedbackUri=t.makeFeedbackUri=void 0;var i=s(n(7)),o=s(n(22)),a=s(n(19));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)return Promise.resolve(null);const n=e.username;if(!n)return Promise.resolve(null);let a=e.name;return a?Promise.resolve(r(a,n,t)):new Promise(e=>{const s=i.default.profileURI(n).toURI();o.default.request("user_metadata",[s],(i,o)=>{a=i?n:o.name||n,e(r(a,n,t))})})}function r(e,t,n){const o=t===n,a=e.split(" ").shift();return{isCurrentUser:o,name:e,shortName:a,username:t,renderAsYou:o&&t===e&&/^\d+$/.test(t),uri:i.default.profileURI(t).toURI()}}t.makeFeedbackUri=(e,t)=>`spotify:internal:${e}:feedback:${t}`;t.splitFeedbackUri=e=>e.split("spotify:internal:").pop().split(":feedback:");t.getMadeForAttributionEnabled=()=>window.top.initialState.madeForAttributionEnabled},135:function(e,t,n){"use strict";const i=[n(257),n(295),n(301),n(294),n(25),n(297),n(122),n(360),n(312),n(365),n(366),n(275),n(355),n(125),n(376),n(367),n(377),n(368),n(1000)],o={};let a=!1;o.update=function(e){a&&i.forEach((function(t){t.update(e)}))},o.attach=function(){a||(a=!0,i.forEach((function(e){e.attach()})))},o.detach=function(){a&&(a=!1,i.forEach((function(e){e.detach()})))},e.exports=o},136:function(e,t,n){},138:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchPlaylistMetadata=p,t.subscribeToMetadata=function(e,t,n){const a=i.default.from(e).toURI(),s=encodeURIComponent(a);return o.default.cosmosJSON({method:"SUB",uri:`sp://core-playlist/v1/playlist/${s}/metadata`,body:{policy:t}},(e,t)=>n(e,t&&t.metadata))},t.getCollaborativeStatus=function(e,t){p(e.toString(),{collaborative:!0,published:!0},t)},t.fetchPlaylistOwner=k,t.fetchIsPlaylistOwnedByCurrentUser=async function(t){return await k(t)===e.__spotify.username},t.fetchPlaylistV1UriFromPlaylist=async function(e){const{type:n,id:o}=i.default.from(e);if(n===i.default.Type.PLAYLIST_V2){const n=await t.fetchPlaylistOwner(e);return i.default.playlistURI(n,o).toURI()}if(n===i.default.Type.PLAYLIST)return e;throw new Error(`The uri ${e} is not any kind of playlist uri`)},t.getPlaylistV2UriFromPlaylist=function(e){const{type:t,id:n}=i.default.from(e);if(t===i.default.Type.PLAYLIST)return i.default.playlistV2URI(n).toURI();if(t===i.default.Type.PLAYLIST_V2)return e;throw new Error(`The uri ${e} is not any kind of playlist uri`)},t.getCorePlaylistUrl=function(e,{type:t,start:n,length:o,includeEpisodes:l,version:r="v1"}={},p,k){const{originUri:u=e,sort:c,filter:m}=a.default.parse(e)||{};let f=m?m.query.split(","):[],y=!0,g=!0;d(e)||(y=!f.includes("playable eq true")&&!k,g="Enabled"===p,f=f.filter(e=>!e.startsWith("playable")&&!e.startsWith("isPremiumOnly")&&!e.startsWith("availability")));const z=i.default.from(u).toURI();let b=d(e)?"sp://local-files/v2":`sp://core-playlist/${r}/playlist/${encodeURIComponent(z)}`;t&&(b+=`/${d(e)&&"rows"===t?"tracks":t}`);const h=[];if(c&&"metadata"!==t){const e="desc"===c.direction?"DESC":"ASC";h.push(`sort=${encodeURIComponent((0,s.default)(c.query,e))}`)}"number"==typeof n&&h.push(`start=${n}`);"number"==typeof o&&h.push(`length=${o}`);!0===l&&h.push("includeEpisodes=true");y||h.push("showUnavailable=false");g||h.push("alwaysShowWindowed=false");f.length&&h.push(`filter=${f.map(encodeURIComponent).join(",")}`);"play"===t&&h.push(`uri=${encodeURIComponent(e)}`);h.length&&(b+=`?${h.join("&")}`);return b},t.fetchIsFormatShows=function(e,{includeEpisodes:n=!0}={}){return d(e)?Promise.resolve(!1):new Promise((i,a)=>{o.default.cosmosJSON({method:"GET",uri:t.getCorePlaylistUrl(e,{type:"metadata",version:"v1",includeEpisodes:n}),body:{policy:{formatListType:!0}}},(e,t)=>{e?a(e):i(t.metadata&&/^format-shows/.test(t.metadata.formatListType))})})},t.playlistRequest=function(e,{method:n="GET",policy:i={},body:a={},type:s,start:r,length:p,includeEpisodes:d,version:k}={},u){let c;return Promise.all([l.default.fetch("windowed-playlist-show-tracklist"),t.fetchIsFormatShows(e,{includeEpisodes:d})]).then(([l,m])=>{let f;c=o.default.cosmos({method:n,uri:t.getCorePlaylistUrl(e,{type:s,start:r,length:p,includeEpisodes:d,version:k},l,m),body:JSON.stringify({...a,policy:{...a.policy||{},...i}})},(e,t)=>{if(e)u(e,t);else if(t&&!t.body&&t.status>=400)u(new Error(`${t.uri} responded with status ${t.status}`),t);else try{if("SUB"===n){if(t.body===f)return;f=t.body}u(null,JSON.parse(t.body))}catch(e){e.message=`Failed to parse cosmos response: ${e.message}`,u(e,t)}})}).catch(u),{cancel(){c&&c()}}},t.getAvailablePlaylistName=function(e,t){o.default.cosmosJSON({method:"GET",uri:`sp://core-playlist/v1/rootlist?filter=${encodeURIComponent(`name startsWith ${encodeURIComponent(e)}`)}`,body:{policy:{playlist:{name:!0}}}},(n,i)=>{if(n)return void t(n);const o=i.rows.map(({name:t})=>t.substr(e.length).trim()||"1").filter(e=>/\d+/.test(e)).map(Number).sort((e,t)=>e-t).pop();t(null,`${e}${o?` ${o+1}`:""}`)})};var i=r(n(7)),o=r(n(22)),a=r(n(19)),s=r(n(357)),l=r(n(66));function r(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){const a=i.default.from(e).toURI(),s=encodeURIComponent(a);o.default.cosmosJSON({method:"GET",uri:`sp://core-playlist/v1/playlist/${s}/metadata`,body:{policy:t}},(e,{error:t=null,metadata:i}={})=>n(e||t,i))}function d(e){return/:internal:local-files.*/.test(e)}async function k(e){const t=i.default.from(e);if(t.type===i.default.Type.PLAYLIST)return t.username;if(t.type===i.default.Type.PLAYLIST_V2)return await new Promise((t,n)=>p(e,{owner:{username:!0}},(i,{owner:{username:o}={}}={})=>{i?n(i):o?t(o):n(new Error(`No owner username found for ${e}`))}));throw new Error(`The uri ${e} is not any kind of playlist uri`)}}).call(this,n(1))},139:function(e,t,n){"use strict";const i=n(76),o=n(9),a=n(2),s=n(13),l=n(70),r="current",p="paused",d="playing",k="play-button",u="pause-button",c="play",m="pause",f="[data-button=play]",y=`${f},[data-button=play-context]`,g="data-interaction-intent",z="[data-context-index]",b={getPlayerVariantUri:l.createEmptyMethod("getPlayerVariantUri"),getPlayerIsPlaying:l.createEmptyMethod("getPlayerIsPlaying"),getPlayingNodes:l.createEmptyMethod("getPlayingNodes"),subscribeToPlayerChange:l.createEmptyMethod("subscribeToPlayerChange")};let h={},_=null;function v(e){const t=e||document;w(t);const n=function(e){let t=[];if("queue"!==b.getPlayerTrackProvider()){const n=b.getPlayerVariantUri(),i=l.getContextSelectorsWithVariants(n),a=o(e).search(i.join(", "));a&&(t=Array.prototype.slice.call(a))}return b.getPlayingNodes(e,t)}(t),a=function(e){return o(e).search("[data-playback-active=true]")}(t);if(a){let e=a;n&&(e=i(a,n)),e.forEach(x)}if(n){let e=n;a&&(e=i(n,a)),e.forEach(P),i(n,e).forEach(T)}}function w(e){const t=o(e).search("[data-button=play-context]");t&&t.forEach(S)}function S(e){if(o(e).parent("[data-list-item]"))return;const t=l.getUriFromButton(e),n=a(t).get("playable");void 0!==n&&(n?e.removeAttribute("disabled"):e.setAttribute("disabled","disabled"),h[t]||(h[t]=function(e){e.hasOwnProperty("playable")&&w(document.body)},a(t).on("update",h[t])))}function x(e){const t=[r,p,d].join(" "),n=o(e);if(n.removeClass(t).removeAttribute("data-playback-active"),n.matches(y)&&(n.attribute("data-log-click",k),n.attribute(g,c)),n.matches(z)){const e=n[0].querySelector(f);e&&e.setAttribute(g,c)}}function P(e){const t=b.getPlayerIsPlaying(),n=[r,t?d:p].join(" "),i=o(e);if(i.addClass(n).data("playback-active",!0),i.matches(y)&&(i.attribute("data-log-click",t?u:k),i.attribute(g,t?m:c)),i.matches(z)){const e=i[0].querySelector(f);e&&e.setAttribute(g,t?m:c)}}function T(e){const t=b.getPlayerIsPlaying(),n=t?p:d,i=t?d:p,a=o(e);if(a.hasClass(n)&&a.removeClass(n),a.hasClass(i)||a.addClass(i),a.matches(y)&&(a.attribute("data-log-click",t?u:k),a.attribute(g,t?m:c)),e.matches(z)){const n=e.querySelector(f);n&&n.setAttribute(g,t?m:c)}}function j(e){const t=o(e.container);let n=null;v((n=t.matches("[data-context]")?t:t.parent("[data-context]"))&&n[0].parentElement||document)}t.attach=function(){_=b.subscribeToPlayerChange((function(){v()})),s.on("scroll-show-after",j)},t.detach=function(){_&&(_.cancel(),_=null);for(const e in h)h.hasOwnProperty(e)&&a(e).off("update",h[e]);h={},s.off("scroll-show-after",j)},t.update=v,t.setMethods=function(e){for(const t in e)e.hasOwnProperty(t)&&(b[t]=e[t])}},14:function(e,t,n){"use strict";var i=n(5);let o,a=!1;e.exports=function e(t){if(!a){if(o=n(189),e.enable=o.enable.bind(o),e.disable=o.disable.bind(o),"undefined"!=typeof window&&window.frameElement){const e=window.frameElement.getAttribute("data-debug");e&&o.enable(e)}const t="undefined"!=typeof __spotify&&__spotify.product_state?__spotify.product_state:{},s=t.debugEnable||t.debugenable;s&&o.enable(s),"undefined"!=typeof __spotify&&__spotify.product_state&&"1"===__spotify.product_state["ta-environment"]&&(o.useColors=()=>!1,o.formatters.o=e=>{try{return JSON.stringify(e)}catch(e){return(0,i.logError)("Unable to stringify object",e),""}}),a=!0}return o(t)}},140:function(e,t,n){"use strict";const i=window.requestAnimationFrame||function(e){setTimeout(e,16)};e.exports=function(e,t){let n,o=!1;return function(){n=arguments,o||(o=!0,i((function(){o=!1,e.apply(t,n)})))}}},141:function(e,t,n){"use strict";t.getContextFromNodeOrParent=function(e){const t=e.closest("[data-context]");return t&&t.getAttribute("data-uri")||""},t.getAttributeFromNodeOrParent=function(e,t){const n=`[${t}]`,i=e.closest(n);return i&&i.getAttribute(t)||""}},142:function(e,t,n){var i;/** @license MIT License (c) copyright 2013 original author or authors */!function(o){void 0===(i=function(e){var t=n(391),i=n(392),o=n(393).setTimer,a=Array.prototype.slice,s=n(395)(t.Promise,(function(e,t,n,i){var o=r(i);try{switch(n.length){case 2:e.call(t,n[0],n[1],o);break;case 1:e.call(t,n[0],o);break;case 0:e.call(t,o);break;default:n.push(o),e.apply(t,n)}}catch(e){i.reject(e)}}));return{lift:l,liftAll:function(e,t,n){return i(l,t,n,e)},apply:function(e,t){return s(e,this,t||[])},call:function(e){return s(e,this,a.call(arguments,1))},createCallback:r,bindCallback:p,liftCallback:function(e){return function(t){return p(t,e)}}};function l(e){var t=arguments.length>1?a.call(arguments,1):[];return function(){var n,i=t.length,o=arguments.length,a=new Array(o+i);for(n=0;n<i;++n)a[n]=t[n];for(n=0;n<o;++n)a[n+i]=arguments[n];return s(e,this,a)}}function r(e){return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(a.call(arguments,1)):e.resolve(n)}}function p(e,n){return e=t(e),n&&e.then((function(e){i(null,e)}),i),e;function i(e,t){o((function(){n(e,t)}),0)}}}.call(t,n,t,e))||(e.exports=i)}(n(72))},143:function(e,t,n){"use strict";const i=n(11),o=n(142);function a(e,t,n,i,o,s){if(!(this instanceof a))return new a(e,t,n,i,o,s);if(!(e&&t&&n&&i&&o))throw new TypeError("Missing parameters for Play");this._resolver=e,this._createSessionPromise=t,this._player=n,this._getTime=i,this._context=o,this._optOptions=s}a.prototype._sessionUrl=function(){return this._createSessionPromise.then((function(e){return e.getJSONBody().session}))},a.prototype._createPlayRequest=function(e){const t={logging_params:{command_initiated_time:this._getTime()}};return new i.Request(i.Action.POST,`${e}/play`,null,t)},a.prototype._createUpdateRequest=function(e,t){return t.logging_params={command_initiated_time:this._getTime()},new i.Request(i.Action.POST,`${e}/update`,null,t)},a.prototype.play=function(e=(()=>{})){const t=this;this._createSessionPromise?this._sessionUrl().then((function(e){return o.call(t._resolver.resolve.bind(t._resolver),t._createPlayRequest(e))})).done((function(){e(null)}),(function(n){if(n.response&&404===n.response.getStatusCode())t._createSessionPromise=null,t.play(e);else{const t=new Error(`Failed to prepare player session: ${n.message}`);t.cause=function(){return n},e(t)}})):this._player.play(this._context,this._optOptions,e)},a.prototype._update=function(e,t=(()=>{})){const n=this;this._createSessionPromise?this._sessionUrl().then((function(t){return o.call(n._resolver.resolve.bind(n._resolver),n._createUpdateRequest(t,e))})).done((function(){t(null)}),(function(e){const n=new Error(`Failed to update player session: ${e.message}`);n.cause=function(){return e},t(n)})):t(new Error("Cannot update invalidated Play"))},a.prototype.updateContext=function(e,t){this._update({context:e},t)},a.prototype.updatePage=function(e,t){this._update({page:e},t)},a.prototype.updateTrack=function(e,t){this._update({track:e},t)},a.prototype.updateViewUri=function(e,t){this._update({view_uri:e},t)},a.prototype.invalidate=function(e=(()=>{})){if(!this._createSessionPromise)return;const t=this;this._sessionUrl().done((function(n){const o=new i.Request(i.Action.DELETE,n,null,null);t._resolver.resolve(o,(function(){e(null)}))}),(function(){e(null)})),this._createSessionPromise=null},t.Play=a},144:function(e,t,n){"use strict";t.compare=n(214),t.duration=n(215),t.href=n(216),t.humanizeDuration=n(217),t.list=n(218),t.loc=n(100),t.numeral=n(196),t.share=n(220),t.slice=n(221),t.type=n(248),t.json=n(250)},145:function(e,t,n){"use strict";e.exports={}},148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDownloading=function(e){return e===p},t.shouldBeOffline=function(e){switch(e){case a:case s:case l:case p:case r:case d:return!0;case o:default:return!1}},t.progressFromStatus=function(e){switch(e){case a:case s:case l:case r:case o:return 0;case d:return 1;case p:default:return}},t.getLabelForStatus=function(e,t){switch(e){case p:return"Downloading";case s:case l:case r:return"WaitingForConnection";case a:return"WaitingForDownload";case d:return t?"DownloadedSongs":"Downloaded";case o:default:return t?"DownloadSongs":"Download"}},t.sendUserMessageForStatus=function(e){switch(e){case s:return i.default.cosmosJSON({method:"POST",uri:"sp://messages/v1/container/user-message",body:{id:"cant-offline-sync-playlist-in-offline-mode"}}),!0;default:return!1}},t.YES=t.DOWNLOADING=t.WAITING_SYNC_NOT_ALLOWED=t.WAITING_NO_CONNECTION=t.WAITING_OFFLINE_MODE=t.WAITING=t.NO=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(22));const o="no";t.NO=o;const a="waiting";t.WAITING=a;const s="waitingOfflineMode";t.WAITING_OFFLINE_MODE=s;const l="waitingNoConnection";t.WAITING_NO_CONNECTION=l;const r="waitingSyncNotAllowed";t.WAITING_SYNC_NOT_ALLOWED=r;const p="downloading";t.DOWNLOADING=p;const d="yes";t.YES=d},149:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e&&a.test(e)?e.replace(o,e=>i[e]):e};const i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},o=/[&<>"']/g,a=RegExp(o.source)},151:function(e,t,n){var i,o,a=n(41);function s(e,t,n,i){return e.call(i,t[n],n,t)}e.exports=function(e,t,n){var l,r=0;for(l in null==i&&function(){for(var e in o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=!0,{toString:null})i=!1}(),e)if(!1===s(t,e,l,n))break;if(i)for(var p=e.constructor,d=!!p&&e===p.prototype;(l=o[r++])&&("constructor"===l&&(d||!a(e,l))||e[l]===Object.prototype[l]||!1!==s(t,e,l,n)););}},152:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NullResolver=t.Resolver=void 0;var i=n(84),o=n(86);t.Resolver=class{constructor(e){if(!e||"function"!=typeof e.executeRequest)throw new TypeError("Missing or invalid `bridge` parameter");this._bridge=e,this._requestId=1e6}resolve(e,t){return this._resolve(e,t)}get(e,t){return this._resolveFromParams(i.Action.GET,e,t)}post(e,t){return this._resolveFromParams(i.Action.POST,e,t)}subscribe(e,t){return this._resolveFromParams(i.Action.SUB,e,t)}put(e,t){return this._resolveFromParams(i.Action.PUT,e,t)}patch(e,t){return this._resolveFromParams(i.Action.PATCH,e,t)}delete(e,t){return this._resolveFromParams(i.Action.DELETE,e,t)}_sendRequest(e,t,n){return new Promise((i,o)=>{const a=JSON.stringify({name:e,args:[t,n]});this._bridge.executeRequest(a,{onSuccess:e=>{i(JSON.parse(e))},onFailure:e=>{o(JSON.parse(e))}})})}_parseResponse(e,t){const n=o.Response.fromObject(t);if(null===n)throw new Error(`Failed to parse response: ${t}`);const i=n.getStatusCode();if(!function(e){return e>=200&&e<=299}(i)){const t=new Error(`${e.getAction()} request to ${e.getURI()} failed with status code ${i}`);throw t.response=n,t}return n}async _createRequestAsync(e,t){const n=t.toJSON(),i=await this._sendRequest("cosmos_request_create",e,n);return this._parseResponse(t,i)}async _pullRequestAsync(e,t){const n=await this._sendRequest("cosmos_request_pull",e,{uri:t.getURI()});return this._parseResponse(t,n)}async _cancelRequestAsync(e){await this._sendRequest("cosmos_request_cancel",e)}_doResolve(e,t){const n=++this._requestId,i={isCancelled:!1},o=()=>{i.isCancelled=!0,this._cancelRequestAsync(n)};return this._createRequestAsync(n,e).then(e=>{i.isCancelled||(o(),t(null,e))},e=>{i.isCancelled||(o(),t(e,e.response||null))}),{cancel:o}}_doSubscribe(e,t){const n=++this._requestId,i={isCancelled:!1},o=()=>i.isCancelled?Promise.resolve():this._pullRequestAsync(n,e).then(e=>{i.isCancelled||t(null,e)}).then(o);return this._createRequestAsync(n,e).then(e=>(i.isCancelled||t(null,e),o()),e=>{i.isCancelled||t(e,e.response||null)}),{cancel:()=>{i.isCancelled=!0,this._cancelRequestAsync(n)}}}_resolve(e,t){const n="function"==typeof t?t:()=>{};return e.getAction()===i.Action.SUB?this._doSubscribe(e,n):this._doResolve(e,n)}_resolveFromParams(e,t,n){const o=t||{},a="string"==typeof o?o:o.url,s=o.headers,l=o.body,r=new i.Request(e,a,s,l);return this._resolve(r,n)}};t.NullResolver=class{resolve(){return{cancel:()=>{}}}get(){return{cancel:()=>{}}}post(){return{cancel:()=>{}}}subscribe(){return{cancel:()=>{}}}put(){return{cancel:()=>{}}}patch(){return{cancel:()=>{}}}delete(){return{cancel:()=>{}}}}},153:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},154:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInitialRTLMode=u,t.subscribeToRTLMode=function(e){return;r.push(e),function(){if(p)return;d=u(),p=i.default.resolver.subscribe("sp://messages/v1/container/control",(e,t)=>{if(e)return void(0,o.logError)(e);const n=t.getJSONBody();if(n){let e;switch(n.type){case"set_rtl_emulation_auto":e=u();break;case"set_rtl_emulation_on":e=s;break;case"set_rtl_emulation_off":e=a;break;default:return}r.forEach(t=>{t(e,d)}),d=e,l.getTop()===window&&k(d)}})}(),e(d,d),l.getTop()===window&&k(d)},t.removeAllSubscriptions=function(){r.length=0,d=a,p&&(p.cancel(),p=null)},t.windowTools=t.RTL_ON=t.RTL_OFF=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(11)),o=n(5);const a=Symbol("RTL_OFF");t.RTL_OFF=a;const s=Symbol("RTL_ON");t.RTL_ON=s;const l={getTop:()=>window.top};t.windowTools=l;const r=[];let p=null,d=a;function k(e){window.rtlLibCurrentMode=e===s?"on":"off"}function u(){return l.getTop()!==window?function(){return"on"===l.getTop().rtlLibCurrentMode?s:a}():window.__spotify.localization_is_rtl?s:a}},156:function(e,t){e.exports=function(e){return e}},157:function(e,t){e.exports=function(e){return function(t){return t[e]}}},158:function(e,t,n){var i=n(29),o=n(73);function a(e,t){for(var n=-1,i=e.length;++n<i;)if(s(e[n],t))return!0;return!1}function s(e,t){return e&&"object"==typeof e&&t&&"object"==typeof t?o(e)&&o(t)?function(e,t){for(var n=-1,i=t.length;++n<i;)if(!a(e,t[n]))return!1;return!0}(e,t):function(e,t){var n=!0;return i(t,(function(t,i){if(!s(e[i],t))return n=!1})),n}(e,t):e===t}e.exports=s},16:function(e,t,n){},160:function(e,t,n){"use strict";const i=n(34),o=n(51).default;t.runtime=o,t.register=function(e){let t={};"Function"===i(e)?t[e.displayName]=e:t=e;for(const e in t)t.hasOwnProperty(e)&&o.registerHelper(e,t[e]);return this}},17:function(e,t,n){var i=n(27);e.exports=function(e,t){return-1!==i(e,t)}},18:function(e,t,n){"use strict";t.__esModule=!0,t.extend=l,t.indexOf=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!a.test(e))return e;return e.replace(o,s)},t.isEmpty=function(e){return!e&&0!==e||!(!d(e)||0!==e.length)},t.createFrame=function(e){var t=l({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},o=/[&<>"'`=]/g,a=/[&<>"'`=]/;function s(e){return i[e]}function l(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var r=Object.prototype.toString;t.toString=r;var p=function(e){return"function"==typeof e};p(/x/)&&(t.isFunction=p=function(e){return"function"==typeof e&&"[object Function]"===r.call(e)}),t.isFunction=p;var d=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===r.call(e)};t.isArray=d},187:function(e,t,n){var i="undefined"!=typeof JSON?JSON:n(188);e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n=t.space||"";"number"==typeof n&&(n=Array(n+1).join(" "));var s="boolean"==typeof t.cycles&&t.cycles,l=t.replacer||function(e,t){return t},r=t.cmp&&function(e){return function(t){return function(n,i){var o={key:n,value:t[n]},a={key:i,value:t[i]};return e(o,a)}}}(t.cmp),p=[];return function e(t,d,k,u){var c=n?"\n"+new Array(u+1).join(n):"",m=n?": ":":";if(k&&k.toJSON&&"function"==typeof k.toJSON&&(k=k.toJSON()),void 0!==(k=l.call(t,d,k))){if("object"!=typeof k||null===k)return i.stringify(k);if(o(k)){for(var f=[],y=0;y<k.length;y++){var g=e(k,y,k[y],u+1)||i.stringify(null);f.push(c+n+g)}return"["+f.join(",")+c+"]"}if(-1!==p.indexOf(k)){if(s)return i.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}p.push(k);var z=a(k).sort(r&&r(k));for(f=[],y=0;y<z.length;y++){var b=e(k,d=z[y],k[d],u+1);if(b){var h=i.stringify(d)+m+b;f.push(c+n+h)}}return p.splice(p.indexOf(k),1),"{"+f.join(",")+c+"}"}}({"":e},"",e,0)};var o=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},a=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var i in e)t.call(e,i)&&n.push(i);return n}},188:function(e,t){t.parse=JSON.parse,t.stringify=JSON.stringify},189:function(e,t,n){(function(i){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(i++,"%c"===e&&(o=i))}),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(190)(t);const{formatters:o}=e.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(26))},19:function(e,t,n){"use strict";const i=n(37),o=n(71);t.create=function(e){let t=e.originUri;return e.filter&&(t=o.create(t,e.filter.query)),e.sort&&(t=i.create(t,e.sort.direction,e.sort.query)),t},t.getOriginUri=function(e){const n=t.parse(e);return n&&n.originUri||""},t.parse=function(e){const t=i.parse(e),n=o.parse(t&&t.originUri||e);return t||n?{originUri:n&&n.originUri||t&&t.originUri,sort:t,filter:n}:null},t.isValid=function(e){return!!t.parse(e)}},190:function(e,t,n){e.exports=function(e){function t(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return i.colors[Math.abs(t)%i.colors.length]}function i(e){let n;function s(...e){if(!s.enabled)return;const t=s,o=Number(new Date),a=o-(n||o);t.diff=a,t.prev=n,t.curr=o,n=o,e[0]=i.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let l=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,o)=>{if("%%"===n)return n;l++;const a=i.formatters[o];if("function"==typeof a){const i=e[l];n=a.call(t,i),e.splice(l,1),l--}return n}),i.formatArgs.call(t,e),(t.log||i.log).apply(t,e)}return s.namespace=e,s.enabled=i.enabled(e),s.useColors=i.useColors(),s.color=t(e),s.destroy=o,s.extend=a,"function"==typeof i.init&&i.init(s),i.instances.push(s),s}function o(){const e=i.instances.indexOf(this);return-1!==e&&(i.instances.splice(e,1),!0)}function a(e,t){const n=i(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},i.disable=function(){const e=[...i.names.map(s),...i.skips.map(s).map(e=>"-"+e)].join(",");return i.enable(""),e},i.enable=function(e){let t;i.save(e),i.names=[],i.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$")));for(t=0;t<i.instances.length;t++){const e=i.instances[t];e.enabled=i.enabled(e.namespace)}},i.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=i.skips.length;t<n;t++)if(i.skips[t].test(e))return!1;for(t=0,n=i.names.length;t<n;t++)if(i.names[t].test(e))return!0;return!1},i.humanize=n(191),Object.keys(e).forEach(t=>{i[t]=e[t]}),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=t,i.enable(i.load()),i}},191:function(e,t){var n=1e3,i=60*n,o=60*i,a=24*o,s=7*a,l=365.25*a;function r(e,t,n,i){var o=t>=1.5*n;return Math.round(e/n)+" "+i+(o?"s":"")}e.exports=function(e,t){t=t||{};var p=typeof e;if("string"===p&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*l;case"weeks":case"week":case"w":return r*s;case"days":case"day":case"d":return r*a;case"hours":case"hour":case"hrs":case"hr":case"h":return r*o;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===p&&!1===isNaN(e))return t.long?function(e){var t=Math.abs(e);if(t>=a)return r(e,t,a,"day");if(t>=o)return r(e,t,o,"hour");if(t>=i)return r(e,t,i,"minute");if(t>=n)return r(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=a)return Math.round(e/a)+"d";if(t>=o)return Math.round(e/o)+"h";if(t>=i)return Math.round(e/i)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},192:function(e,t,n){"use strict";const i=n(426),o=n(22),a="preferences_event_wait";function s(e,t,n){const i="*"===e?null:RegExp(`^${e}`);let o=null;if("object"!=typeof t)return t;o=Object.keys(t).map((function(e){return!(null!==i&&!i.test(e))&&[e,t[e]]})).filter(Boolean).reduce((function(e,t){return e[t[0]]=t[1],e}),{});const a=Object.keys(o).reduce((e,t)=>(function e(...t){const n=e=>e&&"object"==typeof e;return t.reduce((t,i)=>(Object.keys(i).forEach(o=>{const a=t[o],s=i[o];Array.isArray(a)&&Array.isArray(s)?t[o]=a.concat(...s):n(a)&&n(s)?t[o]=e(a,s):t[o]=s}),t),{})})(e,function(e,t,n){const i={};return e.split(n||".").reduce((function(e,n,i,o){return i<o.length-1?e[n]={}:e[n]=t,e[n]}),i),i}(t,o[t])),{});return"*"===e||!0===n?a:e.split(".").reduce((function(e,t){return e[t]}),a)}function l(e,t){if(!(this instanceof l))return new l(e,t);this.path=e||"*",this.rpc=t||o.request.bind(o)}e.exports=l,l.prototype.all=function(e){const t=this.path;return this.rpc("preferences_all",[],(function(n,i){n?e(n):e(null,"*"===t?i:s(t,i,!0))})),this},l.prototype.set=function(e,t,n){const o=this.path;let a=null,s=null;if("object"==typeof e){const n=t;a=function(e,t){const n={},i=t||".";return function e(t,o){let a=null;for(const s in t)if("object"==typeof t[s]){const n=o?[o,s].join(i):s;e(t[s],n)}else a=o?[o,s].join(i):s,n[a]=t[s]}(e),n}(e),s=i().concurrency(1),Object.keys(a).forEach(e=>{s.push(t=>{this.set(e,a[e],t)})}),s.run(n)}else{const i="*"===o?e:[o,e].join(".");this.rpc("preferences_set",[i,t],n)}return this},l.prototype.setAtomicFlags=function(e,t,n){this.get(e,(i,o)=>{if(i)n(i);else{let i=o;t.forEach((function(e){const t=e[0],n=e[1];null!=n&&(n?i|=t:i&=~t)})),this.set(e,i,n)}})},l.prototype.get=function(e,t){const n="*"===this.path?e:[this.path,e].join(".");return this.rpc("preferences_get",[n],(e,i)=>{null===(i?s(n,i):null)?this.rpc("preferences_all",[],(function(e,i){e?t(e):t(null,s(n,i))})):t(null,s(n,i))}),this},l.prototype.subscribe=function(e,t){let n=null,i=!1;return this.get(e,(o,l)=>{if(i)return;const r="*"===this.path?e:[this.path,e].join(".");n=function e(t,n,i,o,l){const r=l||{isCancelled:!1,cancel:function(){this.isCancelled=!0}};return t(a,[],(function(a,l){if(r.isCancelled)return;let p=!1,d=i;if(l){const e=s(n,l);e!==d&&(d=e,p=!0)}e(t,n,d,o,r),p&&o(null,d)})),r}(this.rpc,r,l,t),t(o,l)}),{cancel:function(){i=!0,n&&n.cancel()}}}},193:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.hasValue=t.hasFlag=void 0;const n=t=>!!(e.__spotify&&e.__spotify.product_state&&e.__spotify.product_state.hasOwnProperty(t));t.hasFlag=n;t.hasValue=(t,i)=>n(t)&&e.__spotify.product_state[t]===i}).call(this,n(1))},194:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._setGetTopLevelWindowFunction=function(e){r=e},t._resetGetTopLevelWindowFunction=function(){r=p},t.isMac=c,t.isWindows=m,t.getPlatform=f,t.subscribeToPlatform=function(e){d.push(e);const t=f();e(t,t),r()===window&&u(t);!function(){if(k)return;let e=f();k=i.default.resolver.subscribe("sp://messages/v1/container/control",(t,n)=>{if(t)return void(0,o.logError)(t);const i=n.getJSONBody();if(i){let t;switch(i.type){case"set_platform_emulation_auto":t=f();break;case"set_platform_emulation_macos":t=s;break;case"set_platform_emulation_windows":t=l;break;case"set_platform_emulation_linux":t=a;break;default:return}d.forEach(n=>{n(t,e)}),e=t,r()===window&&u(e)}})}()},t.removeAllSubscriptions=function(){d.length=0,k&&(k.cancel(),k=null)},t.PLATFORM_WINDOWS=t.PLATFORM_MAC=t.PLATFORM_UNKNOWN=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(11)),o=n(5);const a=Symbol("PLATFORM_UNKNOWN");t.PLATFORM_UNKNOWN=a;const s=Symbol("PLATFORM_MAC");t.PLATFORM_MAC=s;const l=Symbol("PLATFORM_WINDOWS");t.PLATFORM_WINDOWS=l;let r=()=>window.top;const p=r;const d=[];let k=null;function u(e){switch(e){case s:window.osLibCurrentPlatformId="mac";break;case l:window.osLibCurrentPlatformId="win";break;default:window.osLibCurrentPlatformId="unknown"}}function c(){return window.navigator.platform.startsWith("Mac")}function m(){return window.navigator.platform.startsWith("Win")}function f(){return r()!==window?function(){switch(r().osLibCurrentPlatformId){case"mac":return s;case"win":return l;default:return a}}():c()?s:m()?l:a}},195:function(e){e.exports=JSON.parse('{"ar":{"intl":"ar-u-nu-latn","smartling":"ar"},"cs":{"smartling":"cs-CZ"},"de":{"smartling":"de-DE"},"el":{"smartling":"el-GR"},"en":{"smartling":"en-GB"},"es":{"smartling":"es-ES"},"es-419":{"moment":"es","smartling":"es-LA"},"fi":{"smartling":"fi-FI"},"fr":{"smartling":"fr-FR"},"fr-CA":{"smartling":"fr-CA","moment":"fr-ca"},"he":{"smartling":"he-IL"},"hu":{"smartling":"hu-HU"},"id":{"smartling":"id-ID"},"it":{"smartling":"it-IT"},"ja":{"smartling":"ja-JP"},"ko":{"smartling":"ko-KR"},"nl":{"smartling":"nl-NL"},"pl":{"smartling":"pl-PL"},"pt-BR":{"moment":"pt-br","smartling":"pt-BR","intl":"pt-PT"},"ru":{"smartling":"ru-RU"},"sv":{"smartling":"sv-SE"},"th":{"smartling":"th-TH"},"tr":{"smartling":"tr-TR"},"vi":{"smartling":"vi-VN"},"zh-Hant":{"moment":"zh-tw","smartling":"zh-TW"},"ms":{"moment":"ms-my","smartling":"ms-MY","intl":"ms-MY"}}')},196:function(e,t,n){"use strict";const i=n(219),o=function(e,t){const n=t&&t.hash&&t.hash.format,a=o._numeral;return i(e)?a(e).format(n):e};o.displayName="numeral",e.exports=o,e.exports.setLocale=function(e){o._numeral=n(82)(e)}},197:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=[],n){const o=(0,i.default)(n||"en"),a=(e,n)=>{const i=t[n];return void 0===i?e:"number"==typeof i?o(i).format():i};let s=e;return s=(s=s.replace(/\{(\d+?)\}/g,a)).replace(/%(\d+?)/g,a)};var i=function(e){return e&&e.__esModule?e:{default:e}}(n(82))},198:function(e,t,n){},2:function(e,t,n){"use strict";(function(t){const i=n(23),o=n(32),a=n(44),s=n(59),l=n(261),r=n(5).logError,p=function(e){return"number"==typeof e},d=function(e){return"string"==typeof e},k=n(262),u=n(76),c=n(33),m=n(93),f=n(31),y=n(255),g=n(258);function z(e,t){const n=[];let i=e.length;i?e.forEach((e,o)=>{e((e,a)=>{n[o]=a,(0==--i||e)&&t(e,n)})}):t(null,n)}const b=n(263),h=n(21),_=n(88),v=n(264),w=n(14)("live"),S=function(e){return e instanceof R},x=function(e){return e instanceof I},P=function(e){return Object.assign({},e)},T=function(e,t){return 0===e.length?[]:u.call(this,e,t)},j=function(e,t){const n=[];let i;for(let o=0,a=t.length;o<a;o++)(i=t[o])in e?n.push(e[i]):n.length++;return n},A=function(e,t){if(!e.length)return[];let n=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];n=n.concat(o.subtract(t))}return n=new h(0,0).merge(n),n=c(n,(function(e){return!!e.length}))},E=function(e,t){let n=t;for(let t=0,i=e.length;t<i;t++){n=e[t].merge(n)}return n};let L=0;const C=Array.prototype.slice,O=function(e,t){return s(e)?"operations"in e?(new R).update(e.operations):K(e.uri)._update(e,t):Array.isArray(e)?(new R)._update([{type:"insert",index:0,length:e.length,values:e}],t):e};function M(e,t){let n;const i=setTimeout((function(){n=!0,e(new Error(`Timeout Expired: ${t} milliseconds`))}),t);return function(){n||(clearTimeout(i),e.apply(this,arguments))}}const R=i({mixin:a,constructor:function(e){this._data=new b(e),this._mergeThrottled=v(this._merge,this),this._waiting=[];let t="";K.debug&&setInterval(()=>{const e=this._waiting.toString();t!==e&&(t=e,this._waiting.length?w(this,"waiting for",this._waiting):w(this,"all done"))},2e3)},get index(){return this._data.index},get length(){return this._data.length},get keys(){return this._data.keys},get values(){return this._data.values},indexOf:function(e){return this._data.indexOf(e)},indexOfMany:function(e){return this._data.indexOfMany(e)},valueOf:function(e){return this._data.valueOf(e)},hasKey:function(e){return this._data.hasKey(e)},forEach:function(e,t){return this._data.forEach(e,t),this},map:function(e,t){return this._data.map(e,t)},_merge:function(){const e=this._data,t=this._publish,n=this._before;if(t){if(delete this._publish,this._listeners&&this._listeners.publish){const n=e.diff(t);n.length&&this.emit("publish",n,J)}}else if(n&&(delete this._before,this._listeners&&this._listeners.update)){const t=n.diff(e);t.length&&this.emit("update",t,J)}return this},_update:function(e,t){let n,i;if(t===$){if(this._before)return this;n=this._publish||(this._publish=this._data.clone())}else t===Q&&(this._publish&&delete this._publish,this._before||(this._before=this._data.clone()),n=this._data);for(let o=0,a=e.length;o<a;o++){const a=[],s=(i=e[o]).keys||[];switch(i.type){case"length":n.length=i.length;break;case"sort":n.sort(i.compareFunction);break;case"move":n.move(i.from,i.to,i.length);break;case"remove":n.remove(i.index,i.length);break;case"insert":for(let e=0,n=i.values.length;e<n;e++)i.keys&&i.keys[e]||(s[e]=(L++).toString(36)),a[e]=O(i.values[e],t);n.insert(i.index,s,a);break;default:r("Invalid operation type",i.type)}}return t===Q&&(this._waiting=A(this._waiting,this.index)),this._mergeThrottled(),this},publish:function(e){return this._update(e,$)},update:function(e){return this._update(e,Q)},serialize:function(e){if(0===e)return[];const t=[],n=void 0===e?void 0:e-1;for(let e=0;e<this.length;e++){const i=this.values[e];let o=i;i&&i.serialize&&(o=i.serialize(n)),t.push(o)}return t},_getDataFromMask:function(e){const t=[];if(e.length>0)for(let n=0,i=this.length;n<i;n++){const i=this.get(n);let o;i&&i._getDataFromMask&&(o=i._getDataFromMask(e)),t.push(o)}return t},_query:function(e,t,n){const i=()=>{F(this,e,(i,o,a)=>{i?t(i):a?t(null,o):this._query(e,t,n)})};n===G?o.immediate(i):i()},query:function(e,t,n,i,o){let a=t,s=n,l=i,r=o;return"function"==typeof a&&(r=l,l=s,s=a,a=[]),s?(l?p(l)&&(r=l,l=G):l=G,r&&(s=M(s,r)),this._query(_(e,a),s,l),this):this._getDataFromMask(_(e,a).mask)},_wait:function(e){this._required||(this._required=[],o.immediate((function(){const e=this.missing(this._required),t=A(e,this._waiting);this._waiting=E(this._waiting,t),delete this._required,t.length&&this.emit("wait",t,J)}),this)),this._required=E(this._required,e)},missing:function(e){return A(e,this.index)},_get:function(e,t){if(this.missing(e).length){this._wait(e);const n=function(){this.missing(e).length||(this.off("update",n),t.call(this))};this.on("update",n)}else t.call(this,null,!0)},has:function(e,t){let n;return(n=new h(e,void 0!==t?t:e+1)).contained(this.index)},get:function(e,t){if(1===arguments.length){if(p(e))return this.values[e];if(d(e))return this.valueOf(e)}const n=C.call(arguments);let i,a,s;for(let e=0,t=n.length;e<t;e++){if("function"==typeof n[e]){const o=n.splice(e,3);if(t=n.length,i=o[0],o[1]){if(o[1]!==W&&o[1]!==G&&o[1]!==Y){a=G,i=M(i,o[1]);break}a=o[1],o[2]&&a!==W&&(i=M(i,o[2]))}else a=G;break}}let l=!1,r=!1;if(e instanceof h)s=n,l=!i&&s.length>1;else if(Array.isArray(e))l=!0,s=e;else{const n=!isNaN(t);s=n?[new h(e,t)]:[new h(e,e+1)],r=!n}const k=()=>f(s,e=>this.values.slice(e.start,e.end)),u=()=>{l?i.call(this,null,k()):r?i.call(this,null,this.values[e]):i.apply(this,[null].concat(k()))};return i?(a===W?u():a!==G||this.missing(s).length?this._get(s,u):o.immediate((function(){this._get(s,u)}),this),this):l?k():k()[0]}}),I=i({mixin:a,constructor:function(e){this.uri=e,this._data={uri:e},this._mergeThrottled=v(this._merge,this),this.index=[],this._waiting=[],this.emit("init",J);let t="";K.debug&&setInterval(()=>{const e=this._waiting.toString();t!==e&&(t=e,this._waiting.length?w(this,this._waiting):w(this,"all done"))},2e3)},emit:function(){const e=this.uri;if(e){const t=H.keys,n=H.values;let i,o;for(let a=0,s=t.length;a<s;a++)if(i=t[a],e.match(i)){if(!o){o=new Array(arguments.length);for(let e=0;e<arguments.length;++e)o[e]=arguments[e];o.splice(1,0,this)}const e=n[a];e.emit.apply(e,o)}}a.prototype.emit.apply(this,arguments)},_merge:function(){const e=this._data,t=this._before,n=this._publish;let i,o;if(n&&(delete this._publish,this.uri||this._listeners&&this._listeners.publish)){const t={};for(o in n)n.hasOwnProperty(o)&&(i=n[o],e[o]!==i&&(t[o]=i));Object.keys(t).length&&this.emit("publish",t,J)}if(t){delete this._before;const n={};if(this.uri||this._listeners&&this._listeners.update){for(o in e)e.hasOwnProperty(o)&&(i=e[o],o in t&&t[o]===i||(n[o]=i));for(o in t)t.hasOwnProperty(o)&&(i=t[o],o in e||(n[o]=void 0));Object.keys(n).length&&this.emit("update",n,J)}}return this},_update:function(e,t){let n,i;t===$?n=this._publish||(this._publish=P(this._data)):t===Q&&(this._before||(this._before=P(this._data)),n=this._data);for(const o in e){if(!e.hasOwnProperty(o))continue;i=e[o];const a=o in n?n[o]:void 0;if(S(a)){if(Array.isArray(i)){a._update([{type:"remove",index:0,length:a.length},{type:"insert",index:0,values:i}],t);continue}if(s(i)&&"operations"in i){a._update(i.operations,t);continue}}t===Q&&void 0===i?delete n[o]:n[o]=O(i,t)}return t===Q&&(this.index=Object.keys(n),this._waiting=T(this._waiting,this.index)),this._mergeThrottled(),this},delete:function(e){const t={};return t[e]=void 0,this.update(t)},update:function(e){return this._update(e,Q)},publish:function(e){return this._update(e,$)},serialize:function(e){if(0===e)return{};const t={},n=this._data,i=void 0===e?void 0:e-1;for(const e in n){if(!n.hasOwnProperty(e))continue;const o=n[e];if(void 0===o)continue;let a=o;o&&o.serialize&&(a=o.serialize(i)),t[e]=a}return t},_getDataFromMask:function(e){const t={};for(let n=0,i=e.length;n<i;n++){const i=e[n],o=i.mask,a=i.key,s=this.get(a);let l=s;if(x(s)&&(l={}),S(s)&&(l=[]),o)if(x(s)){const e=s._getDataFromMask(o);y(l,e)}else S(s)&&(l=s._getDataFromMask(o));t[a]=l}return t},_query:function(e,t,n){const i=()=>{D(this,e,(i,o,a)=>{i?t.call(this,i):a?t.call(this,null,o):this._query(e,t,n)})};n===G?o.immediate(i):i()},query:function(e,t,n,i,o){let a=t,s=n,l=i,r=o;return"function"==typeof a&&(r=l,l=s,s=a,a=[]),s?(l?p(l)&&(r=l,l=G):l=G,r&&(s=M(s,r)),this._query(_(e,a),s,l),this):this._getDataFromMask(_(e,a).mask)},_wait:function(e){this._required||(this._required=[],o.immediate((function(){const e=this.missing(this._required),t=T(e,this._waiting);this._waiting=m(this._waiting,t),delete this._required,t.length&&this.emit("wait",t,J)}),this)),this._required=m(this._required,e)},missing:function(e){return T(e,this.index)},has:function(e){return this.index.indexOf(e)>-1},_get:function(e,t){if(this.missing(e).length){this._wait(e);const n=function(){this.missing(e).length||(this.off("update",n),t.call(this))};this.on("update",n)}else t.call(this,null,!0)},get:function(e){const t=this._data;if(1===arguments.length&&d(e))return t[e];const n=C.call(arguments);let i,a,s;for(let e=0,t=n.length;e<t;e++){if("function"==typeof n[e]){const o=n.splice(e,3);if(t=n.length,i=o[0],o[1]){if(o[1]!==W&&o[1]!==G&&o[1]!==Y){a=G,i=M(i,o[1]);break}a=o[1],o[2]&&a!==W&&(i=M(i,o[2]))}else a=G;break}}let l=!1;Array.isArray(e)?(s=e,l=!0):s=n;const r=()=>{const e=j(t,s);l?i.call(this,null,e):(e.unshift(null),i.apply(this,e))};return i?(a===W?r():a!==G||this.missing(s).length?this._get(s,r):o.immediate(()=>{this._get(s,r)}),this):j(t,s)}}),N=function(e,t,n){return s(e)||x(e)?D(e,t,n):Array.isArray(e)||S(e)?F(e,t,n):n(null,e,!0)},D=function(e,t,n){const i={};let o=!0;t||n(null,i,o);const a=f(t.mask,"key"),s=function(e){z(e.map((function(e,n){return function(s){N(e,t.mask[n],(function(e,t,l){e?s(e):(l||(o=!1),i[a[n]]?y(i[a[n]],t):i[a[n]]=t,s())}))}})),(function(e){n(e,i,o)}))};if(x(e))e._get(a,(function(t,i){if(t)n(t);else{i||(o=!1);const t=f(a,(function(t){return e._data[t]}));s(t)}}));else{const t=g(e,a);s(t)}},B=function(e,t,n){if(!t)return!!e;if(l(n))return n.test(e);if("="===t)return e===n;if("!="===t)return e!==n;if(p(n)){if(">"===t)return e>n;if(">="===t)return e>=n;if("<"===t)return e<n;if("<="===t)return e<=n}if(d(n)){const i=k(n);if("^="===t)return new RegExp(`^${i}`).test(e);if("$="===t)return new RegExp(`${i}$`).test(e);if("~="===t)return new RegExp(`(^|\\s)${i}(\\s|$)`).test(e);if("|="===t)return new RegExp(`^${i}(-|$)`).test(e);if(" *="===t)return-1!==e.toString().indexOf(n)}return!1},q=function(e,t,n,i,o){let a=!0;const l=[];let r=e.length,p=!1;function d(e){if(e)return void(p||(p=!0,o(e)));if(p||--r>0)return;const t=[];for(let e=0;e<l.length;e++)e in l&&t.push(l[e]);o(null,t,a)}for(let o=0;o<e.length;o++){const r=e[o];x(r)?r._get([t],(function(e,s){if(e)return void d(e);s||(a=!1);let p=r._data[t];B(p,n,i)&&(l[o]=r),d()})):(s(r)&&B(r[t],n,i)&&(l[o]=r),d())}},U=[[{left:0,op:":"}]];const F=function(e,t,n){let i=!0;t.filters||(t.filters=U),function e(t,n,i,o){n>=t.length?o():i(t[n],(function(a){a?o(a):e(t,n+1,i,o)}))}(t.filters,0,(function(t,n){let o=[];z(t.map((function(t){return function(n){!function(t,n){let a=t.left,s=t.right,l=t.op;if("left"in t&&!("right"in t)&&p(a)&&(l?":"===l&&(s=e.length):s=a+1,l=":"),"right"in t&&!("left"in t)&&p(s)&&":"===l&&(a=0),p(a)&&p(s)&&":"===l)if(Array.isArray(e)){const t=C.call(e,a,s);o=o.concat(t),n()}else e._get([new h(a,s)],(function(t,l){if(t)n(t);else{for(let t=a;t<s;t++)o.push(e.values[t]);l||(i=!1),n()}}));else{const t=function(e){q(e,a,l,s,(function(e,t,a){e?n(e):(a||(i=!1),o=o.concat(t),n())}))};Array.isArray(e)?t(e):e._get([new h(0,e.length)],(function(o,a){if(o)n(o);else{const n=[];for(let t=0;t<e.length;t++)n.push(e.values[t]);a||(i=!1),t(n)}}))}}(t,n)}})),(function(t){t?n(t):(e=o,n())}))}),(function(o){if(o)n(o);else{const o=[];z(e.map((function(e,n){return function(a){N(e,t,(function(e,t,s){s||(i=!1),o[n]?y(o[n],t):o[n]=t,a(e)}))}})),(function(e){n(e,o,i)}))}}))};let V={};const K=function(e){return Array.isArray(e)?(new R).update([{type:"insert",index:0,length:e.length,values:e}]):p(e)?new R(e):d(e)?V[e]||(V[e]=new I(e)):s(e)?K(e.uri).update(e):S(e)||x(e)?e:new I};t.localStorage&&t.localStorage.debug&&(t.localStorage.debug.indexOf("live")>-1||t.localStorage.debug.indexOf("*")>-1)&&(K.debug=!0);const H={keys:[],values:[]};K.subscribe=function(e,t,n){let i=e;e.matches&&(i=i.matches);const o=i.toString(),s=H.keys,l=H.values;let r;for(let e=0,t=s.length;e<t;e++){if(s[e].toString()===o&&(r=l[e]))break}return r||(s.push(e),l.push(r=new a)),r.on(t,n),this},K.unsubscribe=function(e,t,n){let i=e;i.matches&&(i=i.matches);const o=e.toString(),a=H.keys,s=H.values;let l;for(let e=0,t=a.length;e<t;e++){if(a[e].toString()===o&&(l=s[e]))break}return l&&l.off(t,n),this},K.delete=function(e){return delete V[e],this},K.purge=function(){return V={},this},K.has=function(e){return!!V[e]};const J=K.EMIT_SYNC=a.EMIT_SYNC,G=K.ASYNC="ASYNC",W=K.SYNC="SYNC",Y=K.ASAP="ASAP",$=3,Q=4;K.Object=I,K.List=R,e.exports=K}).call(this,n(1))},20:function(e,t,n){"use strict";(function(e){const i=n(11).default;function o(e,n){const i=e.method;let o,s;return delete e.method,a(e.url,(function(a,l){if(a)n&&n(a);else if(!s){const a=new t.cosmos.Request(i||t.cosmos.Action.GET,l,e.headers,e.body);o=t.cosmos.resolver.resolve(a,(function(e,t){if(n)if(n&&e)n(e);else try{n(null,{body:JSON.parse(t.getBody()||"{}"),headers:t.getHeaders(),status:t.getStatusCode()})}catch(e){e.response=t,n(e)}}))}})),{cancel:function(){return o&&o.cancel?(o.cancel(),o=null):s||(s=!0),null}}}function a(t,n){t.indexOf("@")>-1?n(null,t.replace("@",encodeURIComponent(e.__spotify.username))):n(null,t)}t.request=o,t.get=function(e,n){return e.method=t.cosmos.Action.GET,o(e,n)},t.post=function(e,n){return e.method=t.cosmos.Action.POST,o(e,n)},t.subscribe=function(e,n){return e.method=t.cosmos.Action.SUB,o(e,n)},t.delete=function(e,n){return e.method=t.cosmos.Action.DELETE,o(e,n)},t.put=function(e,n){return e.method=t.cosmos.Action.PUT,o(e,n)},t.head=function(e,n){return e.method=t.cosmos.Action.HEAD,o(e,n)},t.cosmos=i,t.sanitizeURL=a}).call(this,n(1))},200:function(e,t,n){"use strict";var i=n(5);const o=Array.prototype.splice,a=Array.prototype.slice,s=function(e,t){const n=e.length,i=t.length,o=[],s={},l={};for(let a=0;a<n;a++){const r=e[a];for(let p=0;p<i;p++){if(l[p])continue;if(r!==t[p])continue;const d=a,k=p;let u=0;do{s[a++]=l[p++]=!0,u++}while(a<n&&p<i&&e[a]===t[p]&&!l[p]);const c={type:"move",from:d,to:k,length:u};o.push(c),a--;break}}const r=[];for(let t=0;t<n;){if(s[t]){t++;continue}const i=t;let o=0;for(;t<n&&!s[t++];)o++;const l={type:"remove",index:i,length:o,values:a.call(e,i,i+o)};r.push(l)}const p=[];for(let e=0;e<i;){if(l[e]){e++;continue}const n=e;let o=0;for(;e<i&&!l[e++];)o++;const s=a.call(t,n,n+o);p.push({type:"insert",index:n,length:o,values:s})}return[r,o,p]},l=function(e,t,n){const i=n.length,o=e.length,a=t.length;let s=0;for(let n=0;n<o;n++){const i=e[n];i.index-=s,s+=i.length;for(let e=0;e<a;e++){const n=t[e];n.from>=i.index&&(n.from-=i.length)}}for(let e=i;e--;){const i=n[e],o=i.length;for(let e=a;e--;){const n=t[e];n.to>=i.index&&(n.to-=o)}}for(let e=a;e-- >1;){const n=t[e];if(n.to!==n.from)for(let i=e;i--;){const e=t[i];e.to>=n.to&&(e.to-=n.length),e.to>=n.from&&(e.to+=n.length)}}const l=[];for(let e=0;e<a;e++){const n=t[e];if(n.to!==n.from){l.push(n);for(let i=e+1;i<a;i++){const e=t[i];e.from>=n.from&&(e.from-=n.length),e.from>=n.to&&(e.from+=n.length)}}}return function(e){for(let t=0;t<e.length;t++)if(e[t].length>Math.abs(e[t].to-e[t].from)){const n=e[t].to,i=e[t].length;e[t].length=Math.abs(e[t].to-e[t].from),e[t].from=n,e[t].to=n+i}}(l),e.concat(l,n)},r=function(e,t,n){for(let i=0;i<n.length;i++)if(i in n){const o=t+i;e.length<o&&(e.length=o),e.splice(o,0,n[i])}return n},p=function(e,t,n){return o.call(e,t,n)},d=function(e,t,n,i){const o=p(e,t,i);return r(e,n,o),o},k=function(e,t){const n=s(e,t);return l.apply(this,n)};k.annotate=s,k.offset=l,k.remove=p,k.insert=r,k.move=d,k.patch=function(e,t){for(let n=0;n<t.length;n++){const o=t[n];switch(o.type){case"move":d(e,o.from,o.to,o.length);break;case"remove":p(e,o.index,o.length);break;case"insert":r(e,o.index,o.values);break;default:(0,i.logError)("Unexpected operation type",o.type)}}return e},e.exports=k},201:function(e,t,n){"use strict";t.__esModule=!0;var i=n(18);t.default=function(e){e.registerHelper("blockHelperMissing",(function(t,n){var o=n.inverse,a=n.fn;if(!0===t)return a(this);if(!1===t||null==t)return o(this);if(i.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):o(this);if(n.data&&n.ids){var s=i.createFrame(n.data);s.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:s}}return a(t,n)}))},e.exports=t.default},202:function(e,t,n){"use strict";(function(i){t.__esModule=!0;var o=n(18),a=function(e){return e&&e.__esModule?e:{default:e}}(n(24));t.default=function(e){e.registerHelper("each",(function(e,t){if(!t)throw new a.default("Must pass iterator to #each");var n=t.fn,s=t.inverse,l=0,r="",p=void 0,d=void 0;function k(t,i,a){p&&(p.key=t,p.index=i,p.first=0===i,p.last=!!a,d&&(p.contextPath=d+t)),r+=n(e[t],{data:p,blockParams:o.blockParams([e[t],t],[d+t,null])})}if(t.data&&t.ids&&(d=o.appendContextPath(t.data.contextPath,t.ids[0])+"."),o.isFunction(e)&&(e=e.call(this)),t.data&&(p=o.createFrame(t.data)),e&&"object"==typeof e)if(o.isArray(e))for(var u=e.length;l<u;l++)l in e&&k(l,l,l===e.length-1);else if(i.Symbol&&e[i.Symbol.iterator]){for(var c=[],m=e[i.Symbol.iterator](),f=m.next();!f.done;f=m.next())c.push(f.value);for(u=(e=c).length;l<u;l++)k(l,l,l===e.length-1)}else!function(){var t=void 0;Object.keys(e).forEach((function(e){void 0!==t&&k(t,l-1),t=e,l++})),void 0!==t&&k(t,l-1,!0)}();return 0===l&&(r=s(this)),r}))},e.exports=t.default}).call(this,n(1))},203:function(e,t,n){"use strict";t.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(24));t.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},e.exports=t.default},204:function(e,t,n){"use strict";t.__esModule=!0;var i=n(18),o=function(e){return e&&e.__esModule?e:{default:e}}(n(24));t.default=function(e){e.registerHelper("if",(function(e,t){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return i.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,n){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}))},e.exports=t.default},205:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)t.push(arguments[i]);var o=1;null!=n.hash.level?o=n.hash.level:n.data&&null!=n.data.level&&(o=n.data.level),t[0]=o,e.log.apply(e,t)}))},e.exports=t.default},206:function(e,t,n){"use strict";t.__esModule=!0;var i=/^(constructor|__defineGetter__|__defineSetter__|__lookupGetter__|__proto__)$/;t.dangerousPropertyRegex=i,t.default=function(e){e.registerHelper("lookup",(function(e,t){return e?!i.test(String(t))||Object.prototype.propertyIsEnumerable.call(e,t)?e[t]:void 0:e}))}},207:function(e,t,n){"use strict";t.__esModule=!0;var i=n(18),o=function(e){return e&&e.__esModule?e:{default:e}}(n(24));t.default=function(e){e.registerHelper("with",(function(e,t){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");i.isFunction(e)&&(e=e.call(this));var n=t.fn;if(i.isEmpty(e))return t.inverse(this);var a=t.data;return t.data&&t.ids&&((a=i.createFrame(t.data)).contextPath=i.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:a,blockParams:i.blockParams([e],[a&&a.contextPath])})}))},e.exports=t.default},208:function(e,t,n){"use strict";t.__esModule=!0,t.registerDefaultDecorators=function(e){i.default(e)};var i=function(e){return e&&e.__esModule?e:{default:e}}(n(209))},209:function(e,t,n){"use strict";t.__esModule=!0;var i=n(18);t.default=function(e){e.registerDecorator("inline",(function(e,t,n,o){var a=e;return t.partials||(t.partials={},a=function(o,a){var s=n.partials;n.partials=i.extend({},s,t.partials);var l=e(o,a);return n.partials=s,l}),t.partials[o.args[0]]=o.fn,a}))},e.exports=t.default},21:function(e,t,n){"use strict";const i=n(23),o=n(31),a=Array.prototype.push,s=Array.prototype.slice,l=i({constructor:function(e,t){this.update(e,t)},update:function(e,t){if(null!==e&&(this.start=e),null!==t&&(this.end=t),null===this.start||null===this.end||this.start>this.end)throw new Error(`invalid range: [${this.start}, ${this.end}]`);return this.length=this.end-this.start,this},copy:function(){return new l(this.start,this.end)},above:function(e){return!!e&&this.start>=e.end},below:function(e){return!!e&&this.end<=e.start},adjacent:function(e){return!!e&&(this.end===e.start||this.start===e.end)},intersects:function(e){return!!e&&(!this.above(e)&&!this.below(e))},contains:function(e){return!!e&&(this.start<=e.start&&this.end>=e.end)},contained:function(e){let t;if(!(t=e instanceof l?arguments:e))return!1;for(let e=0;void 0!==t[e];e++){const n=t[e];if(n.start<=this.start&&n.end>=this.end)return!0}return!1},fits:function(e,t){return!e&&!t||(e?t?this.start>=e.end&&this.end<=t.start:this.start>=e.end:this.end<=t.start)},between:function(e,t){return e||t?e?t?this.end>e.end&&this.start<t.start?new l(Math.max(e.end,this.start),Math.min(t.start,this.end)):null:this.end<=e.end?null:new l(Math.max(e.end,this.start),this.end):this.start>=t.start?null:new l(this.start,Math.min(this.end,t.start)):this.copy()},intersection:function(e){const t=[];let n;n=e instanceof l?arguments:e;for(let e=0;e<n.length;e++){const i=n[e];if(this.below(i))break;i.intersects(this)&&t.push(new l(Math.max(this.start,i.start),Math.min(this.end,i.end)))}return t},subtract:function(e){const t=[];let n;n=e instanceof l?arguments:e;for(let e=-1;e<n.length;e++){const i=n[e],o=n[e+1],a=this.between(i,o);a&&t.push(a)}return t},extract:function(e){const t=e instanceof l?s.call(arguments):e.slice();for(let e=0;e<t.length;e++){const n=t[e-1],i=t[e];let o=null;if(this.below(i))o=new l(i.start-this.length,i.end-this.length);else if(this.intersects(i)){const n=i.subtract(this);2===n.length?o=new l(n[0].start,n[1].end-this.length):1===n.length?i.end>this.end?o=new l(n[0].start-this.length,n[0].end-this.length):this.start>i.start&&(o=new l(n[0].start,n[0].end)):t.splice(e--,1)}else t.splice(e,1,i.copy());o&&(n&&n.end===o.start?t.splice(e---1,2,new l(n.start,o.end)):t.splice(e,1,o))}return t},insert:function(e){const t=e instanceof l?s.call(arguments):e.slice();for(let e=0;e<t.length;e++){const n=t[e];this.start>=n.end?t.splice(e,1,n.copy()):this.start>n.start&&this.start<n.end?t.splice(e,1,new l(n.start,this.start),new l(this.start,n.end)):t.splice(e,1,new l(n.start+this.length,n.end+this.length))}return this.merge(t)},merge:function(e){let t,n,i;if(!(t=o(t=e instanceof l?arguments:e,(function(e){return e.copy()}))).length)return[this.copy()];for(n=-1,i=t.length;n<i;n++){const e=t[n],i=t[n+1],o=this.between(e,i);o&&(!e&&i?o.end===i.start?i.update(o.start,i.end):(n++,t.unshift(o)):e&&i?e.end===o.start&&o.end===i.start?(e.update(e.start,i.end),t.splice(1+n--,1)):e.end===o.start?e.update(e.start,o.end):o.end===i.start?i.update(o.start,i.end):t.splice(n+1,0,o):e&&!i&&(e.end===o.start?e.update(e.start,o.end):(n++,t.push(o))))}return t},remove:function(e){let t;t=e instanceof l?arguments:e;const n=[];for(let e=0;e<t.length;e++){const i=t[e].subtract(this);i.length&&a.apply(n,i)}return n},toIndices:function(){const e=[];for(let t=this.start;t<this.end;t++)e.push(t);return e},toString:function(){return`${[this.start,this.end]}`}});l.fromString=function(e){const t=e.split(",");return new l(+t[0],+t[1])},l.fromIndices=function(e){e.sort((function(e,t){return e>t?1:-1}));const t=[];let n,i;for(let o=0;o<e.length;o++){for(i=n=e[o];e[o+1]-e[o]==1;)i=e[o+1],o++;t.push(new l(n,i+1))}return t},e.exports=l},210:function(e,t,n){"use strict";t.__esModule=!0;var i=n(18),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=i.indexOf(o.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=o.lookupLevel(e),"undefined"!=typeof console&&o.lookupLevel(o.level)<=e){var t=o.methodMap[e];console[t]||(t="log");for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];console[t].apply(console,i)}}};t.default=o,e.exports=t.default},211:function(e,t,n){"use strict";function i(e){this.string=e}t.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},t.default=i,e.exports=t.default},212:function(e,t,n){"use strict";t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=a.COMPILER_REVISION;if(t>=a.LAST_COMPATIBLE_COMPILER_REVISION&&t<=a.COMPILER_REVISION)return;if(t<a.LAST_COMPATIBLE_COMPILER_REVISION){var i=a.REVISION_CHANGES[n],s=a.REVISION_CHANGES[t];throw new o.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+s+").")}throw new o.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")},t.template=function(e,t){if(!t)throw new o.default("No environment passed to template");if(!e||!e.main)throw new o.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n=e.compiler&&7===e.compiler[0];var r={strict:function(e,t,n){if(!(e&&t in e))throw new o.default('"'+t+'" not defined in '+e,{loc:n});return e[t]},lookup:function(e,t){for(var n=e.length,i=0;i<n;i++)if(e[i]&&null!=e[i][t])return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:i.escapeExpression,invokePartial:function(n,a,s){s.hash&&(a=i.extend({},a,s.hash),s.ids&&(s.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,a,s);var l=i.extend({},s,{hooks:this.hooks}),r=t.VM.invokePartial.call(this,n,a,l);if(null==r&&t.compile&&(s.partials[s.name]=t.compile(n,e.compilerOptions,t),r=s.partials[s.name](a,l)),null!=r){if(s.indent){for(var p=r.split("\n"),d=0,k=p.length;d<k&&(p[d]||d+1!==k);d++)p[d]=s.indent+p[d];r=p.join("\n")}return r}throw new o.default("The partial "+s.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,i,o){var a=this.programs[e],s=this.fn(e);return t||o||i||n?a=l(this,e,s,t,n,i,o):a||(a=this.programs[e]=l(this,e,s)),a},data:function(e,t){for(;e&&t--;)e=e._parent;return e},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function d(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=n.data;d._setup(n),!n.partial&&e.useData&&(i=function(e,t){t&&"root"in t||((t=t?a.createFrame(t):{}).root=e);return t}(t,i));var o=void 0,s=e.useBlockParams?[]:void 0;function l(t){return""+e.main(r,t,r.helpers,r.partials,i,s,o)}return e.useDepths&&(o=n.depths?t!=n.depths[0]?[t].concat(n.depths):n.depths:[t]),(l=p(e.main,l,r,n.depths||[],i,s))(t,n)}return d.isTop=!0,d._setup=function(o){if(o.partial)r.helpers=o.helpers,r.partials=o.partials,r.decorators=o.decorators,r.hooks=o.hooks;else{r.helpers=i.extend({},t.helpers,o.helpers),e.usePartial&&(r.partials=i.extend({},t.partials,o.partials)),(e.usePartial||e.useDecorators)&&(r.decorators=i.extend({},t.decorators,o.decorators)),r.hooks={};var a=o.allowCallsToHelperMissing||n;s.moveHelperToHooks(r,"helperMissing",a),s.moveHelperToHooks(r,"blockHelperMissing",a)}},d._child=function(t,n,i,a){if(e.useBlockParams&&!i)throw new o.default("must pass block params");if(e.useDepths&&!a)throw new o.default("must pass parent depths");return l(r,t,e[t],n,0,i,a)},d},t.wrapProgram=l,t.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return e},t.invokePartial=function(e,t,n){var s=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var l=void 0;n.fn&&n.fn!==r&&function(){n.data=a.createFrame(n.data);var e=n.fn;l=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=a.createFrame(n.data),n.data["partial-block"]=s,e(t,n)},e.partials&&(n.partials=i.extend({},n.partials,e.partials))}();void 0===e&&l&&(e=l);if(void 0===e)throw new o.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=r;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(18)),o=function(e){return e&&e.__esModule?e:{default:e}}(n(24)),a=n(97),s=n(98);function l(e,t,n,i,o,a,s){function l(t){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],l=s;return!s||t==s[0]||t===e.nullContext&&null===s[0]||(l=[t].concat(s)),n(e,t,e.helpers,e.partials,o.data||i,a&&[o.blockParams].concat(a),l)}return(l=p(n,l,e,s,i,a)).program=t,l.depth=s?s.length:0,l.blockParams=o||0,l}function r(){return""}function p(e,t,n,o,a,s){if(e.decorator){var l={};t=e.decorator(t,l,n,o&&o[0],a,s,o),i.extend(t,l)}return t}},213:function(e,t,n){"use strict";(function(n){t.__esModule=!0,t.default=function(e){var t=void 0!==n?n:window,i=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=i),e}},e.exports=t.default}).call(this,n(1))},214:function(e,t,n){"use strict";const i={"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},typeof:function(e,t){return typeof e==t}};function o(e,t,n){const o=arguments[arguments.length-1],a=n!==o&&n?"==":o.hash.operator||"===";return i[a](e,t)?o.fn(this):o.inverse(this)}o.displayName="compare",e.exports=o},215:function(e,t,n){"use strict";const i=function(e){if(isNaN(e))return e;const t=Math.round(e/1e3);let n=Math.floor(t/3600),i=Math.floor(t%3600/60),o=Math.round(t%3600%60);return n?(n+=":",i<10&&(i=`0${i}`)):n="",o<10&&(o=`0${o}`),`${n+i}:${o}`};i.displayName="duration",e.exports=i},216:function(e,t,n){"use strict";(function(t){const i=n(99),o=!!t._getSpotifyModule,a=function(e){return o?e:i(e,"https://play.spotify.com")};a.displayName="href",e.exports=a}).call(this,n(1))},217:function(e,t,n){"use strict";const i=n(100),o=function(e){if(isNaN(e))return e;const t=Math.round(e/1e3),n=Math.floor(t/3600),o=Math.floor(t%3600/60),a=Math.round(t%3600%60);let s="";return n&&(s+=i("desktop.glue.HoursShort",n,{})),o&&(s+=" ",s+=i("desktop.glue.MinutesShort",o,{})),(!n&&!o||0===n&&o<10)&&(s+=" ",s+=i("desktop.glue.SecondsShort",a,{})),s.trim()};o.displayName="humanizeDuration",e.exports=o},218:function(e,t,n){"use strict";const i=n(31),o=n(51).default,a={},s=function(e){if(!e)return"";const t=Array.prototype.slice.call(arguments),n=t.pop(),s=t[1];return"reset"===e?(delete a[s],""):(s&&void 0===a[s]&&(a[s]=-1),i(e,(function(e,t){const i=o.createFrame(n.data||{});return i.index=s?++a[s]:t,i.number=i.index+1,i.localIndex=t,i.localNumber=t+1,n.fn(e,{data:i})})).join(n.hash&&n.hash.join||""))};s.displayName="list",e.exports=s},219:function(e,t,n){var i=n(53);e.exports=function(e){return i(e,"Number")}},22:function(e,t,n){"use strict";(function(e){const i=n(14)("bridge"),o=n(115),a=n(279);let s=!1,l=null;function r(){l||(l={});const e=[l,p];return a.apply(null,e.concat(Array.prototype.slice.call(arguments)))}function p(e,n,a){const l=n||[],r=function(e,t,n){const o=n||function(){};return function(n,a){if(n&&"timeout"===n.name){const a=300+Math.floor(100*Math.random());return i("timeout",n.message),void setTimeout((function(){p(e,t,o)}),a)}i(`res:${e}`,t,a),o(n,a)}}(e,l,a);return i(`req:${e}`,l),t._request(e,l,r),e.endsWith("_metadata")&&!s&&(s=!0,o(u)),t}function d(e){return function(t){let n;i("success",t);try{if(window.top&&window.top.initialState&&window.top.initialState.isPlaylistV2UriEnabled){const e=t.replace(/\:user\:([^:]+)\:playlist\:/g,":playlist:").replace(/\/user\/([^:]+)\/playlist\//g,"/playlist/");n=JSON.parse(e)}else n=JSON.parse(t);n&&e(null,n)}catch(t){e(t)}}}function k(e,t,n){return function(o){let a;i("failure",o);try{a=JSON.parse(o)}catch(t){o instanceof Error?e(o):(t.message+=`\nResponse Data: ${o}`,e(t))}a&&e(function(e,t,n){const i=JSON.stringify(t),o=` (bridge message: '${e}', args: ${i})`,a=n.message+o,s=new Error(a);return s.name=n.error,s}(t,n,a))}}function u(){s=!1,p("core_flush")}t.cosmos=r,t.cosmosJSON=function(e,t){e.body&&(e.body=JSON.stringify(e.body));const n=t?function(e){return function(t,n){let i=t;if(i)e(i,n);else{if(n&&!n.body&&n.status>=400)return i=new Error(`${n.uri} responded with status ${n.status}`),void e(i,n);let t;try{t=JSON.parse(n.body)}catch(t){return t.message=`Failed to parse cosmos response: ${t.message}`,void e(t)}e(null,t)}}}(t):null;return r(e,n)},t.request=p,t._request=function(t,n,i){e&&"function"==typeof e._getSpotifyModule&&e._getSpotifyModule("bridge").executeRequest(JSON.stringify({name:t,args:n}),{onSuccess:d(i),onFailure:k(i,t,n)})}}).call(this,n(1))},220:function(e,t,n){"use strict";const i=n(99),o=function(e){return i(e,"https://open.spotify.com")};o.displayName="share",e.exports=o},221:function(e,t,n){"use strict";const i=n(34),o=n(31),a=n(30),s=n(42),l=n(51).default,r=Array.prototype.slice,p=function(e){let t,n,p,d=e;return Array.isArray(d)?(a(r.call(arguments,1),(function(e){switch(i(e)){case"Number":null===t?t=e:null===n&&(n=e);break;case"Object":p=e}})),null!==t&&(d=d.slice(t,null!==n?n:d.length)),o(d,(function(e,t){const n=l.createFrame(p.data||{});return n.index=t,p.fn(e,{data:n})})).filter(e=>""!==e).join(s.getSeparator())):""};p.displayName="slice",e.exports=p},2234:function(e,t,n){"use strict";var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(198));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}n(2235);const a="lyrics",s=n(2),l=n(135);n(521).register(),l.attach(),l.update();const r=n(58),p=n(160),d=n(144),k=n(1076),u=k.appStrings();d.loc.register(u),d.numeral.setLocale(k.locale()),p.register(d);const c=n(2262),m=n(2263),f=n(2273);let g=!1;s("spotify:application").on("update",(function(e){void 0!==e.active&&s("spotify:application").query("arguments",(function(t,n){if(t)throw t;g||function(e){g=!0;const t=new c,i=new m(document.body,document.getElementById("message-container"),document.getElementById("error"),document.querySelector("div.lyrics-color-container")),o=new f(document.querySelector("div.lyrics-lines-container"),document.getElementById("attribution-container")),s={forceNoLyrics:!1,forceNoSyncLyrics:!1,forceOffline:!1},l={printLogs:!1},r={runVisualization:!0,highVisualizationFrameRate:!1,enableOptionsButton:!0};e.arguments&&(s.forceNoLyrics=-1!==e.arguments.indexOf("nolyrics"),s.forceNoSyncLyrics=-1!==e.arguments.indexOf("nosynclyrics"),s.forceOffline=-1!==e.arguments.indexOf("offline"),l.printLogs=-1!==e.arguments.indexOf("log"),r.highVisualizationFrameRate=-1!==e.arguments.indexOf("60fps"),r.noService=-1!==e.arguments.indexOf("noService")),i.init(r),o.init(s),t.start(),window.parent.postMessage({type:"notify_ready",pageId:"lyrics"},"*")}(n),r.dispatchEvent({type:"appActivated",params:{active:e.active}})}))}))},2235:function(e,t,n){},2236:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"الكلمات","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"كلمات الأغاني غير متوفرة بدون إنترنت","desktop.lyrics.app.offlineMessage":"يرجى الاتصال بشبكة الإنترنت للتحميل.","desktop.lyrics.app.errorTitle":"خطأ","desktop.lyrics.app.errorMessage":"عذراً! الكلمات غير متوفرة. يرجى المحاولة لاحقاً.","desktop.lyrics.app.noLyrics0":"حسناً. ولا نعرف الكلمات أيضاً.","desktop.lyrics.app.noLyrics1":"عذراً. يبدو أنه ليس لدينا كلمات لهذه الأغنية.","desktop.lyrics.app.noLyrics2":"عذراً، ما زلنا نعمل على حل هذا الأمر.","desktop.lyrics.app.noLyrics3":"نرجو تقبل اعتذارنا! عليك أن تخمّن كلمات هذه الأغنية بنفسك.","desktop.lyrics.app.contextMenuToolTip":"المزيد","desktop.lyrics.app.optionsButtonLabel":"خيارات","desktop.lyrics.app.optionsMenuToggleLabel":"شاشة خلفية محركة","desktop.lyrics.app.attributionText":"يتم توفير الكلمات من قبل ","desktop.lyrics.app.no_service_title":"الموسيقى ممتعة.","desktop.lyrics.app.no_service_body":"لمحبي كلمات الأغاني، نجري الآن بعض التحسينات الكبيرة، لذا فإنّ خاصية عرض كلمات الأغاني غير متوفرة حالياًً. ترقبوا التحديثات."}')},2237:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Text skladby","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Texty nejsou k dispozici offline","desktop.lyrics.app.offlineMessage":"Pro načtení přejdi prosím online.","desktop.lyrics.app.errorTitle":"Chyba","desktop.lyrics.app.errorMessage":"Je nám líto! Texty nejsou k dispozici. Zkus to prosím znovu.","desktop.lyrics.app.noLyrics0":"Hmmm. My text také neznáme.","desktop.lyrics.app.noLyrics1":"Jejda. Vypadá to, že text k téhle skladbě nemáme.","desktop.lyrics.app.noLyrics2":"Teď jsi nás načapal/a, pořád ještě na tom pracujeme.","desktop.lyrics.app.noLyrics3":"Moc se omlouváme! Text téhle skladby si budeš muset odposlechnout sám/sama.","desktop.lyrics.app.contextMenuToolTip":"dalších","desktop.lyrics.app.optionsButtonLabel":"Možnosti","desktop.lyrics.app.optionsMenuToggleLabel":"Animované pozadí","desktop.lyrics.app.attributionText":"Text ti přináší ","desktop.lyrics.app.no_service_title":"Broukání je zábava.","desktop.lyrics.app.no_service_body":"Zdravíme tě, fanoušku textů, právě provádíme výrazná vylepšení, naše funkce zobrazování textů proto momentálně není k dispozici. Sleduj, jak se bude situace vyvíjet."}')},2238:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Songtexte","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Songtexte offline nicht verfügbar","desktop.lyrics.app.offlineMessage":"Geh zum Laden online.","desktop.lyrics.app.errorTitle":"Fehler","desktop.lyrics.app.errorMessage":"Sorry, die Songtexte sind momentan nicht verfügbar. Versuche es später bitte noch einmal.","desktop.lyrics.app.noLyrics0":"Leider kennen wir den Songtext auch nicht.","desktop.lyrics.app.noLyrics1":"Leider haben wir den Text zu diesem Song nicht.","desktop.lyrics.app.noLyrics2":"Da hast Du uns eiskalt erwischt. Wir arbeiten noch daran.","desktop.lyrics.app.noLyrics3":"Leider ist der Text zu diesem Song nicht verfügbar.","desktop.lyrics.app.contextMenuToolTip":"Mehr","desktop.lyrics.app.optionsButtonLabel":"Optionen","desktop.lyrics.app.optionsMenuToggleLabel":"Animierter Hintergrund","desktop.lyrics.app.attributionText":"Songtexte bereitgestellt von ","desktop.lyrics.app.no_service_title":"Einfach mitsummen!","desktop.lyrics.app.no_service_body":"Du singst gern mit, wenn Du Musik hörst? Leider ist unser Feature für Songtexte derzeit nicht verfügbar, weil wir einige tolle Verbesserungen daran vornehmen. Bald gibt es weitere Informationen dazu."}')},2239:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Στίχοι","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Οι στίχοι δεν είναι διαθέσιμοι εκτός σύνδεσης","desktop.lyrics.app.offlineMessage":"Συνδέσου στο διαδίκτυο για να πραγματοποιηθεί φόρτωση.","desktop.lyrics.app.errorTitle":"Σφάλμα","desktop.lyrics.app.errorMessage":"Δυστυχώς, οι στίχοι δεν είναι διαθέσιμοι. Δοκίμασε ξανά.","desktop.lyrics.app.noLyrics0":"Χμ. Ούτε κι εμείς ξέρουμε τους στίχους.","desktop.lyrics.app.noLyrics1":"Ωχ! Όπως φαίνεται, δεν έχουμε τους στίχους για αυτό το τραγούδι.","desktop.lyrics.app.noLyrics2":"Μας τσάκωσες, δεν το έχουμε ακόμα έτοιμο.","desktop.lyrics.app.noLyrics3":"Άσχημα νέα! Θα πρέπει να μαντέψεις τους στίχους αυτού του τραγουδιού.","desktop.lyrics.app.contextMenuToolTip":"Περισσότερα","desktop.lyrics.app.optionsButtonLabel":"Επιλογές","desktop.lyrics.app.optionsMenuToggleLabel":"Κινούμενο φόντο","desktop.lyrics.app.attributionText":"Οι στίχοι παρέχονται από: ","desktop.lyrics.app.no_service_title":"Είναι ωραίο να σιγομουρμουρίζεις τα κομμάτια.","desktop.lyrics.app.no_service_body":"Για όλους τους φαν των στίχων, ετοιμάζουμε μεγάλες βελτιώσεις, γι\' αυτό και προς το παρόν η λειτουργία στίχων δεν είναι διαθέσιμη. Μείνετε συντονισμένοι για ενημερώσεις."}')},2240:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Lyrics","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Lyrics not Available Offline","desktop.lyrics.app.offlineMessage":"Please go online to load.","desktop.lyrics.app.errorTitle":"Error","desktop.lyrics.app.errorMessage":"Sorry! Lyrics not available. Please try again.","desktop.lyrics.app.noLyrics0":"Hmmm. We don’t know the lyrics either.","desktop.lyrics.app.noLyrics1":"Uh oh. It looks like we don’t have the lyrics to this song.","desktop.lyrics.app.noLyrics2":"You caught us, we’re still working on this one.","desktop.lyrics.app.noLyrics3":"So sorry! You’ll have to guess the lyrics for this one.","desktop.lyrics.app.contextMenuToolTip":"More","desktop.lyrics.app.optionsButtonLabel":"Options","desktop.lyrics.app.optionsMenuToggleLabel":"Animated Background","desktop.lyrics.app.attributionText":"Lyrics provided by ","desktop.lyrics.app.no_service_title":"Humming is fun.","desktop.lyrics.app.no_service_body":"Hey lyrics fans, we\'re making some big improvements, so our lyrics feature is unavailable right now. Stay tuned for updates."}')},2241:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Letra","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Las letras no están disponibles sin conexión","desktop.lyrics.app.offlineMessage":"Por favor, conéctate para cargar.","desktop.lyrics.app.errorTitle":"Error","desktop.lyrics.app.errorMessage":"Lo sentimos, pero no hemos podido acceder a las letras. Por favor, inténtalo de nuevo.","desktop.lyrics.app.noLyrics0":"Lo cierto es que nosotros tampoco sabemos la letra.","desktop.lyrics.app.noLyrics1":"¡Vaya! Parece que no tenemos la letra de esta canción.","desktop.lyrics.app.noLyrics2":"¡Nos has pillado! En esta todavía estamos trabajando.","desktop.lyrics.app.noLyrics3":"Lo sentimos mucho, pero la letra de esta vas a tener que adivinarla.","desktop.lyrics.app.contextMenuToolTip":"Más","desktop.lyrics.app.optionsButtonLabel":"Opciones","desktop.lyrics.app.optionsMenuToggleLabel":"Fondo animado","desktop.lyrics.app.attributionText":"Letra proporcionada por ","desktop.lyrics.app.no_service_title":"Tararear también es divertido.","desktop.lyrics.app.no_service_body":"Hola, amantes de las letras. Estamos de grandes reformas, por lo que nuestra función Letras no está disponible en estos momentos. ¡Pronto habrá novedades!"}')},2242:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Letras","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Letras no disponibles sin conexión","desktop.lyrics.app.offlineMessage":"Conéctate a la red para cargar.","desktop.lyrics.app.errorTitle":"Error","desktop.lyrics.app.errorMessage":"Lo sentimos, las letras no están disponibles. Inténtalo de nuevo.","desktop.lyrics.app.noLyrics0":"Mmmm. Nosotros tampoco sabemos la letra.","desktop.lyrics.app.noLyrics1":"Oh, oh. Parece que no tenemos la letra de esta canción.","desktop.lyrics.app.noLyrics2":"¡Nos atrapaste! Todavía estamos trabajando en esto.","desktop.lyrics.app.noLyrics3":"¡Lo sentimos! Tendrás que adivinar la letra para esta canción.","desktop.lyrics.app.contextMenuToolTip":"Más","desktop.lyrics.app.optionsButtonLabel":"Opciones","desktop.lyrics.app.optionsMenuToggleLabel":"Fondo animado","desktop.lyrics.app.attributionText":"Letras proporcionadas por ","desktop.lyrics.app.no_service_title":"Tararear es divertido.","desktop.lyrics.app.no_service_body":"¡Atención fans de las letras! La funcionalidad Letras no está disponible en este momento porque estamos trabajando para incorporar grandes mejoras. ¡No se pierdan las próximas actualizaciones!"}')},2243:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Sanat","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Sanat eivät ole käytettävissä offline-tilassa","desktop.lyrics.app.offlineMessage":"Siirry online-tilaan, jotta voit ladata.","desktop.lyrics.app.errorTitle":"Virhe","desktop.lyrics.app.errorMessage":"Valitettavasti sanoja ei ole saatavilla. Yritä uudelleen.","desktop.lyrics.app.noLyrics0":"Hmm. Mekään emme tiedä sanoja.","desktop.lyrics.app.noLyrics1":"Hupsista. Näyttää siltä, ettei meillä ole sanoja tähän kappaleeseen.","desktop.lyrics.app.noLyrics2":"Kiinni jäimme, tämä on edelleen työn alla.","desktop.lyrics.app.noLyrics3":"Pahoittelumme! Sinun on vain koetettava arvata tämän kappaleen sanat.","desktop.lyrics.app.contextMenuToolTip":"Lisää","desktop.lyrics.app.optionsButtonLabel":"Vaihtoehdot","desktop.lyrics.app.optionsMenuToggleLabel":"Animoitu tausta","desktop.lyrics.app.attributionText":"Sanat tarjoaa ","desktop.lyrics.app.no_service_title":"Hyräilykin on kivaa.","desktop.lyrics.app.no_service_body":"Hei sanoitusten ystävä, teemme juuri isoja päivityksiä, joten sanat-ominaisuus ei tällä hetkellä ole käytössä. Pysy kuulolla."}')},2244:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Paroles","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Les paroles ne sont pas disponibles hors connexion.","desktop.lyrics.app.offlineMessage":"Connectez-vous pour procéder au chargement.","desktop.lyrics.app.errorTitle":"Erreur","desktop.lyrics.app.errorMessage":"Désolé, les paroles ne sont pas disponibles. Merci de réessayer plus tard.","desktop.lyrics.app.noLyrics0":"Hmmm. Nous ne connaissons pas non plus les paroles.","desktop.lyrics.app.noLyrics1":"Oups. Il semble que nous ne disposions pas des paroles de cette chanson.","desktop.lyrics.app.noLyrics2":"Vous nous avez pris de court. Nous cherchons toujours une solution à ce problème.","desktop.lyrics.app.noLyrics3":"Nous sommes vraiment désolés ! Vous allez devoir deviner les paroles de ce titre.","desktop.lyrics.app.contextMenuToolTip":"Plus","desktop.lyrics.app.optionsButtonLabel":"Options","desktop.lyrics.app.optionsMenuToggleLabel":"Arrière-plan animé","desktop.lyrics.app.attributionText":"Paroles fournies par ","desktop.lyrics.app.no_service_title":"Le plaisir de fredonner.","desktop.lyrics.app.no_service_body":"Chers utilisateurs, nous apportons d\'importantes améliorations à la fonctionnalité Paroles, c\'est pourquoi elle est momentanément indisponible. Restez à l\'affût des mises à jour !"}')},2245:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Paroles","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Paroles non disponibles hors ligne","desktop.lyrics.app.offlineMessage":"Veuillez accéder à Internet pour charger le contenu.","desktop.lyrics.app.errorTitle":"Erreur","desktop.lyrics.app.errorMessage":"Nous sommes désolés! Les paroles ne sont pas disponibles. Veuillez réessayer.","desktop.lyrics.app.noLyrics0":"Hum! Nous ignorons également les paroles.","desktop.lyrics.app.noLyrics1":"Oh oh. Il semble que nous n\'avons pas les paroles de cette chanson.","desktop.lyrics.app.noLyrics2":"Vous nous avez devancés, nous travaillons encore sur celles-ci.","desktop.lyrics.app.noLyrics3":"Nous sommes vraiment désolés! Vous devrez deviner ces paroles-ci.","desktop.lyrics.app.contextMenuToolTip":"Plus","desktop.lyrics.app.optionsButtonLabel":"Options","desktop.lyrics.app.optionsMenuToggleLabel":"Arrière-plan animé","desktop.lyrics.app.attributionText":"Paroles fournies par ","desktop.lyrics.app.no_service_title":"On s\'amuse à fredonner.","desktop.lyrics.app.no_service_body":"Hey les amateurs de paroles, nous apportons de nettes améliorations, notre fonctionnalité de paroles n\'est pas disponible pour le moment. Reste à l\'écoute pour connaître les mises à jour."}')},2246:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"מילים","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"המילים לא זמינות במצב לא מקוון","desktop.lyrics.app.offlineMessage":"התחברו לאינטרנט כדי לטעון.","desktop.lyrics.app.errorTitle":"שגיאה","desktop.lyrics.app.errorMessage":"מצטערים! המילים לא זמינות. נסו שוב.","desktop.lyrics.app.noLyrics0":"המממ. גם אנחנו לא יודעים את המילים.","desktop.lyrics.app.noLyrics1":"אוי, לא. נראה שאין לנו את המילים של השיר הזה.","desktop.lyrics.app.noLyrics2":"נתפסנו על חם. אנחנו עדיין עובדים על זה.","desktop.lyrics.app.noLyrics3":"מצטערים. תיאלצו לנחש את המילים לשיר הזה.","desktop.lyrics.app.contextMenuToolTip":"עוד...","desktop.lyrics.app.optionsButtonLabel":"אפשרויות","desktop.lyrics.app.optionsMenuToggleLabel":"רקע עם אנימציה","desktop.lyrics.app.attributionText":"המילים סופקו על ידי ","desktop.lyrics.app.no_service_title":"להמהם זה כיף.","desktop.lyrics.app.no_service_body":"שלום, חובבי מילים. אנחנו מוסיפים כמה שיפורים משמעותיים, לכן התכונה של המילים לא זמינה כרגע. המשיכו לעקוב אחר העדכונים."}')},2247:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Dalszöveg","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"A dalszöveg offline módban nem érhető el","desktop.lyrics.app.offlineMessage":"Csatlakozz az internethez, majd indítsd el.","desktop.lyrics.app.errorTitle":"Hiba","desktop.lyrics.app.errorMessage":"Sajnáljuk, a dalszöveg nem érhető el. Próbálkozz újra.","desktop.lyrics.app.noLyrics0":"Hmmm. Ennek a dalnak a szövegét mi sem tudjuk.","desktop.lyrics.app.noLyrics1":"Ajjaj... Úgy tűnik, ehhez a számhoz nincs meg a dalszöveg.","desktop.lyrics.app.noLyrics2":"Most lebuktunk. Ezen a dalszövegen még dolgozunk.","desktop.lyrics.app.noLyrics3":"Ezer bocs! Ehhez a számhoz neked kell kihallanod a dalszöveget.","desktop.lyrics.app.contextMenuToolTip":"Több","desktop.lyrics.app.optionsButtonLabel":"Opciók","desktop.lyrics.app.optionsMenuToggleLabel":"Mozgó háttér","desktop.lyrics.app.attributionText":"Dalszöveg: ","desktop.lyrics.app.no_service_title":"Dúdolni jó.","desktop.lyrics.app.no_service_body":"Dalszövegek szerelmesei! Nagy változtatásokat végzünk, ezért nem érhető el most a dalszöveg funkció. Hamarosan többet is elárulunk."}')},2248:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Lirik","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Lirik tidak Tersedia Offline","desktop.lyrics.app.offlineMessage":"Alihkan ke online untuk memuat.","desktop.lyrics.app.errorTitle":"Kesalahan","desktop.lyrics.app.errorMessage":"Maaf! Lirik tidak tersedia. Silakan coba lagi.","desktop.lyrics.app.noLyrics0":"Hmmm. Kami juga tidak tahu liriknya.","desktop.lyrics.app.noLyrics1":"Aduh. Kelihatannya kami tidak memiliki lirik lagu ini.","desktop.lyrics.app.noLyrics2":"Kamu menangkap basah kami, kami masih mengerjakannya.","desktop.lyrics.app.noLyrics3":"Maaf! Kamu harus menebak lirik lagu ini.","desktop.lyrics.app.contextMenuToolTip":"Lainnya","desktop.lyrics.app.optionsButtonLabel":"Opsi","desktop.lyrics.app.optionsMenuToggleLabel":"Latar Belakang Bergerak","desktop.lyrics.app.attributionText":"Lirik disediakan oleh ","desktop.lyrics.app.no_service_title":"Bersenandung itu menyenangkan.","desktop.lyrics.app.no_service_body":"Hai para penggemar lirik, kami membuat sejumlah peningkatan besar, jadi saat ini fitur lirik kami tidak tersedia. Nantikan informasi selanjutnya."}')},2249:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Testo","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Testo non disponibile offline","desktop.lyrics.app.offlineMessage":"Passa online per caricare.","desktop.lyrics.app.errorTitle":"Errore","desktop.lyrics.app.errorMessage":"Ci dispiace, il testo non è disponibile. Riprova.","desktop.lyrics.app.noLyrics0":"Ci dispiace, anche noi non sappiamo il testo.","desktop.lyrics.app.noLyrics1":"Ci dispiace, il testo per questa canzone non è disponibile.","desktop.lyrics.app.noLyrics2":"Stiamo lavorando per aggiungerlo.","desktop.lyrics.app.noLyrics3":"Ci dispiace, per questo brano dovrai indovinare le parole.","desktop.lyrics.app.contextMenuToolTip":"Più","desktop.lyrics.app.optionsButtonLabel":"Opzioni","desktop.lyrics.app.optionsMenuToggleLabel":"Sfondo animato","desktop.lyrics.app.attributionText":"Testi forniti da ","desktop.lyrics.app.no_service_title":"Canticchiare è divertente.","desktop.lyrics.app.no_service_body":"Ciao appassionati di testi. Al momento la funzione non è disponibile perché stiamo lavorando per migliorarla. Avrete presto novità."}')},2250:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"歌詞","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"オフラインでは歌詞が表示されません","desktop.lyrics.app.offlineMessage":"読み込むには、インターネットに接続してください。","desktop.lyrics.app.errorTitle":"エラー","desktop.lyrics.app.errorMessage":"歌詞がありません。もう一度試してください。","desktop.lyrics.app.noLyrics0":"この曲の歌詞に関しては現在確認中です。","desktop.lyrics.app.noLyrics1":"この曲の歌詞に関しては現在確認中です。","desktop.lyrics.app.noLyrics2":"この曲の歌詞に関しては現在確認中です。","desktop.lyrics.app.noLyrics3":"この曲の歌詞に関しては現在確認中です。","desktop.lyrics.app.contextMenuToolTip":"詳細","desktop.lyrics.app.optionsButtonLabel":"オプション","desktop.lyrics.app.optionsMenuToggleLabel":"ライブ壁紙","desktop.lyrics.app.attributionText":"歌詞提供： ","desktop.lyrics.app.no_service_title":"鼻歌は楽しいですよ。","desktop.lyrics.app.no_service_body":"歌詞ファンの皆さん、Spotify でいくつかの大きな変更を行っているため、現在、歌詞機能はご利用できません。アップデートをお待ちください。"}')},2251:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"가사","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"가사는 오프라인으로 사용할 수 없음","desktop.lyrics.app.offlineMessage":"로드하려면 인터넷에 연결하세요.","desktop.lyrics.app.errorTitle":"오류","desktop.lyrics.app.errorMessage":"죄송합니다! 가사를 사용할 수 없습니다. 다시 시도하세요.","desktop.lyrics.app.noLyrics0":"음. 저희도 가사를 모르겠네요.","desktop.lyrics.app.noLyrics1":"이런. 이 노래의 가사는 없는 듯합니다.","desktop.lyrics.app.noLyrics2":"들켜버렸네요. 이 가사는 아직 구하고 있는 중입니다.","desktop.lyrics.app.noLyrics3":"정말 죄송합니다! 이 곡의 가사는 추측으로 알아내셔야 합니다.","desktop.lyrics.app.contextMenuToolTip":"더 보기","desktop.lyrics.app.optionsButtonLabel":"옵션","desktop.lyrics.app.optionsMenuToggleLabel":"애니메이션 백그라운드","desktop.lyrics.app.attributionText":"가사 제공: ","desktop.lyrics.app.no_service_title":"흥얼거리는 것도 재미있어요.","desktop.lyrics.app.no_service_body":"가사 이용자 여러분, 대대적인 개선 작업 중이기 때문에 지금은 가사 기능을 사용할 수 없습니다. 업데이트를 기대해주세요."}')},2252:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Songteksten","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Songteksten niet offline beschikbaar","desktop.lyrics.app.offlineMessage":"Ga online om te laden.","desktop.lyrics.app.errorTitle":"Fout","desktop.lyrics.app.errorMessage":"Helaas, er zijn geen songteksten beschikbaar. Probeer het later opnieuw.","desktop.lyrics.app.noLyrics0":"Hmmm. Deze teksten kennen we ook niet.","desktop.lyrics.app.noLyrics1":"Uh-oh! We hebben geen songteksten voor dit nummer.","desktop.lyrics.app.noLyrics2":"Ja, goed gezien. We werken hier nog aan.","desktop.lyrics.app.noLyrics3":"Sorry, helaas hebben we deze lyrics niet.","desktop.lyrics.app.contextMenuToolTip":"Meer","desktop.lyrics.app.optionsButtonLabel":"Opties","desktop.lyrics.app.optionsMenuToggleLabel":"Geanimeerde achtergrond","desktop.lyrics.app.attributionText":"Songteksten aangeleverd door ","desktop.lyrics.app.no_service_title":"Neuriën is leuk.","desktop.lyrics.app.no_service_body":"Voor de fans van songteksten zijn we een aantal grote verbeteringen aan het doorvoeren. Onze songtekstenfunctie is daarom nu niet beschikbaar. Blijf ons volgen voor updates."}')},2253:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Teksty","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Teksty są niedostępne offline","desktop.lyrics.app.offlineMessage":"Przejdź do trybu online, aby załadować.","desktop.lyrics.app.errorTitle":"Błąd","desktop.lyrics.app.errorMessage":"Niestety, tekst jest niedostępny. Spróbuj ponownie.","desktop.lyrics.app.noLyrics0":"Hmmm. My też nie znamy tekstu.","desktop.lyrics.app.noLyrics1":"Och nie. Wygląda na to, że nie mamy tekstu tego utworu.","desktop.lyrics.app.noLyrics2":"Niestety, ciągle nad tym pracujemy.","desktop.lyrics.app.noLyrics3":"Tak nam przykro! Wygląda na to, że musisz odgadnąć tekst tego utworu.","desktop.lyrics.app.contextMenuToolTip":"Więcej","desktop.lyrics.app.optionsButtonLabel":"Opcje","desktop.lyrics.app.optionsMenuToggleLabel":"Animowane tło","desktop.lyrics.app.attributionText":"Teksty udostępniane przez ","desktop.lyrics.app.no_service_title":"Wszyscy lubimy nucić.","desktop.lyrics.app.no_service_body":"Hej miłośnicy tekstów piosenek, właśnie pracujemy nad ulepszeniami, więc chwilowo ta funkcja nie jest dostępna."}')},2254:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Letra","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Letra não disponível offline","desktop.lyrics.app.offlineMessage":"Fique online para carregar.","desktop.lyrics.app.errorTitle":"Erro","desktop.lyrics.app.errorMessage":"Desculpe! A letra não está disponível. Tente de novo.","desktop.lyrics.app.noLyrics0":"Hummm. A gente também não sabe essa letra.","desktop.lyrics.app.noLyrics1":"Eita. Parece que a gente não tem a letra dessa música.","desktop.lyrics.app.noLyrics2":"Vixe! Ainda estamos trabalhando nessa.","desktop.lyrics.app.noLyrics3":"Foi mal! Parece que você vai ter que improvisar dessa vez.","desktop.lyrics.app.contextMenuToolTip":"Mais","desktop.lyrics.app.optionsButtonLabel":"Opções","desktop.lyrics.app.optionsMenuToggleLabel":"Fundo animado","desktop.lyrics.app.attributionText":"Letra disponibilizada por ","desktop.lyrics.app.no_service_title":"Cantarolar sem a letra também é divertido.","desktop.lyrics.app.no_service_body":"Fãs de letras, estamos fazendo melhorias muito legais, por isso esse recurso não está disponível. Fiquem de olho nas atualizações."}')},2255:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Текст","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Текст недоступен в офлайн-режиме","desktop.lyrics.app.offlineMessage":"Подключись к интернету.","desktop.lyrics.app.errorTitle":"Ошибка","desktop.lyrics.app.errorMessage":"Текст недоступен. Попробуй позже.","desktop.lyrics.app.noLyrics0":"Ну и дела! Мы тоже не знаем текста этой песни.","desktop.lyrics.app.noLyrics1":"Похоже, у нас нет текста этой песни.","desktop.lyrics.app.noLyrics2":"Увы! Этого текста у нас еще нет.","desktop.lyrics.app.noLyrics3":"Тысяча извинений! Текст этой песни пока недоступен.","desktop.lyrics.app.contextMenuToolTip":"Еще","desktop.lyrics.app.optionsButtonLabel":"Параметры","desktop.lyrics.app.optionsMenuToggleLabel":"Анимированный фон","desktop.lyrics.app.attributionText":"С разрешения: ","desktop.lyrics.app.no_service_title":"Тексты пока недоступны","desktop.lyrics.app.no_service_body":"Ведутся работы по улучшению функции. Проход к текстам песен временно перекрыт. Следи за новостями."}')},2256:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Låttexter","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Låttexter är inte tillgängliga offline","desktop.lyrics.app.offlineMessage":"Anslut till internet om du vill läsa in appen.","desktop.lyrics.app.errorTitle":"Fel","desktop.lyrics.app.errorMessage":"Den här låttexten är tyvärr inte tillgänglig. Försök igen.","desktop.lyrics.app.noLyrics0":"Hm … Vi kan inte heller låttexten.","desktop.lyrics.app.noLyrics1":"Oj då. Vi verkar inte ha texten till den här låten.","desktop.lyrics.app.noLyrics2":"Du kom på oss. Vi är inte klara här än.","desktop.lyrics.app.noLyrics3":"Beklagar! Du får gissa texten till den här låten.","desktop.lyrics.app.contextMenuToolTip":"Mer","desktop.lyrics.app.optionsButtonLabel":"Alternativ","desktop.lyrics.app.optionsMenuToggleLabel":"Animerad bakgrund","desktop.lyrics.app.attributionText":"Låttexter från ","desktop.lyrics.app.no_service_title":"Det är kul att nynna.","desktop.lyrics.app.no_service_body":"Hej alla låttextfans! Vi gör förbättringar så låttextfunktionen är inte tillgänglig just nu. Men kom ihåg att kolla efter uppdateringar."}')},2257:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"เนื้อเพลง","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"เนื้อเพลงไม่สามารถใช้งานขณะออฟไลน์ได้","desktop.lyrics.app.offlineMessage":"โปรดใช้งานแบบออนไลน์เพื่อโหลด","desktop.lyrics.app.errorTitle":"ผิดพลาด","desktop.lyrics.app.errorMessage":"ขออภัย เนื้อเพลงไม่พร้อมใช้งาน โปรดลองอีกครั้ง","desktop.lyrics.app.noLyrics0":"อืมม เราก็ไม่รู้เนื้อเพลงนี้เหมือนกัน","desktop.lyrics.app.noLyrics1":"โอ๊ะโอ ดูเหมือนว่าเราจะไม่มีเนื้อเพลงของเพลงนี้","desktop.lyrics.app.noLyrics2":"โดนจับได้ซะแล้วว่าเรายังจัดการตรงนี้ไม่เสร็จ","desktop.lyrics.app.noLyrics3":"ขออภัยอย่างยิ่ง! คุณคงต้องเดาเนื้อเพลงนี้ไปก่อน","desktop.lyrics.app.contextMenuToolTip":"เพิ่มเติม","desktop.lyrics.app.optionsButtonLabel":"ตัวเลือก","desktop.lyrics.app.optionsMenuToggleLabel":"ภาพพื้นหลังเคลื่อนไหวได้","desktop.lyrics.app.attributionText":"เนื้อเพลงป้อนโดย ","desktop.lyrics.app.no_service_title":"ฮัมเพลงก็สนุกดี","desktop.lyrics.app.no_service_body":"สวัสดีเพื่อนๆ ที่ชอบดูเนื้อเพลง เรากำลังทำการปรับปรุงครั้งใหญ่ เนื้อเพลงจึงไม่พร้อมให้บริการในขณะนี้ โปรดคอยติดตามการอัพเดต"}')},2258:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Şarkı sözleri","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Şarkı Sözlerine Çevrimdışı Ulaşılamaz","desktop.lyrics.app.offlineMessage":"Yüklemek için lütfen çevrimiçi ol.","desktop.lyrics.app.errorTitle":"Hata","desktop.lyrics.app.errorMessage":"Üzgünüz! Şarkı sözleri mevcut değil. Lütfen tekrar dene.","desktop.lyrics.app.noLyrics0":"Hmmm. Biz de şarkı sözlerini bilmiyoruz.","desktop.lyrics.app.noLyrics1":"Eyvah. Görünüşe göre bu şarkı için şarkı sözlerine sahip değiliz.","desktop.lyrics.app.noLyrics2":"Bizi yakaladın, hala bunun üzerinde çalışıyoruz.","desktop.lyrics.app.noLyrics3":"Çok üzgünüz! Bu şarkı için şarkı sözlerini tahmin etmen gerekecek.","desktop.lyrics.app.contextMenuToolTip":"Daha fazla","desktop.lyrics.app.optionsButtonLabel":"Seçenekler","desktop.lyrics.app.optionsMenuToggleLabel":"Animasyonlu Arka Plan","desktop.lyrics.app.attributionText":"Şarkı sözlerini sağlayan ","desktop.lyrics.app.no_service_title":"Mırıldanmak eğlencelidir.","desktop.lyrics.app.no_service_body":"Şarkı sözü tutkunları için büyük yenilikler yapıyoruz, bu yüzden şarkı sözü özelliğimiz şu anda kullanılamıyor. Güncellemeleri bekleyin."}')},2259:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Lời bài hát","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Lời bài hát không có ở chế độ Offline","desktop.lyrics.app.offlineMessage":"Vui lòng truy cập trực tuyến để tải.","desktop.lyrics.app.errorTitle":"Lỗi","desktop.lyrics.app.errorMessage":"Rất tiếc! Không có lời bài hát. Vui lòng thử lại.","desktop.lyrics.app.noLyrics0":"Hmmm. Chúng tôi cũng chưa có lời bài hát.","desktop.lyrics.app.noLyrics1":"Ồ. Có vẻ như chúng tôi chưa có lời của bài hát này.","desktop.lyrics.app.noLyrics2":"Bạn thấy đấy, chúng tôi vẫn đang khắc phục vấn đề này.","desktop.lyrics.app.noLyrics3":"Rất tiếc! Bạn sẽ phải đoán lời bài hát này thôi.","desktop.lyrics.app.contextMenuToolTip":"Chi tiết","desktop.lyrics.app.optionsButtonLabel":"Các tùy chọn","desktop.lyrics.app.optionsMenuToggleLabel":"Nền Động","desktop.lyrics.app.attributionText":"Lời bài hát được cung cấp bởi ","desktop.lyrics.app.no_service_title":"Ngâm nga thật vui.","desktop.lyrics.app.no_service_body":"Này các fan của lời bài hát, chúng tôi đang thực hiện những cải tiến lớn, do vậy tính năng lời bài hát của chúng tôi hiện chưa có. Hãy kiên nhẫn chờ cập nhật."}')},2260:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"歌詞","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"離線時不顯示歌詞","desktop.lyrics.app.offlineMessage":"請上網以載入。","desktop.lyrics.app.errorTitle":"錯誤","desktop.lyrics.app.errorMessage":"很抱歉！沒顯示歌詞。請再試一次。","desktop.lyrics.app.noLyrics0":"嗯，我們也不曉得歌詞。","desktop.lyrics.app.noLyrics1":"哎呀。看來我們沒有這首歌的歌詞。","desktop.lyrics.app.noLyrics2":"被你抓到了，我們確實還在努力完成這部分。","desktop.lyrics.app.noLyrics3":"真抱歉！你可能得猜這首歌的歌詞了。","desktop.lyrics.app.contextMenuToolTip":"更多","desktop.lyrics.app.optionsButtonLabel":"選項","desktop.lyrics.app.optionsMenuToggleLabel":"動畫背景","desktop.lyrics.app.attributionText":"歌詞提供者： ","desktop.lyrics.app.no_service_title":"跟著哼唱很好玩。","desktop.lyrics.app.no_service_body":"各位歌詞的愛好者們，由於我們目前正進行一些重大改進，歌詞功能暫時無法使用。敬請隨時注意最新消息。"}')},2261:function(e){e.exports=JSON.parse('{"desktop.lyrics.app.name":"Lirik","desktop.lyrics.app.description":"APP-SKELETON-ID","desktop.lyrics.app.offlineTitle":"Lirik tidak Tersedia di Luar Talian","desktop.lyrics.app.offlineMessage":"Sila ke online untuk memuatkan.","desktop.lyrics.app.errorTitle":"Ralat","desktop.lyrics.app.errorMessage":"Maaf! Lirik tidak tersedia. Sila cuba lagi.","desktop.lyrics.app.noLyrics0":"Hmm. Kami pun tidak tahu liriknya.","desktop.lyrics.app.noLyrics1":"Alamak. Nampaknya kami tiada lirik untuk lagu ini.","desktop.lyrics.app.noLyrics2":"Kami mengaku, kami masih berusaha untuk yang ini.","desktop.lyrics.app.noLyrics3":"Maaf! Anda perlu meneka lirik untuk lagu ini.","desktop.lyrics.app.contextMenuToolTip":"Lebih banyak","desktop.lyrics.app.optionsButtonLabel":"Pilihan","desktop.lyrics.app.optionsMenuToggleLabel":"Latar Belakang Animasi","desktop.lyrics.app.attributionText":"Lirik disediakan oleh ","desktop.lyrics.app.no_service_title":"Bersenandung adalah menyeronokkan.","desktop.lyrics.app.no_service_body":"Hei peminat lirik, kami sedang membuat beberapa penambahbaikan yang besar, jadi ciri lirik kami tidak tersedia pada masa ini. Nantikan maklumat terkini."}')},2262:function(e,t,n){"use strict";const i=n(11).default,o=n(58);function a(){this._onCosmosEvent=this._onCosmosEvent.bind(this)}a.prototype.start=function(){i.resolver.subscribe("sp://player/v2/main",this._onCosmosEvent)},a.prototype.stop=function(){i.resolver.unsubscribe("sp://player/v2/main",this._onCosmosEvent)},a.prototype._onCosmosEvent=function(e,t){if(e)return;const n=t.getJSONBody();n.track&&"ad"===n.track.provider?o.dispatchEvent({type:"adPlayback",params:n}):n.track&&n.track.metadata&&o.dispatchEvent({type:"updateTrack",params:n})},e.exports=a},2263:function(e,t,n){"use strict";const i=n(58),o=n(11).default,a=n(2264),s=n(2265),r=n(1076),d=n(2266);function u(e,t,n,o){this.background=e,this.messageContainer=t,this.errorContainer=n,this.active=null,this.playing=null,this.track=null,this.errorView=null,this._currentProgress=null,this._playback_id=null,this._progressInterval=null,this._lyricsInterval=null,this._lastPlayTime=Date.now(),this._lastTrackTimestamp=0,this.forceNoService=null}u.prototype.init=function(e){this.options="object"==typeof e?e:{},this.track=new a,i.addEventListener("updateTrack",this._updateTrack.bind(this)),i.addEventListener("appActivated",this._handleAppActivation.bind(this)),i.addEventListener("adPlayback",this._clearTrack.bind(this)),i.addEventListener("forceError",this._createNoServiceMessage.bind(this))},
u.prototype._createNoServiceMessage=function(e){
    this.noServiceView||(this.noServiceView=new d(this.messageContainer));
    this.messageContainer.classList.remove("hidden");
    this.noServiceView.render(e.params.title, e.params.message);
},u.prototype._updateTrackNoService=function(e){const t=e.params;this.track.update(t.track,t.track.metadata,t.duration)},
u.prototype._updateTrack=async function(e){
    if(!(e&&e.params&&e.params.track&&this.active)){
        return;
    }
    this.messageContainer.classList.add("hidden");
    const t=e.params;
    if(this.errorContainer&&this._hideError(),this.playing=this._isPlaying(t),this.playing?this._startLyricsInterval():this._stopLyricsInterval(),this._lastPlayTime=Date.now(),this._lastTrackTimestamp=t.position_as_of_timestamp,this._playback_id===t.playback_id&&this._playback_id) {
        i.dispatchEvent({
            type:"updateLyricsDisplay",
            params: {lastTrackTimestamp: this._lastTrackTimestamp}
        });
    } else {
        this._playback_id = t.playback_id;
        this.track.update(t.track,t.track.metadata, t.duration);
        i.dispatchEvent({
            type:"fetchLyrics",
            params: {
                uri: this.track.uri,
                artist: this.track.artist_name,
                title: this.track.title,
                album: this.track.album,
                duration: this.track.duration,
            }
        });
    }
},
u.prototype._clearTrack=function(){this.track.update()},u.prototype._startLyricsInterval=function(){clearInterval(this._lyricsInterval),this._lyricsInterval=setInterval(this._handleLyricsInterval.bind(this),100)},u.prototype._stopLyricsInterval=function(){return clearInterval(this._lyricsInterval)},u.prototype._isPlaying=function(e){return!e.is_paused&&e.is_playing},u.prototype._updateCurrentProgress=function(e){const t=e||Date.now();this.playing&&this._setCurrentProgress(this._lastTrackTimestamp+(t-this._lastPlayTime))},u.prototype._handleLyricsInterval=function(){this._updateCurrentProgress(),i.dispatchEvent({type:"checkLyricsIndex",params:{currentProgress:this._currentProgress,trackUri:this.track.uri}})},u.prototype._setCurrentProgress=function(e){let t=e;t>this.track.duration&&(t=this.track.duration),t<0&&(t=0),this._currentProgress=t},u.prototype._handleAppActivation=function(e){if(!(e&&e.params&&e.params.active))return this.active=!1,this._stopLyricsInterval();e.params.active&&(this.active=!0,o.resolver.get("sp://player/v2/main/state",this._handleActiveState.bind(this)))},u.prototype._handleActiveState=function(e,t){if(e)return;if(!this.track)return void this._showError();this._hideError();const n=JSON.parse(t.toJSON().body),o=n.timestamp;n.position_as_of_timestamp=n.position_as_of_timestamp+Date.now()-o,i.dispatchEvent({type:"updateTrack",params:n})},u.prototype._showError=function(){this.errorView||(this.errorView=new s(this.errorContainer)),this.errorView.update({errorTitle:r.get("desktop.lyrics.app.errorTitle"),errorMessage:r.get("desktop.lyrics.app.errorMessage")}),this.errorView.show()},u.prototype._hideError=function(){this.errorView||(this.errorView=new s(this.errorContainer)),this.errorView.hide()},e.exports=u},2264:function(e,t,n){"use strict";function i(){this.uri=null,this.title=null,this.artist_name=null,this.artist_uri=null,this.album=null,this.duration=0}i.prototype.update=function(e,t,n){const i=e||{},o=t||{},a=void 0!==n?n:0;this.uri=i.uri,this.title=o.title,this.artist_name=o.artist_name,this.artist_uri=o.artist_uri,this.album=o.album_title,this.duration=a},e.exports=i},2265:function(e,t,n){"use strict";const i=n(429);function o(e){this.container=e}o.prototype.update=function(e){e&&e.errorTitle&&e.errorMessage||(this.container.innerHTML=""),this.container.innerHTML=i(e)},o.prototype.show=function(){this.container.classList.remove("hidden")},o.prototype.hide=function(){this.container.classList.add("hidden")},e.exports=o},2266:function(e,t,n){"use strict";const i=n(2267),o=n(1076);function a(e){this.container=e}
a.prototype.render=function(title, message){
    this.container.innerHTML=i({
        message_title: title,
        message_body: message
    })
},e.exports=a},2267:function(e,t,n){var i=n(3);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,r=e.escapeExpression;return'<div class="message-container-inner"><h1 class="no-service-title">'+r("function"==typeof(a=null!=(a=n.message_title||(null!=t?t.message_title:t))?a:l)?a.call(s,{name:"message_title",hash:{},data:o,loc:{start:{line:1,column:29},end:{line:1,column:46}}}):a)+'</h1>\n<p class="no-service-message">'+("function"==typeof(a=null!=(a=n.message_body||(null!=t?t.message_body:t))?a:l)?a.call(s,{name:"message_body",hash:{},data:o,loc:{start:{line:2,column:30},end:{line:2,column:46}}}):a)+"</p></div>"},useData:!0})},2269:function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=[],a=function(e){return void 0===e},s=/\s*(\.\d+|\d+(?:\.\d+)?)(%)?\s*/,l=/\s*(\.\d+|100|\d?\d(?:\.\d+)?)%\s*/,r=new RegExp("^(rgb|hsl|hsv)a?\\("+s.source+","+s.source+","+s.source+"(?:,"+/\s*(\.\d+|\d+(?:\.\d+)?)\s*/.source+")?\\)$","i");function p(e){if(Array.isArray(e)){if("string"==typeof e[0]&&"function"==typeof p[e[0]])return new p[e[0]](e.slice(1,e.length));if(4===e.length)return new p.RGB(e[0]/255,e[1]/255,e[2]/255,e[3]/255)}else if("string"==typeof e){var t=e.toLowerCase();p.namedColors[t]&&(e="#"+p.namedColors[t]),"transparent"===t&&(e="rgba(0,0,0,0)");var n=e.match(r);if(n){var o=n[1].toUpperCase(),s=a(n[8])?n[8]:parseFloat(n[8]),d="H"===o[0],k=n[3]?100:d?360:255,u=n[5]||d?100:255,c=n[7]||d?100:255;if(a(p[o]))throw new Error("color."+o+" is not installed.");return new p[o](parseFloat(n[2])/k,parseFloat(n[4])/u,parseFloat(n[6])/c,s)}e.length<6&&(e=e.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,"$1$1$2$2$3$3"));var m=e.match(/^#?([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i);if(m)return new p.RGB(parseInt(m[1],16)/255,parseInt(m[2],16)/255,parseInt(m[3],16)/255);if(p.CMYK){var f=e.match(new RegExp("^cmyk\\("+l.source+","+l.source+","+l.source+","+l.source+"\\)$","i"));if(f)return new p.CMYK(parseFloat(f[1])/100,parseFloat(f[2])/100,parseFloat(f[3])/100,parseFloat(f[4])/100)}}else if("object"===(void 0===e?"undefined":i(e))&&e.isColor)return e;return!1}p.namedColors={},p.installColorSpace=function(e,t,n){p[e]=function(n){var i=Array.isArray(n)?n:arguments;t.forEach((function(n,o){var a=i[o];if("alpha"===n)this._alpha=isNaN(a)||a>1?1:a<0?0:a;else{if(isNaN(a))throw new Error("["+e+"]: Invalid color: ("+t.join(",")+")");"hue"===n?this._hue=a<0?a-Math.floor(a):a%1:this["_"+n]=a<0?0:a>1?1:a}}),this)},p[e].propertyNames=t;var i=p[e].prototype;for(var s in["valueOf","hex","hexa","css","cssa"].forEach((function(t){i[t]=i[t]||("RGB"===e?i.hex:function(){return this.rgb()[t]()})})),i.isColor=!0,i.equals=function(n,i){a(i)&&(i=1e-10),n=n[e.toLowerCase()]();for(var o=0;o<t.length;o+=1)if(Math.abs(this["_"+t[o]]-n["_"+t[o]])>i)return!1;return!0},i.toJSON=function(){return[e].concat(t.map((function(e){return this["_"+e]}),this))},n)if(n.hasOwnProperty(s)){var l=s.match(/^from(.*)$/);l?p[l[1].toUpperCase()].prototype[e.toLowerCase()]=n[s]:i[s]=n[s]}function r(e,t){var n={};for(var i in n[t.toLowerCase()]=function(){return this.rgb()[t.toLowerCase()]()},p[t].propertyNames.forEach((function(e){var i="black"===e?"k":e.charAt(0);n[e]=n[i]=function(n,i){return this[t.toLowerCase()]()[e](n,i)}})),n)n.hasOwnProperty(i)&&void 0===p[e].prototype[i]&&(p[e].prototype[i]=n[i])}return i[e.toLowerCase()]=function(){return this},i.toString=function(){return"["+e+" "+t.map((function(e){return this["_"+e]}),this).join(", ")+"]"},t.forEach((function(e){var n="black"===e?"k":e.charAt(0);i[e]=i[n]=function(n,i){return void 0===n?this["_"+e]:i?new this.constructor(t.map((function(t){return this["_"+t]+(e===t?n:0)}),this)):new this.constructor(t.map((function(t){return e===t?n:this["_"+t]}),this))}})),o.forEach((function(t){r(e,t),r(t,e)})),o.push(e),p},p.pluginList=[],p.use=function(e){return-1===p.pluginList.indexOf(e)&&(this.pluginList.push(e),e(p)),p},p.installMethod=function(e,t){return o.forEach((function(n){p[n].prototype[e]=t})),this},p.installColorSpace("RGB",["red","green","blue","alpha"],{hex:function(){var e=(65536*Math.round(255*this._red)+256*Math.round(255*this._green)+Math.round(255*this._blue)).toString(16);return"#"+"00000".substr(0,6-e.length)+e},hexa:function(){var e=Math.round(255*this._alpha).toString(16);return"#"+"00".substr(0,2-e.length)+e+this.hex().substr(1,6)},css:function(){return"rgb("+Math.round(255*this._red)+","+Math.round(255*this._green)+","+Math.round(255*this._blue)+")"},cssa:function(){return"rgba("+Math.round(255*this._red)+","+Math.round(255*this._green)+","+Math.round(255*this._blue)+","+this._alpha+")"}});var d=function(e){e.installColorSpace("XYZ",["x","y","z","alpha"],{fromRgb:function(){var t=function(e){return e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92},n=t(this._red),i=t(this._green),o=t(this._blue);return new e.XYZ(.4124564*n+.3575761*i+.1804375*o,.2126729*n+.7151522*i+.072175*o,.0193339*n+.119192*i+.9503041*o,this._alpha)},rgb:function(){var t=this._x,n=this._y,i=this._z,o=function(e){return e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e};return new e.RGB(o(3.2404542*t+-1.5371385*n+-.4985314*i),o(-.969266*t+1.8760108*n+.041556*i),o(.0556434*t+-.2040259*n+1.0572252*i),this._alpha)},lab:function(){var t=function(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29},n=t(this._x/95.047),i=t(this._y/100),o=t(this._z/108.883);return new e.LAB(116*i-16,500*(n-i),200*(i-o),this._alpha)}})},k=function(e){e.installColorSpace("HSV",["hue","saturation","value","alpha"],{rgb:function(){var t,n,i,o=this._hue,a=this._saturation,s=this._value,l=Math.min(5,Math.floor(6*o)),r=6*o-l,p=s*(1-a),d=s*(1-r*a),k=s*(1-(1-r)*a);switch(l){case 0:t=s,n=k,i=p;break;case 1:t=d,n=s,i=p;break;case 2:t=p,n=s,i=k;break;case 3:t=p,n=d,i=s;break;case 4:t=k,n=p,i=s;break;case 5:t=s,n=p,i=d}return new e.RGB(t,n,i,this._alpha)},hsl:function(){var t,n=(2-this._saturation)*this._value,i=this._saturation*this._value,o=n<=1?n:2-n;return t=o<1e-9?0:i/o,new e.HSL(this._hue,t,n/2,this._alpha)},fromRgb:function(){var t,n=this._red,i=this._green,o=this._blue,a=Math.max(n,i,o),s=a-Math.min(n,i,o),l=0===a?0:s/a,r=a;if(0===s)t=0;else switch(a){case n:t=(i-o)/s/6+(i<o?1:0);break;case i:t=(o-n)/s/6+1/3;break;case o:t=(n-i)/s/6+2/3}return new e.HSV(t,l,r,this._alpha)}})},u=function(e){e.use(k),e.installColorSpace("HSL",["hue","saturation","lightness","alpha"],{hsv:function(){var t,n=2*this._lightness,i=this._saturation*(n<=1?n:2-n);return t=n+i<1e-9?0:2*i/(n+i),new e.HSV(this._hue,t,(n+i)/2,this._alpha)},rgb:function(){return this.hsv().rgb()},fromRgb:function(){return this.hsv().hsl()}})},c=p.use(d).use((function(e){e.use(d),e.installColorSpace("LAB",["l","a","b","alpha"],{fromRgb:function(){return this.xyz().lab()},rgb:function(){return this.xyz().rgb()},xyz:function(){var t=function(e){var t=Math.pow(e,3);return t>.008856?t:(e-16/116)/7.87},n=(this._l+16)/116,i=this._a/500+n,o=n-this._b/200;return new e.XYZ(95.047*t(i),100*t(n),108.883*t(o),this._alpha)}})})).use(k).use(u).use((function(e){e.installColorSpace("CMYK",["cyan","magenta","yellow","black","alpha"],{rgb:function(){return new e.RGB(1-this._cyan*(1-this._black)-this._black,1-this._magenta*(1-this._black)-this._black,1-this._yellow*(1-this._black)-this._black,this._alpha)},fromRgb:function(){var t=this._red,n=this._green,i=this._blue,o=1-t,a=1-n,s=1-i,l=1;return t||n||i?(o=(o-(l=Math.min(o,Math.min(a,s))))/(1-l),a=(a-l)/(1-l),s=(s-l)/(1-l)):l=1,new e.CMYK(o,a,s,l,this._alpha)}})})).use((function(e){e.namedColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"}})).use((function(e){e.installMethod("clearer",(function(e){return this.alpha(isNaN(e)?-.1:-e,!0)}))})).use((function(e){e.use(u),e.installMethod("darken",(function(e){return this.lightness(isNaN(e)?-.1:-e,!0)}))})).use((function(e){e.use(u),e.installMethod("desaturate",(function(e){return this.saturation(isNaN(e)?-.1:-e,!0)}))})).use((function(e){function t(){var t=this.rgb(),n=.3*t._red+.59*t._green+.11*t._blue;return new e.RGB(n,n,n,t._alpha)}e.installMethod("greyscale",t).installMethod("grayscale",t)})).use((function(e){e.use(u),e.installMethod("lighten",(function(e){return this.lightness(isNaN(e)?.1:e,!0)}))})).use((function(e){e.installMethod("mix",(function(t,n){t=e(t).rgb();var i=2*(n=1-(isNaN(n)?.5:n))-1,o=this._alpha-t._alpha,a=((i*o==-1?i:(i+o)/(1+i*o))+1)/2,s=1-a,l=this.rgb();return new e.RGB(l._red*a+t._red*s,l._green*a+t._green*s,l._blue*a+t._blue*s,l._alpha*n+t._alpha*(1-n))}))})).use((function(e){e.installMethod("negate",(function(){var t=this.rgb();return new e.RGB(1-t._red,1-t._green,1-t._blue,this._alpha)}))})).use((function(e){e.installMethod("opaquer",(function(e){return this.alpha(isNaN(e)?.1:e,!0)}))})).use((function(e){e.use(u),e.installMethod("rotate",(function(e){return this.hue((e||0)/360,!0)}))})).use((function(e){e.use(u),e.installMethod("saturate",(function(e){return this.saturation(isNaN(e)?.1:e,!0)}))})).use((function(e){e.installMethod("toAlpha",(function(e){var t=this.rgb(),n=e(e).rgb(),i=new e.RGB(0,0,0,t._alpha),o=["_red","_green","_blue"];return o.forEach((function(e){t[e]<1e-10?i[e]=t[e]:t[e]>n[e]?i[e]=(t[e]-n[e])/(1-n[e]):t[e]>n[e]?i[e]=(n[e]-t[e])/n[e]:i[e]=0})),i._red>i._green?i._red>i._blue?t._alpha=i._red:t._alpha=i._blue:i._green>i._blue?t._alpha=i._green:t._alpha=i._blue,t._alpha<1e-10?t:(o.forEach((function(e){t[e]=(t[e]-n[e])/t._alpha+n[e]})),t._alpha*=i._alpha,t)}))}));function m(e,t){var n=c(e),i=c(t),o=c("#fff"),a=n.alpha();return o._red=n._red*a+i._red*(1-a),o._green=n._green*a+i._green*(1-a),o._blue=n._blue*a+i._blue*(1-a),o}function f(e,t){var n=y(t),i=y(m(e,t));return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function y(e){var t=c(e);return.2126*(t._red<=.03928?t._red/12.92:Math.pow((t._red+.055)/1.055,2.4))+.7152*(t._green<=.03928?t._green/12.92:Math.pow((t._green+.055)/1.055,2.4))+.0722*(t._blue<=.03928?t._blue/12.92:Math.pow((t._blue+.055)/1.055,2.4))}e.exports=function(e,t){var n=m(t,"#fff"),i=m(t,"#000"),o=y(n),a=y(i),s=y(e);return o<s?f(e,n):a>s?f(e,i):1}},2270:function(e,t,n){const i=n(1254),o=n(2272),a={};Object.keys(i).forEach(e=>{a[e]={},Object.defineProperty(a[e],"channels",{value:i[e].channels}),Object.defineProperty(a[e],"labels",{value:i[e].labels});const t=o(e);Object.keys(t).forEach(n=>{const i=t[n];a[e][n]=function(e){const t=function(...t){const n=t[0];if(null==n)return n;n.length>1&&(t=n);const i=e(t);if("object"==typeof i)for(let e=i.length,t=0;t<e;t++)i[t]=Math.round(i[t]);return i};return"conversion"in e&&(t.conversion=e.conversion),t}(i),a[e][n].raw=function(e){const t=function(...t){const n=t[0];return null==n?n:(n.length>1&&(t=n),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(i)})}),e.exports=a},2271:function(e,t,n){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},2272:function(e,t,n){const i=n(1254);function o(e){const t=function(){const e={},t=Object.keys(i);for(let n=t.length,i=0;i<n;i++)e[t[i]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;){const e=n.pop(),o=Object.keys(i[e]);for(let i=o.length,a=0;a<i;a++){const i=o[a],s=t[i];-1===s.distance&&(s.distance=t[e].distance+1,s.parent=e,n.unshift(i))}}return t}function a(e,t){return function(n){return t(e(n))}}function s(e,t){const n=[t[e].parent,e];let o=i[t[e].parent][e],s=t[e].parent;for(;t[s].parent;)n.unshift(t[s].parent),o=a(i[t[s].parent][s],o),s=t[s].parent;return o.conversion=n,o}e.exports=function(e){const t=o(e),n={},i=Object.keys(t);for(let e=i.length,o=0;o<e;o++){const e=i[o];null!==t[e].parent&&(n[e]=s(e,t))}return n}},2274:function(e,t,n){"use strict";function i(){this.lines=null,this.provider=null,this.uri=null,this._cache=[]}i.prototype.update=function(e){const t=e||{};if(this.lines=t.lines,this.provider=t.provider,this.uri=t.uri,!this.checkCache(this.provider,this.uri)){this.cleanCache();const e=new i;for(const t in this)e.hasOwnProperty(t)&&"_cache"!==t&&(e[t]=this[t]);e.dateAdded=Date.now(),this._cache.push(e)}},i.prototype.checkCache=function(provider,e){if(!e)return!1;const t=this._cache.filter((function(t){return t.uri===e&&t.provider===provider}))[0];return t||!1},i.prototype.cleanCache=function(){for(let e=this._cache.length-1;e>=0;e--)this._cache[e].dateAdded<Date.now()-864e5&&this._cache.splice(e,1)},e.exports=i},2275:function(e,t,n){"use strict";const i=n(2276),o=n(2277),a=n(2278);function s(e){this.container=e,this.forcedLines=null,this.resizeObserver=new ResizeObserver(this._handleResize.bind(this)),this.resizeObserver.observe(this.container),this.syncedMode=!1}s.prototype.forceUpdate=function({lines:e}){this.resetView();const t=this.container.querySelector(".lyrics-list-animated").children;this.forcedLines=e,this.forcedLines.slice(0,4).forEach((e,n)=>{t[n+1].textContent=this._decodeHtml(e)}),this.syncedMode=!0,this._handleResize()},s.prototype._handleResize=function(){if(!this.syncedMode)return;const e=this.container.querySelector(".lyrics-list-animated").children;this.measurements=Array.from(e).map(e=>e.getBoundingClientRect().height),this.currentLineHeight=parseInt(window.getComputedStyle(e[0]).lineHeight,10),this.updateTopPositions()},s.prototype.updateTopPositions=function(){const e=this.currentLineHeight,[t,n,i,o,a]=this.container.querySelector(".lyrics-list-animated").children,[s,l,r,p]=this.measurements;t.style.top=`${-(e+s)}px`,n.style.top=0,i.style.top=`${e+l}px`,o.style.top=`${2*e+(l+r)}px`,a.style.top=`${3*e+(l+r+p)}px`},s.prototype.update=function({lines:e}){const t=this.container.querySelector(".lyrics-list-animated");if(this.forcedLines&&this.forcedLines[0]===e[0])return;const n=t.children[0];t.appendChild(n),Array.from(t.children).forEach((e,t)=>{e.setAttribute("data-animation-index",t)}),n.textContent=this._decodeHtml(e[e.length-1]),this._handleResize()},s.prototype.resetView=function(){this.container.innerHTML=i(),this.measurements=null,this.syncedMode=!1},s.prototype.renderNoLyrics=function(e){e&&(this.resetView(),this.container.innerHTML=o({message:e}))},s.prototype.renderNoSyncLyrics=function(e){if(!e)return;this.resetView(),this.container.innerHTML=a(e)},s.prototype._decodeHtml=function(e){if(!e)return"";const t=document.createElement("textarea");return t.innerHTML=e,t.value},e.exports=s},2276:function(e,t,n){var i=n(3);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="lyrics-list-animated">\n    <p class="lyrics-line" data-animation-index="0"></p>\n    <p class="lyrics-line" data-animation-index="1"></p>\n    <p class="lyrics-line" data-animation-index="2"></p>\n    <p class="lyrics-line" data-animation-index="3"></p>\n    <p class="lyrics-line" data-animation-index="4"></p>\n</div>'},useData:!0})},2277:function(e,t,n){var i=n(3);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a;return'<h1 class="no-lyrics-message">'+e.escapeExpression("function"==typeof(a=null!=(a=n.message||(null!=t?t.message:t))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"message",hash:{},data:o,loc:{start:{line:1,column:30},end:{line:1,column:41}}}):a)+"</h1>"},useData:!0})},2278:function(e,t,n){var i=n(3);e.exports=(i.default||i).template({1:function(e,t,n,i,o){var a;return"  <p>"+(null!=(a=e.lambda(t,t))?a:"")+"</p>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a;return'<div class="lyrics-list-full">\n'+(null!=(a=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.lines:t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:2},end:{line:4,column:11}}}))?a:"")+"</div>"},useData:!0})},2279:function(e,t,n){"use strict";const i=n(2280);function o(e){this.container=e}o.prototype.update=function(e){this.container.innerHTML=i(e)},e.exports=o},2280:function(e,t,n){var i=n(3);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a;return'<p class="attribution-text">'+(null!=(a=e.lambda(t,t))?a.text:"")+"</p>\n"},useData:!0})},23:function(e,t,n){"use strict";const i=n(41),o=n(40),a=n(251),s=n(34);let l=!0;try{Object.defineProperty({},"~",{}),Object.getOwnPropertyDescriptor({},"~")}catch(e){l=!1}const r=!{valueOf:0}.propertyIsEnumerable("valueOf"),p=["toString","valueOf"],d=/^constructor|inherits|mixin$/,k=function(e){const t=this.prototype;for(const n in e)if(!n.match(d)){if(l){const i=Object.getOwnPropertyDescriptor(e,n);if(i){Object.defineProperty(t,n,i);continue}}t[n]=e[n]}return r&&p.forEach(n=>{const i=e[n];i!==Object.prototype[n]&&(t[n]=i)}),this};e.exports=function(e){let t=e;"Function"===s(t)&&(t={constructor:e});const n=t.inherits;let l;if(l=i(t,"constructor")?t.constructor:n?function(){return n.apply(this,arguments)}:function(){},n){o(l,n);const e=n.prototype,t=l.prototype=a(e);l.parent=e,t.constructor=l}l.implement||(l.implement=k);let r=t.mixin;if(r){"Array"!==s(r)&&(r=[r]);for(let e=0;e<r.length;e++)l.implement(a(r[e].prototype))}return l.implement(t)}},24:function(e,t,n){"use strict";t.__esModule=!0;var i=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function o(e,t){var n=t&&t.loc,a=void 0,s=void 0,l=void 0,r=void 0;n&&(a=n.start.line,s=n.end.line,l=n.start.column,r=n.end.column,e+=" - "+a+":"+l);for(var p=Error.prototype.constructor.call(this,e),d=0;d<i.length;d++)this[i[d]]=p[i[d]];Error.captureStackTrace&&Error.captureStackTrace(this,o);try{n&&(this.lineNumber=a,this.endLineNumber=s,Object.defineProperty?(Object.defineProperty(this,"column",{value:l,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:r,enumerable:!0})):(this.column=l,this.endColumn=r))}catch(e){}}o.prototype=new Error,t.default=o,e.exports=t.default},248:function(e,t,n){"use strict";const i=n(249),o=function(e){if(arguments.length<=2)return i(e);const t=arguments[arguments.length-1];let n=!1;const o=i(e);for(let e=1;e<arguments.length-1;e++)if(o===arguments[e]){n=!0;break}return n?t.fn(this):t.inverse(this)};o.displayName="type",e.exports=o},249:function(e,t,n){"use strict";e.exports=function(e){if(!e||!e.split)return null;const t=e.split(":");switch(t[1]){case"album":if(4===t.length)return"disc";if(3===t.length)return"album";break;case"artist":if(3===t.length)return"artist";break;case"dailymix":return"dailymix";case"track":if(3===t.length)return"track";break;case"playlist":if(3===t.length)return"playlist";break;case"genre":if(3===t.length)return"genre";break;case"show":if(3===t.length)return"show";break;case"station":if(t.length>3)return"station";break;case"episode":if(3===t.length)return"episode";break;case"local":if(6===t.length)return"track";if(4===t.length)return"album";if(3===t.length)return"artist";break;case"user":if(t.length>3&&"collection"===t[3]&&"album"===t[4])return"collection-album";if(t.length>3&&"collection"===t[3]&&"artist"===t[4])return"collection-artist";if(t.length>3&&"collection"===t[3])return"collection";if(5===t.length&&"folder"===t[3])return"playlist-folder";if(5===t.length&&"cluster"===t[3])return"cluster";if(t.length>3&&t.length<=5&&"facebook"!==t[2])return"playlist";if(3===t.length)return"user";break;case"internal":return t[2];case"app":return t.slice(1).join("-")}return null}},25:function(e,t,n){"use strict";const i=n(9),o=n(2),a=n(19).getOriginUri,s=n(13),l=n(315),r=n(48),p=n(83),d=n(127),k=n(64),u=n(65),c=n(87),m=n(54);let f;t.attach=function(){const e=i(document);e.on("mousedown",l.handleMouseDown),e.on("touchstart",l.handleMouseDown),e.on("mouseup",l.handleMouseUp),e.on("touchend",l.handleMouseUp),e.on("keydown",l.handleKeyDown),e.on("focus",l.handleFocus,!0),s.on("scroll-show-after",l.handleScrollShowAfter),s.on("selection-set-hidden",l.handleSetHidden),s.on("list-swap",l.handleListSwap),f=m.subscribe({url:"sp://messages/v1/container/control"},(function(e,t){if(e)throw e;const n=t.body;n&&c.isActiveAndFocused()&&("select_all"===n.type?l.handleSelectAll():"copy"===n.type?l.handleCopy():"copy_advanced"===n.type?l.handleCopyAdvanced():"cut"===n.type&&l.handleCut())}))},t.detach=function(){const e=i(document);e.off("mousedown",l.handleMouseDown),e.off("touchstart",l.handleMouseDown),e.off("mouseup",l.handleMouseUp),e.off("touchend",l.handleMouseUp),e.off("keydown",l.handleKeyDown),e.off("focus",l.handleFocus,!0),s.off("scroll-show-after",l.handleScrollShowAfter),s.off("selection-set-hidden",l.handleSetHidden),s.off("list-swap",l.handleListSwap),f&&(f.cancel(),f=null)},t.update=function(){r.update(),l.updateListListeners()},t.add=function(e,t){l.handleAddByUri(e,t)},t.hasHoles=function(){return p.hasHoles()},t.isNodeSelected=function(e){const t="innerHTML"in e?e:e[0];if(!t)return!1;const n=k.getFromNode(t);return!!n&&p.isSelected(n)},t.reset=function(){l.resetListListeners(),p.reset(),d.update(),r.reset()},t.clear=function(){p.clear(),d.update()},t.setOrigin=function(e,t){p.setOrigin(new u(e,t))},t.setFocus=function(e,t){p.setFocus(new u(e,t))},t.getOrigin=function(){const e=p.getOrigin();return e?{containerIndex:e.containerIndex,index:e.index}:null},t.getFocus=function(){const e=p.getFocus();return e?{containerIndex:e.containerIndex,index:e.index}:null},t.getIndicesPerList=function(){const e=p.selections,t=[];let n;const i=e=>n.keys[e];for(let s=0;s<e.length;s++){const l=e[s];if(l&&Object.keys(l).length){const e=r.getUri(s);if(!e)continue;if(!(n=r.getLiveList(s)))continue;const l=p.getIndicesForContainer(s);if(!l)continue;const d=l.map(i),k=p.getIndicesWithHiddenForContainer(s),u=k.map(i),c={containerIndex:s,uri:e,indices:l,keys:d,indicesWithHidden:k,keysWithHidden:u},m=a(e);if(m){const t=o(e).get("rows"),n=o(m).get("rows");let i,a;if(t&&n){let e;const o={};i=new Array(l.length),a=new Array(l.length);const s=n.keys;for(let e=0;e<s.length;e++)o[s[e]]=e;for(let s=0;s<l.length;s++)e=t.keys[l[s]],i[s]=o[e],a[s]=n.keys[i[s]]}c.origin={uri:m,indices:i||[],keys:a||[]}}t.push(c)}}return t},t.getIndicesGlobal=function(){const e=p.selections,t=r.elements,n=[],o=[];if(0===t.length)return null;const a=t[0].closest("[data-context]"),s=a&&a.getAttribute("data-uri");if(!s)return null;let l;const d=e=>!!l[e];for(let a=0;a<e.length;a++){l=e[a];const s=r.getLiveList(a);if(s&&l){const e=s.keys.filter(d);for(let l=0,r=e.length;l<r;l++){const r=s.keys.indexOf(e[l]);n.push(k.getGlobalIndexFromPosition(new u(a,r))),o.push(i(t[a]))}}}return{uri:s,indices:n,containers:o}},t.getUris=function(){return l.handleGetUris()},t.getNodes=function(){return d.getSelectedRows()}},250:function(e,t,n){"use strict";const i=function(e){return JSON.stringify(e)};i.displayName="json",e.exports=i},251:function(e,t,n){var i=n(40);e.exports=function(e,t){function n(){}return n.prototype=e,i(new n,t)}},252:function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var i,o=1,a={},s=!1,l=e.document,r=Object.getPrototypeOf&&Object.getPrototypeOf(e);r=r&&r.setTimeout?r:e,"[object process]"==={}.toString.call(e.process)?function(){i=function(e){t.nextTick((function(){d(e)}))}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&d(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),i=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){d(e.data)},i=function(t){e.port2.postMessage(t)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var e=l.documentElement;i=function(t){var n=l.createElement("script");n.onreadystatechange=function(){d(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){i=function(e){setTimeout(d,0,e)}}(),r.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var s={callback:e,args:t};return a[o]=s,i(o),o++},r.clearImmediate=p}function p(e){delete a[e]}function d(e){if(s)setTimeout(d,0,e);else{var t=a[e];if(t){s=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}(t)}finally{p(e),s=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(1),n(26))},253:function(e,t){function n(){return n.get()}n.get="function"==typeof Date.now?Date.now:function(){return+new Date},e.exports=n},254:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPageIdFromUri=function(e,t){if(e in r){const n=o.default.from(t),i=r[e](n.args);return p(e,i)}return p(e)},t.getPageIdFromAppArguments=function(e,t){if(e in r){const n=r[e](t);return p(e,n)}return p(e)};var i=a(n(113)),o=a(n(7));function a(e){return e&&e.__esModule?e:{default:e}}const s=e=>t=>t.length>e&&t[e]||null,l={album:"album","app-manager":"debug",artist:"artist","artist-concerts":"concerts","artist-creator-about":"artistAbout","artist-overview":"artist","artist-related":"artistRelated","artist-works":"artistWorks",browse:"browse","browse-charts":"charts","browse-discover":"browseDiscover","browse-genres":"browseGenres","browse-home":"browse","browse-podcasts":"browsePodcasts","browse-releases":"browseNewReleases","browse-videos":"browseVideos",chart:"chartsChart",charts:"charts",collection:"collection","collection-album":"collectionAlbumsAlbum","collection-albums":"collectionAlbums","collection-artist":"collectionArtistsArtist","collection-artists":"collectionArtists","collection-podcasts":"collectionShows","collection-songs":"collectionSongs","collection-videos":"collectionShows",concert:"concert",concerts:"concerts","daily-mix-hub":"radioDailyMixes",diag:"debug",discover:"browseDiscover",experiments:"experimentalFeatures","friends-mix":"friendsMix",genre:"browseGenres","glue-grid-demo":"debug","glue-header-demo":"debug","developer-reference":"debug",home:"home","hub-charts-regional":"chartsRegional","hub-charts-viral":"chartsViral","hub-genre":"browseGenres",lyrics:"lyrics","legacy-lyrics":"legacyLyrics","made-for-you":"madeForYou",playlist:"playlist","playlist-folder":"playlistFolder","profile-followers":"profileFollowers","profile-following":"profileFollowing","profile-overview":"profile","profile-public-playlists":"profilePlaylists","profile-recently-played-artists":"profileArtists",profile:"profile",queue:"nowplayingQueue","queue-history":"nowplayingHistory","queue-queue":"nowplayingQueue",radio:"radio","radio-hub":"radio","recently-played":"collectionRecentlyPlayed","search-albums":"searchAlbums","search-artists":"searchArtists","search-genres":"searchGenres","search-playlists":"searchPlaylists","search-profiles":"searchProfiles","search-tracks":"searchSongs","search-shows":"searchShows",search:"search",settings:"settings",show:"show",song:"song",station:"radioStation",stations:"collectionRadio","video-debug":"debug",work:"work"},r={browse:s(0),artist:s(1),profile:s(1),queue:s(0),search:s(1),hub:e=>"charts"===s(0)(e)?`charts-${s(1)(e)}`:"genre",collection:s(0)};function p(e,t){let n=e;t&&(n=`${n}-${t}`);const o=l[n];return i.default[o]||i.default.unknownUncovered}},255:function(e,t,n){var i=n(29),o=n(59);function a(e,t){for(var n,o=0,a=arguments.length;++o<a;)(n=arguments[o])&&i(n,s,e);return e}function s(e,t){var n=this[t];o(e)&&o(n)?a(n,e):this[t]=e}e.exports=a},257:function(e,t,n){"use strict";let i=!1;t.update=()=>{},t.attach=()=>{if(i)return;i=!0;const e=window.__spotify&&window.__spotify.locale;e&&document.documentElement.setAttribute("lang",e)},t.detach=()=>{i&&(i=!1,document.documentElement.removeAttribute("lang"))}},258:function(e,t,n){var i=n(69);e.exports=function(e,t){for(var n,o="string"!=typeof arguments[1]?arguments[1]:i(arguments,1),a={},s=0;n=o[s++];)a[n]=e[n];return a}},259:function(e,t,n){"use strict";(function(t){var i=function(e){return e&&e.__esModule?e:{default:e}}(n(268));const o=n(14)("logger:");e.exports=function(e,n){o(e.name);const a=n.message_name,s=n.message_version,l=Object.assign({},n);if(s!==e.schema_version)throw new Error(`Invalid message version: received Message with message_version ${s} but the Schema requires version ${e.schema_version}`);const r=e.fields.map(e=>{const n=l[e.name];return void 0===n?e.default:(function e(n,i){if(Array.isArray(n.type)){const o=i[n.name];if(null===o)return;i[n.name]={};const a=n.type.filter(e=>"null"!==e)[0];"object"==typeof a?(i[n.name]={[a.type]:o},e(a,i[n.name])):i[n.name][a]="bytes"===a?new t(o):o}else"bytes"===n.type&&(i[n.name]=new t(i[n.name]))}(e,l),n)}).slice(2);return i.default.parse(e).isValid(l,{errorHook(e,t){throw new Error(`Logger: Invalid data: ${e.join(",")}: ${t}`)}}),{message:a,version:s,fields:r}}}).call(this,n(39).Buffer)},26:function(e,t){var n,i,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var r,p=[],d=!1,k=-1;function u(){d&&r&&(d=!1,r.length?p=r.concat(p):k=-1,p.length&&c())}function c(){if(!d){var e=l(u);d=!0;for(var t=p.length;t;){for(r=p,p=[];++k<t;)r&&r[k].run();k=-1,t=p.length}r=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function f(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new m(e,t)),1!==p.length||d||l(c)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=f,o.addListener=f,o.once=f,o.off=f,o.removeListener=f,o.removeAllListeners=f,o.emit=f,o.prependListener=f,o.prependOnceListener=f,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},260:function(e,t,n){"use strict";const i=n(57),o=n(2),a=n(20),s=n(5).logError;let l={};const r={isFollowing:"hm://socialgraph/v2/is_following?format=json",followCounts:"hm://socialgraph/v2/counts?format=json",updateIsFollowing:"hm://socialgraph/v2/following?format=json",broadcast:"sp://messages/v1/followstate"};function p(e,t){if("added"in t&&!("followersCount"in t)){const n=e.get("followersCount");if(void 0!==n){const i=n+(t.added?1:-1);e.update({followersCount:i})}}}function d(e,t){if("added"in t){if(l[e.uri])return;l[e.uri]=!0,e.update({added:t.added}),function(e,t,n){m(e,(function(e,i){if(e)n(e);else{a[t?"post":"delete"]({url:r.updateIsFollowing,body:i},(function(e){n(e||null)}))}}))}(e,!!t.added,(function(n){delete l[e.uri],n?e.update({added:!t.added}):(e.update({added:t.added}),function(e){const t=e.get("added");a.post({url:r.broadcast,body:{uri:e.uri,isFollowing:t,added:t,followersCount:e.get("followersCount"),followingCount:e.get("followingCount")}})}(e))}))}}function k(e,t){if(e)return void s(e);const n=t.body,i={};"added"in n?i.added=n.added:"isFollowing"in n&&(i.added=n.isFollowing),"followersCount"in n&&(i.followersCount=n.followersCount),"followingCount"in n&&(i.followingCount=n.followingCount),o(n.uri).update(i)}const u=["added","followersCount","followingCount"];function c(e,t){i(t,u).length&&m(e,(function(t,n){t?s(t):(function(e,t,n){const i={url:r.isFollowing,body:t};a.get(i,(function(t,i){if(t)s(t),n&&n(t);else{const t=i.body[0].is_following;e.update({added:t}),n&&n()}}))}(e,n),function(e,t,n){const i={url:r.followCounts,body:t};a.get(i,(function(t,i){if(t)s(t),n&&n(t);else{const t=i.body[0];e.update({followersCount:t.followers_count,followingCount:t.following_count}),n&&n()}}))}(e,n))}))}function m(e,t){o("spotify:client").query("currentUser(uri)",(function(n,i){n?t(n):t(null,{source_uri:decodeURIComponent(i.currentUser.uri),target_uris:[decodeURIComponent(e.uri)]})}))}let f;t.register=function(e){o.subscribe(e,"wait",c),o.subscribe(e,"update",p),o.subscribe(e,"publish",d),l={},f||(f=a.subscribe({url:r.broadcast},k))},t.unregister=function(e){o.unsubscribe(e,"wait",c),o.unsubscribe(e,"update",p),o.unsubscribe(e,"publish",d),f&&(f.cancel(),f=null)}},261:function(e,t,n){var i=n(53);e.exports=function(e){return i(e,"RegExp")}},262:function(e,t,n){var i=n(56);e.exports=function(e){return i(e).replace(/\W/g,"\\$&")}},263:function(e,t,n){"use strict";const i=n(23),o=n(30),a=n(5).logError,s=n(21),l=n(200),r=i({constructor:function(e=0){this.index=[],this.keys=new Array(e),this.values=new Array(e),this.objectStorage={}},get length(){return this.keys.length},set length(e){this.keys.length=e,this.values.length=e},forEach:function(e,t){const n=this.index;for(let i=0;i<n.length;i++){const o=n[i];for(let n=o.start;n<o.end&&!1!==e.call(t,this.values[n],n,this.keys[n],this);n++);}return this},map:function(e,t){const n=new Array(this.length);return this.forEach((function(i,o,a){n[o]=e.call(t,i,o,a,this)}),this),n},copy:function(e){this.index=e.index.slice(),this.keys=e.keys.slice(),this.values=e.values.slice();const t=this.keys.length;this.objectStorage={};for(let e=0;e<t;e++)this.objectStorage[this.keys[e]]=this.values[e];return this},clone:function(){return(new r).copy(this)},indexOf:function(e){let t=-1;return this.forEach((function(n,i,o){e===o&&(t=i)})),t},indexOfMany:function(e){const t={},n=[];for(let n=0;n<e.length;n++)t[e[n]]=-1;this.forEach((function(e,n,i){i in t&&(t[i]=n)}));for(let i=0;i<e.length;i++)n[i]=t[e[i]];return n},valueOf:function(e){return this.objectStorage[e]||null},hasKey:function(e){return this.objectStorage.hasOwnProperty(e)},sort:function(e){const t=this.keys,n=this.values,i=l(n.slice(),n.sort(e));return o(i,(function(e){l.move(t,e.from,e.to,e.length)})),this},move:function(e,t,n){let i=n,o=t;return e>this.length?[]:(e+i>this.length&&(i=e-this.length),o>this.length&&(o=this.length),e===o?[]:(l.move(this.keys,e,o,i),l.move(this.values,e,o,i),this))},insert:function(e,t,n){if(t.length!==n.length)throw new Error("length mismatch");const i=new s(e,e+t.length);this.index=i.insert(this.index),l.insert(this.keys,e,t),l.insert(this.values,e,n);for(let e=0,i=t.length;e<i;e++)this.objectStorage[t[e]]=n[e];return this},remove:function(e,t){let n=t;if(e>=this.length)return[];e+n>this.length&&(n=this.length);const i=new s(e,e+n);this.index=i.extract(this.index);for(let t=0;t<n;t++)delete this.objectStorage[this.keys[t+e]];return l.remove(this.keys,e,n),l.remove(this.values,e,n),this},diff:function(e){const t=l.annotate(this.keys,e.keys);return o(t[0],(function(e){e.keys=e.values,e.values=this.values.slice(e.index,e.index+e.length)}),this),o(t[1],(function(e){e.keys=e.values,e.values=this.values.slice(e.from,e.from+e.length)}),this),o(t[2],(function(t){t.keys=t.values,t.values=e.values.slice(t.index,t.index+t.length)})),l.offset.apply(l,t)},patch:function(e){return o(e,(function(e){switch(e.type){case"move":this.move(e.from,e.to,e.length);break;case"remove":this.remove(e.index,e.length);break;case"insert":this.insert(e.index,e.keys,e.values);break;default:a("Invalid patch operation type",e.type)}}),this),this}});e.exports=r},264:function(e,t,n){"use strict";const i=n(32),o=Array.prototype.slice,a=function(e,t,n){let i,a,s;return function(){return a=arguments,i||(i=!0,s=t((function(t){i=!1,e.apply(n,o.call(a).concat(t))}))),s}},s=function(e,t,n){return function(e){return"number"==typeof e&&e%1==0}(t)?s.timeout(e,t,n):s.immediate(e,t)};s.timeout=function(e,t,n){return a(e,(function(e){return i.timeout(e,t,n)}),n)},s.immediate=function(e,t){return a(e,(function(e){return i.immediate(e,t)}),t)},e.exports=s},265:function(e,t,n){"use strict";t.byteLength=function(e){var t=p(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){for(var t,n=p(e),i=n[0],s=n[1],l=new a(function(e,t,n){return 3*(t+n)/4-n}(0,i,s)),r=0,d=s>0?i-4:i,k=0;k<d;k+=4)t=o[e.charCodeAt(k)]<<18|o[e.charCodeAt(k+1)]<<12|o[e.charCodeAt(k+2)]<<6|o[e.charCodeAt(k+3)],l[r++]=t>>16&255,l[r++]=t>>8&255,l[r++]=255&t;2===s&&(t=o[e.charCodeAt(k)]<<2|o[e.charCodeAt(k+1)]>>4,l[r++]=255&t);1===s&&(t=o[e.charCodeAt(k)]<<10|o[e.charCodeAt(k+1)]<<4|o[e.charCodeAt(k+2)]>>2,l[r++]=t>>8&255,l[r++]=255&t);return l},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,a=[],s=0,l=n-o;s<l;s+=16383)a.push(k(e,s,s+16383>l?l:s+16383));1===o?(t=e[n-1],a.push(i[t>>2]+i[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],a.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return a.join("")};for(var i=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,r=s.length;l<r;++l)i[l]=s[l],o[s.charCodeAt(l)]=l;function p(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function d(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}function k(e,t,n){for(var i,o=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(d(i));return o.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},266:function(e,t){t.read=function(e,t,n,i,o){var a,s,l=8*o-i-1,r=(1<<l)-1,p=r>>1,d=-7,k=n?o-1:0,u=n?-1:1,c=e[t+k];for(k+=u,a=c&(1<<-d)-1,c>>=-d,d+=l;d>0;a=256*a+e[t+k],k+=u,d-=8);for(s=a&(1<<-d)-1,a>>=-d,d+=i;d>0;s=256*s+e[t+k],k+=u,d-=8);if(0===a)a=1-p;else{if(a===r)return s?NaN:1/0*(c?-1:1);s+=Math.pow(2,i),a-=p}return(c?-1:1)*s*Math.pow(2,a-i)},t.write=function(e,t,n,i,o,a){var s,l,r,p=8*a-o-1,d=(1<<p)-1,k=d>>1,u=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,c=i?0:a-1,m=i?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-s))<1&&(s--,r*=2),(t+=s+k>=1?u/r:u*Math.pow(2,1-k))*r>=2&&(s++,r/=2),s+k>=d?(l=0,s=d):s+k>=1?(l=(t*r-1)*Math.pow(2,o),s+=k):(l=t*Math.pow(2,k-1)*Math.pow(2,o),s=0));o>=8;e[n+c]=255&l,c+=m,l/=256,o-=8);for(s=s<<o|l,p+=o;p>0;e[n+c]=255&s,c+=m,s/=256,p-=8);e[n+c-m]|=128*f}},267:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},268:function(e,t,n){"use strict";(function(t){var i=n(106).Tap,o=n(270),a=n(273);i.prototype.readString=function(){var e=this.readLong(),t=this.pos,n=this.buf;if(this.pos+=e,!(this.pos>n.length))return this.buf.slice(t,t+e).toString()},i.prototype.writeString=function(e){var n=t.byteLength(e);this.writeLong(n);var i=this.pos;this.pos+=n,this.pos>this.buf.length||this.buf.write(e,i)},i.prototype.writeBinary=function(e,t){var n=this.pos;this.pos+=t,this.pos>this.buf.length||this.buf.write(e,n,t,"binary")},e.exports={parse:function(e,t){var n;if("string"==typeof e)try{n=JSON.parse(e)}catch(e){}return void 0===n&&(n=e),o.createType(n,t)},types:o.types,Validator:a.Validator,ProtocolValidator:a.ProtocolValidator}}).call(this,n(39).Buffer)},269:function(e,t,n){"use strict";e.exports={createHash:function(){throw new Error("fingerprinting not supported in the browser")}}},27:function(e,t){e.exports=function(e,t,n){if(n=n||0,null==e)return-1;for(var i=e.length,o=n<0?i+n:n;o<i;){if(e[o]===t)return o;o++}return-1}},270:function(e,t,n){"use strict";(function(t){var i=n(106),o=n(39),a=n(107),s=i.Tap,l=a.format,r={array:A,boolean:z,bytes:S,double:v,enum:P,error:E,fixed:T,float:_,int:b,long:h,map:j,null:g,record:E,request:E,string:w,union:x},p=/^[A-Za-z_][A-Za-z0-9_]*$/,d=new i.Lcg,k=new s(new o.SlowBuffer(1024)),u=[],c=null;function m(e,t){if(e instanceof f)return e;var n;if(t=I(e,t),"string"==typeof e){if(!t.namespace||~e.indexOf(".")||U(e)||(e=t.namespace+"."+e),n=t.registry[e])return n;if(U(e))return t.registry[e]=m({type:e},t);throw new Error(l("undefined type name: %s",e))}if(t.typeHook&&(n=t.typeHook(e,t))){if(!(n instanceof f))throw new Error(l("invalid typehook return value: %j",n));return n}if(e.logicalType&&!c){var i=t.logicalTypes[e.logicalType];if(i){var o={};Object.keys(t.registry).forEach((function(e){o[e]=t.registry[e]}));try{return new i(e,t)}catch(e){if(t.assertLogicalTypes)throw e;c=null,t.registry=o}}}return n=e instanceof Array?new x(e,t):function(n){var i=r[n];if(void 0===i)throw new Error(l("unknown type: %j",n));return new i(e,t)}(e.type)}function f(e){var t=this._name,n=c||this;if(c=null,void 0!==e&&void 0!==t){if(void 0!==e[t])throw new Error(l("duplicate type name: %s",t));e[t]=n}}function y(){f.call(this)}function g(){y.call(this)}function z(){y.call(this)}function b(){y.call(this)}function h(){y.call(this)}function _(){y.call(this)}function v(){y.call(this)}function w(){y.call(this)}function S(){y.call(this)}function x(e,t){if(!(e instanceof Array))throw new Error(l("non-array union schema: %j",e));if(!e.length)throw new Error("empty union");t=I(e,t),f.call(this),this._types=e.map((function(e){return m(e,t)})),this._indices={},this._types.forEach((function(e,t){if(e instanceof x)throw new Error("unions cannot be directly nested");var n=e._name||q(e);if(void 0!==this._indices[n])throw new Error(l("duplicate union name: %j",n));this._indices[n]=t}),this),this._constructors=this._types.map((function(e){var t,n=e._name||q(e);return"null"===n?null:(t=~n.indexOf(".")?"this['"+n+"'] = val;":"this."+n+" = val;",new Function("val",t))}))}function P(e,t){if(!(e.symbols instanceof Array&&e.symbols.length))throw new Error(l("invalid %j enum symbols: %j",e.name,e));var n=N(e,(t=I(e,t)).namespace);this._name=n.name,this._symbols=e.symbols,this._aliases=n.aliases,f.call(this,t.registry),this._indices={},this._symbols.forEach((function(e,t){if(!p.test(e))throw new Error(l("invalid %s symbol: %j",this,e));if(void 0!==this._indices[e])throw new Error(l("duplicate %s symbol: %j",this,e));this._indices[e]=t}),this)}function T(e,t){if(e.size!==(0|e.size)||e.size<1)throw new Error(l("invalid %j fixed size: %j",e.name,e.size));var n=N(e,(t=I(e,t)).namespace);this._name=n.name,this._size=0|e.size,this._aliases=n.aliases,f.call(this,t.registry)}function j(e,t){if(!e.values)throw new Error(l("missing map values: %j",e));t=I(e,t),f.call(this),this._values=m(e.values,t)}function A(e,t){if(!e.items)throw new Error(l("missing array items: %j",e));t=I(e,t),this._items=m(e.items,t),f.call(this)}function E(e,t){var n=N(e,(t=I(e,t)).namespace);if(this._name=n.name,this._aliases=n.aliases,this._type=e.type,f.call(this,"request"===this._type?void 0:t.registry),!(e.fields instanceof Array))throw new Error(l("non-array %s fields",this._name));if(this._fields=e.fields.map((function(e){return new O(e,t)})),i.hasDuplicates(e.fields,(function(e){return e.name})))throw new Error(l("duplicate %s field name",this._name));var o="error"===e.type;this._constructor=this._createConstructor(o),this._read=this._createReader(),this._skip=this._createSkipper(),this._write=this._createWriter(),this._check=this._createChecker()}function L(e,t,n){if(f.call(this),c=this,this._underlyingType=m(e,t),n&&!~n.indexOf(this._underlyingType.constructor)){var i=e.logicalType,o=this._underlyingType;throw new Error(l("invalid underlying type for %s: %s",i,o))}}function C(e){h.call(this),this._noUnpack=!!e}function O(e,t){var n=e.name;if("string"!=typeof n||!p.test(n))throw new Error(l("invalid field name: %s",n));this._name=n,this._type=m(e.type,t),this._aliases=e.aliases||[],this._order=function(e){switch(e){case"ascending":return 1;case"descending":return-1;case"ignore":return 0;default:throw new Error(l("invalid order: %j",e))}}(void 0===e.order?"ascending":e.order);var i=e.default;if(void 0!==i){var o=this._type,a=o._copy(i,{coerce:2,wrap:2});this.getDefault=o instanceof y&&!(o instanceof S)?function(){return a}:function(){return o._copy(a)}}}function M(e){this._readerType=e,this._items=null,this._read=null,this._size=0,this._symbols=null,this._values=null}function R(e,t,n,i){if(n){if(n._readerType!==e)throw new Error("invalid resolver");return n._read(t,i)}return e._read(t)}function I(e,t){if(null===e)throw new Error('invalid type: null (did you mean "null"?)');return(t=t||{}).registry=t.registry||{},t.namespace=e.namespace||t.namespace,t.logicalTypes=t.logicalTypes||{},t}function N(e,t,n){t=e.namespace||t;var i=e[n=n||"name"];if(!i)throw new Error(l("missing %s property in schema: %j",n,e));return{name:o(i),aliases:e.aliases?e.aliases.map(o):[]};function o(e){!~e.indexOf(".")&&t&&(e=t+"."+e);var n=D(e);if(U(n))throw new Error(l("cannot rename primitive type: %j",n));return e.split(".").forEach((function(t){if(!p.test(t))throw new Error(l("invalid name: %j",e))})),e}}function D(e){var t=e.split(".");return t[t.length-1]}function B(e){var t,n,i=[e._name],o=e._aliases;for(t=0,n=o.length;t<n;t++)i.push(o[t]);return i}function q(e){var t=e.toJSON();return"string"==typeof t?t:t.type}function U(e){var t=r[e];return void 0!==t&&t.prototype instanceof y}function F(e){var t=e.readLong();return t<0&&(t=-t,e.skipLong()),t}function V(e,t){return function(n){return JSON.stringify(e,(function(e,i){if(i instanceof O)return{name:i._name,type:i._type};if(i&&i.name){var o=i.name;if(t||n[o])return o;n[o]=!0}return i}))}({})}function K(e){return e>=-9007199254740990&&e<=9007199254740990}function H(e,t,n){throw new Error(l("invalid %s: %j",n,t))}f.__reset=function(e){k.buf=new o.SlowBuffer(e)},f.prototype.createResolver=function(e,t){if(!(e instanceof f))throw new Error(l("not a type: %j",e));if(e instanceof L&&!(this instanceof L))return this.createResolver(e._underlyingType,t);var n,i;if((t=t||{}).registry=t.registry||{},this instanceof E&&e instanceof E&&(i=this._name+":"+e._name,n=t.registry[i]))return n;if(n=new M(this),i&&(t.registry[i]=n),e instanceof x){var o=e._types.map((function(e){return this.createResolver(e,t)}),this);n._read=function(e){var t=e.readLong();if(void 0===o[t])throw new Error(l("invalid union index: %s",t));return o[t]._read(e)}}else this._updateResolver(n,e,t);if(!n._read)throw new Error(l("cannot read %s as %s",e,this));return n},f.prototype.decode=function(e,t,n){var i=new s(e);i.pos=0|t;var o=R(this,i,n);return i.isValid()?{value:o,offset:i.pos}:{value:void 0,offset:-1}},f.prototype.encode=function(e,t,n){var i=new s(t);return i.pos=0|n,this._write(i,e),i.isValid()?i.pos:t.length-i.pos},f.prototype.fromBuffer=function(e,t,n){var i=new s(e),o=R(this,i,t,n);if(!i.isValid())throw new Error("truncated buffer");if(!n&&i.pos<e.length)throw new Error("trailing data");return o},f.prototype.toBuffer=function(e){k.pos=0,this._write(k,e),k.isValid()||(f.__reset(2*k.pos),k.pos=0,this._write(k,e));var n=new t(k.pos);return k.buf.copy(n,0,0,k.pos),n},f.prototype.fromString=function(e){return this._copy(JSON.parse(e),{coerce:2})},f.prototype.toString=function(e){return void 0===e?this.getSchema(!0):JSON.stringify(this._copy(e,{coerce:3}))},f.prototype.clone=function(e,t){return t&&(t={coerce:0|!!t.coerceBuffers,fieldHook:t.fieldHook,wrap:0|!!t.wrapUnions}),this._copy(e,t)},f.prototype.isValid=function(e,t){for(;u.length;)u.pop();return this._check(e,t&&t.errorHook)},f.prototype.compareBuffers=function(e,t){return this._match(new s(e),new s(t))},f.prototype.getName=function(e){return e?q(this):this._name},f.prototype.getSchema=function(e){return V(this,e)},f.prototype.getFingerprint=function(e){return i.getHash(this.getSchema(),e)},f.prototype.inspect=function(){if(this instanceof y)return l("<%s>",this.constructor.name);var e=JSON.parse(this.getSchema(!0));return"object"==typeof e&&(e.type=void 0),l("<%s %j>",this.constructor.name,e)},f.prototype._check=i.abstractFunction,f.prototype._copy=i.abstractFunction,f.prototype._match=i.abstractFunction,f.prototype._read=i.abstractFunction,f.prototype._skip=i.abstractFunction,f.prototype._updateResolver=i.abstractFunction,f.prototype._write=i.abstractFunction,f.prototype.compare=i.abstractFunction,f.prototype.random=i.abstractFunction,a.inherits(y,f),y.prototype._updateResolver=function(e,t){t.constructor===this.constructor&&(e._read=this._read)},y.prototype._copy=function(e){return this._check(e,H),e},y.prototype.compare=i.compare,a.inherits(g,y),g.prototype._check=function(e,t){var n=null===e;return!n&&t&&t(u.slice(),e,this),n},g.prototype._read=function(){return null},g.prototype._skip=function(){},g.prototype._write=function(e,t){null!==t&&H(null,t,this)},g.prototype._match=function(){return 0},g.prototype.compare=g.prototype._match,g.prototype.random=g.prototype._read,g.prototype.toJSON=function(){return"null"},a.inherits(z,y),z.prototype._check=function(e,t){var n="boolean"==typeof e;return!n&&t&&t(u.slice(),e,this),n},z.prototype._read=function(e){return e.readBoolean()},z.prototype._skip=function(e){e.skipBoolean()},z.prototype._write=function(e,t){"boolean"!=typeof t&&H(null,t,this),e.writeBoolean(t)},z.prototype._match=function(e,t){return e.matchBoolean(t)},z.prototype.random=function(){return d.nextBoolean()},z.prototype.toJSON=function(){return"boolean"},a.inherits(b,y),b.prototype._check=function(e,t){var n=e===(0|e);return!n&&t&&t(u.slice(),e,this),n},b.prototype._read=function(e){return e.readInt()},b.prototype._skip=function(e){e.skipInt()},b.prototype._write=function(e,t){t!==(0|t)&&H(null,t,this),e.writeInt(t)},b.prototype._match=function(e,t){return e.matchInt(t)},b.prototype.random=function(){return 0|d.nextInt(1e3)},b.prototype.toJSON=function(){return"int"},a.inherits(h,y),h.prototype._check=function(e,t){var n="number"==typeof e&&e%1==0&&K(e);return!n&&t&&t(u.slice(),e,this),n},h.prototype._read=function(e){var t=e.readLong();if(!K(t))throw new Error("potential precision loss");return t},h.prototype._skip=function(e){e.skipLong()},h.prototype._write=function(e,t){("number"!=typeof t||t%1||!K(t))&&H(null,t,this),e.writeLong(t)},h.prototype._match=function(e,t){return e.matchLong(t)},h.prototype._updateResolver=function(e,t){(t instanceof h||t instanceof b)&&(e._read=t._read)},h.prototype.random=function(){return d.nextInt()},h.prototype.toJSON=function(){return"long"},h.using=function(e,t){e=e||{};var n={toBuffer:"_toBuffer",fromBuffer:"_fromBuffer",fromJSON:"_fromJSON",toJSON:"_toJSON",isValid:"_isValid",compare:"compare"},i=new C(t);return Object.keys(n).forEach((function(t){if(void 0===e[t])throw new Error(l("missing method implementation: %s",t));i[n[t]]=e[t]})),i},a.inherits(_,y),_.prototype._check=function(e,t){var n="number"==typeof e;return!n&&t&&t(u.slice(),e,this),n},_.prototype._read=function(e){return e.readFloat()},_.prototype._skip=function(e){e.skipFloat()},_.prototype._write=function(e,t){"number"!=typeof t&&H(null,t,this),e.writeFloat(t)},_.prototype._match=function(e,t){return e.matchFloat(t)},_.prototype._updateResolver=function(e,t){(t instanceof _||t instanceof h||t instanceof b)&&(e._read=t._read)},_.prototype.random=function(){return d.nextFloat(1e3)},_.prototype.toJSON=function(){return"float"},a.inherits(v,y),v.prototype._check=function(e,t){var n="number"==typeof e;return!n&&t&&t(u.slice(),e,this),n},v.prototype._read=function(e){return e.readDouble()},v.prototype._skip=function(e){e.skipDouble()},v.prototype._write=function(e,t){"number"!=typeof t&&H(null,t,this),e.writeDouble(t)},v.prototype._match=function(e,t){return e.matchDouble(t)},v.prototype._updateResolver=function(e,t){(t instanceof v||t instanceof _||t instanceof h||t instanceof b)&&(e._read=t._read)},v.prototype.random=function(){return d.nextFloat()},v.prototype.toJSON=function(){return"double"},a.inherits(w,y),w.prototype._check=function(e,t){var n="string"==typeof e;return!n&&t&&t(u.slice(),e,this),n},w.prototype._read=function(e){return e.readString()},w.prototype._skip=function(e){e.skipString()},w.prototype._write=function(e,t){"string"!=typeof t&&H(null,t,this),e.writeString(t)},w.prototype._match=function(e,t){return e.matchString(t)},w.prototype._updateResolver=function(e,t){(t instanceof w||t instanceof S)&&(e._read=this._read)},w.prototype.random=function(){return d.nextString(d.nextInt(32))},w.prototype.toJSON=function(){return"string"},a.inherits(S,y),S.prototype._check=function(e,n){var i=t.isBuffer(e);return!i&&n&&n(u.slice(),e,this),i},S.prototype._read=function(e){return e.readBytes()},S.prototype._skip=function(e){e.skipBytes()},S.prototype._write=function(e,n){t.isBuffer(n)||H(null,n,this),e.writeBytes(n)},S.prototype._match=function(e,t){return e.matchBytes(t)},S.prototype._updateResolver=w.prototype._updateResolver,S.prototype._copy=function(e,n){var i;switch(0|(n&&n.coerce)){case 3:return this._check(e,H),e.toString("binary");case 2:if("string"!=typeof e)throw new Error(l("cannot coerce to buffer: %j",e));return i=new t(e,"binary"),this._check(i,H),i;case 1:if(!(e&&"Buffer"===e.type&&e.data instanceof Array))throw new Error(l("cannot coerce to buffer: %j",e));return i=new t(e.data),this._check(i,H),i;default:return this._check(e,H),new t(e)}},S.prototype.compare=t.compare,S.prototype.random=function(){return d.nextBuffer(d.nextInt(32))},S.prototype.toJSON=function(){return"bytes"},a.inherits(x,f),x.prototype._check=function(e,t){var n=!1;if(null===e)n=void 0!==this._indices.null;else if("object"==typeof e){var i=Object.keys(e);if(1===i.length){var o=i[0],a=this._indices[o];if(void 0!==a)return u.push(o),n=this._types[a]._check(e[o],t),u.pop(),n}}return!n&&t&&t(u.slice(),e,this),n},x.prototype._read=function(e){var t=e.readLong(),n=this._constructors[t];if(n)return new n(this._types[t]._read(e));if(null===n)return null;throw new Error(l("invalid union index: %s",t))},x.prototype._skip=function(e){this._types[e.readLong()]._skip(e)},x.prototype._write=function(e,t){var n,i,o;null===t?(void 0===(n=this._indices.null)&&H(null,t,this),e.writeLong(n)):(1===(i=Object.keys(t)).length&&(o=i[0],n=this._indices[o]),void 0===n&&H(null,t,this),e.writeLong(n),this._types[n]._write(e,t[o]))},x.prototype._match=function(e,t){var n=e.readLong(),i=t.readLong();return n===i?this._types[n]._match(e,t):n<i?-1:1},x.prototype._updateResolver=function(e,t,n){var i,o,a,s;for(i=0,o=this._types.length;i<o;i++){try{a=this._types[i].createResolver(t,n)}catch(e){continue}return s=this._constructors[i],void(e._read=s?function(e){return new s(a._read(e))}:function(){return null})}},x.prototype._copy=function(e,t){var n,i,o,a=t&&0|t.wrap;if(2===a)return null===e&&null===this._constructors[0]?null:new this._constructors[0](this._types[0]._copy(e,t));if(null===e&&void 0!==this._indices.null)return null;if("object"==typeof e){var s=Object.keys(e);if(1===s.length){var l,r,p=s[0];if(void 0===(n=this._indices[p]))for(l=0,i=this._types.length;l<i;l++)if((r=this._types[l])._name&&p===D(r._name)){n=l;break}void 0!==n&&(o=this._types[n]._copy(e[p],t))}}if(1===a&&void 0===o)for(n=0,i=this._types.length;n<i&&void 0===o;)try{o=this._types[n]._copy(e,t)}catch(e){n++}if(void 0!==o)return new this._constructors[n](o);H(null,e,this)},x.prototype.compare=function(e,t){var n=null===e?"null":Object.keys(e)[0],o=null===t?"null":Object.keys(t)[0],a=this._indices[n];return n===o?"null"===n?0:this._types[a].compare(e[n],t[n]):i.compare(a,this._indices[o])},x.prototype.getTypes=function(){return this._types.slice()},x.prototype.random=function(){var e=d.nextInt(this._types.length),t=this._constructors[e];return t?new t(this._types[e].random()):null},x.prototype.toJSON=function(){return this._types},a.inherits(P,f),P.prototype._check=function(e,t){var n=void 0!==this._indices[e];return!n&&t&&t(u.slice(),e,this),n},P.prototype._read=function(e){var t=e.readLong(),n=this._symbols[t];if(void 0===n)throw new Error(l("invalid %s enum index: %s",this._name,t));return n},P.prototype._skip=function(e){e.skipLong()},P.prototype._write=function(e,t){var n=this._indices[t];void 0===n&&H(null,t,this),e.writeLong(n)},P.prototype._match=function(e,t){return e.matchLong(t)},P.prototype.compare=function(e,t){return i.compare(this._indices[e],this._indices[t])},P.prototype._updateResolver=function(e,t){var n=this._symbols;t instanceof P&&~B(this).indexOf(t._name)&&t._symbols.every((function(e){return~n.indexOf(e)}))&&(e._symbols=t._symbols,e._read=t._read)},P.prototype._copy=function(e){return this._check(e,H),e},P.prototype.getAliases=function(){return this._aliases},P.prototype.getSymbols=function(){return this._symbols.slice()},P.prototype.random=function(){return d.choice(this._symbols)},P.prototype.toJSON=function(){return{name:this._name,type:"enum",symbols:this._symbols}},a.inherits(T,f),T.prototype._check=function(e,n){var i=t.isBuffer(e)&&e.length===this._size;return!i&&n&&n(u.slice(),e,this),i},T.prototype._read=function(e){return e.readFixed(this._size)},T.prototype._skip=function(e){e.skipFixed(this._size)},T.prototype._write=function(e,n){t.isBuffer(n)&&n.length===this._size||H(null,n,this),e.writeFixed(n,this._size)},T.prototype._match=function(e,t){return e.matchFixed(t,this._size)},T.prototype.compare=t.compare,T.prototype._updateResolver=function(e,t){t instanceof T&&this._size===t._size&&~B(this).indexOf(t._name)&&(e._size=this._size,e._read=this._read)},T.prototype._copy=S.prototype._copy,T.prototype.getAliases=function(){return this._aliases},T.prototype.getSize=function(){return this._size},T.prototype.random=function(){return d.nextBuffer(this._size)},T.prototype.toJSON=function(){return{name:this._name,type:"fixed",size:this._size}},a.inherits(j,f),j.prototype.getValuesType=function(){return this._values},j.prototype._check=function(e,t){if(!e||"object"!=typeof e||e instanceof Array)return t&&t(u.slice(),e,this),!1;var n,i,o,a,s=Object.keys(e),l=!0;if(t){for(o=u.length,u.push(""),n=0,i=s.length;n<i;n++)a=u[o]=s[n],this._values._check(e[a],t)||(l=!1);u.pop()}else for(n=0,i=s.length;n<i;n++)if(!this._values._check(e[s[n]],t))return!1;return l},j.prototype._read=function(e){for(var t,n=this._values,i={};t=F(e);)for(;t--;){i[e.readString()]=n._read(e)}return i},j.prototype._skip=function(e){for(var t,n,i=this._values;n=e.readLong();)if(n<0)t=e.readLong(),e.pos+=t;else for(;n--;)e.skipString(),i._skip(e)},j.prototype._write=function(e,t){(!t||"object"!=typeof t||t instanceof Array)&&H(null,t,this);var n,i,o=this._values,a=Object.keys(t),s=a.length;if(s)for(e.writeLong(s),n=0;n<s;n++)i=a[n],e.writeString(i),o._write(e,t[i]);e.writeLong(0)},j.prototype._match=function(){throw new Error("maps cannot be compared")},j.prototype._updateResolver=function(e,t,n){t instanceof j&&(e._values=this._values.createResolver(t._values,n),e._read=this._read)},j.prototype._copy=function(e,t){if(e&&"object"==typeof e&&!(e instanceof Array)){var n,i,o,a=this._values,s=Object.keys(e),l={};for(n=0,i=s.length;n<i;n++)l[o=s[n]]=a._copy(e[o],t);return l}H(null,e,this)},j.prototype.compare=j.prototype._match,j.prototype.random=function(){var e,t,n={};for(e=0,t=d.nextInt(10);e<t;e++)n[d.nextString(d.nextInt(20))]=this._values.random();return n},j.prototype.toJSON=function(){return{type:"map",values:this._values}},a.inherits(A,f),A.prototype._check=function(e,t){if(!(e instanceof Array))return t&&t(u.slice(),e,this),!1;var n,i,o,a=!0;if(t){for(o=u.length,u.push(""),n=0,i=e.length;n<i;n++)u[o]=""+n,this._items._check(e[n],t)||(a=!1);u.pop()}else for(n=0,i=e.length;n<i;n++)if(!this._items._check(e[n],t))return!1;return a},A.prototype._read=function(e){for(var t,n=this._items,i=[];t=e.readLong();)for(t<0&&(t=-t,e.skipLong());t--;)i.push(n._read(e));return i},A.prototype._skip=function(e){for(var t,n;n=e.readLong();)if(n<0)t=e.readLong(),e.pos+=t;else for(;n--;)this._items._skip(e)},A.prototype._write=function(e,t){t instanceof Array||H(null,t,this);var n,i=t.length;if(i)for(e.writeLong(i),n=0;n<i;n++)this._items._write(e,t[n]);e.writeLong(0)},A.prototype._match=function(e,t){for(var n,o=e.readLong(),a=t.readLong();o&&a;){if(n=this._items._match(e,t))return n;--o||(o=F(e)),--a||(a=F(t))}return i.compare(o,a)},A.prototype._updateResolver=function(e,t,n){t instanceof A&&(e._items=this._items.createResolver(t._items,n),e._read=this._read)},A.prototype._copy=function(e,t){e instanceof Array||H(null,e,this);var n,i,o=[];for(n=0,i=e.length;n<i;n++)o.push(this._items._copy(e[n],t));return o},A.prototype.compare=function(e,t){var n,o,a,s=e.length,l=t.length;for(n=0,o=Math.min(s,l);n<o;n++)if(a=this._items.compare(e[n],t[n]))return a;return i.compare(s,l)},A.prototype.getItemsType=function(){return this._items},A.prototype.random=function(){var e,t,n=[];for(e=0,t=d.nextInt(10);e<t;e++)n.push(this._items.random());return n},A.prototype.toJSON=function(){return{type:"array",items:this._items}},a.inherits(E,f),E.prototype._createConstructor=function(e){var t,n,i,o,s,l=[],r=[],p=[],d=e?"  Error.call(this);\n":"";for(t=0,n=this._fields.length;t<n;t++)s=(i=this._fields[t]).getDefault,o=i._name,r.push("v"+t),d+="  ",void 0===s()?d+="this."+o+" = v"+t+";\n":(d+="if (v"+t+" === undefined) { ",d+="this."+o+" = d"+p.length+"(); ",d+="} else { this."+o+" = v"+t+"; }\n",l.push("d"+p.length),p.push(s));var k="return function "+D(this._name)+"(";k+=r.join()+") {\n"+d+"};";var u=new Function(l.join(),k).apply(void 0,p),c=this;return u.getType=function(){return c},u.prototype={constructor:u,$clone:function(e){return c.clone(this,e)},$compare:function(e){return c.compare(this,e)},$getType:u.getType,$isValid:function(e){return c.isValid(this,e)},$toBuffer:function(){return c.toBuffer(this)},$toString:function(e){return c.toString(this,e)}},e&&a.inherits(u,Error),u},E.prototype._createChecker=function(){var e=["t","P"],t=[this,u],n="return function check"+D(this._name)+"(val, cb) {\n";if(n+="  if (val === null || typeof val != 'object') {\n",n+="    if (cb) { cb(P.slice(), val, t); }\n",n+="    return false;\n",n+="  }\n",this._fields.length){for(i=0,o=this._fields.length;i<o;i++)a=this._fields[i],e.push("t"+i),t.push(a._type),void 0!==a.getDefault()&&(n+="  var v"+i+" = val."+a._name+";\n");var i,o,a;for(n+="  if (cb) {\n",n+="    var b = 1;\n",n+="    var j = P.length;\n",n+="    P.push('');\n",i=0,o=this._fields.length;i<o;i++)n+="    P[j] = '"+(a=this._fields[i])._name+"';\n",void 0===a.getDefault()?n+="    b &= t"+i+"._check(val."+a._name+", cb);\n":(n+="    b &= v"+i+" === undefined || ",n+="t"+i+"._check(v"+i+", cb);\n");n+="    P.pop();\n",n+="    return !!b;\n",n+="  } else {\n    return (\n      ",n+=this._fields.map((function(e,t){return void 0===e.getDefault()?"t"+t+"._check(val."+e._name+")":"(v"+t+" === undefined || t"+t+"._check(v"+t+"))"})).join(" &&\n      "),n+="\n    );\n  }\n"}else n+="  return true;\n";return n+="};",new Function(e.join(),n).apply(void 0,t)},E.prototype._createReader=function(){var e,t,n=D(this._name),i=[],o=[this._constructor];for(e=0,t=this._fields.length;e<t;e++)i.push("t"+e),o.push(this._fields[e]._type);var a="return function read"+n+"(tap) {\n";return a+="  return new "+n+"(",a+=i.map((function(e){return e+"._read(tap)"})).join(),a+=");\n};",i.unshift(n),new Function(i.join(),a).apply(void 0,o)},E.prototype._createSkipper=function(){var e,t,n=[],i="return function skip"+D(this._name)+"(tap) {\n",o=[];for(e=0,t=this._fields.length;e<t;e++)n.push("t"+e),o.push(this._fields[e]._type),i+="  t"+e+"._skip(tap);\n";return i+="}",new Function(n.join(),i).apply(void 0,o)},E.prototype._createWriter=function(){var e,t,n,i,o=[],a="return function write"+D(this._name)+"(tap, val) {\n",s=[];for(e=0,t=this._fields.length;e<t;e++)n=this._fields[e],o.push("t"+e),s.push(n._type),a+="  ",void 0===n.getDefault()?a+="t"+e+"._write(tap, val."+n._name+");\n":(i=n._type.toBuffer(n.getDefault()).toString("binary"),o.push("d"+e),s.push(i),a+="var v"+e+" = val."+n._name+"; ",a+="if (v"+e+" === undefined) { ",a+="tap.writeBinary(d"+e+", "+i.length+");",a+=" } else { t"+e+"._write(tap, v"+e+"); }\n");return a+="}",new Function(o.join(),a).apply(void 0,s)},E.prototype._updateResolver=function(e,t,n){if(!~B(this).indexOf(t._name))throw new Error(l("no alias for %s in %s",t._name,this._name));var o,a,s,r,p,d,k=this._fields,u=t._fields,c=i.toMap(u,(function(e){return e._name})),m=[],f={};for(o=0;o<k.length;o++){for(p=B(s=k[o]),d=[],a=0;a<p.length;a++)c[r=p[a]]&&d.push(r);if(d.length>1)throw new Error(l("multiple matches for %s",s.name));if(d.length)f[r=d[0]]={resolver:s._type.createResolver(c[r]._type,n),name:s._name},m.push(s._name);else{if(void 0===s.getDefault())throw new Error(l("no match for default-less %s",s.name));m.push("undefined")}}var y=-1;for(o=u.length;o&&void 0===f[u[--o]._name];)y=o;var g=D(this._name),z=[g],b=[this._constructor],h="  return function read"+g+"(tap,lazy) {\n";for(o=0;o<u.length;o++)o===y&&(h+="  if (!lazy) {\n"),h+=~y&&o>=y?"    ":"  ",void 0===f[r=(s=t._fields[o])._name]?(z.push("t"+o),b.push(s._type),h+="t"+o+"._skip(tap);\n"):(z.push("t"+o),b.push(f[r].resolver),h+="var "+f[r].name+" = ",h+="t"+o+"._read(tap);\n");~y&&(h+="  }\n"),h+="  return new "+g+"("+m.join()+");\n};",e._read=new Function(z.join(),h).apply(void 0,b)},E.prototype._match=function(e,t){var n,i,o,a,s,l=this._fields;for(n=0,i=l.length;n<i;n++)if(a=(o=l[n])._order,s=o._type,a){if(a*=s._match(e,t))return a}else s._skip(e),s._skip(t);return 0},E.prototype._copy=function(e,t){var n,i,o,a,s=t&&t.fieldHook,l=[void 0];for(n=0,i=this._fields.length;n<i;n++)a=(o=this._fields[n])._type._copy(e[o._name],t),s&&(a=s(o,a,this)),l.push(a);return new(this._constructor.bind.apply(this._constructor,l))},E.prototype.compare=function(e,t){var n,i,o,a,s,l,r=this._fields;for(n=0,i=r.length;n<i;n++)if(a=(o=r[n])._name,s=o._order,l=o._type,s&&(s*=l.compare(e[a],t[a])))return s;return 0},E.prototype.random=function(){var e=this._fields.map((function(e){return e._type.random()}));return e.unshift(void 0),new(this._constructor.bind.apply(this._constructor,e))},E.prototype.getAliases=function(){return this._aliases},E.prototype.getFields=function(){return this._fields.slice()},E.prototype.getRecordConstructor=function(){return this._constructor},E.prototype.toJSON=function(){return{name:this._name,type:"record",fields:this._fields}},a.inherits(L,f),L.prototype.getUnderlyingType=function(){return this._underlyingType},L.prototype._read=function(e){return this._fromValue(this._underlyingType._read(e))},L.prototype._write=function(e,t){this._underlyingType._write(e,this._toValue(t))},L.prototype._check=function(e,t){try{var n=this._toValue(e)}catch(n){return t&&t(u.slice(),e,this),!1}return this._underlyingType._check(n,t)},L.prototype._copy=function(e,t){var n=this._underlyingType;switch(t&&t.coerce){case 3:return n._copy(this._toValue(e),t);case 2:return this._fromValue(n._copy(e,t));default:return this._fromValue(n._copy(this._toValue(e),t))}},L.prototype._updateResolver=function(e,t,n){var i=this._resolve(t,n);i&&(e._read=function(e){return i(t._read(e))})},L.prototype.random=function(){return this._fromValue(this._underlyingType.random())},L.prototype.compare=function(e,t){var n=this._toValue(e),i=this._toValue(t);return this._underlyingType.compare(n,i)},L.prototype.toJSON=function(){return this._underlyingType.toJSON()},L.prototype._fromValue=i.abstractFunction,L.prototype._toValue=i.abstractFunction,L.prototype._resolve=i.abstractFunction,a.inherits(C,h),C.prototype._check=function(e,t){var n=this._isValid(e);return!n&&t&&t(u.slice(),e,this),n},C.prototype._read=function(e){var t,n;if(this._noUnpack?(n=e.pos,e.skipLong(),t=e.buf.slice(n,e.pos)):t=e.unpackLongBytes(e),e.isValid())return this._fromBuffer(t)},C.prototype._write=function(e,t){this._isValid(t)||H(null,t,this);var n=this._toBuffer(t);this._noUnpack?e.writeFixed(n):e.packLongBytes(n)},C.prototype._copy=function(e,t){switch(t&&t.coerce){case 3:return this._toJSON(e);case 2:return this._fromJSON(e);default:return this._fromJSON(JSON.parse(JSON.stringify(this._toJSON(e))))}},C.prototype.random=function(){return this._fromJSON(h.prototype.random())},C.prototype._fromBuffer=i.abstractFunction,C.prototype._toBuffer=i.abstractFunction,C.prototype._fromJSON=i.abstractFunction,C.prototype._toJSON=i.abstractFunction,C.prototype._isValid=i.abstractFunction,C.prototype.compare=i.abstractFunction,O.prototype.getAliases=function(){return this._aliases},O.prototype.getDefault=function(){},O.prototype.getName=function(){return this._name},O.prototype.getOrder=function(){return["descending","ignore","ascending"][this._order+1]},O.prototype.getType=function(){return this._type},O.prototype.inspect=function(){return l("<Field %j>",this._name)},M.prototype.inspect=function(){return"<Resolver>"},e.exports={createType:m,resolveNames:N,stringify:V,types:function(){var e,t,n,i={Type:f,LogicalType:L},o=Object.keys(r);for(e=0,t=o.length;e<t;e++)i[(n=r[o[e]]).name]=n;return i}()}}).call(this,n(39).Buffer)},271:function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},272:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},273:function(e,t,n){var i=n(274),o=n(107),a="Validator API is deprecated. Please use the type API instead.";b=o.deprecate(b,a),h=o.deprecate(h,a);var s={PrimitiveTypes:["null","boolean","int","long","float","double","bytes","string"],ComplexTypes:["record","enum","array","map","union","fixed"]};s.Types=s.PrimitiveTypes.concat(s.ComplexTypes);var l=function(e){return new Error("InvalidSchemaError: "+e)},r=function(e){return new Error("InvalidProtocolError: "+e)},p=function(e){return new Error("ValidationError: "+e)},d=function(e){return new Error("ProtocolValidationError: "+e)};function k(e,t,n){!function(e,t,n){if(!i.isString(e))throw new l("Record name must be string");if(!i.isNull(t)&&!i.isUndefined(t)&&!i.isString(t))throw new l("Record namespace must be string or null");if(!i.isArray(n))throw new l("Record name must be string")}(e,t,n),this.name=e,this.namespace=t,this.fields=n}function u(e,t){var n=null;if(i.isString(e))n=e;else{if(!i.isObject(e))throw new l("unable to determine fully qualified type name from schema "+JSON.stringify(e)+" in namespace "+t);i.isString(e.namespace)&&(t=e.namespace),i.isString(e.name)?n=e.name:i.isString(e.type)&&(n=e.type)}if(!i.isString(n))throw new l("unable to determine type name from schema "+JSON.stringify(e)+" in namespace "+t);return-1!==n.indexOf(".")?n:i.contains(s.PrimitiveTypes,n)?n:i.isString(t)?t+"."+n:n}function c(e,t){this.branchNames=function(){return i.map(e,(function(e){return u(e,t)}))},function(e){if(!i.isArray(e)||i.isEmpty(e))throw new l("Union must have at least 1 branch")}(e),this.typeSchemas=e,this.namespace=t}function m(e){!function(e){if(!i.isArray(e))throw new l("Enum must have array of symbols, got "+JSON.stringify(e));if(!i.all(e,(function(e){return i.isString(e)})))throw new l("Enum symbols must be strings, got "+JSON.stringify(e))}(e),this.symbols=e}function f(e){!function(e){if(i.isNull(e)||i.isUndefined(e))throw new l('Array "items" schema should not be null or undefined')}(e),this.itemSchema=e}function y(e){!function(e){if(i.isNull(e)||i.isUndefined(e))throw new l('Map "values" schema should not be null or undefined')}(e),this.valueSchema=e}function g(e,t){this.name=e,this.schema=t}function z(e){!function(e){if(!i.isString(e))throw new l("Primitive type name must be a string");if(!i.contains(s.PrimitiveTypes,e))throw new l("Primitive type must be one of: "+JSON.stringify(s.PrimitiveTypes)+"; got "+e)}(e),this.type=e}function b(e,t,n){this.validate=function(e){return o(this.schema,e)};var o=function(e,t){if(e instanceof k)return a(e,t);if(e instanceof c)return r(e,t);if(e instanceof m)return d(e,t);if(e instanceof f)return b(e,t);if(e instanceof y)return h(e,t);if(e instanceof z)return _(e,t);throw new l("validation not yet implemented: "+JSON.stringify(e))},a=function(e,t){if(!i.isObject(t)||i.isArray(t))throw new p("Expected record Javascript type to be non-array object, got "+JSON.stringify(t));var n=i.pluck(e.fields,"name").sort(),a=i.keys(t).sort();if(!i.isEqual(n,a))throw new p("Expected record fields "+JSON.stringify(n)+"; got "+JSON.stringify(a));return i.all(e.fields,(function(e){return o(e.schema,t[e.name])}))},r=function(e,t){if(i.isObject(t)){if(i.isArray(t))throw new p("Expected union Javascript type to be non-array object (or null), got "+JSON.stringify(t));if(1!==i.size(t))throw new p("Expected union Javascript object to be object with exactly 1 key (or null), got "+JSON.stringify(t));var n=i.keys(t)[0];if(""===n)throw new p("Expected union Javascript object to contain non-empty string branch, got "+JSON.stringify(t));if(i.contains(e.branchNames(),n))return!0;throw new p("Expected union branch to be one of "+JSON.stringify(e.branchNames())+"; got "+JSON.stringify(n))}if(i.isNull(t)){if(i.contains(e.branchNames(),"null"))return!0;throw new p("Expected union branch to be one of "+JSON.stringify(e.branchNames())+"; got "+JSON.stringify(t))}throw new p("Expected union Javascript object to be non-array object of size 1 or null, got "+JSON.stringify(t))},d=function(e,t){if(i.isString(t)){if(i.contains(e.symbols,t))return!0;throw new p("Expected enum value to be one of "+JSON.stringify(e.symbols)+"; got "+JSON.stringify(t))}throw new p("Expected enum Javascript object to be string, got "+JSON.stringify(t))},b=function(e,t){if(i.isArray(t))return i.all(t,(function(t){return o(e.itemSchema,t)}));throw new p("Expected array Javascript object to be array, got "+JSON.stringify(t))},h=function(e,t){if(i.isObject(t)&&!i.isArray(t))return i.all(t,(function(t){return o(e.valueSchema,t)}));throw i.isArray(t)?new p("Expected map Javascript object to be non-array object, got array "+JSON.stringify(t)):new p("Expected map Javascript object to be non-array object, got "+JSON.stringify(t))},_=function(e,t){switch(e.type){case"null":if(i.isNull(t)||i.isUndefined(t))return!0;throw new p("Expected Javascript null or undefined for Avro null, got "+JSON.stringify(t));case"boolean":if(i.isBoolean(t))return!0;throw new p("Expected Javascript boolean for Avro boolean, got "+JSON.stringify(t));case"int":if(i.isNumber(t)&&Math.floor(t)===t&&Math.abs(t)<=Math.pow(2,31))return!0;throw new p("Expected Javascript int32 number for Avro int, got "+JSON.stringify(t));case"long":if(i.isNumber(t)&&Math.floor(t)===t&&Math.abs(t)<=Math.pow(2,63))return!0;throw new p("Expected Javascript int64 number for Avro long, got "+JSON.stringify(t));case"float":if(i.isNumber(t))return!0;throw new p("Expected Javascript float number for Avro float, got "+JSON.stringify(t));case"double":if(i.isNumber(t))return!0;throw new p("Expected Javascript double number for Avro double, got "+JSON.stringify(t));case"bytes":throw new l("not yet implemented: "+e.type);case"string":if(i.isString(t))return!0;throw new p("Expected Javascript string for Avro string, got "+JSON.stringify(t));default:throw new l("unrecognized primitive type: "+e.type)}},v=n||{},w=function(e,t){if(i.has(v,e)){if(!i.isEqual(v[e],t))throw new l("conflicting definitions for type "+e+": "+JSON.stringify(v[e])+" and "+JSON.stringify(t))}else v[e]=t},S=function(e){return i.has(v,e)?v[e]:null},x=function(e,t){if(i.contains(s.PrimitiveTypes,e))return new z(e);if(i.isNull(S(u(e,t))))throw new l("unknown type name: "+JSON.stringify(e)+"; known type names are "+JSON.stringify(i.keys(v)));return S(u(e,t))},P=function(e,t,n){if(i.isNull(e)||i.isUndefined(e))throw new l("schema is null, in parentSchema: "+JSON.stringify(t));if(i.isString(e))return x(e,n);if(i.isObject(e)&&!i.isArray(e)){if("record"===e.type){var o=new k(e.name,e.namespace,i.map(e.fields,(function(t){return new g(t.name,P(t.type,e,e.namespace||n))})));return w(u(e,n),o),o}if("enum"===e.type){if(i.has(e,"symbols")){var a=new m(e.symbols);return w(u(e,n),a),a}throw new l("enum must specify symbols, got "+JSON.stringify(e))}if("array"===e.type){if(i.has(e,"items"))return new f(P(e.items,e,n));throw new l('array must specify "items" schema, got '+JSON.stringify(e))}if("map"===e.type){if(i.has(e,"values"))return new y(P(e.values,e,n));throw new l('map must specify "values" schema, got '+JSON.stringify(e))}if(i.has(e,"type")&&i.contains(s.PrimitiveTypes,e.type))return x(e.type,n);throw new l("not yet implemented: "+e.type)}if(i.isArray(e)){if(i.isEmpty(e))throw new l("unions must have at least 1 branch");return new c(i.map(e,(function(t){return P(t,e,n)})),n)}throw new l("unexpected Javascript type for schema: "+typeof e)};this.rawSchema=e,this.schema=P(e,null,t)}function h(e){this.validate=function(n,o){var a=u(n,e.namespace);if(!i.has(t,a))throw new d("Protocol does not contain definition for type "+JSON.stringify(a)+' (fully qualified from input "'+n+'"); known types are '+JSON.stringify(i.keys(t)));return t[a].validate(o)};var t={};!function(e){var n={};if(!i.has(e,"protocol")||!i.isString(e.protocol))throw new r('Protocol must contain a "protocol" attribute with a string value');i.isArray(e.types)&&i.each(e.types,(function(i){var o=new b(i,e.namespace,n),a=u(i,e.namespace);t[a]=o}))}(e)}b.validate=function(e,t){return new b(e).validate(t)},h.validate=function(e,t,n){return new h(e).validate(t,n)},t.Validator=b,t.ProtocolValidator=h},274:function(e,t,n){(function(e,n){var i;!function(){var o="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},a=o._,s=Array.prototype,l=Object.prototype,r="undefined"!=typeof Symbol?Symbol.prototype:null,p=s.push,d=s.slice,k=l.toString,u=l.hasOwnProperty,c=Array.isArray,m=Object.keys,f=Object.create,y=function(){},g=function(e){return e instanceof g?e:this instanceof g?void(this._wrapped=e):new g(e)};t.nodeType?o._=g:(!n.nodeType&&n.exports&&(t=n.exports=g),t._=g),g.VERSION="1.9.1";var z,b=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,o){return e.call(t,n,i,o)};case 4:return function(n,i,o,a){return e.call(t,n,i,o,a)}}return function(){return e.apply(t,arguments)}},h=function(e,t,n){return g.iteratee!==z?g.iteratee(e,t):null==e?g.identity:g.isFunction(e)?b(e,t,n):g.isObject(e)&&!g.isArray(e)?g.matcher(e):g.property(e)};g.iteratee=z=function(e,t){return h(e,t,1/0)};var _=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),o=0;o<n;o++)i[o]=arguments[o+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i);case 2:return e.call(this,arguments[0],arguments[1],i)}var a=Array(t+1);for(o=0;o<t;o++)a[o]=arguments[o];return a[t]=i,e.apply(this,a)}},v=function(e){if(!g.isObject(e))return{};if(f)return f(e);y.prototype=e;var t=new y;return y.prototype=null,t},w=function(e){return function(t){return null==t?void 0:t[e]}},S=function(e,t){return null!=e&&u.call(e,t)},x=function(e,t){for(var n=t.length,i=0;i<n;i++){if(null==e)return;e=e[t[i]]}return n?e:void 0},P=Math.pow(2,53)-1,T=w("length"),j=function(e){var t=T(e);return"number"==typeof t&&t>=0&&t<=P};g.each=g.forEach=function(e,t,n){var i,o;if(t=b(t,n),j(e))for(i=0,o=e.length;i<o;i++)t(e[i],i,e);else{var a=g.keys(e);for(i=0,o=a.length;i<o;i++)t(e[a[i]],a[i],e)}return e},g.map=g.collect=function(e,t,n){t=h(t,n);for(var i=!j(e)&&g.keys(e),o=(i||e).length,a=Array(o),s=0;s<o;s++){var l=i?i[s]:s;a[s]=t(e[l],l,e)}return a};var A=function(e){var t=function(t,n,i,o){var a=!j(t)&&g.keys(t),s=(a||t).length,l=e>0?0:s-1;for(o||(i=t[a?a[l]:l],l+=e);l>=0&&l<s;l+=e){var r=a?a[l]:l;i=n(i,t[r],r,t)}return i};return function(e,n,i,o){var a=arguments.length>=3;return t(e,b(n,o,4),i,a)}};g.reduce=g.foldl=g.inject=A(1),g.reduceRight=g.foldr=A(-1),g.find=g.detect=function(e,t,n){var i=(j(e)?g.findIndex:g.findKey)(e,t,n);if(void 0!==i&&-1!==i)return e[i]},g.filter=g.select=function(e,t,n){var i=[];return t=h(t,n),g.each(e,(function(e,n,o){t(e,n,o)&&i.push(e)})),i},g.reject=function(e,t,n){return g.filter(e,g.negate(h(t)),n)},g.every=g.all=function(e,t,n){t=h(t,n);for(var i=!j(e)&&g.keys(e),o=(i||e).length,a=0;a<o;a++){var s=i?i[a]:a;if(!t(e[s],s,e))return!1}return!0},g.some=g.any=function(e,t,n){t=h(t,n);for(var i=!j(e)&&g.keys(e),o=(i||e).length,a=0;a<o;a++){var s=i?i[a]:a;if(t(e[s],s,e))return!0}return!1},g.contains=g.includes=g.include=function(e,t,n,i){return j(e)||(e=g.values(e)),("number"!=typeof n||i)&&(n=0),g.indexOf(e,t,n)>=0},g.invoke=_((function(e,t,n){var i,o;return g.isFunction(t)?o=t:g.isArray(t)&&(i=t.slice(0,-1),t=t[t.length-1]),g.map(e,(function(e){var a=o;if(!a){if(i&&i.length&&(e=x(e,i)),null==e)return;a=e[t]}return null==a?a:a.apply(e,n)}))})),g.pluck=function(e,t){return g.map(e,g.property(t))},g.where=function(e,t){return g.filter(e,g.matcher(t))},g.findWhere=function(e,t){return g.find(e,g.matcher(t))},g.max=function(e,t,n){var i,o,a=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var l=0,r=(e=j(e)?e:g.values(e)).length;l<r;l++)null!=(i=e[l])&&i>a&&(a=i);else t=h(t,n),g.each(e,(function(e,n,i){((o=t(e,n,i))>s||o===-1/0&&a===-1/0)&&(a=e,s=o)}));return a},g.min=function(e,t,n){var i,o,a=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var l=0,r=(e=j(e)?e:g.values(e)).length;l<r;l++)null!=(i=e[l])&&i<a&&(a=i);else t=h(t,n),g.each(e,(function(e,n,i){((o=t(e,n,i))<s||o===1/0&&a===1/0)&&(a=e,s=o)}));return a},g.shuffle=function(e){return g.sample(e,1/0)},g.sample=function(e,t,n){if(null==t||n)return j(e)||(e=g.values(e)),e[g.random(e.length-1)];var i=j(e)?g.clone(e):g.values(e),o=T(i);t=Math.max(Math.min(t,o),0);for(var a=o-1,s=0;s<t;s++){var l=g.random(s,a),r=i[s];i[s]=i[l],i[l]=r}return i.slice(0,t)},g.sortBy=function(e,t,n){var i=0;return t=h(t,n),g.pluck(g.map(e,(function(e,n,o){return{value:e,index:i++,criteria:t(e,n,o)}})).sort((function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index})),"value")};var E=function(e,t){return function(n,i,o){var a=t?[[],[]]:{};return i=h(i,o),g.each(n,(function(t,o){var s=i(t,o,n);e(a,t,s)})),a}};g.groupBy=E((function(e,t,n){S(e,n)?e[n].push(t):e[n]=[t]})),g.indexBy=E((function(e,t,n){e[n]=t})),g.countBy=E((function(e,t,n){S(e,n)?e[n]++:e[n]=1}));var L=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;g.toArray=function(e){return e?g.isArray(e)?d.call(e):g.isString(e)?e.match(L):j(e)?g.map(e,g.identity):g.values(e):[]},g.size=function(e){return null==e?0:j(e)?e.length:g.keys(e).length},g.partition=E((function(e,t,n){e[n?0:1].push(t)}),!0),g.first=g.head=g.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:g.initial(e,e.length-t)},g.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},g.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:g.rest(e,Math.max(0,e.length-t))},g.rest=g.tail=g.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},g.compact=function(e){return g.filter(e,Boolean)};var C=function(e,t,n,i){for(var o=(i=i||[]).length,a=0,s=T(e);a<s;a++){var l=e[a];if(j(l)&&(g.isArray(l)||g.isArguments(l)))if(t)for(var r=0,p=l.length;r<p;)i[o++]=l[r++];else C(l,t,n,i),o=i.length;else n||(i[o++]=l)}return i};g.flatten=function(e,t){return C(e,t,!1)},g.without=_((function(e,t){return g.difference(e,t)})),g.uniq=g.unique=function(e,t,n,i){g.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=h(n,i));for(var o=[],a=[],s=0,l=T(e);s<l;s++){var r=e[s],p=n?n(r,s,e):r;t&&!n?(s&&a===p||o.push(r),a=p):n?g.contains(a,p)||(a.push(p),o.push(r)):g.contains(o,r)||o.push(r)}return o},g.union=_((function(e){return g.uniq(C(e,!0,!0))})),g.intersection=function(e){for(var t=[],n=arguments.length,i=0,o=T(e);i<o;i++){var a=e[i];if(!g.contains(t,a)){var s;for(s=1;s<n&&g.contains(arguments[s],a);s++);s===n&&t.push(a)}}return t},g.difference=_((function(e,t){return t=C(t,!0,!0),g.filter(e,(function(e){return!g.contains(t,e)}))})),g.unzip=function(e){for(var t=e&&g.max(e,T).length||0,n=Array(t),i=0;i<t;i++)n[i]=g.pluck(e,i);return n},g.zip=_(g.unzip),g.object=function(e,t){for(var n={},i=0,o=T(e);i<o;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n};var O=function(e){return function(t,n,i){n=h(n,i);for(var o=T(t),a=e>0?0:o-1;a>=0&&a<o;a+=e)if(n(t[a],a,t))return a;return-1}};g.findIndex=O(1),g.findLastIndex=O(-1),g.sortedIndex=function(e,t,n,i){for(var o=(n=h(n,i,1))(t),a=0,s=T(e);a<s;){var l=Math.floor((a+s)/2);n(e[l])<o?a=l+1:s=l}return a};var M=function(e,t,n){return function(i,o,a){var s=0,l=T(i);if("number"==typeof a)e>0?s=a>=0?a:Math.max(a+l,s):l=a>=0?Math.min(a+1,l):a+l+1;else if(n&&a&&l)return i[a=n(i,o)]===o?a:-1;if(o!=o)return(a=t(d.call(i,s,l),g.isNaN))>=0?a+s:-1;for(a=e>0?s:l-1;a>=0&&a<l;a+=e)if(i[a]===o)return a;return-1}};g.indexOf=M(1,g.findIndex,g.sortedIndex),g.lastIndexOf=M(-1,g.findLastIndex),g.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var i=Math.max(Math.ceil((t-e)/n),0),o=Array(i),a=0;a<i;a++,e+=n)o[a]=e;return o},g.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],i=0,o=e.length;i<o;)n.push(d.call(e,i,i+=t));return n};var R=function(e,t,n,i,o){if(!(i instanceof t))return e.apply(n,o);var a=v(e.prototype),s=e.apply(a,o);return g.isObject(s)?s:a};g.bind=_((function(e,t,n){if(!g.isFunction(e))throw new TypeError("Bind must be called on a function");var i=_((function(o){return R(e,i,t,this,n.concat(o))}));return i})),g.partial=_((function(e,t){var n=g.partial.placeholder,i=function(){for(var o=0,a=t.length,s=Array(a),l=0;l<a;l++)s[l]=t[l]===n?arguments[o++]:t[l];for(;o<arguments.length;)s.push(arguments[o++]);return R(e,i,this,this,s)};return i})),g.partial.placeholder=g,g.bindAll=_((function(e,t){var n=(t=C(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=t[n];e[i]=g.bind(e[i],e)}})),g.memoize=function(e,t){var n=function(i){var o=n.cache,a=""+(t?t.apply(this,arguments):i);return S(o,a)||(o[a]=e.apply(this,arguments)),o[a]};return n.cache={},n},g.delay=_((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),g.defer=g.partial(g.delay,g,1),g.throttle=function(e,t,n){var i,o,a,s,l=0;n||(n={});var r=function(){l=!1===n.leading?0:g.now(),i=null,s=e.apply(o,a),i||(o=a=null)},p=function(){var p=g.now();l||!1!==n.leading||(l=p);var d=t-(p-l);return o=this,a=arguments,d<=0||d>t?(i&&(clearTimeout(i),i=null),l=p,s=e.apply(o,a),i||(o=a=null)):i||!1===n.trailing||(i=setTimeout(r,d)),s};return p.cancel=function(){clearTimeout(i),l=0,i=o=a=null},p},g.debounce=function(e,t,n){var i,o,a=function(t,n){i=null,n&&(o=e.apply(t,n))},s=_((function(s){if(i&&clearTimeout(i),n){var l=!i;i=setTimeout(a,t),l&&(o=e.apply(this,s))}else i=g.delay(a,t,this,s);return o}));return s.cancel=function(){clearTimeout(i),i=null},s},g.wrap=function(e,t){return g.partial(t,e)},g.negate=function(e){return function(){return!e.apply(this,arguments)}},g.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},g.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},g.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},g.once=g.partial(g.before,2),g.restArguments=_;var I=!{toString:null}.propertyIsEnumerable("toString"),N=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],D=function(e,t){var n=N.length,i=e.constructor,o=g.isFunction(i)&&i.prototype||l,a="constructor";for(S(e,a)&&!g.contains(t,a)&&t.push(a);n--;)(a=N[n])in e&&e[a]!==o[a]&&!g.contains(t,a)&&t.push(a)};g.keys=function(e){if(!g.isObject(e))return[];if(m)return m(e);var t=[];for(var n in e)S(e,n)&&t.push(n);return I&&D(e,t),t},g.allKeys=function(e){if(!g.isObject(e))return[];var t=[];for(var n in e)t.push(n);return I&&D(e,t),t},g.values=function(e){for(var t=g.keys(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=e[t[o]];return i},g.mapObject=function(e,t,n){t=h(t,n);for(var i=g.keys(e),o=i.length,a={},s=0;s<o;s++){var l=i[s];a[l]=t(e[l],l,e)}return a},g.pairs=function(e){for(var t=g.keys(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=[t[o],e[t[o]]];return i},g.invert=function(e){for(var t={},n=g.keys(e),i=0,o=n.length;i<o;i++)t[e[n[i]]]=n[i];return t},g.functions=g.methods=function(e){var t=[];for(var n in e)g.isFunction(e[n])&&t.push(n);return t.sort()};var B=function(e,t){return function(n){var i=arguments.length;if(t&&(n=Object(n)),i<2||null==n)return n;for(var o=1;o<i;o++)for(var a=arguments[o],s=e(a),l=s.length,r=0;r<l;r++){var p=s[r];t&&void 0!==n[p]||(n[p]=a[p])}return n}};g.extend=B(g.allKeys),g.extendOwn=g.assign=B(g.keys),g.findKey=function(e,t,n){t=h(t,n);for(var i,o=g.keys(e),a=0,s=o.length;a<s;a++)if(t(e[i=o[a]],i,e))return i};var q,U,F=function(e,t,n){return t in n};g.pick=_((function(e,t){var n={},i=t[0];if(null==e)return n;g.isFunction(i)?(t.length>1&&(i=b(i,t[1])),t=g.allKeys(e)):(i=F,t=C(t,!1,!1),e=Object(e));for(var o=0,a=t.length;o<a;o++){var s=t[o],l=e[s];i(l,s,e)&&(n[s]=l)}return n})),g.omit=_((function(e,t){var n,i=t[0];return g.isFunction(i)?(i=g.negate(i),t.length>1&&(n=t[1])):(t=g.map(C(t,!1,!1),String),i=function(e,n){return!g.contains(t,n)}),g.pick(e,i,n)})),g.defaults=B(g.allKeys,!0),g.create=function(e,t){var n=v(e);return t&&g.extendOwn(n,t),n},g.clone=function(e){return g.isObject(e)?g.isArray(e)?e.slice():g.extend({},e):e},g.tap=function(e,t){return t(e),e},g.isMatch=function(e,t){var n=g.keys(t),i=n.length;if(null==e)return!i;for(var o=Object(e),a=0;a<i;a++){var s=n[a];if(t[s]!==o[s]||!(s in o))return!1}return!0},q=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;return("function"===o||"object"===o||"object"==typeof t)&&U(e,t,n,i)},U=function(e,t,n,i){e instanceof g&&(e=e._wrapped),t instanceof g&&(t=t._wrapped);var o=k.call(e);if(o!==k.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return r.valueOf.call(e)===r.valueOf.call(t)}var a="[object Array]"===o;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,l=t.constructor;if(s!==l&&!(g.isFunction(s)&&s instanceof s&&g.isFunction(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var p=(n=n||[]).length;p--;)if(n[p]===e)return i[p]===t;if(n.push(e),i.push(t),a){if((p=e.length)!==t.length)return!1;for(;p--;)if(!q(e[p],t[p],n,i))return!1}else{var d,u=g.keys(e);if(p=u.length,g.keys(t).length!==p)return!1;for(;p--;)if(d=u[p],!S(t,d)||!q(e[d],t[d],n,i))return!1}return n.pop(),i.pop(),!0},g.isEqual=function(e,t){return q(e,t)},g.isEmpty=function(e){return null==e||(j(e)&&(g.isArray(e)||g.isString(e)||g.isArguments(e))?0===e.length:0===g.keys(e).length)},g.isElement=function(e){return!(!e||1!==e.nodeType)},g.isArray=c||function(e){return"[object Array]"===k.call(e)},g.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},g.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(e){g["is"+e]=function(t){return k.call(t)==="[object "+e+"]"}})),g.isArguments(arguments)||(g.isArguments=function(e){return S(e,"callee")});var V=o.document&&o.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof V&&(g.isFunction=function(e){return"function"==typeof e||!1}),g.isFinite=function(e){return!g.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},g.isNaN=function(e){return g.isNumber(e)&&isNaN(e)},g.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===k.call(e)},g.isNull=function(e){return null===e},g.isUndefined=function(e){return void 0===e},g.has=function(e,t){if(!g.isArray(t))return S(e,t);for(var n=t.length,i=0;i<n;i++){var o=t[i];if(null==e||!u.call(e,o))return!1;e=e[o]}return!!n},g.noConflict=function(){return o._=a,this},g.identity=function(e){return e},g.constant=function(e){return function(){return e}},g.noop=function(){},g.property=function(e){return g.isArray(e)?function(t){return x(t,e)}:w(e)},g.propertyOf=function(e){return null==e?function(){}:function(t){return g.isArray(t)?x(e,t):e[t]}},g.matcher=g.matches=function(e){return e=g.extendOwn({},e),function(t){return g.isMatch(t,e)}},g.times=function(e,t,n){var i=Array(Math.max(0,e));t=b(t,n,1);for(var o=0;o<e;o++)i[o]=t(o);return i},g.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},g.now=Date.now||function(){return(new Date).getTime()};var K={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},H=g.invert(K),J=function(e){var t=function(t){return e[t]},n="(?:"+g.keys(e).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(o,t):e}};g.escape=J(K),g.unescape=J(H),g.result=function(e,t,n){g.isArray(t)||(t=[t]);var i=t.length;if(!i)return g.isFunction(n)?n.call(e):n;for(var o=0;o<i;o++){var a=null==e?void 0:e[t[o]];void 0===a&&(a=n,o=i),e=g.isFunction(a)?a.call(e):a}return e};var G=0;g.uniqueId=function(e){var t=++G+"";return e?e+t:t},g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,Y={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},$=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(e){return"\\"+Y[e]};g.template=function(e,t,n){!t&&n&&(t=n),t=g.defaults({},t,g.templateSettings);var i,o=RegExp([(t.escape||W).source,(t.interpolate||W).source,(t.evaluate||W).source].join("|")+"|$","g"),a=0,s="__p+='";e.replace(o,(function(t,n,i,o,l){return s+=e.slice(a,l).replace($,Q),a=l+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?s+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t})),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(t.variable||"obj","_",s)}catch(e){throw e.source=s,e}var l=function(e){return i.call(this,e,g)},r=t.variable||"obj";return l.source="function("+r+"){\n"+s+"}",l},g.chain=function(e){var t=g(e);return t._chain=!0,t};var Z=function(e,t){return e._chain?g(t).chain():t};g.mixin=function(e){return g.each(g.functions(e),(function(t){var n=g[t]=e[t];g.prototype[t]=function(){var e=[this._wrapped];return p.apply(e,arguments),Z(this,n.apply(g,e))}})),g},g.mixin(g),g.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=s[e];g.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],Z(this,n)}})),g.each(["concat","join","slice"],(function(e){var t=s[e];g.prototype[e]=function(){return Z(this,t.apply(this._wrapped,arguments))}})),g.prototype.value=function(){return this._wrapped},g.prototype.valueOf=g.prototype.toJSON=g.prototype.value,g.prototype.toString=function(){return String(this._wrapped)},void 0===(i=function(){return g}.apply(t,[]))||(n.exports=i)}()}).call(this,n(1),n(153)(e))},275:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n(11)),o=n(194);let a,s=!1,l="always-visible",r=0;const p={[o.PLATFORM_UNKNOWN]:"linux",[o.PLATFORM_MAC]:"mac",[o.PLATFORM_WINDOWS]:"windows"};let d=p[o.PLATFORM_UNKNOWN],k=p[o.PLATFORM_UNKNOWN];function u(){"always-visible"===l||"mac"!==k?(document.body.classList.remove(`scrollbar-style-visible-${d}`),document.body.classList.remove("scrollbar-style-when-scrolling-mac"),document.body.classList.add(`scrollbar-style-visible-${k}`)):(document.body.classList.remove(`scrollbar-style-visible-${k}`),document.body.classList.remove(`scrollbar-style-visible-${d}`),document.body.classList.add("scrollbar-style-when-scrolling-mac"))}function c(){const e=[...document.querySelectorAll("*")],t=[],n=["scroll","auto","overlay"];e.forEach(e=>{const i=window.getComputedStyle(e),o=i.overflowX,a=i.overflowY;n.includes(o)&&t.push({node:e,property:"overflow-x"}),n.includes(a)&&t.push({node:e,property:"overflow-y"})});const i=document.createElement("style");i.innerHTML="\n    html::-webkit-scrollbar,\n    body::-webkit-scrollbar {\n      background-color: rgba(1, 2, 3, 0) !important;\n    }\n  ".trimRight();const o=`data-scrollbar-fix-${++r}-id`;let a=0;t.forEach(({node:e,property:t})=>{if(e!==document.body){const n=++a;e.setAttribute(o,n),i.innerHTML+=`\n    [${o}="${n}"] { ${t}: hidden !important; }`}}),document.head.appendChild(i),setTimeout(()=>{document.head.removeChild(i),t.forEach(({node:e})=>{e.removeAttribute(o)})},0)}t.performScrollBarFix=c,t.update=function(){},t.attach=function(){if(s)return;s=!0;const e=window.__spotify&&window.__spotify.scroller_style;l="overlay"===e?"overlay":"always-visible",(0,o.subscribeToPlatform)((e,t)=>{k=p[e],d=p[t],u()}),window.addEventListener("message",e=>{"set_active"===e.data.name&&e.data.active&&c()}),a=i.default.resolver.subscribe({url:"sp://messages/v1/container/control"},(e,t)=>{if(e)a.cancel();else{const e=t.getJSONBody();if(e){let t=!1;switch(e.type){case"set_scroller_style_always_visible":l="always-visible",t=!0;break;case"set_scroller_style_overlay":l="overlay",t=!0}t&&u(),t&&(c(),setTimeout(c,1e3))}}})},t.detach=function(){s&&(s=!1,r=0,a&&(a.cancel(),a=null))}},276:function(e,t,n){"use strict";var i=n(115),o=n(300),a="add:",s="remove:";function l(e,t,n){for(var i=e.length;i--;){var o=e[i];if(o.listener===t&&!!o.options.once==!!n.once)return i}return-1}function r(){this._listenerMap={}}r.createEvent=function(e,t){if(!e)throw new TypeError("Cannot create event with empty type.");return new o(e,t)},r.prototype.on=function(e,t,n){if(!e)throw new TypeError("Cannot add event listener with empty type.");if(!t)return this;var i=n||{once:!1},o=this._listenerMap||(this._listenerMap={}),s=o[e]||(o[e]=[]);if(-1!==l(s,t,i))return this;var r=a+e;if(o[r]&&o[r].length&&this.emitSync(r,{listener:t,options:i}).defaultPrevented)return this;return s.push({listener:t,options:i}),this},r.prototype.once=function(e,t){if(!e)throw new TypeError("Cannot add once listener with empty type.");return t.$added_once=!0,this.on(e,t,{once:!0}),t},r.prototype.addListeners=function(e,t){for(var n in e)e.hasOwnProperty(n)&&this.on(n,e[n],t);return this},r.prototype.removeListener=function(e,t,n){if(!e)throw new TypeError("Cannot remove event listener with empty type.");if(!t)return this;var i=this._listenerMap,o=i&&i[e];if(!o)return this;var a=n||{once:t.$added_once||!1},r=l(o,t,a);if(-1===r)return this;var p=s+e;if(i[p]&&i[p].length&&this.emitSync(p,{listener:t,options:a,remainingLength:o.length-1}).defaultPrevented)return this;return o.splice(r,1),o.length||(i[e]=null),this},r.prototype.removeAllListeners=function(e){var t=this._listenerMap;return t?void 0===e?(this._listenerMap={},this):(t[e]=null,this):this},r.prototype.removeListeners=function(e,t){for(var n in e)e.hasOwnProperty(n)&&this.removeListener(n,e[n],t);return this},r.prototype.addListener=function(e,t,n){return this.on(e,t,n)},r.prototype.addOnceListener=function(e,t){return this.on(e,t,{once:!0})},r.prototype.emit=function(e,t){if(!e)throw new TypeError("Cannot emit empty type event.");var n=new o(e,t);return i(function(){this.emitEventSync(n)}.bind(this)),n},r.prototype.emitAndWait=function(e,t,n){if(!e)throw new TypeError("Cannot emit empty type event.");var a=new o(e,t);return i(function(){this.emitEventSync(a),"function"==typeof n&&n(a)}.bind(this)),a},r.prototype.emitEvent=function(e){return i(function(){this.emitEventSync(e)}.bind(this)),e},r.prototype.emitEventAndWait=function(e,t){return i(function(){this.emitEventSync(e),"function"==typeof t&&t(e)}.bind(this)),e},r.prototype.emitSync=function(e,t){var n=new o(e,t);return this.emitEventSync(n),n},r.prototype.emitEventSync=function(e){var t=e.type,n=this._listenerMap,i=n&&n[t];if(!i||!i.length)return e;for(var a=0,s=(i=i.slice(0)).length;a<s;a++){var l=i[a];if(l.options.once&&this.removeListener(t,l.listener,l.options),l.listener.call(this,e),o.wasImmediatePropagationStopped(e))break}return e},r.prototype.proxyEmit=function(e,t,n){if(!e||"function"!=typeof e.on)throw new TypeError("Source must be an EventEmitter");if(e===this)throw new ReferenceError("Cannot create a recursive proxy.");if(!t||!n)throw new TypeError("Parameters sourceType and proxyType are required.");var i=this.emit.bind(this,n);return e.on(t,i),i},r.prototype.proxyEmitSync=function(e,t,n){if(!e||"function"!=typeof e.on)throw new TypeError("Source must be an EventEmitter");if(e===this)throw new ReferenceError("Cannot create a recursive proxy.");if(!t||!n)throw new TypeError("Parameters sourceType and proxyType are required.");var i=this.emitSync.bind(this,n);return e.on(t,i),i},r.prototype.onAddListener=function(e,t){return this.on(a+e,t),this},r.prototype.onRemoveListener=function(e,t){return this.on(s+e,t),this},e.exports=r},277:function(e,t,n){"use strict";const i=n(390),o=n(143),a=n(396);t.Play=o.Play,t.Player=i.Player,t.PlayHistory=a.PlayHistory},278:function(e,t,n){!function(){var t="0123456789abcdef",n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",i=[];i.length=256;for(var o=0;o<256;o++)i[o]=t[o>>4]+t[15&o];var a=[];a.length=128;for(o=0;o<n.length;++o)a[n.charCodeAt(o)]=o;var s=[];for(o=0;o<16;o++)s[t.charCodeAt(o)]=o;for(o=0;o<6;o++)s["ABCDEF".charCodeAt(o)]=10+o;var l={toHex:function(e){if(22!==e.length)return null;var t,n,o,s,l,r=2.3283064365386963e-10,p=4294967296,d=238328;return t=56800235584*a[e.charCodeAt(0)]+916132832*a[e.charCodeAt(1)]+14776336*a[e.charCodeAt(2)]+238328*a[e.charCodeAt(3)]+3844*a[e.charCodeAt(4)]+62*a[e.charCodeAt(5)]+a[e.charCodeAt(6)],t=(t-=(n=t*r|0)*p)*d+(l=3844*a[e.charCodeAt(7)]+62*a[e.charCodeAt(8)]+a[e.charCodeAt(9)]),t-=(l=t*r|0)*p,n=n*d+l,t=t*d+(l=3844*a[e.charCodeAt(10)]+62*a[e.charCodeAt(11)]+a[e.charCodeAt(12)]),t-=(l=t*r|0)*p,n=n*d+l,n-=(l=n*r|0)*p,o=l,t=t*d+(l=3844*a[e.charCodeAt(13)]+62*a[e.charCodeAt(14)]+a[e.charCodeAt(15)]),t-=(l=t*r|0)*p,n=n*d+l,n-=(l=n*r|0)*p,o=o*d+l,t=t*d+(l=3844*a[e.charCodeAt(16)]+62*a[e.charCodeAt(17)]+a[e.charCodeAt(18)]),t-=(l=t*r|0)*p,n=n*d+l,n-=(l=n*r|0)*p,o=o*d+l,o-=(l=o*r|0)*p,s=l,t=t*d+(l=3844*a[e.charCodeAt(19)]+62*a[e.charCodeAt(20)]+a[e.charCodeAt(21)]),t-=(l=t*r|0)*p,n=n*d+l,n-=(l=n*r|0)*p,o=o*d+l,o-=(l=o*r|0)*p,s=s*d+l,s-=(l=s*r|0)*p,l?null:i[s>>>24]+i[s>>>16&255]+i[s>>>8&255]+i[255&s]+i[o>>>24]+i[o>>>16&255]+i[o>>>8&255]+i[255&o]+i[n>>>24]+i[n>>>16&255]+i[n>>>8&255]+i[255&n]+i[t>>>24]+i[t>>>16&255]+i[t>>>8&255]+i[255&t]},fromHex:function(e){var t,i=0,o=0,a=0;for(t=0;t<10;t++)a=16*a+s[e.charCodeAt(t)];for(t=0;t<11;t++)o=16*o+s[e.charCodeAt(t+10)];for(t=0;t<11;t++)i=16*i+s[e.charCodeAt(t+21)];if(isNaN(i+o+a))return null;var l,r=17592186044416,p="";for(t=0;t<7;++t)l=((l=((l=a)-62*(a=Math.floor(l*(1/62))))*r+o)-62*(o=Math.floor(l*(1/62))))*r+i,i=Math.floor(l*(1/62)),p=n[l-62*i]+p;for(o+=a*r;t<15;++t)l=((l=o)-62*(o=Math.floor(l*(1/62))))*r+i,i=Math.floor(l*(1/62)),p=n[l-62*i]+p;for(i+=o*r;t<21;++t)l=i,i=Math.floor(l*(1/62)),p=n[l-62*i]+p;return n[i]+p},HEX256:i,ID16:s,ID62:a};void 0!==e.exports?e.exports=l:window.Base62=l}()},279:function(e,t,n){"use strict";const i=31536e4,o=["GET","HEAD","POST","PUT","SUB","PATCH","DELETE"],a="bridge.cosmosRequest: ";e.exports=function(e,t,n,s){if(n.url)throw new Error(`${a}"url" is not a valid option, did you mean "uri"?`);if("string"!=typeof n.uri)throw new Error(`${a}Expected uri to be string.`);if(-1===o.indexOf(n.method))throw new Error(`${a}Method must match valid verb in uppercase (GET, POST etc)`);if(n.body&&"string"!=typeof n.body)throw new Error(`${a}If body is provided it should be a string.`);if(n.headers&&"[object Object]"!==Object.prototype.toString.call(n.headers))throw new Error(`${a}Expected headers be a plain object.`);const l={action:n.method,uri:n.uri};n.body&&(l.body=n.body),n.headers&&(l.headers=n.headers),e.requestIDCounter=e.requestIDCounter||i,e.requestIDCounter++;const r=[e.requestIDCounter,l];let p=!1;const d=e.requestIDCounter;return function e(i,o){t(i?"cosmos_request_create":"cosmos_request_pull",r,(function(i,a){if(!p)try{s&&(i?s(i):s(null,a))}finally{"SUB"!==n.method?t("cosmos_request_cancel",[o]):p||e(!1,o)}}))}(!0,d),function(){p=!0,t("cosmos_request_cancel",[d])}}},281:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HIDE_DELAY=void 0;t.HIDE_DELAY=2e3},283:function(e,t,n){"use strict";(function(e){const i=n(11).default,o="rgba(251, 74, 131, 0.22)",a="rgba(251, 74, 131, 0.8)",s=8;let l=null,r=null,p="",d="";const k=["off","column","baseline"];let u=0;function c(){let e=u+1;e>k.length-1&&(e=0);const t=k[e];"off"===t?f():m(t)}function m(e){e&&k[u]!==e&&(u=k.indexOf(e),l&&l.parentNode&&l.parentNode.removeChild(l),"baseline"===e&&document.addEventListener("mousemove",y,!1),l=function(){const e=p||o,t=document.createElement("div");if(t.className="grid-overlay container","column"===k[u]){const n=document.createElement("div");n.className="grid-overlay-row row",t.appendChild(n);const i=function(){const e=document.createElement("div");return e.className="grid-overlay-label",[{name:"Extra Small",id:"xs"},{name:"Small",id:"sm"},{name:"Medium",id:"md"},{name:"Large",id:"lg"}].forEach((function(t){const n=document.createElement("span");n.className=`visible-${t.id}`,n.textContent=`${t.name} (${t.id})`,e.appendChild(n)})),e}();t.appendChild(i);const o="col-xs-1 col-sm-1 col-md-1 col-lg-1";for(let t=0;t<12;t++){const i=document.createElement("div");i.className=`grid-overlay-col-${t+1} ${o}`,i.style.backgroundColor=e,n.appendChild(i)}}else if("baseline"===k[u]){t.classList.add("grid-overlay-baseline");const n=`${(s-1)/s*100}%`,i=["linear-gradient(","to bottom, ","transparent, ",`transparent ${n}, `,`${e} ${n}`,")"].join("");t.style.backgroundImage=i,t.style._backgroundImage=i}return t}(),document.body.appendChild(l))}function f(){"off"!==k[u]&&(l&&l.parentNode&&l.parentNode.removeChild(l),u=k.indexOf("off"),l=null,r=null,document.removeEventListener("mousemove",y,!1))}function y(e){r||((r=document.createElement("div")).className="grid-overlay-baseline-highlight",r.style.backgroundColor=d||a,l.appendChild(r));const t=e.clientY+window.scrollY,n=Math.floor(t/s)*s+(t%s>4?s:0);r.style.top=`${n-1}px`}t.listen=function(){e.__spotify.developer_mode&&i.resolver.subscribe({url:"sp://messages/v1/container/control"},(function(e,t){if(e)return;const n=t.getJSONBody();n&&"toggle_grid"===n.type&&c()}))},t.toggle=c,t.enable=m,t.disable=f,t.setColor=function(e,t){p=e,d=t},t.reset=function(){l=null,r=null,p="",d="",u=0}}).call(this,n(1))},284:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadFont=function(){return document.fonts.load("500 48px spotify-circular")},t.setSizeForTitle=function(e,t={}){const n=t.useLargeTitle?"large":"default",{fontSizes:o,lineHeights:a}=function(){if("ar"===window.__spotify.locale||"th"===window.__spotify.locale)return{default:{fontSizes:[[48,36],[36,28]],lineHeights:[[75,58],[58,44]]},large:{fontSizes:[[96,72,48],[48,36,28]],lineHeights:[[148,111,75],[75,58,44]]}};return{default:{fontSizes:[[48,36],[36,28]],lineHeights:[[56,44],[44,36]]},large:{fontSizes:[[96,72,48],[48,36,28]],lineHeights:[[110,82,56],[56,44,36]]}}}()[n];let s=1,l=0,r=o[0][0],p=a[0][0],d=s+1,k=Math.ceil(i*p);e.style.webkitLineClamp=d,e.style.fontSize=`${r}px`,e.style.lineHeight=`${p}px`,e.style.paddingBottom=`${k}px`,e.style.marginBottom=`-${k}px`,e.removeAttribute("title");for(;s<=o.length&&e.offsetHeight-k>p*s;)l++,o[s-1][l]||(l=0,s++),s<=o.length&&(r=o[s-1][l],p=a[s-1][l],d=s+1,k=Math.ceil(i*p),e.style.webkitLineClamp=d,e.style.fontSize=`${r}px`,e.style.lineHeight=`${p}px`,e.style.paddingBottom=`${k}px`,e.style.marginBottom=`-${k}px`);s>o.length&&e.setAttribute("title",e.textContent.trim());e.style.webkitLineClamp=d-1};const i=.07},285:function(e,t,n){"use strict";const i=n(43),o=n(286),a=n(30),s=n(33),l=n(27);i.implement({setAttribute:function(e,t){return this.forEach((function(n){n.setAttribute(e,t)}))},getAttribute:function(e){const t=this[0].getAttributeNode(e);return t&&t.specified?t.value:null},hasAttribute:function(e){const t=this[0];if(t.hasAttribute)return t.hasAttribute(e);const n=t.getAttributeNode(e);return!(!n||!n.specified)},removeAttribute:function(e){return this.forEach((function(t){const n=t.getAttributeNode(e);n&&t.removeAttributeNode(n)}))}});const r={};a(["type","value","name","href","title","id"],(function(e){r[e]=function(t){return void 0!==t?this.forEach((function(n){n[e]=t})):this[0][e]}})),a(["checked","disabled","selected"],(function(e){r[e]=function(t){return void 0!==t?this.forEach((function(n){n[e]=!!t})):!!this[0][e]}}));const p=function(e){const t=o(e).replace(/\s+/g," ").split(" "),n={};return s(t,(function(e){return""!==e&&!n[e]&&(n[e]=e)})).sort()};r.className=function(e){return void 0!==e?this.forEach((function(t){t.className=p(e).join(" ")})):p(this[0].className).join(" ")},i.implement({attribute:function(e,t){const n=r[e];let i;return n&&(i=n.call(this,t)),t&&(i=this.setAttribute(e,t)),null===t&&(i=this.removeAttribute(e)),void 0===t&&(i=this.getAttribute(e)),i}}),i.implement(r),i.implement({check:function(){return this.checked(!0)},uncheck:function(){return this.checked(!1)},disable:function(){return this.disabled(!0)},enable:function(){return this.disabled(!1)},select:function(){return this.selected(!0)},deselect:function(){return this.selected(!1)}}),i.implement({classNames:function(){return p(this[0].className)},hasClass:function(e){return l(this.classNames(),e)>-1},addClass:function(e){return this.forEach((function(t){const n=t.className,i=p(`${n} ${e}`).join(" ");n!==i&&(t.className=i)}))},removeClass:function(e){return this.forEach((function(t){const n=p(t.className);a(p(e),(function(e){const t=l(n,e);t>-1&&n.splice(t,1)})),t.className=n.join(" ")}))},toggleClass:function(e,t){const n=void 0!==t?t:!this.hasClass(e);return n?this.addClass(e):this.removeClass(e),!!n}}),i.prototype.toString=function(){const e=this.tag(),t=this.id(),n=this.classNames();let i=e;return t&&(i+=`#${t}`),n.length&&(i+=`.${n.join(".")}`),i};const d=null===document.createElement("div").textContent?"innerText":"textContent";i.implement({tag:function(){return this[0].tagName.toLowerCase()},html:function(e){return void 0!==e?this.forEach((function(t){t.innerHTML=e})):this[0].innerHTML},text:function(e){return void 0!==e?this.forEach((function(t){t[d]=e})):this[0][d]},data:function(e,t){switch(t){case void 0:return this.getAttribute(`data-${e}`);case null:return this.removeAttribute(`data-${e}`);default:return this.setAttribute(`data-${e}`,t)}}}),e.exports=i},286:function(e,t,n){var i=n(56),o=n(74),a=n(287),s=n(288);e.exports=function(e,t){return e=i(e),a(s(e,t=t||o),t)}},287:function(e,t,n){var i=n(56),o=n(74);e.exports=function(e,t){e=i(e),t=t||o;for(var n,a,s=0,l=e.length,r=t.length,p=!0;p&&s<l;)for(p=!1,n=-1,a=e.charAt(s);++n<r;)if(a===t[n]){p=!0,s++;break}return s>=l?"":e.substr(s,l)}},288:function(e,t,n){var i=n(56),o=n(74);e.exports=function(e,t){e=i(e),t=t||o;for(var n,a,s=e.length-1,l=t.length,r=!0;r&&s>=0;)for(r=!1,n=-1,a=e.charAt(s);++n<l;)if(a===t[n]){r=!0,s--;break}return s>=0?e.substring(0,s+1):""}},289:function(e,t,n){"use strict";const i=n(43);i.implement({appendChild:function(e){return this[0].appendChild(i(e)[0]),this},insertBefore:function(e,t){return this[0].insertBefore(i(e)[0],i(t)[0]),this},removeChild:function(e){return this[0].removeChild(i(e)[0]),this},replaceChild:function(e,t){return this[0].replaceChild(i(e)[0],i(t)[0]),this}}),i.implement({before:function(e){const t=i(e)[0],n=t.parentNode;return n&&this.forEach((function(e){n.insertBefore(e,t)})),this},after:function(e){const t=i(e)[0],n=t.parentNode;return n&&this.forEach((function(e){n.insertBefore(e,t.nextSibling)})),this},bottom:function(e){const t=i(e)[0];return this.forEach((function(e){t.appendChild(e)}))},top:function(e){const t=i(e)[0];return this.forEach((function(e){t.insertBefore(e,t.firstChild)}))}}),i.implement({insert:i.prototype.bottom,remove:function(){return this.forEach((function(e){const t=e.parentNode;t&&t.removeChild(e)}))},replace:function(e){const t=i(e)[0];return t.parentNode.replaceChild(this[0],t),this}}),e.exports=i},29:function(e,t,n){var i=n(41),o=n(151);e.exports=function(e,t,n){o(e,(function(o,a){if(i(e,a))return t.call(n,e[a],a,e)}))}},290:function(e,t,n){"use strict";(function(t){e.exports="document"in t?n(291):{parse:n(117)}}).call(this,n(1))},291:function(e,t,n){"use strict";var i=n(117),o=0,a="uid:"+(document.__counter=(parseInt(document.__counter||-1,36)+1).toString(36)),s=function(e,t){if(e===window)return"window";if(e===document)return"document";if(e===document.documentElement)return"html";if(t){var n=e.getAttribute(a);return n||(n=(o++).toString(36),e.setAttribute(a,n)),n}return e[a]||(e[a]=(o++).toString(36))},l=function(e){return s(e,!0)},r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},p=0,d={GET_ELEMENT_BY_ID:function(e,t){return t="slick_"+p++,e.innerHTML='<a id="'+t+'"></a>',!!this.getElementById(t)},QUERY_SELECTOR:function(e){return e.innerHTML="_<style>:nth-child(2){}</style>",e.innerHTML='<a class="MiX"></a>',1===e.querySelectorAll(".MiX").length},EXPANDOS:function(e,t){return t="slick_"+p++,e._custom_property_=t,e._custom_property_===t},MATCHES_SELECTOR:function(e){e.className="MiX";var t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector;if(t)try{t.call(e,":slick")}catch(n){return!!t.call(e,".MiX")&&t}return!1},GET_ELEMENTS_BY_CLASS_NAME:function(e){return e.innerHTML='<a class="f"></a><a class="b"></a>',1===e.getElementsByClassName("b").length&&(e.firstChild.className="b",2===e.getElementsByClassName("b").length&&(e.innerHTML='<a class="a"></a><a class="f b a"></a>',2===e.getElementsByClassName("a").length))},GET_ATTRIBUTE:function(e){return e.innerHTML='<a class="fus ro dah"></a>',"fus ro dah"===e.firstChild.getAttribute("class")}},k=function(e){this.document=e;var t=this.root=e.documentElement;this.tested={},this.uniqueID=this.has("EXPANDOS")?s:l,this.getAttribute=this.has("GET_ATTRIBUTE")?function(e,t){return e.getAttribute(t)}:function(e,t){return(e=e.getAttributeNode(t))&&e.specified?e.value:null},this.hasAttribute=t.hasAttribute?function(e,t){return e.hasAttribute(t)}:function(e,t){return!(!(e=e.getAttributeNode(t))||!e.specified)},this.contains=e.contains&&t.contains?function(e,t){return e.contains(t)}:t.compareDocumentPosition?function(e,t){return e===t||!!(16&e.compareDocumentPosition(t))}:function(e,t){do{if(t===e)return!0}while(t=t.parentNode);return!1},this.sorter=t.compareDocumentPosition?function(e,t){return e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:e===t?0:1:0}:"sourceIndex"in t?function(e,t){return e.sourceIndex&&t.sourceIndex?e.sourceIndex-t.sourceIndex:0}:e.createRange?function(e,t){if(!e.ownerDocument||!t.ownerDocument)return 0;var n=e.ownerDocument.createRange(),i=t.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,0),i.setStart(t,0),i.setEnd(t,0),n.compareBoundaryPoints(Range.START_TO_END,i)}:null,this.failed={};var n=this.has("MATCHES_SELECTOR");n&&(this.matchesSelector=function(e,t){if(this.failed[t])return null;try{return n.call(e,t)}catch(e){return y.debug&&console.warn("matchesSelector failed on "+t),this.failed[t]=!0,null}}),this.has("QUERY_SELECTOR")&&(this.querySelectorAll=function(e,t){if(this.failed[t])return!0;var n,i,o,a,s;if(e!==this.document&&(a=t[0].combinator,o=t,(i=e.getAttribute("id"))||(i="__slick__",(s=e).setAttribute("id",i)),t="#"+i+" "+o,(a.indexOf("~")>-1||a.indexOf("+")>-1)&&((e=e.parentNode)||(n=!0))),!n)try{n=e.querySelectorAll(t.toString())}catch(e){y.debug&&console.warn("querySelectorAll failed on "+(o||t)),n=this.failed[o||t]=!0}return s&&s.removeAttribute("id"),n})};k.prototype.has=function(e){var t=this.tested,n=t[e];if(null!=n)return n;var i=this.root,o=this.document,a=o.createElement("div");a.setAttribute("style","display: none;"),i.appendChild(a);var s=d[e],l=!1;if(s)try{l=s.call(o,a)}catch(e){}return y.debug&&!l&&console.warn("document has no "+e),i.removeChild(a),t[e]=l};var u={" ":function(e,t,n){var i,o,a=!t.id,s=!t.tag,l=!t.classes;if(t.id&&e.getElementById&&this.has("GET_ELEMENT_BY_ID")&&(i=e.getElementById(t.id))&&i.getAttribute("id")===t.id&&(o=[i],a=!0,"*"===t.tag&&(s=!0)),!o&&(t.classes&&e.getElementsByClassName&&this.has("GET_ELEMENTS_BY_CLASS_NAME")?(o=e.getElementsByClassName(t.classList),l=!0,"*"===t.tag&&(s=!0)):(o=e.getElementsByTagName(t.tag),"*"!==t.tag&&(s=!0)),!o||!o.length))return!1;for(var r=0;i=o[r++];)(s&&a&&l&&!t.attributes&&!t.pseudos||this.match(i,t,s,a,l))&&n(i);return!0},">":function(e,t,n){if(e=e.firstChild)do{1==e.nodeType&&this.match(e,t)&&n(e)}while(e=e.nextSibling)},"+":function(e,t,n){for(;e=e.nextSibling;)if(1==e.nodeType){this.match(e,t)&&n(e);break}},"^":function(e,t,n){(e=e.firstChild)&&(1===e.nodeType?this.match(e,t)&&n(e):u["+"].call(this,e,t,n))},"~":function(e,t,n){for(;e=e.nextSibling;)1===e.nodeType&&this.match(e,t)&&n(e)},"++":function(e,t,n){u["+"].call(this,e,t,n),u["!+"].call(this,e,t,n)},"~~":function(e,t,n){u["~"].call(this,e,t,n),u["!~"].call(this,e,t,n)},"!":function(e,t,n){for(;e=e.parentNode;)e!==this.document&&this.match(e,t)&&n(e)},"!>":function(e,t,n){(e=e.parentNode)!==this.document&&this.match(e,t)&&n(e)},"!+":function(e,t,n){for(;e=e.previousSibling;)if(1==e.nodeType){this.match(e,t)&&n(e);break}},"!^":function(e,t,n){(e=e.lastChild)&&(1==e.nodeType?this.match(e,t)&&n(e):u["!+"].call(this,e,t,n))},"!~":function(e,t,n){for(;e=e.previousSibling;)1===e.nodeType&&this.match(e,t)&&n(e)}};k.prototype.search=function(e,t,n){e?!e.nodeType&&e.document&&(e=e.document):e=this.document;var o=i(t);if(!o||!o.length)throw new Error("invalid expression");n||(n=[]);var a,l,p,d,k=r(n)?function(e){n[n.length]=e}:function(e){n[n.length++]=e};if(o.length>1){a={};var c=k;k=function(e){var t=s(e);a[t]||(a[t]=!0,c(e))}}e:for(var m=0;t=o[m++];)if(y.noQSA||!this.querySelectorAll||!0===(p=this.querySelectorAll(e,t)))if(1===t.length)d=t[0],u[d.combinator].call(this,e,d,k);else{var f,g,z,b=[e],h=function(e){var t=s(e);z[t]||(z[t]=!0,g[g.length]=e)};for(w=0;d=t[w++];){g=[],z={};for(var _=0;f=b[_++];)u[d.combinator].call(this,f,d,h);if(!g.length)continue e;b=g}if(0===m)n=g;else for(var v=0;v<g.length;v++)k(g[v])}else if(p&&p.length)for(var w=0;l=p[w++];)l.nodeName>"@"&&k(l);return a&&n&&n.length>1&&this.sort(n),n},k.prototype.sort=function(e){return this.sorter?Array.prototype.sort.call(e,this.sorter):e};var c={empty:function(){return!(this&&1===this.nodeType||(this.innerText||this.textContent||"").length)},not:function(e){return!y.matches(this,e)},contains:function(e){return(this.innerText||this.textContent||"").indexOf(e)>-1},"first-child":function(){for(var e=this;e=e.previousSibling;)if(1==e.nodeType)return!1;return!0},"last-child":function(){for(var e=this;e=e.nextSibling;)if(1==e.nodeType)return!1;return!0},"only-child":function(){for(var e=this;e=e.previousSibling;)if(1==e.nodeType)return!1;for(var t=this;t=t.nextSibling;)if(1==t.nodeType)return!1;return!0},"first-of-type":function(){for(var e=this,t=e.nodeName;e=e.previousSibling;)if(e.nodeName==t)return!1;return!0},"last-of-type":function(){for(var e=this,t=e.nodeName;e=e.nextSibling;)if(e.nodeName==t)return!1;return!0},"only-of-type":function(){for(var e=this,t=this.nodeName;e=e.previousSibling;)if(e.nodeName==t)return!1;for(var n=this;n=n.nextSibling;)if(n.nodeName==t)return!1;return!0},enabled:function(){return!this.disabled},disabled:function(){return this.disabled},checked:function(){return this.checked||this.selected},selected:function(){return this.selected},focus:function(){return this.ownerDocument.activeElement===this&&(this.href||this.type||y.hasAttribute(this,"tabindex"))},root:function(){return this===this.ownerDocument.documentElement}};k.prototype.match=function(e,t,n,i,o){if(!y.noQSA&&this.matchesSelector){var a=this.matchesSelector(e,t);if(null!==a)return a}if(!n&&t.tag){var s=e.nodeName.toLowerCase();if("*"===t.tag){if(s<"@")return!1}else if(s!=t.tag)return!1}if(!i&&t.id&&e.getAttribute("id")!==t.id)return!1;var l,r,p,d;if(!o&&t.classes){var k=this.getAttribute(e,"class");if(!k)return!1;for(r in t.classes)if(!RegExp("(^|\\s)"+t.classes[r]+"(\\s|$)").test(k))return!1}if(t.attributes)for(l=0;r=t.attributes[l++];){var u=r.operator,m=r.escapedValue;if(p=r.name,d=r.value,u){var f=this.getAttribute(e,p);if(null==f)return!1;switch(u){case"^=":if(!RegExp("^"+m).test(f))return!1;break;case"$=":if(!RegExp(m+"$").test(f))return!1;break;case"~=":if(!RegExp("(^|\\s)"+m+"(\\s|$)").test(f))return!1;break;case"|=":if(!RegExp("^"+m+"(-|$)").test(f))return!1;break;case"=":if(f!==d)return!1;break;case"*=":if(-1===f.indexOf(d))return!1;break;default:return!1}}else if(!this.hasAttribute(e,p))return!1}if(t.pseudos)for(l=0;r=t.pseudos[l++];){if(p=r.name,d=r.value,c[p])return c[p].call(e,d);if(null!=d){if(this.getAttribute(e,p)!==d)return!1}else if(!this.hasAttribute(e,p))return!1}return!0},k.prototype.matches=function(e,t){var n=i(t);if(1===n.length&&1===n[0].length)return this.match(e,n[0][0]);if(!y.noQSA&&this.matchesSelector){var o=this.matchesSelector(e,n);if(null!==o)return o}for(var a,s=this.search(this.document,t,{length:0}),l=0;a=s[l++];)if(e===a)return!0;return!1};var m={},f=function(e){var t=e||document;if(t.ownerDocument?t=t.ownerDocument:t.document&&(t=t.document),9!==t.nodeType)throw new TypeError("invalid document");var n=s(t);return m[n]||(m[n]=new k(t))},y=function(e,t){return y.search(e,t)};y.search=function(e,t,n){return f(t).search(t,e,n)},y.find=function(e,t){return f(t).search(t,e)[0]||null},y.getAttribute=function(e,t){return f(e).getAttribute(e,t)},y.hasAttribute=function(e,t){return f(e).hasAttribute(e,t)},y.contains=function(e,t){return f(e).contains(e,t)},y.matches=function(e,t){return f(e).matches(e,t)},y.sort=function(e){return e&&e.length>1&&f(e[0]).sort(e),e},y.parse=i,e.exports=y},292:function(e,t,n){"use strict";const i=n(293),o=n(116);n(118),o.implement({delegate:function(e,t,n){return this.forEach((function(a){const s=o(a),l=s._delegation||(s._delegation={}),r=l[e]||(l[e]={}),p=r[t]||(r[t]=new i);if(p.get(n))return;const d=function(e){const i=o(e.target||e.srcElement),a=i.matches(t)?i:i.parent(t);let l;return a&&(l=n.call(s,e,a)),l};p.set(n,d),s.on(e,d)}))},undelegate:function(e,t,n){return this.forEach((function(i){const a=o(i),s=a._delegation;if(!s)return;const l=s[e];if(!l)return;const r=l[t];if(!r)return;const p=r.get(n);if(p){a.off(e,p),r.remove(p),r.count()||delete l[t];let n=!0,i=!0;for(const e in l)if(l.hasOwnProperty(e)){n=!1;break}n&&delete s[e];for(const e in s)if(s.hasOwnProperty(e)){i=!1;break}i&&delete a._delegation}}))}}),e.exports=o},293:function(e,t,n){"use strict";const i=n(27),o=n(23)({constructor:function(){this.length=0,this._values=[],this._keys=[]},set:function(e,t){const n=i(this._keys,e);return-1===n?(this._keys.push(e),this._values.push(t),this.length++):this._values[n]=t,this},get:function(e){const t=i(this._keys,e);return-1===t?null:this._values[t]},count:function(){return this.length},forEach:function(e,t){for(let n=0,i=this.length;n<i&&!1!==e.call(t,this._values[n],this._keys[n],this);n++);return this},map:function(e,t){const n=new o;return this.forEach((function(i,o){n.set(o,e.call(t,i,o,this))}),this),n},filter:function(e,t){const n=new o;return this.forEach((function(i,o){e.call(t,i,o,this)&&n.set(o,i)}),this),n},every:function(e,t){let n=!0;return this.forEach((function(i,o){e.call(t,i,o,this)||(n=!1)}),this),n},some:function(e,t){let n=!1;return this.forEach((function(i,o){e.call(t,i,o,this)&&(n=!0)}),this),n},indexOf:function(e){const t=i(this._values,e);return t>-1?this._keys[t]:null},remove:function(e){const t=i(this._values,e);return-1!==t?(this._values.splice(t,1),this.length--,this._keys.splice(t,1)[0]):null},unset:function(e){const t=i(this._keys,e);return-1!==t?(this._keys.splice(t,1),this.length--,this._values.splice(t,1)[0]):null},keys:function(){return this._keys.slice()},values:function(){return this._values.slice()}}),a=function(){return new o};a.prototype=o.prototype,e.exports=a},294:function(e,t,n){"use strict";const i=n(9),o=n(2),a=n(7),s=n(13),{messageProxy:l}=n(55),r=n(19),p="[data-button=add]",d="added",k={};let u=!1;function c(e){const t=e[0].closest("data-class-added");return t?t.getAttribute("data-class-added"):d}function m(e){const t=e[0].closest("[data-uri]");return t?t.getAttribute("data-uri"):null}const f=function(e,t){const n=i(t[0].closest("[data-uri]"));if(!n)return;let s=n.data("uri");if(!s)return;const p=a.from(s);p&&(p.type===a.Type.COLLECTION_ALBUM?s=a.albumURI(p.id).toURI():p.type===a.Type.COLLECTION_ARTIST&&(s=a.artistURI(p.id).toURI()));const d=c(t),k=!n.hasClass(d),u={added:k};t.addClass("just-changed"),t.on("mouseout",(function e(n){n.target===t[0]&&(t.off("mouseout",e),t.removeClass("just-changed"))}),!0),o(s).publish(u);const m=i(t[0].closest("[data-context]"));if(!m)return;let f=m.getAttribute("data-context");"true"===f&&(f=m.getAttribute("data-uri"));const y=r.getOriginUri(f)||f;l({method:"POST",uri:k?"format-list-heart":"format-list-undo-feedback",body:{entityUri:y,trackUri:s}})},y=function(e,t,n,i){let a=0;"added"===t&&(a+=e.setAddedStateForURI(i,n)),"thumb"===t&&(a+=e.setBannedStateForURI(i,"down"===n)),0===a&&(o(i).off("update",k[i]),delete k[i])};function g(e){const t=[],n=i(document).search(p);if(!n)return t;for(let o=0,a=n.length;o<a;o++){const a=i(n[o]);e===m(a)&&t.push(a)}return t}const z={setAddedStateForURI:function(e,t){const n=g(e);return n.forEach(e=>{z.setAddedStateForButtonNode(e,t)}),n.length},setAddedStateForButtonNode:function(e,t){const n=i(e[0].closest("[data-uri]"));if(!n)return;const o=c(e);z.setAddedVisualState(t,n,e,o)},setAddedVisualState:function(e,t,n,i){if(e){t.hasClass(i)||t.addClass(i);const e=n.data("tooltip-remove");e&&(n.setAttribute("data-tooltip",e),n.setAttribute("aria-label",e)),n.setAttribute("data-log-click","remove-button");const o="toggle-follow-state-button"===n.getAttribute("data-interaction-target")?"unfollow":"remove";n.setAttribute("data-interaction-intent",o)}else{t.hasClass(i)&&t.removeClass(i);const e=n.data("tooltip-add");switch(e&&(n.setAttribute("data-tooltip",e),n.setAttribute("aria-label",e)),n.getAttribute("data-interaction-target")){case"save-remove-button":n.setAttribute("data-interaction-intent","save");break;case"toggle-follow-state-button":n.setAttribute("data-interaction-intent","follow");break;default:n.setAttribute("data-interaction-intent","add")}n.setAttribute("data-log-click","add-button")}},setBannedStateForURI:function(e,t){const n=g(e);return n.forEach(e=>{z.setBannedStateForButtonNode(e,t)}),n.length},setBannedStateForButtonNode:function(e,t){i(e[0].closest("[data-uri]"))&&z.setBannedVisualState(t,e)},setBannedVisualState:function(e,t){e?t.setAttribute("disabled"):t.removeAttribute("disabled")},addListenerForNode:function(e){const t=m(e),n=o(t);if(k[t])return n.get("added",(function(t,n){if(t)throw t;z.setAddedStateForButtonNode(e,!!n)}),o.ASAP),void n.get("thumb",(function(t,n){if(t)throw t;z.setAddedStateForButtonNode(e,"up"===n),z.setBannedStateForButtonNode(e,"down"===n)}),o.ASAP);k[t]=function(e){const{added:i,thumb:o}=e;"down"===o&&n.publish({added:!1}),i&&n.publish({thumb:"up"});for(const n in e)if("added"===n||"thumb"===n){const i=e[n];y(z,n,i,t)}},n.get("added",(function(i,o){if(i)throw i;z.setAddedStateForButtonNode(e,!!o),n.on("update",k[t])}),o.ASAP),n.get("thumb",(function(t,n){if(t)throw t;z.setAddedStateForButtonNode(e,"up"===n),z.setBannedStateForButtonNode(e,"down"===n)}),o.ASAP)}},b=t.update=function(e,t){if(u)if(e&&i(e).matches(p))z.addListenerForNode(i(e));else{const n=(i(t)||i(e)||i(document)).search(p);if(!n)return;for(let e=0,t=n.length;e<t;e++)z.addListenerForNode(i(n[e]))}},h=function(e){b(e.pageNode,e.nodes)};t._classNames={ADDED:d,JUSTCHANGED:"just-changed"},t.attach=function(){u||(u=!0,i(document).delegate("click",p,f),s.on("scroll-show-before",h))},t.detach=function(){u&&(u=!1,i(document).undelegate("click",p,f),s.off("scroll-show-before",h))}},295:function(e,t,n){"use strict";const i=n(9),o=n(121),a=new o,s=function(e,t){const n=t[0],i=n.getAttribute("href")||n.getAttribute("data-button-link");i&&"#"!==i[0]&&!n.hasAttribute("data-no-anchor-handling")&&(e.preventDefault(),a.openURI(i))};let l=!1;t.attach=function(){l||(l=!0,i(document).delegate("click","a, button",s))},t.detach=function(){l&&(l=!1,i(document).undelegate("click","a, button",s))},t.update=function(){}},296:function(e,t,n){"use strict";e.exports=function(e,t){var n=t.prototype;function i(){}i.prototype=e._super=n,e.prototype=new i,e.prototype.constructor=e}},297:function(e,t,n){"use strict";(function(e){const i=n(9),o=n(2),a=n(25),s=n(19),l=n(11).default,r=n(7);let p;const d=["a[data-uri]","[data-contextmenu]"].join(","),k=function(e,t,n,i,a){const s=[];return e.forEach(e=>{if(void 0!==e){const n=e.keys||[],i=e.indices||[];let a=t||i[0];a=void 0===a?null:a;const l=e.uri,r={uri:l,keys:n,indices:i,primaryIndex:a},p=e.origin;if(p){if(null!==a){const e=o(l).get("rows"),t=o(p.uri).get("rows");if(e&&t){const n=e.keys[a];p.primaryIndex=t.indexOf(n)}}r.origin=p}s.push(r)}}),{contexts:s,x:i,y:a,uris:n}},u=function(e){const t=e.parents("[data-contextmenu-spy]"),n=i([e,t]);n.addClass("contextmenu-active"),setTimeout(()=>{const e=l.resolver.subscribe({url:"sp://messages/v1/context_menu_state"},(function(t,i){t||"hide"!==i.getJSONBody().state||(n.removeClass("contextmenu-active"),e.cancel())}))},0)},c=function(t){const n=e.__spotify.app_uri,i=o("spotify:application").get("arguments").split(":"),a="collection"===r.from(n).id,s="videos"===i[0],l="podcasts"===i[0];if(t.uris=t.uris.map(e=>{const t=r.from(e);if(t){if(t.type===r.Type.COLLECTION_ALBUM)return r.albumURI(t.id).toURI();if(t.type===r.Type.COLLECTION_ARTIST)return r.artistURI(t.id).toURI()}return e}),t.appURI=n,t.entityURI=o("spotify:application").get("state")?o("spotify:application").get("state").getURI():null,p)p(t.uris,e=>{t.metadata=e,o("spotify:client").emit("show-context-menu",t)});else{t.metadata=[],t.uris.forEach(e=>{const n=!(!a||l||s)||o(e).get("added");void 0!==n&&t.metadata.push({uri:e,added:n})}),o("spotify:client").emit("show-context-menu",t)}},m=function(e,t){e.preventDefault(),e.stopPropagation();const n=e.clientX,i=e.clientY;if(u(t),"a"===t[0].tagName.toLowerCase()){const e=t.data("uri");e&&c({uris:[e],x:n,y:i})}else{const e=t.parent("[data-list]"),o=+t.data("index");let s=!1;const l=a.getIndicesPerList();if(e&&!(s=a.isNodeSelected(t))){a.clear();const t=e.getAttribute("data-uri");t&&a.add(t,o)}const r=-1!==o,p=s&&r?a.getUris():[t.data("uri")];c(k(l,o,p,n,i))}},f=function(e,t){let n,a=t.data("uri")||(n=t.parent("[data-uri]"))&&n.data("uri");if(!a)return;a=s.getOriginUri(a)||a;const l=(n=t.parent("[data-list][data-uri]"))&&n.data("uri"),r=(n=t.parent("[data-index]"))&&+n.data("index"),p=i(t[0].closest('[data-button="contextmenu"]')),d=(p||n||t)[0].getBoundingClientRect();let m=d.left+d.width/2,f=d.top+d.height;f>window.innerHeight&&(f=window.innerHeight-1),m>window.innerWidth&&(m=window.innerWidth-1);const y=null==r?null:[r];let g;if(l){if(g={uri:l},y){g.indices=y;const e=o(l).get("rows");g.keys=e?y.map((function(t){return e.keys[t]})):[]}const e=s.getOriginUri(l);if(e&&(g.origin={uri:e},y)){const t=o(l).get("rows"),n=o(e).get("rows");if(t&&n){const e=y.map((function(e){const i=t.keys[e];return n.indexOf(i)})),i=y.map((function(e){return t.keys[e]}));g.origin.indices=e,g.origin.keys=i}}}c(k([g],r,[a],m,f)),u(p)};let y=!1;t.attach=function(){y||(y=!0,i(document).delegate("contextmenu",d,m),i(document).delegate("click","[data-button=contextmenu]",f))},t.detach=function(){y&&(y=!1,i(document).undelegate("contextmenu",d,m),i(document).undelegate("click","[data-button=contextmenu]",f))},t.update=function(){},t.setMetadataRequestFunction=(e=null)=>{p=e}}).call(this,n(1))},299:function(e,t,n){"use strict";(function(e){const i=n(2),o=n(79).request,a=n(7),s=n(5).logError,l=100;function r(t){const n=e.__spotify&&e.__spotify.username,i=a.profileURI(n).toURI();o("user_metadata",[i],(function(e,o){if(e)return n&&t.update({currentUser:{uri:i,username:n}}),void s(e);t.update({currentUser:{uri:i,name:o.name,username:o.username}})}))}function p(t){o("session_query",[],(function(n,i){n?s(n):(void 0===i.employee&&(e.__spotify&&e.__spotify.product_state&&e.__spotify.product_state.employee?i.employee="1"===e.__spotify.product_state.employee:i.employee=!1),t.update({session:i}),function e(t){o("session_event_wait",[],(function(n,i){if(d){if(n)return setTimeout((function(){e(t)}),l),void s(n);"change"===i.type&&t.get("session").update(i.data),e(t)}}))}(t))}))}let d;function k(t,n){e===window&&window.top&&window.top.postMessage&&window.top.postMessage({type:"client_show_context_ui",data:n},"*")}function u(e,t){t.indexOf("currentUser")>-1&&r(e),t.indexOf("session")>-1&&p(e)}function c(t){const n=e.__spotify||{},o=i(n.container_features||{});if(o.on("wait",(function(e){const t={};for(let n=0;n<e.length;n++){t[e[n]]=!1}o.update(t)})),t.update({containerFeatures:o}),e.__spotify&&e.__spotify.username){const n=e.__spotify.username;t.update({currentUser:{uri:a.profileURI(n).toURI(),username:n}})}r(t)}const m=t.matches=/^spotify:client$/;t.register=function(){d||(d=!0,i.subscribe(m,"wait",u),i.subscribe(m,"init",c),i.subscribe(m,"show-context-menu",k))},t.unregister=function(){d&&(d=!1,i.unsubscribe(m,"wait",u),i.unsubscribe(m,"init",c),i.unsubscribe(m,"show-context-menu",k))}}).call(this,n(1))},3:function(e,t,n){e.exports=n(51).default},30:function(e,t){e.exports=function(e,t,n){if(null!=e)for(var i=-1,o=e.length;++i<o&&!1!==t.call(n,e[i],i,e););}},300:function(e,t,n){"use strict";var i="function"==typeof Object.defineProperty,o={value:!1,writable:!0};function a(e,t){if(this.type=e,t)for(var n in t)t.hasOwnProperty(n)&&"type"!==n&&(this[n]=t[n]);i?(Object.defineProperty(this,"_prevented",o),Object.defineProperty(this,"_stopped",o),Object.defineProperty(this,"_immediateStopped",o),Object.defineProperty(this,"defaultPrevented",{get:function(){return this._prevented}.bind(this),set:function(e){return e}})):(this.defaultPrevented=!1,this._prevented=!1,this._stopped=!1,this._immediateStopped=!1)}a.wasPropagationStopped=function(e){return!!e._stopped},a.wasImmediatePropagationStopped=function(e){return!!e._immediateStopped},a.prototype.preventDefault=function(){this._prevented=!0,i||(this.defaultPrevented=!0)},a.prototype.stopPropagation=function(){this._stopped=!0},a.prototype.stopImmediatePropagation=function(){this._immediateStopped=!0},e.exports=a},301:function(e,t,n){"use strict";const i=n(370),o=n(371),a=n(89);let s=i;t.setMode=function(e){switch(e){case"indices":s=i;break;case"uids":s=o}},t.setSelectors=a.setSelectors,t.attach=function(){s.attach()},t.detach=function(){s.detach()},t.update=function(e){s.update(e)}},302:function(e){e.exports=JSON.parse('{"type":"record","name":"UIInteraction","namespace":"com.spotify.Message","doc":"A UI interaction log","fields":[{"name":"message_name","type":"string"},{"name":"message_version","type":"int"},{"name":"request_id","type":["null","string"],"doc":"Request ID from Spaces Log","default":null},{"name":"feature_id","type":["null","string"],"doc":"A name for a feature (e.g., browse-new-releases, collection, etc.)","default":null},{"name":"pageuri","type":["null","string"],"doc":"Uri of the page within the feature (e.g., spotify:hub:music, etc.)","default":null},{"name":"section_id","type":["null","string"],"doc":"Section or block of the page (e.g., Early Morning)","default":null},{"name":"item_index","type":["null","int"],"doc":"Index of item in block","default":null},{"name":"target_uri","type":["null","string"],"doc":"Destination of interaction","default":null},{"name":"interaction_type","type":["null","string"],"doc":"Type of interaction (e.g., hit, swipe, hold, hover, etc.)","default":null},{"name":"user_intent","type":["null","string"],"doc":"Grouping of interactions based on user intent (e.g., play, navigate-forward, navigate-back)","default":null},{"name":"timestamp","type":["null","double"],"doc":"Unix timestamp of event","default":null}],"schema_version":5}')},303:function(e,t,n){var i=n(27);e.exports=function(e,t){var n=i(e,t);-1!==n&&e.splice(n,1)}},306:function(e,t,n){"use strict";var i=n(55);const o=n(2),a=n(418),s=n(17),l=n(7),r=n(358),p=n(5).logError,d=t.URI="spotify:station:",k=t.dailyMixPrefix="spotify:dailymix",u=`${k}:[^:]*`,c=t.matches=new RegExp(`^(?:${d}(.*)|(?:${u}))`),m=t.isStationUri=c.test.bind(c),f=new RegExp(`^${d}((user:[^:]+:cluster:[a-zA-Z0-9]{22}))`),y=t.isClusterStationUri=c.test.bind(f),g=new RegExp(`^${u}`),z=t.isDailyMixUri=e=>g.test(e);t.isOrdinaryRadioUri=e=>m(e)&&!(y(e)||z(e));const b=15,h="playlist",_="track",v="album",w="artist",S="genre",x="cluster",P="dailymix",T="unknown";let j,A=!1,E=[],L=[];function C(e){const t=l.from(e);if(!t)return T;const n=t.type;return l.isPlaylistV1OrV2(t)?h:n===l.Type.ARTIST?w:n===l.Type.ALBUM?v:n===l.Type.TRACK?_:0===e.indexOf("spotify:genre:")?S:e.indexOf(":cluster:")>0?x:e.startsWith(k)?P:T}function O(e,t){(0,i.messageProxy)({method:"POST",uri:"station-thumb",body:{stationUri:e.get("uri"),trackUri:t,thumb:r.UP}})}function M(e,t){(0,i.messageProxy)({method:"POST",uri:"station-thumb",body:{stationUri:e.get("uri"),trackUri:t,thumb:r.DOWN}})}function R(e,t){m(e.get("uri"))&&(0,i.messageProxy)({method:"POST",uri:"station-heart",body:{stationUri:e.get("uri"),trackUri:t}})}function I(e,t){m(e.get("uri"))&&(0,i.messageProxy)({method:"POST",uri:"station-undo-feedback",body:{stationUri:e.get("uri"),trackUri:t,thumbAction:r.UNDO_HEART}})}function N(e,t,n,s){const l=!!n&&(s||e.get("fetchCount"));(0,i.messageProxy)({method:"GET",uri:"station",target:"top",body:{stationUri:e.get("uri"),metadata:t,trackCount:l}},(function(t,n){if(t)return void(0,i.messageProxy)({method:"POST",uri:"station-error",body:{stationUri:e.get("uri"),message:t}});const s=n.stationUri,l=n.station;if(l.hasOwnProperty("tracks")){if(-1!==E.indexOf(s)){const e=(new Date).getTime();l.rows=l.tracks.map(a.bind(null,e))}delete l.tracks}o(s).update(l)}))}function D(e,t){if(t&&t.length>0){let n=0,i=0;t.forEach((function(e){e.end>i&&(i=e.end)})),n=i-e.get("rows").length,N(e,[],!0,n)}}function B(e){const t=e.stationUri,n=e.metadata;if(-1!==L.indexOf(t)){if(n.hasOwnProperty("tracks")){if(-1!==E.indexOf(t)){const e=(new Date).getTime();n.rows=n.tracks.map(a.bind(null,e))}delete n.tracks}o(t).update(n)}}function q(e){const t=function(e){const t=e.uri.replace(/^spotify:station:/,"spotify:");return decodeURIComponent(t)}(e);t&&(e.update({baseSeed:t,type:C(t),fetchCount:b}),e.on("update",(function t(n){n.hasOwnProperty("rows")&&(e.get("rows").on("wait",D.bind(null,e)),e.off("update",t))})),L.push(e.get("uri")))}function U(e,t){if(t.hasOwnProperty("added")){const n=t.added;"boolean"==typeof n?(e.update({added:n}),(0,i.messageProxy)({method:"POST",uri:"station-add",body:{stationUri:e.get("uri"),add:n}})):p("Added can only be a boolean")}}function F(e,t){let n,i=-1;const o=["added","name","subtitles","relatedArtists","image","nextPageUrl"];t.forEach((function(e,t){"rows"===e&&(i=t),!n&&s(o,e)&&(n=!0)})),-1!==i?(E.push(e.get("uri")),t.splice(i,1),N(e,t,!0)):n&&N(e,t)}t.register=function(){A||(A=!0,o.subscribe(c,"wait",F),o.subscribe(c,"init",q),o.subscribe(c,"thumb-up",O),o.subscribe(c,"thumb-down",M),o.subscribe(c,"heart",R),o.subscribe(c,"undo-heart",I),o.subscribe(c,"publish",U),j=(0,i.messageProxy)({method:"SUB",uri:"station-metadata"},B))},t.unregister=function(){A&&(A=!1,o.unsubscribe(c,"wait",F),o.unsubscribe(c,"init",q),o.unsubscribe(c,"thumb-up",O),o.unsubscribe(c,"thumb-down",M),o.unsubscribe(c,"heart",R),o.unsubscribe(c,"publish",U),j(),E=[],L=[])}},307:function(e){e.exports=JSON.parse('{"unit-test":{"GET":["key1"],"POST":["key2"],"REPLY":["key3"]},"client-state":{"SUB":[],"POST":["state"],"GET":[],"REPLY":["state"]},"history":{"GET":["count"],"REPLY":["history"]},"hpto":{"REPLY":["ad"],"GET":[]},"hpto-refresh":{"SUB":[],"POST":[]},"station":{"GET":["stationUri","metadata","trackCount"],"REPLY":["stationUri","station"]},"station-add":{"POST":["stationUri","add"]},"station-autoplay":{"POST":["contextUri","playerPlaybackId","prevTracks"],"SUB":[]},"station-create":{"POST":["stationUri"],"SUB":[]},"station-error":{"POST":["stationUri","message"],"SUB":[]},"station-metadata":{"POST":["stationUri","metadata"]},"station-thumb":{"POST":["stationUri","trackUri","thumb"]},"station-heart":{"POST":["stationUri","trackUri"]},"station-undo-feedback":{"POST":["stationUri","trackUri","thumbAction"]},"stations-all":{"GET":[],"REPLY":["user_stations","genre_stations","recommended_stations"]},"stations-saved":{"GET":[],"REPLY":["saved_stations"]},"format-list-heart":{"POST":["entityUri","trackUri"]},"format-list-undo-feedback":{"POST":["entityUri","trackUri"]}}')},308:function(e,t,n){"use strict";e.exports={AppState:n(62),Navigator:n(121)}},31:function(e,t,n){var i=n(36);e.exports=function(e,t,n){t=i(t,n);var o=[];if(null==e)return o;for(var a=-1,s=e.length;++a<s;)o[a]=t(e[a],a,e);return o}},310:function(e,t,n){"use strict";const i=n(345),o=n(52);e.exports={schema:i,log:o.bind(null,i)}},312:function(e,t,n){"use strict";const i=n(9),o=document.createElement("div");o.id="tooltip";const a=document.createElement("span");a.setAttribute("dir","auto");const s=document.createElement("div");s.className="tooltip-arrow-top";const l=document.createElement("div");l.className="tooltip-arrow-bottom",o.appendChild(s),o.appendChild(l),o.appendChild(a);let r=null,p=null,d=null;const k=function(e){a.innerText=e},u=function(e,t){const n=t[0];let i=0,a=0;const u=t.data("tooltip")||t.getAttribute("title");if(!u)return;r=t,t.tooltipCheck||(t.removeAttribute("title"),t.setAttribute("data-tooltip",u),t.tooltipCheck=!0);const c=function(e){const t=e.getAttribute("data-tooltip-container");let n;return t&&(n=document.querySelector(t)),n||document.body}(t);p&&c===p||function(e){(p=e).appendChild(o)}(c),k(u);const m=o.clientHeight,f=o.offsetWidth,y=window.pageYOffset,g=n.getBoundingClientRect(),z=n.offsetHeight,b=n.offsetWidth,h=parseInt(g.top,10)+y,_=parseInt(g.left,10)+b/2,v=h+z,w=document.documentElement.clientWidth,S=document.documentElement.clientHeight;v+m+8-y>S?(i=h-m-8,s.classList.remove("visible"),l.classList.add("visible"),d=l):((i=h+z+8)-y>S&&(i=S-m),s.classList.add("visible"),l.classList.remove("visible"),d=s),(a=_-f/2)+f>=w-8?a=w-8-f:a<8&&(a=8),o.style.top=`${i}px`,o.style.left=`${a}px`,d.style.left=`${_-a-5}px`,t.hasAttribute("data-tooltip-instant")?o.classList.add("instant"):o.classList.remove("instant"),o.classList.add("visible")},c=function(){r&&(r=null,k(""),o.classList.remove("visible"),o.style.left=0,o.style.top=0,d&&(d.style.left=0))};let m=!1;t.attach=function(){if(m)return;m=!0;const e=i(document);e.delegate("mouseover","[data-tooltip]",u),e.delegate("mouseout","[data-tooltip]",c),e.on("keydown",c),e.on("mousedown",c)},t.detach=function(){if(!m)return;m=!1,function(){r=null,o.parentNode&&p.removeChild(o),p=null}();const e=i(document);e.undelegate("mouseover","[data-tooltip]",u),e.undelegate("mouseout","[data-tooltip]",c),e.off("keydown",c),e.off("mousedown",c)},t.update=function(){m&&r&&(r.data("tooltip")?u(0,r):c())},t._setText=k,t._getTooltipNode=()=>o},314:function(e,t,n){"use strict";(function(e){const i=n(7),o=n(25),a=n(49),s=n(50),l=n(128),r=n(129),p="a, [draggable]",d="[data-drop-target]",k=window.parent?window.parent.document:document;function u(e,t){if(t.closest("[data-glue-draggable]"))return;if(document.addEventListener("mousemove",c),o.isNodeSelected(t)){const n=o.getUris();if(n.length>0){const i=o.getIndicesPerList(),a=1===i.length?i[0]&&i[0].uri:null;m(e,n,null,a||null,r(t)),k.body.setAttribute("data-dragging-type",n.map(e=>y(e)).filter((e,t,n)=>n.indexOf(e)===t).join(" "))}}else{let n=t.getAttribute("data-uri");if(!n){const e=i.from(t.getAttribute("href"));n=e?e.toURI():""}const o=l.getForElement(t);n&&(m(e,[n],[o],null,r(t)),k.body.setAttribute("data-dragging-type",y(n)))}}function c(){k.body.removeAttribute("data-dragging-type"),document.removeEventListener("mousemove",c)}function m(t,n,i,o,s){const r=function(e){const t={};for(let n=0,i=e.length;n<i;n++){const i=e[n],o=y(i);(t[o]||(t[o]=[])).push(f(i))}return t}(n),p=function(e){const t=new Array(e.length);for(let n=0,i=e.length;n<i;n++)t[n]=f(e[n]);return t}(n),d=p.join("\n"),k=function(e,t,n){let i="";for(let o=0,a=e.length;o<a;o++){const a=n&&n[o]||l.getForUri(e[o]);i+=`<a href="${t[o]}">${a}</a>`,o<e.length-1&&(i+="<br>")}return i}(n,p,i);t.dataTransfer.setData("text/uri-list",d);for(const e in r){if(!r.hasOwnProperty(e))continue;const n=r[e];t.dataTransfer.setData(e,n.join("\n"))}t.dataTransfer.setData("text/plain",d),t.dataTransfer.setData("text/html",k),o&&(t.dataTransfer.setData("text/x-spotify-data-context",o),t.dataTransfer.setData(`text/x-spotify-data-context-${o}`,"")),s&&t.dataTransfer.setData("text/x-spotify-data-log-context",s),t.dataTransfer.setData("text/x-spotify-data-app-uri",e.__spotify&&e.__spotify.app_uri||null),a.run("set-drag-data",t,n,o)}function f(e){const t=i.from(e);return t?t.toOpenURL():e}function y(e){const t="text/x-spotify-",n=i.from(e);if(n){const e=n.type;if(e===i.Type.TRACK||e===i.Type.LOCAL)return`${t}tracks`;if(e===i.Type.ALBUM||e===i.Type.LOCAL_ALBUM)return`${t}albums`;if(e===i.Type.ARTIST||e===i.Type.LOCAL_ARTIST)return`${t}artists`;if(e===i.Type.USER||e===i.Type.PROFILE)return`${t}users`;if(e===i.Type.PLAYLIST||e===i.Type.PLAYLIST_V2)return`${t}playlists`;if(e===i.Type.FOLDER)return`${t}folders`;if(e===i.Type.STATION&&!(n.args.length>2&&"cluster"===n.args[2]))return`${t}stations`;if(e===i.Type.EPISODE)return`${t}episodes`}return`${t}unknown`}t.attach=function(){s.delegate("dragstart",p,u),s.delegate("dragend","body",c),s.delegate("drop",d,c)},t.detach=function(){s.undelegate("dragstart",p,u),s.undelegate("dragend","body",c),s.undelegate("drop",d,c)}}).call(this,n(1))},315:function(e,t,n){"use strict";(function(e){const i=n(9),o=n(57),a=n(2),s=n(7),l=n(13),r=n(25),p=n(83),d=n(127),k=n(48),u=n(64),c=n(65),m=n(54),f=n(5).logWarn;let y=!1,g=null;const z={},b=[],h="[data-list-item]",_="sp://desktop/v1/clipboard";function v(e){return e.target===document.documentElement}function w(e){return e.target!==document&&e.target.closest(h)}function S(e){return e!==document&&!!e.closest("[data-filter]")}function x(e,t){if(v(e))return;y=!1;const n=w(e);if(t){if(e.target!==g)return void(g=null);g=null}else g=e.target;n?function(e,t,n){const i=1===A(e),o=u.getFromNode(t);if(!o)return;const a=p.isSelected(o);let s=E()?e.metaKey:e.ctrlKey,l=e.shiftKey||s,r=!e.shiftKey;L()||(s=l=!1,r=!0);if(l&&r&&a&&i){if(!n)return;!function(e){const t=p.getOrigin(),n=p.getFocus();let i=u.getDirection(t,n);i||(i=1);const o=e.isSame(t),a=e.isSame(n);let s,l;(o||a)&&(s=O(e,"up"),l=O(e,"down"));o&&p.setOrigin(1===i?l||s:s||l);e.isSame(n)&&p.setFocus(1===i?s||l:l||s);p.remove(e)}(o)}else if(r){if(i&&a&&!n)return;if(l&&!n)return;!function(e,t){const n=p.getOrigin(),i=A(t),o=1===i,a=2===i,s=p.isSelected(e);let l=E()?t.metaKey:t.ctrlKey,r=t.shiftKey||l;L()||(l=r=!1);const d=!s&&a;(!r&&o||d)&&p.clear();let k;if(p.add(e),p.setFocus(e,{isTouch:C(t)}),n&&!n.isSame(e)){const t=u.getClosest(e,"down");if(!(k=t&&p.isSelected(t))){const t=u.getClosest(e,"up");k=t&&p.isSelected(t)}}k||p.setOrigin(e)}(o,e)}else{if(n)return;!function(e){let t=p.getOrigin();const n=p.getFocus();t&&n&&!t.isSame(n)&&p.remove(t,n);t||(t=new c(0,0),p.setOrigin(t));p.add(t,e),p.setFocus(e)}(o)}d.update(null,{focusAsync:i})}(e,n,t):function(e){const t=e.target!==document&&!!e.target.closest("[data-sort]"),n=S(e.target),i=p.hasSelection();t||n||!i||(p.clear(),d.update())}(e)}function P(e,t,n){const a=i(`[data-uri=${e}]`),s=o(k.elements,a);let l=t;if(!s||s.length<1)return;const r=i(s[0]);let m=r&&k.elements.indexOf(r[0]);if(r&&r.matches("[data-context]")){const e=u.getPositionFromGlobalIndex(l);m=e.containerIndex,l=e.index}else if(-1===m)return void f("No container matching this uri was found or selection doesn't know about the container. Possibly you need to run events.update.");L()||p.clear();const y=new c(m,l);p.getOrigin()||p.setOrigin(y),p.setFocus(y),p.add(y),d.update(null,{focusAsync:!1}),!0!==n&&M(y)}function T(){m.put({url:_,body:j().map(e=>{const t=s.from(e);return t&&t.toOpenURL()}).filter(Boolean).join("\n")})}function j(){const e=p.selections,t=[];let n;const i=e=>!!n[e];for(let o=0;o<e.length;o++){if(!(n=e[o]))continue;let a;const s=k.getLiveList(o);if(!s)continue;const l=s.keys.filter(i);for(let e=0,n=l.length;e<n;e++){const n=s.valueOf(l[e]);n&&((a=n.get("track"))||(a=n.get("playlist")),a||(a=n.get("album")),a||(a=n.get("artist")),a||(a=n.get("user")),a||(a=n),t.push(a.get("uri")))}}return t}function A(e){if(C(e))return 1;switch(e.button){case 0:return 1;case 2:return 2;case 1:return 3;default:return 0}}function E(){if(!e.window)return!1;if(!e.window.navigator)return!1;return(e.window.navigator.userAgent||"").indexOf("Mac")>-1}function L(){return null===i("body").data("multi-select-disabled")&&(!!e.window&&!!e.window._getSpotifyModule)}function C(e){return!!e.changedTouches}function O(e,t){let n=e;for(;n;)if((n=u.getClosest(n,t))&&p.isSelected(n))return n;return null}function M(e){const t=k.elements[e.containerIndex],n=t&&t.querySelector("[data-scroll-container]");if(n)l.emit("scroll-to-index",n,e.index);else{const t=u.getNodeFromPosition(e);if(!t)return;const n=t.getBoundingClientRect().top;(n<0||n>=window.innerHeight)&&t.scrollIntoView(n<0)}}function R(e){return function(t){const n=k.getUris().indexOf(e);if(n>-1){for(let e=0,i=t.length;e<i;e++){if("remove"===t[e].type){p.updateContainer(n);break}}d.update()}}}t.handleMouseDown=x,t.handleMouseUp=function(e){v(e)||x(e,!0)},t.handleKeyDown=function(e){if(S(e.target))return;y=!0;const t=38===e.keyCode,n=40===e.keyCode;if(!function(){return null===i("body").data("keyboard-select-disabled")}())return;if(!t&&!n)return;const o=p.getOrigin(),a=p.getFocus();let s=a;do{s=s&&u.getClosest(s,n?"down":"up")}while(s&&p.isPositionHidden(s));if((t||n)&&!e.metaKey&&!e.ctrlKey&&s){if(e.shiftKey&&L()&&o&&a){const e=n?1:-1,t=u.getDirection(o,a);0===t||e===t?(p.add(s),M(s)):p.remove(a)}else p.clear(),p.add(s),p.setOrigin(s),M(s),e.preventDefault();p.setFocus(s)}d.update()},t.handleFocus=function(e){if(!y)return;const t=w(e);t?function(e,t){const n=u.getFromNode(t);if(!n||p.isSelected(n))return;p.clear(),p.add(n),p.setFocus(n),p.setOrigin(n),d.update()}(0,t):function(e){if(S(e.target))return;p.clear(),d.update()}(e),y=!1},t.handleScrollShowAfter=function(e){const t=e.pageNode&&e.pageNode[0];d.update(t)},t.handleSetHidden=function(e){p.setHiddenIndices(e.indices,e.uri)},t.handleAddByUri=P,t.handleSelectAll=function(){if(!L())return;p.clear();const e=new c(0,0);p.setOrigin(e);const t=u.getLastPositionForSelectAll();p.setFocus(t),p.add(e,t),d.update()},t.handleCopy=T,t.handleCopyAdvanced=function(){m.put({url:_,body:j().filter(Boolean).join("\n")})},t.handleCut=function(){T(),m.post({url:"sp://messages/v1/container/control",body:{type:"delete"}})},t.handleGetUris=j,t.updateListListeners=function(){const e=k.getUris();for(let t=0,n=e.length;t<n;t++){const n=e[t];if(n&&-1===b.indexOf(n)){const e=a(n).get("rows");if(e){const t=R(n);e.on("update",t),z[n]=t,b.push(n)}}}},t.resetListListeners=function(){for(let e=0,t=b.length;e<t;e++){const n=b[e],i=z[n],o=a(n).get("rows");o&&i&&(o.off("update",i),delete z[n],b.splice(e,1),e--,t--)}},t.handleListSwap=function(e){const t=a(e.before).get("rows");if(!t)return;const n=r.getIndicesPerList().filter((function(t){return t.uri===e.before}))[0];let i=[];n&&(i=n.indices.map((function(e){return t.keys[e]}))),l.on("scroll-reset",(function t(){l.off("scroll-reset",t),a(e.after).get("rows",(function(t,n){i.forEach((function(t){const i=n.keys.indexOf(t);-1!==i&&P(e.after,i,!0)}))}),a.ASAP)}))}}).call(this,n(1))},316:function(e,t,n){"use strict";const i=n(7),o=n(32),a=n(25),s=n(50),l=n(128),r=n(317),p="a, [draggable]",d=-10,k=-5;let u=null,c=null;function m(e,t){if(t.closest("[data-glue-draggable]"))return;let n="";if(a.isNodeSelected(t)){const e=a.getUris();n=1===e.length?l.getForUri(e[0]):function(e){let t="item";const n=i.from(e[0]),o=n&&n.type;if(o){t=o;for(let n=0,a=e.length;n<a;n++){const a=i.from(e[n]);if(!a||a.type!==o){t="item";break}}}"profile"===t&&(t="user");t.startsWith("playlist")&&(t="playlist");const a=e.length;switch(t){case"track":return r.get("desktop.spotify-events.drag_tooltip_many_tracks",a);case"artist":return r.get("desktop.spotify-events.drag_tooltip_many_artists",a);case"album":return r.get("desktop.spotify-events.drag_tooltip_many_albums",a);case"playlist":return r.get("desktop.spotify-events.drag_tooltip_many_playlists",a);case"user":return r.get("desktop.spotify-events.drag_tooltip_many_users",a);default:return r.get("desktop.spotify-events.drag_tooltip_many_items",a)}}(e)}else n=l.getForElement(t);const s=function(e){u||((u=document.createElement("div")).className="dnd-image");c||((c=document.createElement("div")).className="dnd-image-shelter");return u.textContent=e,document.body.appendChild(u),document.body.appendChild(c),u}(n);e.dataTransfer.setDragImage(s,d,k),function(){o.immediate((function(){u&&u.parentNode&&u.parentNode.removeChild(u),c&&c.parentNode&&c.parentNode.removeChild(c)}))}()}t.attach=function(){s.delegate("dragstart",p,m)},t.detach=function(){s.undelegate("dragstart",p,m)}},317:function(e,t,n){"use strict";const i=n(60)({});e.exports=i},32:function(e,t,n){"use strict";(function(t,i,o){const a=n(253),s=n(30),l=n(27),r={timeout:{},frame:[],immediate:[]},p=function(e){const t=a();s(e.splice(0),(function(e){e.callback.call(e.context,t)}))},d=function(e,t,n,i){e.length||i((function(){p(e)}));const o={callback:t,context:n};return e.push(o),function(){const t=l(e,o);t>-1&&e.splice(t,1)}},k={};let u;t.process&&i.nextTick?k.immediate=function(e,t){return d(r.immediate,e,t,i.nextTick)}:t.setImmediate?k.immediate=function(e,t){return d(r.immediate,e,t,o)}:t.postMessage&&t.addEventListener?(addEventListener("message",(function(e){e.source===t&&"@deferred"===e.data&&(e.stopPropagation(),p(r.immediate))}),!0),k.immediate=function(e,t){return d(r.immediate,e,t,(function(){postMessage("@deferred","*")}))}):k.immediate=function(e,t){return d(r.immediate,e,t,(function(e){setTimeout(e,0)}))},k.timeout=function(e,t,n){const i=r.timeout;return u||(u=k.immediate((function(){u=null,r.timeout={}}))),d(i[t]||(i[t]=[]),e,n,(function(e){setTimeout(e,t)}))},e.exports=k}).call(this,n(1),n(26),n(102).setImmediate)},33:function(e,t,n){var i=n(36);e.exports=function(e,t,n){t=i(t,n);var o=[];if(null==e)return o;for(var a,s=-1,l=e.length;++s<l;)t(a=e[s],s,e)&&o.push(a);return o}},34:function(e,t){e.exports=function(e){return Object.prototype.toString.call(e).slice(8,-1)}},345:function(e){e.exports=JSON.parse('{"type":"record","name":"UserDragAndDropInteraction","namespace":"com.spotify.Message","doc":"Logged whenever a user drags and drops (currently desktop only) an item in the client. Only completed drag and drops are logged and not canceled/failed ones.","fields":[{"name":"message_name","type":"string"},{"name":"message_version","type":"int"},{"name":"item_type","type":["null","string"],"doc":"Type of item, eg \\"track\\".","default":null},{"name":"item_uri","type":["null","string"],"doc":"Uri of item that was dropped and only the first if multiple.","default":null},{"name":"number_items","type":["null","long"],"doc":"Number of items dropped.","default":null},{"name":"source_view_uri","type":["null","string"],"doc":"View uri from where the drag started, eg \\"spotify:app:playlist\\".","default":null},{"name":"source_uri","type":["null","string"],"doc":"Uri of the context from where the drag started, eg: \\"spotify:user:spotify:playlist:1m6DKwKNM1YLcm3OX6RzJg\\".","default":null},{"name":"source_index","type":["null","long"],"doc":"Index of the item from where the drag started.","default":null},{"name":"source_component","type":["null","string"],"doc":"Id of the component from where the drag started, eg: \\"header/title\\" if the user dragged a playlist via the playlist title in the header.","default":null},{"name":"target_view_uri","type":["null","string"],"doc":"View uri where the drop ended, eg \\"spotify:app:zlink\\".","default":null},{"name":"target_uri","type":["null","string"],"doc":"Uri of the context where the drop ended, \\"spotify:user:spotify:rootlist\\".","default":null},{"name":"target_index","type":["null","long"],"doc":"Index where dropped.","default":null},{"name":"target_component","type":["null","string"],"doc":"Id of the component where the drop ended, eg: \\"player/queue\\" if dropped on the Queue button in the player component.","default":null},{"name":"ms_duration","type":["null","long"],"doc":"The duration in milliseconds from the start of the drag until the end of the drop.","default":null}],"schema_version":1}')},350:function(e,t,n){"use strict";(function(e){var i=function(e){return e&&e.__esModule?e:{default:e}}(n(356));const o=n(2),a=n(62);function s(e){e.data&&e.data.name&&("set_active"===e.data.name?o("spotify:application").update({active:e.data.active}):"set_arguments"===e.data.name?o("spotify:application").update({arguments:e.data.arguments.join(":")}):"set_state"===e.data.name&&o("spotify:application").update({state:a.unserialize(e.data.state)}))}let l;t.matches=/^spotify:application$/,t.register=function(){l||(l=!0,e.addEventListener("message",s),function(t){t.update({version:e.__spotify&&e.__spotify.app_version||"0.0.0"});const n=new URL((0,i.default)());if(n.hostname.length>0){const e=/^([a-zA-Z-]+)\.app\.spotify\.com$/,i=n.hostname.match(e);i&&2===i.length&&t.update({appURI:`spotify:app:${i[1]}`,arguments:n.searchParams.get("param")||"",active:!0})}}(o("spotify:application")))},t.unregister=function(){l&&(l=!1,e.removeEventListener("message",s))}}).call(this,n(1))},354:function(e,t,n){var i=n(91),o=n(90),a=n(73),s=n(362),l=n(364);e.exports=function e(t,n,r){r=r||i;var p=o(t)&&o(n),d=!p&&a(t)&&a(n);return p||d?(p?s:l)(t,n,(function(t,n){return e(t,n,r)})):r(t,n)}},355:function(e,t,n){"use strict";const i=n(9),o=n(13),a=n(2),s="select",l="select-property",r=`[data-${s}]`,p=[];function d(e,t){const n=t.data(l),i=t[0];n?c(i,n):y(i,k(i))}function k(e){return e.options[e.selectedIndex].value}function u(e){if(!e.id)return;const t=i(`[data-${s}=${e.id}]`);if(!t)return;const n=t[0],o=e.selected,a=t.data(l);a?c(n,a,o):f(n,o)}function c(e,t,n){const i=g(e);if(!i)return;const o=a(i);if(void 0===o.get(t))return;const s=void 0===n?k(e):n,l={};l[t]=s,o.publish(l)}function m(e){if(p.indexOf(e)>-1)return;p.push(e);const t=i(e).data(l);if(!t)return;const n=g(e);if(!n)return;const o=a(n);o.get(t,(function(n,i){if(n)throw n;f(e,i),o.on("update",(function(n){t in n&&f(e,n[t])}))}))}function f(e,t){!function(e,t){const n=i(e).find(`option[value="${t}"]`);n&&!n.attribute("selected")&&n.select()}(e,t),y(e,t)}function y(e,t){const n=i(e).data(s)||null;o.emit("select-change",{element:e,id:n,selected:t})}function g(e){const t=e.closest("[data-uri]");return t?t.getAttribute("data-uri"):null}let z=!1;t.update=function(e){if(!z)return;const t=i(e||document).search(r);t&&t.forEach(m)},t.attach=function(){if(z)return;z=!0,i(document).delegate("change",r,d),o.on("select-set",u)},t.detach=function(){if(!z)return;z=!1,i(document).undelegate("change",r,d),o.off("select-set",u)}},356:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=()=>e.location.href}).call(this,n(1))},357:function(e,t,n){"use strict";const i=n(88),o={track:{_replace:"",artists:{_replace:"artist"},disc:{_replace:"discNumber"},number:{_replace:"trackNumber"},duration:{_replace:"length"}},timeSinceAdded:{_reverse:!0,_replace:"addTime"},addedBy:{_replace:"",name:{_replace:"addedByDisplayName"}}};e.exports=function(e,t,n){const a=i(e);return e?function e(t,n,i,o){const a=[],s=o&&o.slice()||[];return t.mask.forEach(t=>{const o=s.slice();if(t.key){const e=n&&n[t.key]&&null!==n[t.key]._replace&&void 0!==n[t.key]._replace?n[t.key]._replace:t.key;""!==e&&o.push(e)}if(t.mask){const s=e(t,n[t.key],i,o);s.length&&a.push(s)}else if(o.length){let e=o.join(".");if(!t.mask){const o=!!(n&&n[t.key]&&n[t.key]._reverse);if(i){const t=i.toUpperCase();e+=` ${o?function(e){return"ASC"===e?"DESC":"ASC"}(t):t}`}}a.push(e)}}),a}(a,n||o,t).join(","):null}},358:function(e,t,n){"use strict";e.exports={UP:"ups",DOWN:"downs",UNDO_HEART:"undo-heart",UNDO_BAN_ARTIST:"undo-ban-artist",UNDO_BAN_TRACK:"undo-ban-track"}},36:function(e,t,n){var i=n(156),o=n(157),a=n(158);e.exports=function(e,t){if(null==e)return i;switch(typeof e){case"function":return void 0!==t?function(n,i,o){return e.call(t,n,i,o)}:e;case"object":return function(t){return a(t,e)};case"string":case"number":return o(e)}}},360:function(e,t,n){"use strict";const i=n(9),o=n(2);let a;function s(e){"online"in e&&(e.online?i(document.body).removeClass("offline"):i(document.body).addClass("offline"))}let l=!1;t.update=function(){l&&function(){o("spotify:client").query("session(online)",(function(e,t){if(e)throw e;s({online:t.session.online})}))}()},t.attach=function(){l||(l=!0,a||o("spotify:client").get("session",(function(e,t){if(e)throw e;(a=t).on("update",s)})))},t.detach=function(){l&&(l=!1,a&&(a.off("update",s),a=null))}},361:function(e,t,n){var i=n(41),o=n(372),a=n(90);e.exports=function e(){var t,n,s,l,r=1;for(l=o(arguments[0]);s=arguments[r++];)for(t in s)i(s,t)&&(n=s[t],a(n)&&a(l[t])?l[t]=e(l[t],n):l[t]=o(n));return l}},362:function(e,t,n){var i=n(41),o=n(363),a=n(90),s=n(91);function l(e,t){return i(this,t)}e.exports=function(e,t,n){return n=n||s,a(e)&&a(t)?o(e,function(e){return function(t,n){return i(this,n)&&e(t,this[n])}}(n),t)&&o(t,l,e):n(e,t)}},363:function(e,t,n){var i=n(29),o=n(36);e.exports=function(e,t,n){t=o(t,n);var a=!0;return i(e,(function(n,i){if(!t(n,i,e))return a=!1,!1})),a}},364:function(e,t,n){var i=n(91),o=n(73),a=n(78);e.exports=function(e,t,n){return n=n||i,o(e)&&o(t)?e.length===t.length&&a(e,function(e){return function(t,n){return n in this&&e(t,this[n])}}(n),t):n(e,t)}},365:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attach=function(){if(y)return;y=!0,document.addEventListener("keydown",v),document.addEventListener("focus",h,!0),document.addEventListener("blur",_,!0)},t.detach=function(){if(!y)return;y=!1,g.menu=null,document.removeEventListener("keydown",v),document.removeEventListener("focus",h,!0),document.removeEventListener("blur",_,!0)},t.update=function(){};var i=l(n(140)),o=l(n(13)),a=l(n(308)),s=l(n(62));function l(e){return e&&e.__esModule?e:{default:e}}const r="[data-menu]",p="[data-menu-item]",d="[data-menu-item-disabled]",k="[data-menu-item]:not([data-menu-item-disabled])",u='[data-submenu="true"]',c="data-menu",m="data-menu-item",f=new a.default.Navigator;let y=!1;const g={menu:null};function z(e){if(e.target.matches(r))return;const t=e.target.closest(p);if(!t)return;const n=O(t.closest(r));let i=M();i&&t!==i.selectedNode&&(t.matches(d)?j(i):(T(i,n,t),i=M()),t.matches(u)?n.menu||E(n,t):i.menu&&L(i))}const b=(0,i.default)(z);function h(e){const t=e.target.closest(r);t&&!g.menu&&(g.menu={node:t,selectedNode:null,menu:null,active:!0,parent:null},t.addEventListener("mousemove",b),t.addEventListener("mouseleave",w),t.addEventListener("touchstart",z,!0))}function _(e){const{target:t,relatedTarget:n}=e;g.menu&&(t===g.menu.node?n&&t.contains(n)||C():g.menu.node.contains(t)&&!g.menu.node.contains(n)&&C())}function v(e){if(!g.menu)return;const t=e.keyCode,n=27===t,i=38===t,o=40===t,a=37===t,l=39===t;if(13===t){const e=M().selectedNode,t=e&&e.querySelector("a[href]");return t&&f.requestOpenState(new s.default(t.getAttribute("href"))),void(e&&P(e))}if(n)C();else if(i||o){const e=M();if(e.node){const t=o?function(e){if(!e.selectedNode)return e.node.querySelector(k);let t=e.selectedNode.nextElementSibling;for(;t;){const e=t.matches(p),n=t.matches(d);if(e&&!n)break;t=t.nextElementSibling}return t}(e):function(e){if(!e.selectedNode){const t=e.node.querySelectorAll(k);return t[t.length-1]||null}let t=e.selectedNode.previousElementSibling;for(;t;){const e=t.matches(p),n=t.matches(d);if(e&&!n)break;t=t.previousElementSibling}return t}(e);t&&T(e,e,t)}}else if(l){const e=M();if(e.selectedNode&&e.selectedNode.matches(u)){e.menu||E(e,e.selectedNode);const t=e.menu.node,n=t.firstElementChild||t.firstChild;T(e,e.menu,n)}}else if(a){const e=M();e.parent&&L(e.parent)}else;}function w(e){if(!e.relatedTarget||!e.relatedTarget.closest(r)){const e=M();j(e),e.menu&&L(e)}}function S(e){P(O(e.target.closest(r)).selectedNode)}function x(e){e.preventDefault(),S(e)}function P(e){o.default.emit("menu-activate-item",{menu:{id:g.menu.node.getAttribute(c)||"",element:g.menu.node},item:{id:e.getAttribute(m)||"",element:e}})}function T(e,t,n){const i=e.menu===t,o=function(e,t){let n=e.menu;for(;n&&n!==t;)n=n.menu;return!!n}(t,e);i?A(e.selectedNode):j(e),o&&j(t),e.active=!1,t.selectedNode!==n&&(n.classList.add("selected"),n.focus(),function(e){e.addEventListener("click",S),e.addEventListener("touchstart",x)}(n),t.selectedNode=n),t.active=!0}function j(e){if(e.selectedNode){const t=e.selectedNode;t.classList.remove("selected"),A(t),e.selectedNode=null}}function A(e){e.removeEventListener("click",S),e.removeEventListener("touchstart",x)}function E(e,t){const n=t.querySelector(r);n&&(e.menu={parent:e,node:n,selectedNode:null,menu:null,active:!1},n.classList.add("open"))}function L(e){e.menu.menu&&L(e.menu),e.selectedNode.focus(),e.menu.active&&(e.menu.active=!1,e.active=!0),j(e.menu),e.menu.node.classList.remove("open"),e.menu=null}function C(){if(g.menu){const e=g.menu.node;e.removeEventListener("mousemove",b),e.removeEventListener("mouseleave",w),e.removeEventListener("touchstart",z,!0);let t=g.menu;for(;t;)j(t),t.node.classList.remove("open"),t=t.menu;delete g.menu,o.default.emit("menu-hide",{menu:{id:e.getAttribute(c)||"",element:e}})}}function O(e){let t=g.menu;for(;t&&t.node!==e;)t=t.menu;return t}function M(){let e=g.menu;for(;e&&!e.active;)e=e.menu;return e}},366:function(e,t,n){"use strict";const i=n(21),o=n(17),a=n(9),s=n(44).EMIT_SYNC,l=n(81).attentionHighlight,r=n(140),p=n(374),d=n(13),k=a(document),u=a(window);let c=[],m=[],f=[];const y=[],g=[];let z=[];const b=function(e,t){let n=e;n!==window&&n!==document.body||(n=document.body);const i=n===document.body?0:n.getBoundingClientRect().top,o=n===document.body?document.documentElement.clientHeight:n.clientHeight,a=t.getBoundingClientRect().top,s=t.offsetHeight;return{view:{top:i,height:o,bottom:i+o},container:{top:a,height:s,bottom:a+s}}},h=function(e,t,n,o,c){const h=e[0],_=t[0];let v=-1;t.addClass("scroll-container-enabled");const w=(e,n)=>{if(a(e)===t){const e=_.querySelector(`[data-index='${n}']`);if(!e)return void(v=n);v=-1;let t=document.querySelector("[data-table-row-attention-highlight]");t||((t=document.createElement("div")).className="tl-attention-highlight",t.setAttribute("data-table-row-attention-highlight",""),document.body.appendChild(t));const i=window.pageYOffset,o=e.getBoundingClientRect(),a=document.body.offsetWidth;t.classList.add("visible"),t.style.top=`${o.top+i}px`,t.style.left=`${o.left}px`,t.style.right=`${a-o.right}px`,setTimeout(()=>{t.classList.remove("visible")},l.HIDE_DELAY)}},S=new p(_,{height:o,length:n,tag:c,debug:!1,request:function(e,t){d.emit("scroll-request",_,e,t,s)}});m.push(S);const x=y.indexOf(t);x>-1&&(S.reset(n,g[x]),y.splice(x,1),g.splice(x,1)),S.on("before-show",(function(e,n){d.emit("scroll-show-before",{pageNode:t,container:t,range:e,nodes:n},s)})),S.on("after-show",(function(e,n){d.emit("scroll-show-after",{pageNode:t,container:t,range:e,nodes:n},s)})),S.on("index-change",(function(e){d.emit("scroll-index-change",{pageNode:t,container:t,ranges:e},s)}));let P=!1;const T=function(e,n,i,o){if(a(e)===t){"number"==typeof o&&o>0?S.resetFrom(o,n,i):S.reset(n,i),t._scrollEvent()}},j=function(){const e=b(h,_);let n=function(e,t,n,o=0){const a=b(e,t),s=-(a.container.top-a.view.top);let l=Math.floor((s-o)/n);const r=Math.ceil((s+a.view.height+o)/n);return l<0&&(l=0),!(r<=l)&&new i(l,r)}(h,_,o);if(n){S.on("after-show",(function e(){S.off("after-show",e),v>-1&&v>=n.start&&v<n.end&&w(t,v)}));const e=2;n=new i(n.start-e,n.end+e),S.show(new i(n.start,n.end))}P||e.container.bottom<2e3&&(P=!0,d.emit("scroll-request-more",_,(function(e,t){if(e)throw e;P=!1,T(_,t)})))};f.push(j),t._scrollEvent=r(j),d.on("scroll-reset",T),t._scrollResetEvent=T;const A=function(e,n,i={}){if(h!==window)throw new Error("Can't scroll to index if view is not `window`");if(a(e)===t){const e=b(h,_),t=i.centerRowIfScrollIsNeeded?(e.view.height-S.height)/2:0,o=S.height*n,a=e.container.top+o;let s=a+window.pageYOffset,l=(k.search("[data-sticky-active]")||[]).map((function(e){return e.offsetHeight})).reduce((function(e,t){return e+t}),0);if(document.querySelector("[data-top-bar-height]")&&(l+=parseInt(document.querySelector("[data-top-bar-height]").getAttribute("data-top-bar-height"),10)),a<=l)s-=t+l;else{if(!(a+S.height>e.view.height))return;s+=t+S.height-e.view.height}h.scrollTo(0,s)}},E=()=>{const e=document.querySelector("[data-table-row-attention-highlight]");e&&e.parentNode.removeChild(e)};d.on("scroll-to-index",A),d.on("attention-highlight-index",w),d.on("hide-attention-highlight",E),e.on("scroll",j),u.on("resize",j),j(),z.push({container:t,clean:function(){d.off("scroll-reset",T),d.off("scroll-to-index",A),d.off("attention-highlight-index",w),d.off("hide-attention-highlight",E),e.off("scroll",j),u.off("resize",j),delete t._scrollEvent,delete t._scrollResetEvent,v=-1,t.removeClass("scroll-container-enabled")}})};function _(e){const t=e.indices,n=a(e.itemContainer),i=c.indexOf(n);if(i>-1){const e=m[i];e&&e.reset(e.length,t);const n=f[i];n&&n()}else y.push(n),g.push(t)}let v=!1;t.update=function(e){if(!v)return;const t=a(e)||k;let n=k.search("[data-scroll-container]");const l=[],r=[];c=c.filter((function(e,t){if(!o(n,e[0])){for(let t=0;t<z.length;t++)if(z[t].container===e){z[t].clean(),z.splice(t,1);break}return!1}return r.push(m[t]),l.push(f[t]),!0})),m=r,f=l,t!==k&&(n=t.search("[data-scroll-container]")),n&&n.forEach((function(e){const t=a(e);if(t._scrollEvent||e.children.length)return;c.push(t);const n=t.parent("[data-scroll-view]")||u;d.emit("scroll-request",t[0],new i(0,3),(function(e,i,s){if(e)throw e;let l=i;if(o(k.search("[data-scroll-container]"),t[0])){(l=a(l)).insert(t);const e=l[1],i=e.offsetHeight,o=a(e).tag();l.remove(),h(n,t,s,i,o)}}),s)}))},t.attach=function(){v||(v=!0,d.on("scroll-set-hidden",_))},t.detach=function(){v&&(v=!1,d.off("scroll-set-hidden",_),c=[],z.forEach((function({clean:e}){e()})),z=[])}},367:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n(19)),o=n(130);const a=n(9),s=n(2),l=n(141),r=n(13),p="[data-button=heart]",d="[data-button=contextmenu]",k="[data-button=undo-heart]",u="[data-button=undo-ban]",c="spoticon-heart-16",m="spoticon-ban-16",f="spoticon-heart-active-16",y="spoticon-ban-active-16";let g=!1;function z(e,t){const n=l.getAttributeFromNodeOrParent(e.target,"data-button"),o=l.getAttributeFromNodeOrParent(t[0],"data-uri");let a=l.getContextFromNodeOrParent(t[0]);i.default.parse(a)&&(a=i.default.parse(a).originUri),o&&a&&("heart"===n?s(a).emit("heart",o):"undo-heart"!==n&&"undo-ban"!==n||s(a).emit(n,o))}function b(e,t){const n=e.querySelector(p)||e.querySelector(k),i=e.querySelector(d)||e.querySelector(u),o=e.parentNode.classList.contains("tl-row")?e.parentNode:null,a="up"===t,s="down"===t;e&&(e.classList.toggle("thumbs-up",a),e.classList.toggle("thumbs-down",s)),n&&function(e,t){if("up"===t){e.classList.remove(c),e.classList.add(f),e.setAttribute("data-button","undo-heart");const t=e.getAttribute("data-tooltip-undo");e.setAttribute("data-tooltip",t),e.setAttribute("aria-label",t),e.setAttribute("data-interaction-intent","undo-heart")}else if(null===t){e.classList.add(c),e.classList.remove(f),e.setAttribute("data-button","heart");const t=e.getAttribute("data-tooltip-heart");e.setAttribute("data-tooltip",t),e.setAttribute("aria-label",t),e.setAttribute("data-interaction-intent","heart")}}(n,t),i&&function(e,t){if("down"===t){e.classList.remove(m),e.classList.add(y),e.setAttribute("data-button","undo-ban");const t=e.getAttribute("data-tooltip-undo");e.setAttribute("data-tooltip",t),e.setAttribute("aria-label",t),e.setAttribute("data-interaction-intent","undo-ban")}else if(null===t){e.classList.add(m),e.classList.remove(y),e.setAttribute("data-button","contextmenu");const t=e.getAttribute("data-tooltip-ban");e.setAttribute("data-tooltip",t),e.setAttribute("aria-label",t),e.setAttribute("data-interaction-intent","show-ban-options")}}(i,t),o?(o.classList.toggle("thumbs-up",a),o.classList.toggle("thumbs-down",s)):n&&n.classList.toggle("active",a)}function h(e){const t=e[0].closest("[data-uri]");return t?t.getAttribute("data-uri"):null}const _={},v=function(e,t,n,i){if("thumb"===t){0===e.setStateForURI(i,n)&&(s(i).off("update",_[i]),delete _[i])}},w={addListenerForNode:function(e,t){const n=h(e);let a;if(t&&t[0]&&(a=l.getContextFromNodeOrParent(t[0])),!n||!a)return;i.default.parse(a)&&(a=i.default.parse(a).originUri);const r=(0,o.makeFeedbackUri)(a,n),p=s(r);_[r]?p.get("thumb",(function(t,n){if(t)throw t;w.setStateForFeedbackNode(e,n)}),s.ASAP):(_[r]=function(e){for(const t in e){if(!e.hasOwnProperty(t))continue;const n=e[t];v(w,t,n,r)}},p.get("thumb",(function(t,n){if(t)throw t;w.setStateForFeedbackNode(e,n),p.on("update",_[r])}),s.ASAP))},setStateForURI:function(e,t){let n=0;const i=(0,o.splitFeedbackUri)(e)[1],s=a(document).search("[data-button=feedback]");if(!s)return n;for(let e=0,o=s.length;e<o;e++){const o=a(s[e]);i===h(o)&&(n++,w.setStateForFeedbackNode(o,t))}return n},setStateForFeedbackNode:function(e,t){const n=a(e[0].closest('[data-button="feedback"]'))||a(e[0].querySelector('[data-button="feedback"]'));n&&b(n[0],t)}},S=t.update=function(e,t){if(!g)return;const n=a(t)||a(e)||a(document).search("[data-button=feedback]");if(!n)return;const i=e||a(document).search("[data-context]");for(let e=0,t=n.length;e<t;e++)w.addListenerForNode(a(n[e]),a(i))},x=function(e){S(e.pageNode,e.nodes)};t.attach=function(){if(g)return;g=!0,a(document).delegate("click","[data-button=feedback]",z),r.on("scroll-show-before",x)},t.detach=function(){if(!g)return;g=!1,a(document).undelegate("click","[data-button=feedback]",z),r.off("scroll-show-before",x)}},368:function(e,t,n){"use strict";const i=[n(378),n(379),n(380),n(381)];t.attach=function(){i.forEach((function(e){e.attach()}))},t.detach=function(){i.forEach((function(e){e.detach()}))},t.update=function(){i.forEach((function(e){e.update()}))}},37:function(e,t,n){"use strict";const i="spotify:internal:sortlist",o=/^spotify:internal:sortlist:(asc|desc):([^:]*):(.*)$/;t.create=function(e,t,n){const o=e.replace(/^spotify:/,""),a=encodeURIComponent(n).replace(/%20/g,"");return[i,t,a,o].join(":")},t.getDirection=function(e){const t=e.match(o);return t?t[1]:""},t.getQuery=function(e){const t=e.match(o);return t?decodeURIComponent(t[2]):""},t.getOriginUri=function(e){const t=e.match(o);return t?`spotify:${t[3]}`:""},t.parse=function(e){const t=e.match(o);return t?{direction:t[1],query:decodeURIComponent(t[2]),originUri:`spotify:${t[3]}`}:null},t.isValid=function(e){return o.test(e)},t.regExp=o},370:function(e,t,n){"use strict";const i=n(2),o=n(21),a=n(9),s=n(89),l=n(139),r=n(70);let p=!1;function d(){const e=i("spotify:player").get("track");return e&&e.get("provider")||""}function k(){const e=i("spotify:player").get("variant");return e?e.uri:""}function u(){const e=i("spotify:player").get("index");return e?e.get("track"):-1}function c(){const e=i("spotify:player").get("track");return e&&e.uri||""}function m(){const e=i("spotify:player").get("isPlaying"),t=i("spotify:player").get("isPaused");return e&&!t}function f(e){i("spotify:player").on("update",e);let t=!0;return{cancel:function(){t&&(i("spotify:player").off("update",e),t=!1)}}}function y(e,t){const n=a(e),s=u(),l=c(),r=function(){return i("spotify:player").get("uid")}();let p,d,k,f;const y=n.data("range");if(y){p=o.fromString(y);const e=i(t.contextUri).get("rows");if(e){const t=p.toIndices();k=t.map((function(t){return e.keys[t]})),f=t.map((function(t){return e.get(t).get("track").uri}))}d=null}else{let e=null;if(e=n.matches("[data-context-index]")?n:n.parent("[data-context-index]")){d=parseInt(e.data("context-index"),10);const n=i(t.contextUri).get("rows");n&&(k=[n.keys[d]],f=[n.get(d).get("track").uri])}else d=null}let g=!1;if(t.isPlayingContext)if(p)g=p.contains(new o(s,s+1));else if(null!==d){const e=f&&f[0],t=k&&k[0];g=e===l&&(d===s||t===r)}else g=!0;if(g)m()?i("spotify:player").emit("pause"):i("spotify:player").emit("resume");else{const e={context:t.contextUri,index:d,source:t.source,reason:t.reason};p&&(e.range=[p.start,p.end]),k&&(e.uids=k),f&&(e.uris=f),i("spotify:player").emit("play",e)}}function g(e,t){let n=parseInt(e.getAttribute("data-context-index"),10);isNaN(n)&&(n=-1);const o=e.getAttribute("data-uid")||"",a=e.getAttribute("data-uri")||"",s={context:t.contextUri,index:n,source:t.source,reason:t.reason};o&&(s.uids=[o]),a&&(s.uris=[a]),i("spotify:player").emit("play",s)}function z(e,t){const n=u(),i=c(),o=k(),s=b(n,t),l=r.getContextSelectorsWithVariants(o),p=function(e,t,n,i){const o=`[data-uri="${i}"]`,s=`[data-context-index=${n}]${o}`,l=t.map(e=>`${e} ${s}`),r=a(e).find(l);if(r)return r;const p=t.map(e=>`${e} ${o}`);return a(e).find(p)}(e,l,n,i)||[],d=function(e,t,n){const i=t.map((function(e){return`${`${e} [data-range]`}, ${e+"[data-range]"}`}));let o=a(e).search(i.join(", "));o=o?Array.prototype.slice.call(o):[];return b(n,o)}(e,l,n)||[];let m=[];if(t.length){const e=a(t).search("[data-button=play-context]");e&&(m=e.filter(e=>{const n=e.closest("[data-context]");return t.indexOf(n)>=0}))}const f=a([s,p,d,m]);return f?Array.prototype.slice.call(f):[]}function b(e,t){const n=new o(e,e+1);return t.filter((function(e){let t=a(e).data("range");return!t||!!n&&(t=o.fromString(t)).contains(n)}))}t.attach=function(){p||(p=!0,s.setMethods({getPlayerTrackProvider:d,getPlayerVariantUri:k,handlePlayButton:y,handlePlayFromRow:g}),l.setMethods({getPlayerTrackProvider:d,getPlayerVariantUri:k,getPlayerIsPlaying:m,getPlayingNodes:z,subscribeToPlayerChange:f}),s.attach(),l.attach())},t.detach=function(){p&&(p=!1,s.detach(),l.detach())},t.update=function(e){p&&l.update(e)}},371:function(e,t,n){"use strict";const i=n(2),o=n(9),a=n(89),s=n(139),l=n(70);let r=!1;function p(){const e=i("spotify:player").get("track");return e&&e.get("provider")||""}function d(){const e=i("spotify:player").get("variant");return e?e.uri:""}function k(){const e=i("spotify:player").get("index"),t=e&&e.get("page");return"number"==typeof t?t:-1}function u(){return i("spotify:player").get("uid")||""}function c(){const e=i("spotify:player").get("track");return e&&e.uri||""}function m(){const e=i("spotify:player").get("isPlaying"),t=i("spotify:player").get("isPaused");return e&&!t}function f(e){i("spotify:player").on("update",e);let t=!0;return{cancel:function(){t&&(i("spotify:player").off("update",e),t=!1)}}}function y(e,t){let n=t.isPlayingContext;const o=l.getAttributeValueFromNode(e,"data-uid"),a=l.getAttributeValueFromNode(e,"data-track-uri"),s=parseInt(l.getAttributeValueFromNode(e,"data-context-page"),10);if(n&&(n=function(e,t,n){if(e){return u()===e}if(t){return c()===t}if(!isNaN(n)){return k()===n}return!0}(o,a,s)),n)m()?i("spotify:player").emit("pause"):i("spotify:player").emit("resume");else{const e={context:t.contextUri,source:t.source,reason:t.reason};o&&(e.uid=o),a&&(e.trackUri=a),isNaN(s)||(e.page=s),i("spotify:player").emit("play",e)}}function g(e,t){const n={context:t.contextUri,source:t.source,reason:t.reason},o=e.getAttribute("data-uid");o&&(n.uid=o);const a=parseInt(l.getAttributeValueFromNode(e,"data-context-page"),10);isNaN(a)||(n.page=a),i("spotify:player").emit("play",n)}function z(e,t){const n=k(),a=u(),s=c(),r=d(),p=b(n,t),m=function(e,t,n,a){const s=function(){const e=i("spotify:player").get("playOrigin"),t=e&&e.get("externalReferrer");return t&&0===t.indexOf("https://open.spotify.com/")}(),l=t.map((function(e){let t=`${e} `;return s&&(t+=`[data-uri=${a}]`),s||(t+=`[data-uid=${n}]`),t})).join(", ");let r=o(e).search(l);if(r){if(r=Array.prototype.slice.call(r),s){const e=o(r[0]).data("uid");r=r.filter((function(t){return e===o(t).data("uid")}))}}else r=[];return r}(e,l.getContextSelectorsWithVariants(r),a,s)||[],f=function(e,t,n){const i=t.map((function(e){return`${`${e} [data-context-page]`}, ${e+"[data-context-page]"}`}));let a=o(e).search(i.join(", "));a=a?Array.prototype.slice.call(a):[];return b(n,a)}(e,l.getContextSelectorsWithVariants(r),n)||[];let y=[];if(t.length){const e=o(t).search("[data-button=play-context]");e&&(y=e.filter(e=>{const n=e.closest("[data-context]");return t.indexOf(n)>=0}))}const g=o([p,m,f,y]);return g?Array.prototype.slice.call(g):[]}function b(e,t){return t.filter((function(t){const n=parseInt(t.getAttribute("data-context-page"),10);return!!isNaN(n)||!isNaN(e)&&e===n}))}t.attach=function(){r||(r=!0,a.setMethods({getPlayerTrackProvider:p,getPlayerVariantUri:d,handlePlayButton:y,handlePlayFromRow:g}),s.setMethods({getPlayerTrackProvider:p,getPlayerVariantUri:d,getPlayerIsPlaying:m,getPlayingNodes:z,subscribeToPlayerChange:f}),a.attach(),s.attach())},t.detach=function(){r&&(r=!1,a.detach(),s.detach())},t.update=function(e){r&&s.update(e)}},372:function(e,t,n){var i=n(373),o=n(29),a=n(34),s=n(59);function l(e,t){switch(a(e)){case"Object":return function(e,t){if(s(e)){var n={};return o(e,(function(e,n){this[n]=l(e,t)}),n),n}return t?t(e):e}(e,t);case"Array":return function(e,t){var n=[],i=-1,o=e.length;for(;++i<o;)n[i]=l(e[i],t);return n}(e,t);default:return i(e)}}e.exports=l},373:function(e,t,n){var i=n(34),o=n(59),a=n(40);e.exports=function(e){switch(i(e)){case"Object":return function(e){return o(e)?a({},e):e}(e);case"Array":return function(e){return e.slice()}(e);case"RegExp":return function(e){var t="";return t+=e.multiline?"m":"",t+=e.global?"g":"",t+=e.ignoreCase?"i":"",new RegExp(e.source,t)}(e);case"Date":return function(e){return new Date(+e)}(e);default:return e}}},374:function(e,t,n){"use strict";const i=n(23),o=n(44),a=n(21),s=o.EMIT_SYNC;e.exports=i({mixin:o,constructor:function(e,t){this.container=e,this.height=t.height||0,this.length=t.length||0,this.tag=t.tag||"li",this.request=t.request,this._id=0,this.reset()},resetFrom:function(e,t,n){const i=this._range;e<i.end&&(this.reset(t,n),this.show(i))},reset:function(e,t){const n=this.tag;void 0!==e&&(this.length=e);const i=this.length*this.height;if(t)throw new TypeError("Hidden indices are not supported anymore!");this.container.innerHTML=`<${n} style="height:${i}px"></${n}>`+`<${n} style="height:0px"></${n}>`,this._range=new a(0,0),this._waitingRange=new a(0,0),this.emit("index-change",[],s)},show:function(e){const t=this.length,n=this._range,i=this._waitingRange,o=new a(Math.max(0,e.start),Math.max(Math.min(t,e.end),e.start));o.start===n.start&&o.end===n.end||o.start===i.start&&o.end===i.end||this._drawRange(o)},_drawRange:function(e){const t=this.container,n=this._range,i=this.height,o=this.length,l=++this._id;this._waitingRange=e,this.request(e,(r,p)=>{let d,k=0;if(l!==this._id)return;this._range=e,this._waitingRange=new a(0,0);const u=t.firstChild,c=t.lastChild;u.style.height=`${e.start*i}px`,c.style.height=`${(o-e.end)*i}px`,n.subtract(e).forEach((function(e){const i=e.length;for(d=0;d<i;d++)t.removeChild(t.children[e.start-n.start-k+1]);k+=i})),e.subtract(n).forEach(i=>{const o=i.length,a=i.start-e.start,l=p.slice(a,a+o);let r;for(this.emit("before-show",i,l,s),r=i.below(n)?u.nextSibling:c,d=0;d<o;d++)t.insertBefore(l[d],r);this.emit("after-show",i,l,s)}),this.emit("index-change",[e],s)})}})},376:function(e,t,n){"use strict";const i=n(9),o=n(2),a=n(141);function s(e,t){const n=a.getAttributeFromNodeOrParent(t[0],"data-button"),i=a.getAttributeFromNodeOrParent(t[0],"data-uri"),s=a.getContextFromNodeOrParent(t[0]);i&&s&&("thumbs-down"===n?o(s).emit("thumb-down",i):"thumbs-up"===n&&o(s).emit("thumb-up",i))}let l=!1;t.attach=function(){if(l)return;l=!0;const e=i(document);e.delegate("click","[data-button=thumbs-down]",s),e.delegate("click","[data-button=thumbs-up]",s)},t.detach=function(){if(!l)return;l=!1;const e=i(document);e.undelegate("click","[data-button=thumbs-down]",s),e.undelegate("click","[data-button=thumbs-up]",s)},t.update=function(){}},377:function(e,t,n){"use strict";const i=n(13),o=n(54),a=32,s=8,l=46;t.attach=function(){document.addEventListener("keypress",u,!1),document.addEventListener("keydown",c,!1)},t.detach=function(){document.removeEventListener("keypress",u,!1),document.removeEventListener("keydown",c,!1)},t.update=function(){};const r=":not([data-sticky-active]) > [data-list-quick-jump]",p=1e3,d={},k={};function u(e){f(e)||m(e)}function c(e){if(f(e))return;e.keyCode===s&&m(e)}function m(e){const t=e.keyCode===s,n=e.keyCode===a?" ":String.fromCharCode(e.keyCode).trim();if(!n&&!t)return;const u=function(e){let t=e.closest(r);if(!t){const e=document.querySelectorAll(r);e&&1===e.length&&(t=e[0])}return t}(e.target);if(!u)return;const c=function(e){const t=e.closest("[data-uri]");return t&&t.getAttribute("data-uri")}(u);if(!c)return;if(t&&!d[c])return;c in d||(d[c]=""),t?d[c]=d[c].slice(0,-1):n&&(d[c]+=n),i.emit("list-quick-jump-request",c,d[c]||null),k[c]&&clearTimeout(k[c]),e.keyCode===a&&e.preventDefault();const m=[{keyCode:a},{keyCode:s},{keyCode:l}];o.post({url:"sp://messages/v1/ignoreshortcuts",body:{action:"ignore",shortcuts:m}}),k[c]=setTimeout((function(){o.post({url:"sp://messages/v1/ignoreshortcuts",body:{action:"unignore",shortcuts:m}}),delete d[c],delete k[c],i.emit("list-quick-jump-request",c,null)}),p)}function f(e){return e.metaKey||e.ctrlKey||e.target.matches("input, textarea, [contenteditable]")}},378:function(e,t,n){"use strict";const i=n(9),o=".card",a=".card-image-hit-area",s=i(document);let l=!1,r=[];const p=function(e){r.push(e)};function d(){return s.search(o)}function k(e){const t=e.target;if(function(e){return"function"==typeof e.closest&&!!e.closest(o)}(t))switch(e.type){case"touchstart":p(e),l&&function(){const e=d();e&&(e.forEach((function(e){const t=i(e).find(a);t&&t.addClass("no-hover")})),l=!1)}();break;case"touchmove":p(e);break;case"touchend":t&&1===r.length&&"touchstart"===r[0].type&&(e.preventDefault(),t.click()),r=[];break;case"contextmenu":p(e);break;case"mousemove":l||function(){const e=d();e&&(e.forEach((function(e){const t=i(e).find(a);t&&t.removeClass("no-hover")})),l=!0)}()}}let u=!1;t.attach=function(){u||(u=!0,s.on("touchstart",k),s.on("touchmove",k),s.on("touchend",k),s.on("mousemove",k),s.on("contextmenu",k))},t.detach=function(){u&&(u=!1,s.off("touchstart",k),s.off("touchmove",k),s.off("touchend",k),s.off("mousemove",k),s.off("contextmenu",k))},t.update=function(){},t._reset=function(){l=!0}},379:function(e,t,n){"use strict";const i=n(9),o="[data-card-pressed-container]",a="[data-card-trigger-pressed-state]",s=i(document);let l;function r(e,t){"button"!==e.target.nodeName.toLowerCase()&&2!==e.button&&(t[0].closest(o).classList.add("pressed"),l=t[0])}function p(e,t){t[0].closest(o).classList.remove("pressed"),l===t[0]&&(l=null)}function d(e,t){t[0].closest(o).classList.remove("pressed"),l===t[0]&&(l=null)}function k(){l&&(l.closest(o).classList.remove("pressed"),l=null)}let u=!1;t.attach=function(){u||(u=!0,s.delegate("mousedown",a,r),s.delegate("mouseup",a,p),s.delegate("dragend",a,d),s.on("mouseup",k))},t.detach=function(){u&&(u=!1,s.undelegate("mousedown",a,r),s.undelegate("mouseup",a,p),s.undelegate("dragend",a,d),s.off("mouseup",k))},t.update=function(){}},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i,o=n(12);!function(e){e.PENDING="PENDING",e.RESOLVED="RESOLVED",e.REJECTED="REJECTED"}(i||(i={}));var a=function(){function e(e){var t=this;this._state=i.PENDING,this._handlers=[],this._resolve=function(e){t._setResult(i.RESOLVED,e)},this._reject=function(e){t._setResult(i.REJECTED,e)},this._setResult=function(e,n){t._state===i.PENDING&&(Object(o.l)(n)?n.then(t._resolve,t._reject):(t._state=e,t._value=n,t._executeHandlers()))},this._attachHandler=function(e){t._handlers=t._handlers.concat(e),t._executeHandlers()},this._executeHandlers=function(){t._state!==i.PENDING&&(t._state===i.REJECTED?t._handlers.forEach((function(e){e.onrejected&&e.onrejected(t._value)})):t._handlers.forEach((function(e){e.onfulfilled&&e.onfulfilled(t._value)})),t._handlers=[])};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}return e.prototype.toString=function(){return"[object SyncPromise]"},e.resolve=function(t){return new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.all=function(t){return new e((function(n,i){if(Array.isArray(t))if(0!==t.length){var o=t.length,a=[];t.forEach((function(t,s){e.resolve(t).then((function(e){a[s]=e,0===(o-=1)&&n(a)})).then(null,i)}))}else n([]);else i(new TypeError("Promise.all requires an array as input."))}))},e.prototype.then=function(t,n){var i=this;return new e((function(e,o){i._attachHandler({onfulfilled:function(n){if(t)try{return void e(t(n))}catch(e){return void o(e)}else e(n)},onrejected:function(t){if(n)try{return void e(n(t))}catch(e){return void o(e)}else o(t)}})}))},e.prototype.catch=function(e){return this.then((function(e){return e}),e)},e.prototype.finally=function(t){var n=this;return new e((function(e,i){var o,a;return n.then((function(e){a=!1,o=e,t&&t()}),(function(e){a=!0,o=e,t&&t()})).then((function(){a?i(o):e(o)}))}))},e}()},380:function(e,t,n){"use strict";const i=1e3;let o=[];let a=!1;t.attach=function(){a||(a=!0)},t.detach=function(){a&&(a=!1,o=[])},t.update=function(){if(!a)return;o=o.filter((function(e){return e.closest("body")})),document.querySelectorAll(".card").forEach(e=>{-1!==o.indexOf(e)||(o.push(e),function(e){let t;const n=e.querySelector("[data-image-url]");if(n&&(t=n.getAttribute("data-image-url")),t){const n=function(t){return()=>{e.classList.add("image-loaded"),clearTimeout(t)}},o=function(){e.classList.add("image-error")},a=setTimeout((function(){e.classList.add("image-delayed")}),i),s=new Image;s.addEventListener("load",n(a)),s.addEventListener("error",o),s.src=t}}(e))})},t._reset=function(){o=[]}},381:function(e,t,n){"use strict";const i=n(13),o="[data-card-remove-button]";function a(e){const t=e.target;if(!t.matches(o))return;const n=t.closest("[data-uri]");if(!n)return;const a=n.getAttribute("data-uri");i.emit("card-remove",{uri:a,element:t}),e.preventDefault(),e.stopPropagation()}let s=!1;t.attach=function(){s||(s=!0,document.addEventListener("click",a,!0))},t.detach=function(){s&&(s=!1,document.removeEventListener("click",a,!0))},t.update=function(){}},382:function(e,t,n){"use strict";var i=n(55);const o=n(2),a=n(7),s=n(119).default,l=n(108),r=n(411),p=n(109),d=n(414),k=n(37),u=n(71),c=n(415),m=n(417),f=n(306).isStationUri,y=n(5).logError,g="track",z="rows",b="context-player-resolver-playlist",h="context-player-resolver-collection",_="context-player-context",v="context-object",w="context-station-context",S="context-player-artist",x="context-player-album",P="context-episode",T="context-show",j=new s,A={};function E(e){F(e)}function L(e){F(e)}function C(e,t){if(e)return void y(e);const n=o("spotify:player");n.get("pending")||n.update(t)}function O(e){const t=e.get("index")&&e.get("index").get("track");null!==t&&d.setPlayingIndex(t),d.clean(e)}function M(e,t){const n=t.context;if(!n)return;"number"!=typeof t.index&&delete t.index,j.cancel();const i=j.token();e.update(l.addContext({isPlaying:!0,isPaused:!1,index:void 0===t.index?null:{page:0,track:t.index},track:void 0===t.trackUri?null:{uri:t.trackUri},contextUpdatedCrossFrame:!1},n)),p.getPlayOptions(t,(function(t,n){t||!n.context?F(e):/^spotify:internal:/.test(n.context)?q(e,i,n):o("spotify:list-variant").get("implemented")?o(n.context).query("listVariant(currentUri, sortUri)",(function(t,o){t?F(e):i.isCanceled()||(n.context=o.listVariant.currentUri,q(e,i,n))})):q(e,i,n)}))}function R(e){!1!==e.get("isPlaying")&&!0!==e.get("isPaused")&&(e.update({isPaused:!0}),r.pause((function(t){t&&e.update({isPaused:!1})})))}function I(e){!0===e.get("isPlaying")&&!1===e.get("isPaused")||(e.update({isPaused:!1}),r.resume((function(t){t&&e.update({isPaused:!0})})))}function N(){r.skipPrev()}function D(){r.skipNext()}function B(e,t){const n=t.context;if(!n)return;j.cancel();const i=j.token();e.update(l.addContext({},n));o(n).query("show(name, uri), rows(track(uri, name, mediaTypeEnum))",(t,a)=>{if(!i.isCanceled())if(t)F(e);else{const t={uri:a.show.uri,pages:[{tracks:a.rows.map(({track:e})=>({uri:e.uri,uid:e.uri,metadata:{title:e.name,album_title:a.show.name,"media.type":1===e.mediaTypeEnum?"audio":"video","media.manifest_id":o(e.uri).get("manifestId")||""}}))}],metadata:{"zelda.context_uri":n}};r.updateContext(t,t=>{t&&F(e)})}},3e3)}function q(e,t,n){const s=n.context,l=function(e){const t=a.from(e).type,n=a.from(e).type===a.Type.COLLECTION,i=t===a.Type.TRACK,s=t===a.Type.LOCAL,l=t===a.Type.PLAYLIST||t===a.Type.PLAYLIST_V2,r=t===a.Type.COLLECTION_ALBUM,p=t===a.Type.COLLECTION_ARTIST,d=t===a.Type.FOLDER,c=t===a.Type.ARTIST,m=t===a.Type.ALBUM,y=k.isValid(e),j=u.isValid(e),E=f(e),L=t===a.Type.EPISODE,C=t===a.Type.SHOW,O=t===a.Type.LIVE;if(i||s)return g;if(l)return b;if(n||r||p)return h;if(d)return _;if(E)return w;let M;if(y)return M=k.parse(e).originUri,u.isValid(M)&&(M=u.parse(M).originUri),a.isPlaylistV1OrV2(M)?b:a.isShow(M)?T:z;if(j)return M=u.parse(e).originUri,a.isPlaylistV1OrV2(M)?b:z;if(L)return P;if(C)return T;if(O)return v;if(A[e])return v;const R=o(e).get("rows");if(R&&R.length)return z;if(c)return S;if(m)return x;return null}(s);if(l===g)r.playTrack(s,n,(function(t){t&&F(e)}));else if(l===x)r.playFromResolver(s,n,(function(t){t&&F(e)}));else if(l===z){k.isValid(s)?function(e,t){const n=k.getOriginUri(e);o(n).get("rows",(function(n,i){n?t(n):i.get(0,i.length,(function(i){i?t(n):o(e).get("rows",(function(e,n){e?t(e):t(null,n)}))}))}))}(s,(function(i,o){i?F(e):t.isCanceled()||U(e,o,n)})):o(s).query("rows(track(uri))",(function(i){i||t.isCanceled()||U(e,o(s).get("rows"),n)}))}else if(l===b)r.playFromPlaylistResolver(s,n,(function(t){t&&F(e)}));else if(l===h)r.playFromCollectionResolver(s,n,(function(t){t&&F(e)}));else if(l===v){const t=A[s];r.playContext(t,n,(function(t){t&&F(e)}))}else if(l===_){const t={url:`context://${s}`,entity_uri:s};r.playContext(t,n,(function(t){t&&F(e)}))}else if(l===w){const t=o(s);t.query("rows",(function(o){o||(r.playContext(c(t),m(t,n),(function(t){t&&F(e)})),(0,i.messageProxy)({method:"POST",uri:"station-create",target:"top",body:{stationUri:s}}))}))}else if(l===S)r.playFromArtist(s,n,(function(t){t&&F(e)}));else if(l===P){const t=3e3;o(s).query("name, mediaTypeEnum, show(name)",(function(t,i){if(t)F(e);else{const t={uri:s,pages:[{tracks:[{uri:s,metadata:{title:i.name,album_title:i.show.name,"media.type":1===i.mediaTypeEnum?"audio":"video","media.manifest_id":o(s).get("manifestId")||""}}]}],restrictions:{disallow_toggling_repeat_context_reasons:["disallow-video"],disallow_toggling_repeat_track_reasons:["disallow-video"],disallow_toggling_shuffle_reasons:["disallow-video"]}};n.player_options_override||(n.player_options_override={}),n.player_options_override.repeating_context=!1,n.player_options_override.repeating_track=!1,r.playContext(t,n,(function(t){t&&F(e)}))}}),t)}else if(l===T){const t=3e3;o(s).query("show(name, uri, description), rows(track(uri, name, mediaTypeEnum))",(t,i)=>{if(t)F(e);else{const t={uri:i.show.uri,pages:[{tracks:i.rows.map(({track:e})=>({uri:e.uri,uid:e.uri,metadata:{title:e.name,album_title:i.show.name,"media.type":1===e.mediaTypeEnum?"audio":"video","media.manifest_id":o(e.uri).get("manifestId")||""}}))}],restrictions:{disallow_toggling_repeat_context_reasons:["disallow-show"],disallow_toggling_repeat_track_reasons:["disallow-show"],disallow_toggling_shuffle_reasons:["disallow-show"]},metadata:{"zelda.context_uri":s,context_description:i.show.name,context_long_description:i.show.description}};n.player_options_override||(n.player_options_override={}),n.player_options_override.repeating_context=!1,n.player_options_override.repeating_track=!1,n.player_options_override.shuffling_context=!1,r.playContext(t,n,t=>{t&&F(e)})}},t)}}function U(e,t,n){r.playRows(t,n,(function(i){i&&F(e),d.listen(t,n,(function(n){r.updateWithRows(t,n,(function(t){t&&F(e)}))}))}))}function F(e){p.getPlayerState((function(t,n){t?y(t):e.update(n)}))}const V=t.matches=/^spotify:player$/;let K,H,J;t.register=function(){K||(K=!0,o.subscribe(V,"play",M),o.subscribe(V,"pause",R),o.subscribe(V,"resume",I),o.subscribe(V,"skip-previous",N),o.subscribe(V,"skip-next",D),o.subscribe(V,"update-show-context",B),o.subscribe(V,"update",O),o.subscribe(V,"wait",E),o.subscribe(V,"sync-position",L),H=p.subscribeForPlayerState(C),J=l.onError((function(e,n){if(e)return void y(e);switch(n.getJSONBody().error){case"one_track_unplayable":case"one_track_unplayable_auto_stopped":case"all_tracks_unplayable_auto_stopped":t._syncPlayerModelState()}})))},t._syncPlayerModelState=function(){F(o("spotify:player"))},t.unregister=function(){K&&(K=!1,o.unsubscribe(V,"play",M),o.unsubscribe(V,"pause",R),o.unsubscribe(V,"resume",I),o.unsubscribe(V,"skip-previous",N),o.unsubscribe(V,"skip-next",D),o.unsubscribe(V,"update-show-context",B),o.unsubscribe(V,"update",O),o.unsubscribe(V,"wait",E),o.unsubscribe(V,"sync-position",L),H.unsubscribe(),J&&J(),H=null)},t.setContextData=function(e,t){A[e]=t}},383:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.addTracksToPlaylist=function(t,n,o){!function(t,n,o){!function(e,t,n){i.default.resolver.post({url:`sp://core-playlist/v1/playlist/${encodeURIComponent(e)}/contains`,body:{items:t}},(function(e,i){if(e)return void n([]);const o=i.getJSONBody().found,a=[],s=[];t.forEach((e,n)=>{o[n]?a.push(t[n]):s.push(t[n])}),n(a,s)}))}(t,n,(function(a,s){a.length?i.default.resolver.post({url:"sp://messages/v1/avoidduplicates",body:{action:"confirm",source:e.__spotify.app_uri,playlistUri:t,numItems:n.length,numDuplicates:a.length}},(function(e){if(e)return void o(n);const t=i.default.resolver.subscribe({url:"sp://messages/v1/avoidduplicates"},(function(e,i){if(t.cancel(),e)o(n);else switch(i.getJSONBody().action){case p.ADD_ALL:o(n);break;case p.ADD_UNIQUE:o(s);break;case p.CANCEL:o([]);break;default:throw new Error("Invalid DUPLICATE_ACTION.")}}))})):o(n)}))}(t,n,(function(e){e.length?i.default.resolver.post({url:`sp://core-playlist/v1/playlist/${encodeURIComponent(t)}`,body:{operation:"add",uris:e,after:"end"}},(function(e,t){e&&t&&t.getJSONBody()&&/exceed the maximum playlist size/i.test(t.getJSONBody().error)&&i.default.resolver.post({url:"sp://messages/v1/container/user-message",body:{id:"playlist-limit-exceeded"}}),e?o(e):o()})):o()}))},t.setPlaylistPublished=function(e,t,n){s.default.cosmosJSON({method:"POST",uri:"sp://core-playlist/v1/rootlist",body:{operation:"set",attributes:{published:t},rows:[e.toString()]}},n)},t.createNewPlaylist=function(e,t){s.default.cosmosJSON({method:"POST",uri:"sp://core-playlist/v1/rootlist",body:{operation:"create",playlist:!0,before:"start",name:e}},(e,n)=>t(e,n&&n.uri))},t.createNewPlaylistPromised=function(e,t={before:"start"}){return new Promise((n,i)=>{s.default.cosmosJSON({method:"POST",uri:"sp://core-playlist/v1/rootlist",body:{operation:"create",playlist:!0,...t,name:e}},(e,t)=>{e?i(e):n(t.uri)})})},t.createNewPlaylistBefore=function(e,t,n){s.default.cosmosJSON({method:"POST",uri:"sp://core-playlist/v1/rootlist",body:{operation:"create",playlist:!0,before:t,name:e}},(e,t)=>n(e,t&&t.uri))},t.createNewPlaylistAfter=function(e,t,n){s.default.cosmosJSON({method:"POST",uri:"sp://core-playlist/v1/rootlist",body:{operation:"create",playlist:!0,after:t,name:e}},(e,t)=>n(e,t&&t.uri))},t.setPlaylistName=d,t.setPlaylistNamePromised=function(e,t){return new Promise((n,i)=>{d(e,t,(e,t)=>{e?i(e):n(t)})})},t.setPlaylistCollaborative=function(e,n,i){s.default.cosmosJSON({method:"POST",uri:`sp://core-playlist/v1/playlist/${encodeURIComponent(e)}`,body:{operation:"set",attributes:{collaborative:n}}},(o,a)=>{o?i(o,a):n?(0,l.getCollaborativeStatus)(e,(n,o)=>{n||null===o.published?i(n||new Error("`published` property unexpectedly missing"),a):o.published?t.setPlaylistPublished(e,!1,i):i(null,a)}):i(null,a)})},t.followPlaylist=function(e,t){s.default.cosmosJSON({method:"POST",uri:"sp://core-playlist/v1/rootlist",body:{operation:"add",before:"start",uris:[e.toString()]}},(n,i)=>{n||k(e.toString(),!0),t(n,i)})},t.removePlaylist=function(e,t){s.default.cosmosJSON({method:"POST",uri:"sp://core-playlist/v1/rootlist",body:{operation:"remove",rows:[e.toString()]}},(n,i)=>{n||k(e.toString(),!1),t(n,i)})},t.removePlaylistFolderRecursively=function(e,t){s.default.cosmosJSON({method:"POST",uri:"sp://core-playlist/v1/rootlist",body:{operation:"remove",contents:!0,rows:[e.toString()]}},t)},t.logAddToPlaylist=function(e){let t;t=e.isNew?"create-new-playlist":e.isInFolder?"add-to-playlist-in-folder":"add-to-playlist";o.default.log({intent:t,item_uri:e.uris[0].toURI(),number_items:e.uris.length.toString(),section:"all-playlists",source:e.appUri,source_action:"add-to-playlist",playlist_index:e.playlistIndex,playlist_uri:e.playlistUri,total_number_playlists:e.numberOfVisibleItems,time:Math.round(Date.now()/1e3)})},t.refreshedPlaylistName=function(e){if(!e)return"Similar Playlist";const t=e.match(new RegExp("(.*)\\((\\d+)\\)$"));if(t)return`${t[1].trim()} (${function(e){return parseInt(e,10)+1}(t[2])})`;return`${e} (2)`},t.offlineSyncPlaylist=function(e,t,n){s.default.cosmos({method:t?"POST":"DELETE",uri:`sp://offline/v1/resources?uri=${e}`},n)},t.DUPLICATE_ACTIONS=void 0;var i=r(n(11)),o=r(n(384)),a=r(n(2)),s=r(n(22)),l=n(138);function r(e){return e&&e.__esModule?e:{default:e}}const p={ADD_ALL:"add_all",ADD_UNIQUE:"add_unique",CANCEL:"cancel"};function d(e,t,n){s.default.cosmosJSON({method:"POST",uri:`sp://core-playlist/v1/playlist/${encodeURIComponent(e)}`,body:{operation:"set",attributes:{name:t}}},(i,o)=>{i||(0,a.default)(e).update({name:t}),n(i,o)})}function k(e,t){s.default.cosmosJSON({method:"POST",uri:"sp://messages/v1/followstate",body:{uri:e.toString(),isFollowing:t}})}t.DUPLICATE_ACTIONS=p}).call(this,n(1))},384:function(e,t,n){"use strict";const i=n(385),o=n(52);e.exports={schema:i,log:o.bind(null,i)}},385:function(e){e.exports=JSON.parse('{"namespace":"com.spotify.Message","type":"record","name":"AddToPlaylist","fields":[{"type":"string","name":"message_name"},{"type":"int","name":"message_version"},{"default":null,"doc":"Create playlist, save to collection, save to existing playlist etc.","type":["null","string"],"name":"intent"},{"default":null,"doc":"URI of item that was added and only the first if multiple.","type":["null","string"],"name":"item_uri"},{"default":null,"doc":"Number of items added.","type":["null","string"],"name":"number_items"},{"default":null,"doc":"What section the item where added from.","type":["null","string"],"name":"section"},{"default":null,"doc":"The view uri which led to add to playlist.","type":["null","string"],"name":"source"},{"default":null,"doc":"The action which led to add to playlist.","type":["null","string"],"name":"source_action"},{"default":null,"doc":"The position of playlist added to or null.","type":["null","int"],"name":"playlist_index"},{"default":null,"doc":"The uri of playlist added to or null.","type":["null","string"],"name":"playlist_uri"},{"default":null,"doc":"The total number of items displayed.","type":["null","int"],"name":"total_number_playlists"},{"default":null,"doc":"Unix timestamp","type":["null","long"],"name":"time"}],"doc":"User interacted with add to playlist.","schema_version":3}')},39:function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var i=n(265),o=n(266),a=n(267);function s(){return r.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return r.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=r.prototype:(null===e&&(e=new r(t)),e.length=t),e}function r(e,t,n){if(!(r.TYPED_ARRAY_SUPPORT||this instanceof r))return new r(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return k(this,e)}return p(this,e,t,n)}function p(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i);r.TYPED_ARRAY_SUPPORT?(e=t).__proto__=r.prototype:e=u(e,t);return e}(e,t,n,i):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!r.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|m(t,n),o=(e=l(e,i)).write(t,n);o!==i&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(r.isBuffer(t)){var n=0|c(t.length);return 0===(e=l(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?l(e,0):u(e,t);if("Buffer"===t.type&&a(t.data))return u(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function k(e,t){if(d(t),e=l(e,t<0?0:0|c(t)),!r.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function u(e,t){var n=t.length<0?0:0|c(t.length);e=l(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function c(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function m(e,t){if(r.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(e).length;default:if(i)return U(e).length;t=(""+t).toLowerCase(),i=!0}}function f(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return j(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function y(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function g(e,t,n,i,o){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=r.from(t,i)),r.isBuffer(t))return 0===t.length?-1:z(e,t,n,i,o);if("number"==typeof t)return t&=255,r.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):z(e,[t],n,i,o);throw new TypeError("val must be string, number or Buffer")}function z(e,t,n,i,o){var a,s=1,l=e.length,r=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,l/=2,r/=2,n/=2}function p(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var d=-1;for(a=n;a<l;a++)if(p(e,a)===p(t,-1===d?0:a-d)){if(-1===d&&(d=a),a-d+1===r)return d*s}else-1!==d&&(a-=a-d),d=-1}else for(n+r>l&&(n=l-r),a=n;a>=0;a--){for(var k=!0,u=0;u<r;u++)if(p(e,a+u)!==p(t,u)){k=!1;break}if(k)return a}return-1}function b(e,t,n,i){n=Number(n)||0;var o=e.length-n;i?(i=Number(i))>o&&(i=o):i=o;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var s=0;s<i;++s){var l=parseInt(t.substr(2*s,2),16);if(isNaN(l))return s;e[n+s]=l}return s}function h(e,t,n,i){return V(U(t,e.length-n),e,n,i)}function _(e,t,n,i){return V(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function v(e,t,n,i){return _(e,t,n,i)}function w(e,t,n,i){return V(F(t),e,n,i)}function S(e,t,n,i){return V(function(e,t){for(var n,i,o,a=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),i=n>>8,o=n%256,a.push(o),a.push(i);return a}(t,e.length-n),e,n,i)}function x(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function P(e,t,n){n=Math.min(e.length,n);for(var i=[],o=t;o<n;){var a,s,l,r,p=e[o],d=null,k=p>239?4:p>223?3:p>191?2:1;if(o+k<=n)switch(k){case 1:p<128&&(d=p);break;case 2:128==(192&(a=e[o+1]))&&(r=(31&p)<<6|63&a)>127&&(d=r);break;case 3:a=e[o+1],s=e[o+2],128==(192&a)&&128==(192&s)&&(r=(15&p)<<12|(63&a)<<6|63&s)>2047&&(r<55296||r>57343)&&(d=r);break;case 4:a=e[o+1],s=e[o+2],l=e[o+3],128==(192&a)&&128==(192&s)&&128==(192&l)&&(r=(15&p)<<18|(63&a)<<12|(63&s)<<6|63&l)>65535&&r<1114112&&(d=r)}null===d?(d=65533,k=1):d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|1023&d),i.push(d),o+=k}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=T));return n}(i)}t.Buffer=r,t.SlowBuffer=function(e){+e!=e&&(e=0);return r.alloc(+e)},t.INSPECT_MAX_BYTES=50,r.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),r.poolSize=8192,r._augment=function(e){return e.__proto__=r.prototype,e},r.from=function(e,t,n){return p(null,e,t,n)},r.TYPED_ARRAY_SUPPORT&&(r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0})),r.alloc=function(e,t,n){return function(e,t,n,i){return d(t),t<=0?l(e,t):void 0!==n?"string"==typeof i?l(e,t).fill(n,i):l(e,t).fill(n):l(e,t)}(null,e,t,n)},r.allocUnsafe=function(e){return k(null,e)},r.allocUnsafeSlow=function(e){return k(null,e)},r.isBuffer=function(e){return!(null==e||!e._isBuffer)},r.compare=function(e,t){if(!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0},r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return r.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=r.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var s=e[n];if(!r.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i},r.byteLength=m,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},r.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},r.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},r.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):f.apply(this,arguments)},r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===r.compare(this,e)},r.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},r.prototype.compare=function(e,t,n,i,o){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(i>>>=0),s=(n>>>=0)-(t>>>=0),l=Math.min(a,s),p=this.slice(i,o),d=e.slice(t,n),k=0;k<l;++k)if(p[k]!==d[k]){a=p[k],s=d[k];break}return a<s?-1:s<a?1:0},r.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},r.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},r.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},r.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return h(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return v(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function j(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(127&e[o]);return i}function A(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(e[o]);return i}function E(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var o="",a=t;a<n;++a)o+=q(e[a]);return o}function L(e,t,n){for(var i=e.slice(t,n),o="",a=0;a<i.length;a+=2)o+=String.fromCharCode(i[a]+256*i[a+1]);return o}function C(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,i,o,a){if(!r.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function M(e,t,n,i){t<0&&(t=65535+t+1);for(var o=0,a=Math.min(e.length-n,2);o<a;++o)e[n+o]=(t&255<<8*(i?o:1-o))>>>8*(i?o:1-o)}function R(e,t,n,i){t<0&&(t=4294967295+t+1);for(var o=0,a=Math.min(e.length-n,4);o<a;++o)e[n+o]=t>>>8*(i?o:3-o)&255}function I(e,t,n,i,o,a){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,i,a){return a||I(e,0,n,4),o.write(e,t,n,i,23,4),n+4}function D(e,t,n,i,a){return a||I(e,0,n,8),o.write(e,t,n,i,52,8),n+8}r.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),r.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=r.prototype;else{var o=t-e;n=new r(o,void 0);for(var a=0;a<o;++a)n[a]=this[a+e]}return n},r.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var i=this[e],o=1,a=0;++a<t&&(o*=256);)i+=this[e+a]*o;return i},r.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var i=this[e+--t],o=1;t>0&&(o*=256);)i+=this[e+--t]*o;return i},r.prototype.readUInt8=function(e,t){return t||C(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return t||C(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return t||C(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var i=this[e],o=1,a=0;++a<t&&(o*=256);)i+=this[e+a]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},r.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var i=t,o=1,a=this[e+--i];i>0&&(o*=256);)a+=this[e+--i]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*t)),a},r.prototype.readInt8=function(e,t){return t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){t||C(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(e,t){t||C(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(e,t){return t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return t||C(e,4,this.length),o.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return t||C(e,4,this.length),o.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return t||C(e,8,this.length),o.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return t||C(e,8,this.length),o.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},r.prototype.writeUIntBE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},r.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,255,0),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},r.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},r.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},r.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},r.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},r.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var o=Math.pow(2,8*n-1);O(this,e,t,n,o-1,-o)}var a=0,s=1,l=0;for(this[t]=255&e;++a<n&&(s*=256);)e<0&&0===l&&0!==this[t+a-1]&&(l=1),this[t+a]=(e/s>>0)-l&255;return t+n},r.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var o=Math.pow(2,8*n-1);O(this,e,t,n,o-1,-o)}var a=n-1,s=1,l=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===l&&0!==this[t+a+1]&&(l=1),this[t+a]=(e/s>>0)-l&255;return t+n},r.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,127,-128),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},r.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},r.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},r.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},r.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},r.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},r.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o,a=i-n;if(this===e&&n<t&&t<i)for(o=a-1;o>=0;--o)e[o+t]=this[o+n];else if(a<1e3||!r.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},r.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!r.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=r.isBuffer(e)?e:U(new r(e,i).toString()),l=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%l]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var n;t=t||1/0;for(var i=e.length,o=null,a=[],s=0;s<i;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&a.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function F(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,n,i){for(var o=0;o<i&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(1))},390:function(e,t,n){"use strict";const i=n(11),o=n(142),a=n(143),s="main";function l(e,t,n,i,o){if(!(this instanceof l))return new l(e,t,n,i);if(!(e&&t&&n&&i))throw new TypeError("Missing parameters for Player");this._getTime=o&&o.getTime||function(){return(new Date).getTime()},this._id=o&&o.playerId||s,this._referrerIdentifier=o&&o.referrerIdentifier,this._resolver=e,this._viewUri=t,this._featureId=n,this._featureVersion=i}l.Actions={PROBE_PLAY:"probe_play",PLAY:"play",SESSION:"session",STOP:"stop",UPDATE:"update",PAUSE:"pause",RESUME:"resume",SKIP_NEXT:"skip_next",SKIP_PREV:"skip_prev",SHUFFLE:"set_shuffling_context",REPEAT_CONTEXT:"set_repeating_context",REPEAT_TRACK:"set_repeating_track",SEEK_TO:"seek_to"},l.prototype._playOrPrepareOrProbe=function(e,t,n,i){if(!t)throw new TypeError("Invalid `context` object");n instanceof Function&&!i&&(i=n,n=null);const o={};return o.context=t,o.play_origin=this._makePlayOrigin(),o.options=n,this._sendRequestWithParams(e,o,i)},l.prototype.addToQueue=function(e,t){if(!e)throw new TypeError("Invalid `track` object");return this._sendRequestWithParams("add_to_queue",{track:e},t)},l.prototype.probePlay=function(e,t,n){return this._playOrPrepareOrProbe(l.Actions.PROBE_PLAY,e,t,n)},l.prototype.play=function(e,t,n){return this._playOrPrepareOrProbe(l.Actions.PLAY,e,t,n)},l.prototype.preparePlay=function(e,t){const n=o.call(this._playOrPrepareOrProbe.bind(this),l.Actions.SESSION,e,t);return new a.Play(this._resolver,n,this,this._getTime,e,t)},l.prototype.stop=function(e){return this._sendRequestWithAction(l.Actions.STOP,e)},l.prototype.update=function(e,t){if(!e)throw new TypeError("Invalid `context` object");const n={context:e};return this._sendRequestWithParams(l.Actions.UPDATE,n,t)},l.prototype.resume=function(e){return this._sendRequestWithAction(l.Actions.RESUME,e)},l.prototype.pause=function(e){return this._sendRequestWithAction(l.Actions.PAUSE,e)},l.prototype.skipToPrevTrack=function(e,t){1===arguments.length&&"function"==typeof e&&(t=e,e=null);const n={};return e&&(n.options=e),this._sendRequestWithParams(l.Actions.SKIP_PREV,n,t)},l.prototype.skipToNextTrack=function(e,t){1===arguments.length&&"function"==typeof e&&(t=e,e=null);const n={};return e&&(n.options=e),this._sendRequestWithParams(l.Actions.SKIP_NEXT,n,t)},l.prototype.skipToSpecificPrevTrack=function(e,t){return this._sendRequestWithParams(l.Actions.SKIP_PREV,{track:e},t)},l.prototype.skipToSpecificNextTrack=function(e,t){return this._sendRequestWithParams(l.Actions.SKIP_NEXT,{track:e},t)},l.prototype.skipToPrev=l.prototype.skipToPrevTrack,l.prototype.skipToNext=l.prototype.skipToNextTrack,l.prototype.setShufflingContext=function(e,t){return this._sendRequestWithParam(l.Actions.SHUFFLE,e,t)},l.prototype.setRepeatingContext=function(e,t){return this._sendRequestWithParam(l.Actions.REPEAT_CONTEXT,e,t)},l.prototype.setRepeatingTrack=function(e,t){return this._sendRequestWithParam(l.Actions.REPEAT_TRACK,e,t)},l.prototype.seekTo=function(e,t){return this._sendRequestWithParam(l.Actions.SEEK_TO,e,t)},l.prototype.save=function(e){const t=`${this.getPlayerEndpointUri()}/snapshot`,n=new i.Request(i.Action.GET,t);return this._resolver.resolve(n,e)},l.prototype.restore=function(e,t){const n=`${this.getPlayerEndpointUri()}/snapshot`,o=new i.Request(i.Action.PUT,n,null,e);return this._resolver.resolve(o,t)},l.prototype.getQueue=function(e){const t=`${this.getPlayerEndpointUri()}/queue`,n=new i.Request(i.Action.GET,t);return this._resolver.resolve(n,e)},l.prototype.setQueue=function(e,t){const n=`${this.getPlayerEndpointUri()}/queue`,o=new i.Request(i.Action.PUT,n,null,e);return this._resolver.resolve(o,t)},l.prototype.subscribeToQueue=function(e){const t=new i.Request(i.Action.SUB,`${this.getPlayerEndpointUri()}/queue`);return this._resolver.resolve(t,e)},l.prototype.getState=function(e,t){const n=new i.Request(i.Action.GET,this.getPlayerEndpointUriWithParams(t));return this._resolver.resolve(n,e)},l.prototype.subscribe=function(e,t){const n=new i.Request(i.Action.SUB,this.getPlayerEndpointUriWithParams(t));return this._resolver.resolve(n,e)},l.prototype.onError=function(e){const t=new i.Request(i.Action.SUB,`${this.getPlayerEndpointUri()}/error`);return this._resolver.resolve(t,e)},l.prototype._makePlayOrigin=function(){return{view_uri:this._viewUri,feature_identifier:this._featureId,feature_version:this._featureVersion,referrer_identifier:this._referrerIdentifier}},l.prototype.getPlayerEndpointUri=function(){return"sp://player/v2/"+this._id},l.prototype.getPlayerEndpointUriWithParams=function(e={}){const t=Object.keys(e).reduce((function(t,n){return t.push(`${n}=${encodeURIComponent(e[n])}`),t}),[]);return t.length>0?`${this.getPlayerEndpointUri()}?${t.join("&")}`:this.getPlayerEndpointUri()},l.prototype._sendRequestWithAction=function(e,t){return this._sendRequestWithParams(e,null,t)},l.prototype._sendRequestWithParam=function(e,t,n){const i={value:t};return this._sendRequestWithParams(e,i,n)},l.prototype._sendRequestWithParams=function(e,t,n){const o=`${this.getPlayerEndpointUri()}/${e}`,a=t||{};a.logging_params={command_initiated_time:this._getTime()};const s=new i.Request(i.Action.POST,o,null,a);return this._resolver.resolve(s,n)},t.Player=l},391:function(e,t,n){(function(t){var n;!function(i){e.exports=function(){return function e(t,i,o){function a(l,r){if(!i[l]){if(!t[l]){if(!r&&("function"==typeof n&&n))return n(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+l+"'")}var p=i[l]={exports:{}};t[l][0].call(p.exports,(function(e){var n=t[l][1][e];return a(n||e)}),p,p.exports,e,t,i,o)}return i[l].exports}for(var s="function"==typeof n&&n,l=0;l<o.length;l++)a(o[l]);return a}({1:[function(e,t,n){var i=t.exports=e("../when");i.callbacks=e("../callbacks"),i.cancelable=e("../cancelable"),i.delay=e("../delay"),i.fn=e("../function"),i.guard=e("../guard"),i.keys=e("../keys"),i.nodefn=i.node=e("../node"),i.parallel=e("../parallel"),i.pipeline=e("../pipeline"),i.poll=e("../poll"),i.sequence=e("../sequence"),i.timeout=e("../timeout")},{"../callbacks":2,"../cancelable":3,"../delay":4,"../function":5,"../guard":6,"../keys":7,"../node":26,"../parallel":27,"../pipeline":28,"../poll":29,"../sequence":30,"../timeout":31,"../when":32}],2:[function(e,t,n){
/** @license MIT License (c) copyright 2013-2014 original author or authors */
!function(e){e((function(e){var t=e("./when").Promise,n=e("./lib/liftAll"),i=Array.prototype.slice,o=e("./lib/apply")(t,(function(e,t,n,i){n.push(r(i.resolve,i),r(i.reject,i)),function(e,t,n,i){try{e.apply(t,n)}catch(e){i.reject(e)}}(e,t,n,i)}));return{lift:a,liftAll:function(e,t,i){return n(a,t,i,e)},apply:function(e,t){return o(e,this,t||[])},call:function(e){return o(e,this,i.call(arguments,1))},promisify:function(e,n){return function(){var i=this;return t.all(arguments).then((function(o){var a,r,p=t._defer();return"number"==typeof n.callback&&(a=s(o,n.callback)),"number"==typeof n.errback&&(r=s(o,n.errback)),r<a?(l(o,r,p._handler.reject,p._handler),l(o,a,p._handler.resolve,p._handler)):(l(o,a,p._handler.resolve,p._handler),l(o,r,p._handler.reject,p._handler)),e.apply(i,o),p}))}}};function a(e){var t=arguments.length>1?i.call(arguments,1):[];return function(){return o(e,this,t.concat(i.call(arguments)))}}function s(e,t){return t<0?e.length+t+2:t}function l(e,t,n,i){"number"==typeof t&&e.splice(t,0,r(n,i))}function r(e,t){return function(){arguments.length>1?e.call(t,i.call(arguments)):e.apply(t,arguments)}}}))}((function(n){t.exports=n(e)}))},{"./lib/apply":11,"./lib/liftAll":23,"./when":32}],3:[function(e,t,n){
/** @license MIT License (c) copyright B Cavalier & J Hann */
!function(e){e((function(){return function(e,t){return e.cancel=function(){try{e.reject(t(e))}catch(t){e.reject(t)}return e.promise},e}}))}((function(e){t.exports=e()}))},{}],4:[function(e,t,n){
/** @license MIT License (c) copyright 2011-2013 original author or authors */
!function(e){e((function(e){var t=e("./when");return function(e,n){return t(n).delay(e)}}))}((function(n){t.exports=n(e)}))},{"./when":32}],5:[function(e,t,n){
/** @license MIT License (c) copyright 2013-2014 original author or authors */
!function(e){e((function(e){var t=e("./when"),n=t.try,i=e("./lib/liftAll"),o=e("./lib/apply")(t.Promise),a=Array.prototype.slice;return{lift:s,liftAll:function(e,t,n){return i(s,t,n,e)},call:n,apply:function(e,t){return o(e,this,null==t?[]:a.call(t))},compose:function(e){var i=a.call(arguments,1);return function(){var o=this,s=a.call(arguments),l=n.apply(o,[e].concat(s));return t.reduce(i,(function(e,t){return t.call(o,e)}),l)}}};function s(e){var t=arguments.length>1?a.call(arguments,1):[];return function(){return o(e,this,t.concat(a.call(arguments)))}}}))}((function(n){t.exports=n(e)}))},{"./lib/apply":11,"./lib/liftAll":23,"./when":32}],6:[function(e,t,n){
/** @license MIT License (c) copyright 2011-2013 original author or authors */
!function(e){e((function(e){var t=e("./when"),n=Array.prototype.slice;return i.n=function(e){var n=0,i=[];return function(){return t.promise((function(t){n<e?t(o):i.push(t),n+=1}))};function o(){n=Math.max(n-1,0),i.length>0&&i.shift()(o)}},i;function i(e,i){return function(){var o=n.call(arguments);return t(e()).withThis(this).then((function(e){return t(i.apply(this,o)).finally(e)}))}}}))}((function(n){t.exports=n(e)}))},{"./when":32}],7:[function(e,t,n){
/** @license MIT License (c) copyright 2011-2013 original author or authors */
!function(e){"use strict";e((function(e){var t=e("./when"),n=t.Promise,i=t.resolve;return{all:t.lift(o),map:function(e,t){return i(e).then((function(e){return o(Object.keys(e).reduce((function(t,o){return t[o]=i(e[o]).fold(n,o),t}),{}))}));function n(e,n){return t(n,e)}},settle:function(e){var o=Object.keys(e),a={};if(0===o.length)return i(a);var s=n._defer(),l=n._handler(s),r=o.map((function(t){return e[t]}));return t.settle(r).then((function(e){!function(e,t,n,i){for(var o=0;o<e.length;o++)n[e[o]]=t[o];i.resolve(n)}(o,e,a,l)})),s}};function o(e){for(var t,i=n._defer(),o=n._handler(i),a={},s=Object.keys(e),l=s.length,r=0;r<s.length;++r)t=s[r],n._handler(e[t]).fold(p,t,a,o);return 0===l&&o.resolve(a),i;function p(e,t,n){this[e]=t,0==--l&&n.resolve(a)}}}))}((function(n){t.exports=n(e)}))},{"./when":32}],8:[function(e,t,n){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(e){return e("./makePromise")({scheduler:new(e("./Scheduler"))(e("./env").asap)})}))}((function(n){t.exports=n(e)}))},{"./Scheduler":9,"./env":21,"./makePromise":24}],9:[function(e,t,n){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(){function e(e){this._async=e,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var t=this;this.drain=function(){t._drain()}}return e.prototype.enqueue=function(e){this._queue[this._queueLen++]=e,this.run()},e.prototype.afterQueue=function(e){this._afterQueue[this._afterQueueLen++]=e,this.run()},e.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},e.prototype._drain=function(){for(var e=0;e<this._queueLen;++e)this._queue[e].run(),this._queue[e]=void 0;for(this._queueLen=0,this._running=!1,e=0;e<this._afterQueueLen;++e)this._afterQueue[e].run(),this._afterQueue[e]=void 0;this._afterQueueLen=0},e}))}((function(e){t.exports=e()}))},{}],10:[function(e,t,n){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(){function e(t){Error.call(this),this.message=t,this.name=e.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}))}((function(e){t.exports=e()}))},{}],11:[function(e,t,n){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(){return e.tryCatchResolve=t,e;function e(e,n){return arguments.length<2&&(n=t),function(t,o,a){var s=e._defer(),l=a.length,r=new Array(l);return i({f:t,thisArg:o,args:a,params:r,i:l-1,call:n},s._handler),s};function i(t,i){if(t.i<0)return n(t.f,t.thisArg,t.params,i);e._handler(t.args[t.i]).fold(o,t,void 0,i)}function o(e,t,n){e.params[e.i]=t,e.i-=1,i(e,n)}}function t(e,t,n,i){try{i.resolve(e.apply(t,n))}catch(e){i.reject(e)}}}))}((function(e){t.exports=e()}))},{}],12:[function(e,t,n){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(e){var t=e("../state"),n=e("../apply");return function(e){var i=n(e),o=e.resolve,a=e.all,s=Array.prototype.reduce,l=Array.prototype.reduceRight,r=Array.prototype.slice;return e.any=function(t){for(var n,i,o=e._defer(),a=o._handler,s=t.length>>>0,l=s,r=[],p=0;p<s;++p)if(void 0!==(i=t[p])||p in t){if((n=e._handler(i)).state()>0){a.become(n),e._visitRemaining(t,p,n);break}n.visit(a,d,k)}else--l;0===l&&a.reject(new RangeError("any(): array must not be empty"));return o;function d(e){r=null,this.resolve(e)}function k(e){this.resolved||(r.push(e),0==--l&&this.reject(r))}},e.some=function(t,n){var i,o,a,s=e._defer(),l=s._handler,r=[],p=[],d=t.length>>>0,k=0;for(a=0;a<d;++a)(void 0!==(o=t[a])||a in t)&&++k;n=Math.max(n,0),i=k-n+1,k=Math.min(n,k),n>k?l.reject(new RangeError("some(): array must contain at least "+n+" item(s), but had "+k)):0===k&&l.resolve(r);for(a=0;a<d;++a)(void 0!==(o=t[a])||a in t)&&e._handler(o).visit(l,u,c,l.notify);return s;function u(e){this.resolved||(r.push(e),0==--k&&(p=null,this.resolve(r)))}function c(e){this.resolved||(p.push(e),0==--i&&(r=null,this.reject(p)))}},e.settle=function(e){return a(e.map(p))},e.map=function(t,n){return e._traverse(n,t)},e.filter=function(t,n){var i=r.call(t);return e._traverse(n,i).then((function(t){return function(t,n){for(var i=n.length,o=new Array(i),a=0,s=0;a<i;++a)n[a]&&(o[s++]=e._handler(t[a]).value);return o.length=s,o}(i,t)}))},e.reduce=function(e,t){return arguments.length>2?s.call(e,d(t),arguments[2]):s.call(e,d(t))},e.reduceRight=function(e,t){return arguments.length>2?l.call(e,d(t),arguments[2]):l.call(e,d(t))},e.prototype.spread=function(e){return this.then(a).then((function(t){return e.apply(this,t)}))},e;function p(n){var i;return n instanceof e&&(i=n._handler.join()),i&&0===i.state()||!i?o(n).then(t.fulfilled,t.rejected):(i._unreport(),t.inspect(i))}function d(e){return function(t,n,o){return i(e,void 0,[t,n,o])}}}}))}((function(n){t.exports=n(e)}))},{"../apply":11,"../state":25}],13:[function(e,t,n){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(){return function(n){var i=n.resolve,o=n.reject,a=n.prototype.catch;function s(e,t){return function(n){return function(e,t){return function(e){return e===Error||null!=e&&e.prototype instanceof Error}(t)?e instanceof t:t(e)}(n,t)?e.call(this,n):o(n)}}function l(e,t,n,o){var a=e.call(t);return function(e){return("object"==typeof e||"function"==typeof e)&&null!==e}(a)?function(e,t,n){return i(e).then((function(){return t(n)}))}(a,n,o):n(o)}return n.prototype.done=function(e,t){this._handler.visit(this._handler.receiver,e,t)},n.prototype.catch=n.prototype.otherwise=function(t){return arguments.length<2?a.call(this,t):"function"!=typeof t?this.ensure(e):a.call(this,s(arguments[1],t))},n.prototype.finally=n.prototype.ensure=function(e){return"function"!=typeof e?this:this.then((function(n){return l(e,this,t,n)}),(function(t){return l(e,this,o,t)}))},n.prototype.else=n.prototype.orElse=function(e){return this.then(void 0,(function(){return e}))},n.prototype.yield=function(e){return this.then((function(){return e}))},n.prototype.tap=function(e){return this.then(e).yield(this)},n};function e(){throw new TypeError("catch predicate must be a function")}function t(e){return e}}))}((function(e){t.exports=e()}))},{}],14:[function(e,t,n){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(){return function(e){return e.prototype.fold=function(t,n){var i=this._beget();return this._handler.fold((function(n,i,o){e._handler(n).fold((function(e,n,i){i.resolve(t.call(this,n,e))}),i,this,o)}),n,i._handler.receiver,i._handler),i},e}}))}((function(e){t.exports=e()}))},{}],15:[function(e,t,n){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(e){var t=e("../state").inspect;return function(e){return e.prototype.inspect=function(){return t(e._handler(this))},e}}))}((function(n){t.exports=n(e)}))},{"../state":25}],16:[function(e,t,n){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(){return function(e){var t=e.resolve;return e.iterate=function(e,t,i,o){return n((function(t){return[t,e(t)]}),t,i,o)},e.unfold=n,e;function n(e,i,o,a){return t(a).then((function(n){return t(i(n)).then((function(i){return i?n:t(e(n)).spread(s)}))}));function s(a,s){return t(o(a)).then((function(){return n(e,i,o,s)}))}}}}))}((function(e){t.exports=e()}))},{}],17:[function(e,t,n){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(){return function(e){return e.prototype.progress=function(e){return this.then(void 0,void 0,e)},e}}))}((function(e){t.exports=e()}))},{}],18:[function(e,t,n){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(e){var t=e("../env"),n=e("../TimeoutError");function i(e,n,i,o){return t.setTimer((function(){e(i,o,n)}),n)}return function(e){function o(e,t,n){i(a,e,t,n)}function a(e,t){t.resolve(e)}function s(e,t,i){var o=void 0===e?new n("timed out after "+i+"ms"):e;t.reject(o)}return(e.prototype.delay=function(e){var t=this._beget();return this._handler.fold(o,e,void 0,t._handler),t},e.prototype.timeout=function(e,n){var o=this._beget(),a=o._handler,l=i(s,e,n,o._handler);return this._handler.visit(a,(function(e){t.clearTimer(l),this.resolve(e)}),(function(e){t.clearTimer(l),this.reject(e)}),a.notify),o},e)}}))}((function(n){t.exports=n(e)}))},{"../TimeoutError":10,"../env":21}],19:[function(e,t,n){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(e){var t=e("../env").setTimer,n=e("../format");return function(e){var a,s=o,l=o;"undefined"!=typeof console&&(a=console,s=void 0!==a.error?function(e){a.error(e)}:function(e){a.log(e)},l=void 0!==a.info?function(e){a.info(e)}:function(e){a.log(e)}),e.onPotentiallyUnhandledRejection=function(e){c(k,e)},e.onPotentiallyUnhandledRejectionHandled=function(e){c(u,e)},e.onFatalRejection=function(e){c(i,e.value)};var r=[],p=[],d=null;function k(e){e.handled||(p.push(e),s("Potentially unhandled rejection ["+e.id+"] "+n.formatError(e.value)))}function u(e){var t=p.indexOf(e);t>=0&&(p.splice(t,1),l("Handled previous rejection ["+e.id+"] "+n.formatObject(e.value)))}function c(e,n){r.push(e,n),null===d&&(d=t(m,0))}function m(){for(d=null;r.length>0;)r.shift()(r.shift())}return e};function i(e){throw e}function o(){}}))}((function(n){t.exports=n(e)}))},{"../env":21,"../format":22}],20:[function(e,t,n){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(){return function(e){return e.prototype.with=e.prototype.withThis=function(e){var t=this._beget(),n=t._handler;return n.receiver=e,this._handler.chain(n,e),t},e}}))}((function(e){t.exports=e()}))},{}],21:[function(e,n,i){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(e){var n,i="undefined"!=typeof setTimeout&&setTimeout,o=function(e,t){return setTimeout(e,t)},a=function(e){return clearTimeout(e)},s=function(e){return i(e,0)};if(function(){return void 0!==t&&"[object process]"===Object.prototype.toString.call(t)}())s=function(e){return t.nextTick(e)};else if(n=function(){return"undefined"!=typeof MutationObserver&&MutationObserver||"undefined"!=typeof WebKitMutationObserver&&WebKitMutationObserver}())s=function(e){var t,n=document.createTextNode("");new e((function(){var e=t;t=void 0,e()})).observe(n,{characterData:!0});var i=0;return function(e){t=e,n.data=i^=1}}(n);else if(!i){var l=e("vertx");o=function(e,t){return l.setTimer(t,e)},a=l.cancelTimer,s=l.runOnLoop||l.runOnContext}return{setTimer:o,clearTimer:a,asap:s}}))}((function(t){n.exports=t(e)}))},{}],22:[function(e,t,n){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(){return{formatError:function(t){var n="object"==typeof t&&null!==t&&(t.stack||t.message)?t.stack||t.message:e(t);return t instanceof Error?n:n+" (WARNING: non-Error used)"},formatObject:e,tryStringify:t};function e(e){var n=String(e);return"[object Object]"===n&&"undefined"!=typeof JSON&&(n=t(e,n)),n}function t(e,t){try{return JSON.stringify(e)}catch(e){return t}}}))}((function(e){t.exports=e()}))},{}],23:[function(e,t,n){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(){return function(t,n,i,o){return void 0===n&&(n=e),Object.keys(o).reduce((function(e,i){var a=o[i];return"function"==typeof a?n(e,t(a),i):e}),void 0===i?function(e){return"function"==typeof e?e.bind():Object.create(e)}(o):i)};function e(e,t,n){return e[n]=t,e}}))}((function(e){t.exports=e()}))},{}],24:[function(e,n,i){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(){return function(e){var n=e.scheduler,i=function(){if(null!=t&&"function"==typeof t.emit)return function(e,n){return"unhandledRejection"===e?t.emit(e,n.value,n):t.emit(e,n)};if("undefined"!=typeof self&&function(){if("function"==typeof CustomEvent)try{return new CustomEvent("unhandledRejection")instanceof CustomEvent}catch(e){}return!1}())return function(e,t){return function(n,i){var o=new t(n,{detail:{reason:i.value,key:i},bubbles:!1,cancelable:!0});return!e.dispatchEvent(o)}}(self,CustomEvent);if("undefined"!=typeof self&&function(){if("undefined"!=typeof document&&"function"==typeof document.createEvent)try{return document.createEvent("CustomEvent").initCustomEvent("eventType",!1,!0,{}),!0}catch(e){}return!1}())return function(e,t){return function(n,i){var o=t.createEvent("CustomEvent");return o.initCustomEvent(n,!1,!0,{reason:i.value,key:i}),!e.dispatchEvent(o)}}(self,document);return q}(),o=Object.create||function(e){function t(){}return t.prototype=e,new t};function a(e,t){this._handler=e===f?t:function(e){var t=new z;try{e((function(e){t.resolve(e)}),n,(function(e){t.notify(e)}))}catch(e){n(e)}return t;function n(e){t.reject(e)}}(e)}function s(e){return O(e)?e:new a(f,new b(c(e)))}function l(e){return new a(f,new b(new w(e)))}function r(){return T}function p(e,t,n){for(var i,o="function"==typeof t?function(i,o,a){a.resolved||d(n,k,i,e(t,o,i),a)}:k,s=new z,l=n.length>>>0,r=new Array(l),p=0;p<n.length&&!s.resolved;++p)void 0!==(i=n[p])||p in n?d(n,o,p,i,s):--l;return 0===l&&s.become(new _(r)),new a(f,s);function k(e,t,n){r[e]=t,0==--l&&n.become(new _(r))}}function d(e,t,n,i,o){if(M(i)){var a=function(e){return O(e)?e._handler.join():m(e)}(i),s=a.state();0===s?a.fold(t,n,void 0,o):s>0?t(n,a.value,o):(o.become(a),k(e,n+1,a))}else t(n,i,o)}function k(e,t,n){for(var i=t;i<e.length;++i)u(c(e[i]),n)}function u(e,t){if(e!==t){var n=e.state();0===n?e.visit(e,void 0,e._unreport):n<0&&e._unreport()}}function c(e){return O(e)?e._handler.join():M(e)?m(e):new _(e)}function m(e){try{var t=e.then;return"function"==typeof t?new h(t,e):new _(e)}catch(e){return new w(e)}}function f(){}function y(){}a.resolve=s,a.reject=l,a.never=r,a._defer=function(){return new a(f,new z)},a._handler=c,a.prototype.then=function(e,t,n){var i=this._handler,o=i.join().state();if("function"!=typeof e&&o>0||"function"!=typeof t&&o<0)return new this.constructor(f,i);var a=this._beget(),s=a._handler;return i.chain(s,i.receiver,e,t,n),a},a.prototype.catch=function(e){return this.then(void 0,e)},a.prototype._beget=function(){return function(e,t){var n=new z(e.receiver,e.join().context);return new t(f,n)}(this._handler,this.constructor)},a.all=function(e){return p(B,null,e)},a.race=function(e){if("object"!=typeof e||null===e)return l(new TypeError("non-iterable passed to race()"));return 0===e.length?r():1===e.length?s(e[0]):function(e){var t,n,i,o=new z;for(t=0;t<e.length;++t)if(void 0!==(n=e[t])||t in e){if(0!==(i=c(n)).state()){o.become(i),k(e,t+1,i);break}i.visit(o,o.resolve,o.reject)}return new a(f,o)}(e)},a._traverse=function(e,t){return p(N,e,t)},a._visitRemaining=k,f.prototype.when=f.prototype.become=f.prototype.notify=f.prototype.fail=f.prototype._unreport=f.prototype._report=q,f.prototype._state=0,f.prototype.state=function(){return this._state},f.prototype.join=function(){for(var e=this;void 0!==e.handler;)e=e.handler;return e},f.prototype.chain=function(e,t,n,i,o){this.when({resolver:e,receiver:t,fulfilled:n,rejected:i,progress:o})},f.prototype.visit=function(e,t,n,i){this.chain(g,e,t,n,i)},f.prototype.fold=function(e,t,n,i){this.when(new C(e,t,n,i))},D(f,y),y.prototype.become=function(e){e.fail()};var g=new y;function z(e,t){a.createContext(this,t),this.consumers=void 0,this.receiver=e,this.handler=void 0,this.resolved=!1}function b(e){this.handler=e}function h(e,t){z.call(this),n.enqueue(new L(e,t,this))}function _(e){a.createContext(this),this.value=e}D(f,z),z.prototype._state=0,z.prototype.resolve=function(e){this.become(c(e))},z.prototype.reject=function(e){this.resolved||this.become(new w(e))},z.prototype.join=function(){if(!this.resolved)return this;for(var e=this;void 0!==e.handler;)if((e=e.handler)===this)return this.handler=j();return e},z.prototype.run=function(){var e=this.consumers,t=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<e.length;++n)t.when(e[n])},z.prototype.become=function(e){this.resolved||(this.resolved=!0,this.handler=e,void 0!==this.consumers&&n.enqueue(this),void 0!==this.context&&e._report(this.context))},z.prototype.when=function(e){this.resolved?n.enqueue(new A(e,this.handler)):void 0===this.consumers?this.consumers=[e]:this.consumers.push(e)},z.prototype.notify=function(e){this.resolved||n.enqueue(new E(e,this))},z.prototype.fail=function(e){var t=void 0===e?this.context:e;this.resolved&&this.handler.join().fail(t)},z.prototype._report=function(e){this.resolved&&this.handler.join()._report(e)},z.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},D(f,b),b.prototype.when=function(e){n.enqueue(new A(e,this))},b.prototype._report=function(e){this.join()._report(e)},b.prototype._unreport=function(){this.join()._unreport()},D(z,h),D(f,_),_.prototype._state=1,_.prototype.fold=function(e,t,n,i){!function(e,t,n,i,o){if("function"!=typeof e)return o.become(n);a.enterContext(n),function(e,t,n,i,o){try{e.call(i,t,n,o)}catch(e){o.become(new w(e))}}(e,t,n.value,i,o),a.exitContext()}(e,t,this,n,i)},_.prototype.when=function(e){R(e.fulfilled,this,e.receiver,e.resolver)};var v=0;function w(e){a.createContext(this),this.id=++v,this.value=e,this.handled=!1,this.reported=!1,this._report()}function S(e,t){this.rejection=e,this.context=t}function x(e){this.rejection=e}D(f,w),w.prototype._state=-1,w.prototype.fold=function(e,t,n,i){i.become(this)},w.prototype.when=function(e){"function"==typeof e.rejected&&this._unreport(),R(e.rejected,this,e.receiver,e.resolver)},w.prototype._report=function(e){n.afterQueue(new S(this,e))},w.prototype._unreport=function(){this.handled||(this.handled=!0,n.afterQueue(new x(this)))},w.prototype.fail=function(e){this.reported=!0,i("unhandledRejection",this),a.onFatalRejection(this,void 0===e?this.context:e)},S.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,i("unhandledRejection",this.rejection)||a.onPotentiallyUnhandledRejection(this.rejection,this.context))},x.prototype.run=function(){this.rejection.reported&&(i("rejectionHandled",this.rejection)||a.onPotentiallyUnhandledRejectionHandled(this.rejection))},a.createContext=a.enterContext=a.exitContext=a.onPotentiallyUnhandledRejection=a.onPotentiallyUnhandledRejectionHandled=a.onFatalRejection=q;var P=new f,T=new a(f,P);function j(){return new w(new TypeError("Promise cycle"))}function A(e,t){this.continuation=e,this.handler=t}function E(e,t){this.handler=t,this.value=e}function L(e,t,n){this._then=e,this.thenable=t,this.resolver=n}function C(e,t,n,i){this.f=e,this.z=t,this.c=n,this.to=i,this.resolver=g,this.receiver=this}function O(e){return e instanceof a}function M(e){return("object"==typeof e||"function"==typeof e)&&null!==e}function R(e,t,n,i){if("function"!=typeof e)return i.become(t);a.enterContext(t),function(e,t,n,i){try{i.become(c(e.call(n,t)))}catch(e){i.become(new w(e))}}(e,t.value,n,i),a.exitContext()}function I(e,t,n,i,o){if("function"!=typeof e)return o.notify(t);a.enterContext(n),function(e,t,n,i){try{i.notify(e.call(n,t))}catch(e){i.notify(e)}}(e,t,i,o),a.exitContext()}function N(e,t,n){try{return e(t,n)}catch(e){return l(e)}}function D(e,t){t.prototype=o(e.prototype),t.prototype.constructor=t}function B(e,t){return t}function q(){}return A.prototype.run=function(){this.handler.join().when(this.continuation)},E.prototype.run=function(){var e=this.handler.consumers;if(void 0!==e)for(var t,n=0;n<e.length;++n)I((t=e[n]).progress,this.value,this.handler,t.receiver,t.resolver)},L.prototype.run=function(){var e=this.resolver;!function(e,t,n,i,o){try{e.call(t,n,i,o)}catch(e){i(e)}}(this._then,this.thenable,(function(t){e.resolve(t)}),(function(t){e.reject(t)}),(function(t){e.notify(t)}))},C.prototype.fulfilled=function(e){this.f.call(this.c,this.z,e,this.to)},C.prototype.rejected=function(e){this.to.reject(e)},C.prototype.progress=function(e){this.to.notify(e)},a}}))}((function(e){n.exports=e()}))},{}],25:[function(e,t,n){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(){return{pending:e,fulfilled:n,rejected:t,inspect:function(i){var o=i.state();return 0===o?e():o>0?n(i.value):t(i.value)}};function e(){return{state:"pending"}}function t(e){return{state:"rejected",reason:e}}function n(e){return{state:"fulfilled",value:e}}}))}((function(e){t.exports=e()}))},{}],26:[function(e,t,n){
/** @license MIT License (c) copyright 2013 original author or authors */
!function(e){e((function(e){var t=e("./when"),n=e("./lib/liftAll"),i=e("./lib/env").setTimer,o=Array.prototype.slice,a=e("./lib/apply")(t.Promise,(function(e,t,n,i){var o=l(i);try{switch(n.length){case 2:e.call(t,n[0],n[1],o);break;case 1:e.call(t,n[0],o);break;case 0:e.call(t,o);break;default:n.push(o),e.apply(t,n)}}catch(e){i.reject(e)}}));return{lift:s,liftAll:function(e,t,i){return n(s,t,i,e)},apply:function(e,t){return a(e,this,t||[])},call:function(e){return a(e,this,o.call(arguments,1))},createCallback:l,bindCallback:r,liftCallback:function(e){return function(t){return r(t,e)}}};function s(e){var t=arguments.length>1?o.call(arguments,1):[];return function(){var n,i=t.length,o=arguments.length,s=new Array(o+i);for(n=0;n<i;++n)s[n]=t[n];for(n=0;n<o;++n)s[n+i]=arguments[n];return a(e,this,s)}}function l(e){return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(o.call(arguments,1)):e.resolve(n)}}function r(e,n){return e=t(e),n&&e.then((function(e){o(null,e)}),o),e;function o(e,t){i((function(){n(e,t)}),0)}}}))}((function(n){t.exports=n(e)}))},{"./lib/apply":11,"./lib/env":21,"./lib/liftAll":23,"./when":32}],27:[function(e,t,n){
/** @license MIT License (c) copyright 2011-2013 original author or authors */
!function(e){e((function(e){var t=e("./when"),n=t.Promise.all,i=Array.prototype.slice;return function(e){return n(i.call(arguments,1)).then((function(n){return t.map(e,(function(e){return e.apply(void 0,n)}))}))}}))}((function(n){t.exports=n(e)}))},{"./when":32}],28:[function(e,t,n){
/** @license MIT License (c) copyright 2011-2013 original author or authors */
!function(e){e((function(e){var t=e("./when"),n=t.Promise.all,i=Array.prototype.slice;return function(e){var o=function(e,t){return o=function(e,t){return t(e)},t.apply(null,e)};return n(i.call(arguments,1)).then((function(n){return t.reduce(e,(function(e,t){return o(e,t)}),n)}))}}))}((function(n){t.exports=n(e)}))},{"./when":32}],29:[function(e,t,n){
/** @license MIT License (c) copyright 2012-2013 original author or authors */
!function(e){"use strict";e((function(e){var t=e("./when"),n=t.try,i=e("./cancelable");return function(e,o,a,s){var l,r,p;function d(e){n(o).then(k,p),void 0!==e&&l.notify(e)}function k(){r||t(e(),(function(e){t(a(e),(function(t){return t?function(e){l.resolve(e)}(e):d(e)}),(function(){d(e)}))}),p)}return r=!1,l=i(t.defer(),(function(){r=!0})),p=l.reject,a=a||function(){return!1},"function"!=typeof o&&(o=function(e){return function(){return t().delay(e)}}(o)),s?d():k(),l.promise=Object.create(l.promise),l.promise.cancel=l.cancel,l.promise}}))}((function(n){t.exports=n(e)}))},{"./cancelable":3,"./when":32}],30:[function(e,t,n){
/** @license MIT License (c) copyright 2011-2013 original author or authors */
!function(e){e((function(e){var t=e("./when"),n=t.Promise.all,i=Array.prototype.slice;return function(e){var o=[];return n(i.call(arguments,1)).then((function(n){return t.reduce(e,(function(e,i){return t(i.apply(void 0,n),a)}),o)}));function a(e){return o.push(e),o}}}))}((function(n){t.exports=n(e)}))},{"./when":32}],31:[function(e,t,n){
/** @license MIT License (c) copyright 2011-2013 original author or authors */
!function(e){e((function(e){var t=e("./when");return function(e,n){return t(n).timeout(e)}}))}((function(n){t.exports=n(e)}))},{"./when":32}],32:[function(e,t,n){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e((function(e){var t=e("./lib/decorators/timed"),n=e("./lib/decorators/array"),i=e("./lib/decorators/flow"),o=e("./lib/decorators/fold"),a=e("./lib/decorators/inspect"),s=e("./lib/decorators/iterate"),l=e("./lib/decorators/progress"),r=e("./lib/decorators/with"),p=e("./lib/decorators/unhandledRejection"),d=e("./lib/TimeoutError"),k=[n,i,o,s,l,a,r,t,p].reduce((function(e,t){return t(e)}),e("./lib/Promise")),u=e("./lib/apply")(k);function c(e,t,n,i){var o=k.resolve(e);return arguments.length<2?o:o.then(t,n,i)}function m(e){return function(){for(var t=0,n=arguments.length,i=new Array(n);t<n;++t)i[t]=arguments[t];return u(e,this,i)}}function f(e){for(var t=0,n=arguments.length-1,i=new Array(n);t<n;++t)i[t]=arguments[t+1];return u(e,this,i)}function y(){var e=k._defer();function t(t){e._handler.resolve(t)}function n(t){e._handler.reject(t)}function i(t){e._handler.notify(t)}this.promise=e,this.resolve=t,this.reject=n,this.notify=i,this.resolver={resolve:t,reject:n,notify:i}}return c.promise=function(e){return new k(e)},c.resolve=k.resolve,c.reject=k.reject,c.lift=m,c.try=f,c.attempt=f,c.iterate=k.iterate,c.unfold=k.unfold,c.join=function(){return k.all(arguments)},c.all=function(e){return c(e,k.all)},c.settle=function(e){return c(e,k.settle)},c.any=m(k.any),c.some=m(k.some),c.race=m(k.race),c.map=function(e,t){return c(e,(function(e){return k.map(e,t)}))},c.filter=function(e,t){return c(e,(function(e){return k.filter(e,t)}))},c.reduce=m(k.reduce),c.reduceRight=m(k.reduceRight),c.isPromiseLike=function(e){return e&&"function"==typeof e.then},c.Promise=k,c.defer=function(){return new y},c.TimeoutError=d,c}))}((function(n){t.exports=n(e)}))},{"./lib/Promise":8,"./lib/TimeoutError":10,"./lib/apply":11,"./lib/decorators/array":12,"./lib/decorators/flow":13,"./lib/decorators/fold":14,"./lib/decorators/inspect":15,"./lib/decorators/iterate":16,"./lib/decorators/progress":17,"./lib/decorators/timed":18,"./lib/decorators/unhandledRejection":19,"./lib/decorators/with":20}]},{},[1])(1)}()}()}).call(this,n(26))},392:function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(i=function(){return function(t,n,i,o){return void 0===n&&(n=e),Object.keys(o).reduce((function(e,i){var a=o[i];return"function"==typeof a?n(e,t(a),i):e}),void 0===i?function(e){return"function"==typeof e?e.bind():Object.create(e)}(o):i)};function e(e,t,n){return e[n]=t,e}}.call(t,n,t,e))||(e.exports=i)}(n(72))},393:function(e,t,n){(function(i){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(a){"use strict";void 0===(o=function(e){var t,o="undefined"!=typeof setTimeout&&setTimeout,a=function(e,t){return setTimeout(e,t)},s=function(e){return clearTimeout(e)},l=function(e){return o(e,0)};if(function(){return void 0!==i&&"[object process]"===Object.prototype.toString.call(i)}())l=function(e){return i.nextTick(e)};else if(t=function(){return"undefined"!=typeof MutationObserver&&MutationObserver||"undefined"!=typeof WebKitMutationObserver&&WebKitMutationObserver}())l=function(e){var t,n=document.createTextNode("");new e((function(){var e=t;t=void 0,e()})).observe(n,{characterData:!0});var i=0;return function(e){t=e,n.data=i^=1}}(t);else if(!o){var r=n(394);a=function(e,t){return r.setTimer(t,e)},s=r.cancelTimer,l=r.runOnLoop||r.runOnContext}return{setTimer:a,clearTimer:s,asap:l}}.call(t,n,t,e))||(e.exports=o)}(n(72))}).call(this,n(26))},394:function(e,t){},395:function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(i=function(){return e.tryCatchResolve=t,e;function e(e,n){return arguments.length<2&&(n=t),function(t,o,a){var s=e._defer(),l=a.length,r=new Array(l);return i({f:t,thisArg:o,args:a,params:r,i:l-1,call:n},s._handler),s};function i(t,i){if(t.i<0)return n(t.f,t.thisArg,t.params,i);e._handler(t.args[t.i]).fold(o,t,void 0,i)}function o(e,t,n){e.params[e.i]=t,e.i-=1,i(e,n)}}function t(e,t,n,i){try{i.resolve(e.apply(t,n))}catch(e){i.reject(e)}}}.call(t,n,t,e))||(e.exports=i)}(n(72))},396:function(e,t,n){"use strict";const i=n(11);function o(e){if(!(this instanceof o))return new o(e);if(!e)throw new TypeError("Missing resolver for PlayHistory");this._resolver=e}o.prototype.get=function(e){const t=new i.Request(i.Action.GET,"sp://play-history/v1");return this._resolver.resolve(t,e)},o.prototype.subscribe=function(e){const t=new i.Request(i.Action.SUB,"sp://play-history/v1");return this._resolver.resolve(t,e)},t.PlayHistory=o},40:function(e,t,n){var i=n(29);function o(e,t){this[t]=e}e.exports=function(e,t){for(var n,a=0,s=arguments.length;++a<s;)null!=(n=arguments[a])&&i(n,o,e);return e}},400:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeSortQuery=u,t.makeFilterQuery=c,t.play=function(e,t,n){const r=o.from(e);let m=p[r.type];const f=r.getBase62Id();r.type!==s&&r.type!==l||(m=`${m}/${f}`);const y=a(k),g=y.get("currentSortOrder"),z=y.get("currentSortProperty"),b=y.get("currentFilterValue");let h=d[r.type];g&&z&&(h=u([z,g]));let _="";b&&(_=c(b));const v={url:`sp://core-collection/unstable/@/list/tracks/${m}/play?${h}&${_}`};t&&(v.body=t);i.post(v,n)},t.COLLECTION=t.COLLECTION_ARTIST=t.COLLECTION_ALBUM=void 0;const i=n(20),o=n(7),a=n(2),{COLLECTION_ALBUM:s,COLLECTION_ARTIST:l,COLLECTION:r}=o.Type;t.COLLECTION=r,t.COLLECTION_ARTIST=l,t.COLLECTION_ALBUM=s;const p={[s]:"album",[l]:"artist",[r]:"all"},d={[s]:"sort=discNumber,trackNumber",[l]:"sort=addTime DESC,discNumber,trackNumber",[r]:"sort=addTime DESC,album.name,album.artist.name,discNumber,trackNumber"},k="spotify:session-storage";function u(e,t=r){if(!e)return d[t];Array.isArray(e[0])&&(e=e[0]);const[n,i]=e;if(!n)return d[t];const o="descending"===i?"DESC":"ASC";return`sort=${{name:`name ${o}`,artists:`artist.name ${o},album.name,discNumber,trackNumber`,album:`album.name ${o},discNumber,trackNumber`,timeSinceAdded:`addTime ${"DESC"===o?"ASC":"DESC"},album.name,album.artist.name,discNumber,trackNumber`,duration:`length ${o}`,descending:"DESC",ascending:"ASC"}[n]}`}function c(e){return e?`filter=text contains ${e}`:""}},401:function(e,t,n){"use strict";const i=n(2),o=n(20),a=n(112),s=n(7),l=n(5).logError,r={isInCollection:"sp://core-collection/v1/contains",updateIsInCollection:"sp://core-collection/v1/items",broadcast:"sp://messages/v1/collectionstate",pubsub:"hm://collection/collection/@/json"},p=function(e,t){e?l(e):i(t.body.items.filter(({type:e=""})=>"TRACK"===e.toUpperCase()).map(({identifier:e,removed:t})=>({uri:s.trackURI(e).toURI(),added:!t})))};let d,k,u;const c=t.matches=/^spotify:track:[^:]+$/;let m=!1;t.register=function(){m||(m=!0,d=new a(r),i.subscribe(c,"publish",d.onPublish),i.subscribe(c,"wait",d.onWait),k=o.subscribe({url:r.broadcast},a.onBroadcast),u=o.subscribe({url:r.pubsub},p))},t.unregister=function(){m&&(m=!1,i.unsubscribe(c,"publish",d.onPublish),i.unsubscribe(c,"wait",d.onWait),d=null,k&&(k.cancel(),k=null),u&&(u.cancel(),u=null))},t._endpoints=r},41:function(e,t){e.exports=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},411:function(e,t,n){"use strict";var i=k(n(19)),o=k(n(412)),a=k(n(108)),s=d(n(413)),l=d(n(400)),r=k(n(109));function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function k(e){return e&&e.__esModule?e:{default:e}}const u=n(5).logError;function c(e,t,n){a.default.play(e,t,n)}function m(e,t,n){a.default.playFromResolver(e,t,n)}t.playTrack=function(e,t,n){t.context=e,t.track=e,t.index=0,c([{uri:e}],t,n)},t.playRows=function(e,t,n){const{index:i,range:o}=t;if(null===i&&o)r.default.getFirstPlayableRow(e,o,(i,o)=>{if(i)u(i),n&&n(i);else{const i=r.default.getTracksFromRows(e);t.index=o,c(i,t,n)}});else{c(r.default.getTracksFromRows(e),t,n)}},t.playFromResolver=m,t.playContext=function(e,t,n){a.default.playContext(e,t,n)},t.playFromArtist=function(e,t,n){m(e,t,n)},t.updateContext=function(e,t){a.default.updateContext(e,t)},t.updateWithRows=function(e,t,n){const i=r.default.getTracksFromRows(e);delete t.index,a.default.update(i,t,n)},t.pause=function(e){a.default.pause(e)},t.resume=function(e){a.default.resume(e)},t.skipPrev=function(e){o.default.skipPrev(e)},t.skipNext=function(e){o.default.skipNext(e)},t.playFromPlaylistResolver=function(e,t,n){const o={};t.uids?o.track_uid=t.uids[0]:t.uid&&(o.track_uid=t.uid),t.uris?o.track_uri=t.uris[0]:t.trackUri&&(o.track_uri=t.trackUri);const a={};Object.keys(o).length&&(a.skip_to=o);const l={prepare_play_options:a,play_origin:{view_uri:i.default.getOriginUri(t.context)||t.context,feature_identifier:t.source,referrer_identifier:t.referrerId,feature_version:t.referrerVersion},logging_params:{command_initiated_time:Date.now()}};s.play(e,l,n)},t.playFromCollectionResolver=function(e,t,n){const o={view_uri:i.default.getOriginUri(t.context)||t.context,feature_identifier:t.source,referrer_identifier:t.referrerId,feature_version:t.referrerVersion},a={};t.uris&&t.uris[0]?a.skip_to={track_uri:t.uris[0]}:null!==t.index&&(a.skip_to={track_index:t.index});const s={prepare_play_options:a,play_origin:o,logging_params:{command_initiated_time:Date.now()}};l.play(e,s,n)}},412:function(e,t,n){"use strict";const i=n(20),o="sp://player/v2/main",a={PLAY:"play",PAUSE:"pause",RESUME:"resume",UPDATE:"update",SKIP_PREV:"skip_prev",SKIP_NEXT:"skip_next"};t.pause=function(e){i.post({url:o,body:{action:a.PAUSE}},e)},t.resume=function(e){i.post({url:o,body:{action:a.RESUME}},e)},t.skipPrev=function(e){i.post({url:o,body:{action:a.SKIP_PREV}},e)},t.skipNext=function(e){i.post({url:o,body:{action:a.SKIP_NEXT}},e)},t.getState=function(e){i.get({url:o},(function(t,n){t?e(t):e(null,n.body)}))},t.subscribe=function(e){let t=i.subscribe({url:o},(function(t,n){t?e(t):e(null,n.body)}));return{unsubscribe:function(){t&&(t.cancel(),t=null)}}}},413:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.play=function(e,t,n){(function(e){return new Promise(t=>{const n=s.parse(e),i=n?n.originUri:e;a(i).get("formatListType",(e,n)=>{t(o(n))},a.ASAP)})})(e).then(o=>{i.playlistRequest(e,{method:"POST",includeEpisodes:o,type:"play",body:t},n)})};const i=n(45).default,o=n(45).default.isPlaylist2Shows,a=n(2),s=n(19)},414:function(e,t,n){"use strict";let i,o,a,s,l,r;function p(){i&&i.off("update",a),i=null,o="",a=null,s=""}function d(e){if(!l)return{update:-1,playing:-1};const t=e.keys.indexOf(l);let n=t;if(-1===t){for(let t=r.indexOf(l),i=r.length;t<i;t++)if((n=e.keys.indexOf(r[t]))>-1){n--;break}}return{update:n,playing:t}}t.setPlayingIndex=function(e,t){if(!i&&!t)return;if(e<0)return;const n=t||i;l=n.keys[e]||null,r=n.keys.slice()},t.listen=function(e,t,n){i&&p(),i=e,o=t.context,s=t.referrerId,a=function(){t.index=d(e).update,n(t)},e.on("update",a)},t.clean=function(e){if(!a)return;const t=e.get("variant");if((t&&t.uri)!==o)p();else{const t=e.get("playOrigin");(t&&t.get("referrerIdentifier"))===s||e.get("contextUpdatedCrossFrame")||p()}},t.getPlayingAndUpdateIndicesInList=d,t.isPlayingFromRowsContext=function(e){return e?o===e:!!i}},415:function(e,t,n){"use strict";const i=n(416),o={disallow_toggling_repeat_context_reasons:["disallow-radio"],disallow_toggling_repeat_track_reasons:["disallow-radio"],disallow_toggling_shuffle_reasons:["disallow-radio"]};function a(e){const t=e.get("rows");return t?t.values.map(i):[]}e.exports=function(e){return{entity_uri:e.get("uri"),pages:[{tracks:a(e),next_page_url:e.get("nextPageUrl")}],metadata:{context_description:e.get("name")},restrictions:o}}},416:function(e,t,n){"use strict";e.exports=function(e){return{uid:e.get("uid"),uri:e.get("track").get("uri"),album_uri:e.get("track").get("albumUri"),artist_uri:e.get("track").get("artistUri"),metadata:{image_url:e.get("track").get("image"),"radio.thumb":e.get("track").get("thumb"),is_promotional:e.get("track").get("is_promotional")}}}},417:function(e,t,n){"use strict";const i={shuffling_context:!1,repeating_context:!1,repeating_track:!1};e.exports=function(e,t){let n;const o={skip_to:{page_index:0,track_index:n=t&&(t.index||0===t.index)?t.index:function(e){const t=e.get("rows"),n=e.get("currentTrackUid");if(!t||!n)return 0;let i;return t.values.some((function(e,t){return e.get("uid")===n&&(i=t,!0)}))?i:0}(e)},player_options_override:i};return t&&t.uid&&(o.uid=t.uid),o}},418:function(e,t,n){"use strict";function i(e){const t=[];for(let n=0;;n++){const i=n>0?`:${n}`:"",o=e[`artist_uri${i}`],a=e[`artist_name${i}`];if(!o||!a)break;t.push({uri:o,name:a})}return t}e.exports=function(e,t,n){const o=t.metadata||{},a=t.album_uri||o.album_uri;let s=t.uid;if(!t.uid){s=e+t.uri.replace("spotify:track:","")+n}return{uid:s,uri:s,track:{uri:t.uri,name:o.title,image:o.image_url,albumUri:a,artists:i(t.metadata),album:{name:o.album_title,uri:a},thumb:o["radio.thumb"]||"",is_promotional:o.is_promotional}}}},42:function(e,t,n){"use strict";const i=n(60)({});e.exports=i},423:function(e,t,n){"use strict";const i=n(2),o=n(20),a=n(112),s=n(7),l=n(5).logError,r={isInCollection:"sp://core-collection/v1/contains",updateIsInCollection:"sp://core-collection/v1/items",broadcast:"sp://messages/v1/collectionstate",pubsub:"hm://collection/collection/@/json"},p=function(e,t){e?l(e):i(t.body.items.filter(({type:e=""})=>"ALBUM"===e.toUpperCase()).map(({identifier:e,removed:t})=>({uri:s.albumURI(e).toURI(),added:!t})))};let d,k,u;const c=t.matches=/^spotify:album:[^:]+$/;let m=!1;t.register=function(){m||(m=!0,d=new a(r),i.subscribe(c,"publish",d.onPublish),i.subscribe(c,"wait",d.onWait),k=o.subscribe({url:r.broadcast},a.onBroadcast),u=o.subscribe({url:r.pubsub},p))},t.unregister=function(){m&&(m=!1,i.unsubscribe(c,"publish",d.onPublish),i.unsubscribe(c,"wait",d.onWait),d=null,k&&(k.cancel(),k=null),u&&(u.cancel(),u=null))},t._endpoints=r},424:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n(45));const o=n(17),a=n(2),s=n(20),l=n(5).logError,r="sp://messages/v1/followstate";function p(e,t){if("added"in t){e.update({added:t.added}),null!==e.get("followersCount")&&e.update({followersCount:e.get("followersCount")+(t.added?1:-1)}),(t.added?i.default.followPlaylist:i.default.removePlaylist)(e.uri,n=>{n&&(e.update({added:!t.added}),null!==e.get("followersCount")&&e.update({followersCount:e.get("followersCount")+(t.added?-1:1)}))})}}function d(e,t){if(e)return void l(e);let n;"added"in t.body?n=t.body.added:"isFollowing"in t.body&&(n=t.body.isFollowing),void 0!==n&&a(t.body.uri).update({added:n})}const k=function(e,t){const n=o(t,"added"),i=o(t,"followersCount");if(n){const t=e.get("subscribed");void 0!==t?e.update({added:t}):function(e){s.get({url:`sp://core-playlist/v1/playlist/${encodeURIComponent(e.uri)}/metadata`,body:{policy:{followed:!0}}},(function(t,n){t?l(t):e.update({added:n.body.metadata.followed})}))}(e)}i&&function(e){s.get({url:`sp://core-playlist/v1/playlist/${encodeURIComponent(e.uri)}/metadata`,body:{policy:{followers:!0}}},(function(t,n){t?l(t):e.update({followersCount:n.body.metadata.followers})}))}(e)},u=t.matches=/^spotify:(user:[^:]+:)?playlist:[^:]+$/;let c,m;t.register=function(){m||(m=!0,a.subscribe(u,"publish",p),a.subscribe(u,"wait",k),c=s.subscribe({url:r},d))},t.unregister=function(){m&&(m=!1,a.unsubscribe(u,"publish",p),a.unsubscribe(u,"wait",k),c.cancel(),c=null)}},425:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=function(){if(r)return;r=!0,l=new o.default({isInCollection:"sp://core-collection/v1/contains",updateIsInCollection:"sp://core-collection/v1/items",broadcast:"sp://messages/v1/collectionstate",pubsub:"hm://collection/collection/@/json"}),i.default.subscribe(s,"publish",l.onPublish),i.default.subscribe(s,"wait",l.onWait)},t.unregister=function(){if(!r)return;r=!1,i.default.unsubscribe(s,"publish",l.onPublish),i.default.unsubscribe(s,"wait",l.onWait)};var i=a(n(2)),o=a(n(112));function a(e){return e&&e.__esModule?e:{default:e}}const s=/^spotify:show:[^:]+$/;let l,r=!1},426:function(e,t){function n(e){if(!(this instanceof n))return new n(e);var t=this;this.m=0,this.c=0,this.jobs=[],this.concurrency(1/0),this.max(e),Object.defineProperty(this,"length",{get:function(){return t.jobs.length}})}e.exports=n,n.prototype.concurrency=function(e){return e>0&&(this.c=e),this},n.prototype.max=function(e){return this.m="number"==typeof e&&e>0?e:1/0,this},n.prototype.push=function(e){if("function"!=typeof e)throw new TypeError("expecting a function");return this.length<this.m&&this.jobs.push(e),this},n.prototype.shift=function(){return this.jobs.shift()},n.prototype.run=function(e){e="function"==typeof e?e:Function();var t=this,n=this.c,i=0;if(0==this.length)return e(null);function o(){var n=null;if(0==t.length)return!1;if("function"==typeof(n=t.shift()))try{n((function(n){n?e(n):t.length?o():e()}))}catch(t){return e(t),!1}}for(;i++<n&&!1!==o(););return this}},427:function(e,t,n){"use strict";const i=n(260),o=t.matches=/^spotify:artist:/;let a;t.register=function(){a||(a=!0,i.register(o))},t.unregister=function(){a&&(a=!1,i.unregister(o))}},428:function(e,t,n){"use strict";const i=n(2),o=n(17),a=function(e,t){o(t,"added")&&e.update({added:!1})},s=t.matches=/^spotify:local:[^:]*:[^:]*:[^:]*:\d*$|^spotify:local:[^:]*:[^:]*$|^spotify:local:[^:]*$/;let l=!1;t.register=function(){l||(l=!0,i.subscribe(s,"wait",a))},t.unregister=function(){l&&(l=!1,i.unsubscribe(s,"wait",a))}},429:function(e,t,n){var i=n(3);e.exports=(i.default||i).template({1:function(e,t,n,i,o){var a,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing;return'        <h1 class="error-content-title">'+e.escapeExpression((n.loc||t&&t.loc||l).call(s,"desktop.glue.ErrorTitle",{name:"loc",hash:{},data:o,loc:{start:{line:5,column:40},end:{line:5,column:73}}}))+'</h1>\n        <div class="message">'+(null!=(a=(n.loc||t&&t.loc||l).call(s,"desktop.glue.ErrorMessage",{name:"loc",hash:{},data:o,loc:{start:{line:6,column:29},end:{line:6,column:66}}}))?a:"")+"</div>\n"},3:function(e,t,n,i,o){var a,s,l=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing;return'        <h1 class="error-content-title">'+e.escapeExpression("function"==typeof(s=null!=(s=n.errorTitle||(null!=t?t.errorTitle:t))?s:r)?s.call(l,{name:"errorTitle",hash:{},data:o,loc:{start:{line:8,column:40},end:{line:8,column:54}}}):s)+'</h1>\n        <div class="message">'+(null!=(a="function"==typeof(s=null!=(s=n.errorMessage||(null!=t?t.errorMessage:t))?s:r)?s.call(l,{name:"errorMessage",hash:{},data:o,loc:{start:{line:9,column:29},end:{line:9,column:47}}}):s)?a:"")+"</div>\n"},5:function(e,t,n,i,o){var a,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,r=e.escapeExpression;return'        <button\n          class="button button-white"\n          data-button-link="'+r("function"==typeof(a=null!=(a=n.errorEscapeUrl||(null!=t?t.errorEscapeUrl:t))?a:l)?a.call(s,{name:"errorEscapeUrl",hash:{},data:o,loc:{start:{line:14,column:28},end:{line:14,column:46}}}):a)+'"\n          \n        >\n          '+r("function"==typeof(a=null!=(a=n.errorEscapeMessage||(null!=t?t.errorEscapeMessage:t))?a:l)?a.call(s,{name:"errorEscapeMessage",hash:{},data:o,loc:{start:{line:17,column:10},end:{line:17,column:32}}}):a)+"\n        </a>\n"},7:function(e,t,n,i,o){var a,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing;return'        <h1 class="offline-content-title">'+e.escapeExpression((n.loc||t&&t.loc||l).call(s,"desktop.glue.OfflineTitle",{name:"loc",hash:{},data:o,loc:{start:{line:23,column:42},end:{line:23,column:77}}}))+'</h1>\n        <div class="message">'+(null!=(a=(n.loc||t&&t.loc||l).call(s,"desktop.glue.OfflineMessage",{name:"loc",hash:{},data:o,loc:{start:{line:24,column:29},end:{line:24,column:68}}}))?a:"")+"</div>\n"},9:function(e,t,n,i,o){var a,s,l=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing;return'        <h1 class="offline-content-title">'+e.escapeExpression("function"==typeof(s=null!=(s=n.offlineTitle||(null!=t?t.offlineTitle:t))?s:r)?s.call(l,{name:"offlineTitle",hash:{},data:o,loc:{start:{line:26,column:42},end:{line:26,column:58}}}):s)+'</h1>\n        <div class="message">'+(null!=(a="function"==typeof(s=null!=(s=n.offlineMessage||(null!=t?t.offlineMessage:t))?s:r)?s.call(l,{name:"offlineMessage",hash:{},data:o,loc:{start:{line:27,column:29},end:{line:27,column:49}}}):s)?a:"")+"</div>\n"},11:function(e,t,n,i,o){var a,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,r=e.escapeExpression;return'        <button\n          class="button button-white"\n          data-button-link="'+r("function"==typeof(a=null!=(a=n.offlineEscapeUrl||(null!=t?t.offlineEscapeUrl:t))?a:l)?a.call(s,{name:"offlineEscapeUrl",hash:{},data:o,loc:{start:{line:32,column:28},end:{line:32,column:48}}}):a)+'"\n          \n        >\n          '+r("function"==typeof(a=null!=(a=n.offlineEscapeMessage||(null!=t?t.offlineEscapeMessage:t))?a:l)?a.call(s,{name:"offlineEscapeMessage",hash:{},data:o,loc:{start:{line:35,column:10},end:{line:35,column:34}}}):a)+"\n        </button>\n"},13:function(e,t,n,i,o){var a;return'  <div class="error-version">'+e.escapeExpression("function"==typeof(a=null!=(a=n.errorVersion||(null!=t?t.errorVersion:t))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"errorVersion",hash:{},data:o,loc:{start:{line:41,column:29},end:{line:41,column:45}}}):a)+"</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,s=null!=t?t:e.nullContext||{};return'<div class="error-and-offline" >\n  <div class="container">\n    <div class="error-content">\n'+(null!=(a=n.if.call(s,null!=t?t.useDefaultError:t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:4,column:6},end:{line:10,column:13}}}))?a:"")+(null!=(a=n.if.call(s,null!=t?t.errorEscapeMessage:t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:11,column:6},end:{line:19,column:13}}}))?a:"")+'    </div>\n    <div class="offline-content">\n'+(null!=(a=n.if.call(s,null!=t?t.useDefaultOffline:t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.program(9,o,0),data:o,loc:{start:{line:22,column:6},end:{line:28,column:13}}}))?a:"")+(null!=(a=n.if.call(s,null!=t?t.offlineEscapeMessage:t,{name:"if",hash:{},fn:e.program(11,o,0),inverse:e.noop,data:o,loc:{start:{line:29,column:6},end:{line:37,column:13}}}))?a:"")+"    </div>\n  </div>\n"+(null!=(a=n.if.call(s,null!=t?t.errorVersion:t,{name:"if",hash:{},fn:e.program(13,o,0),inverse:e.noop,data:o,loc:{start:{line:40,column:2},end:{line:42,column:9}}}))?a:"")+"</div>\n"},useData:!0})},43:function(e,t,n){"use strict";(function(t){const i=n(23),o=n(30),a=n(31),s=n(33),l=n(78),r=n(104),p=t.document||{};let d=0;const k=p.__counter,u=`uid:${p.__counter=(k?parseInt(k,36)+1:0).toString(36)}`,c=function(e){return e===window?"window":e===document?"document":e===document.documentElement?"html":e[u]||(e[u]=(d++).toString(36))},m=new WeakMap,f=i({constructor:function e(t,n){if(!t)return this&&this.constructor===e?new y:null;let i,o;if(t.constructor!==y){if(i=new y,"string"==typeof t)return i.search?(i[i.length++]=n||document,i.search(t)):null;if(t.nodeType||t===window)i[i.length++]=t;else if(t.length){const a={};for(let s=0,l=t.length;s<l;s++){const l=e(t[s],n);if(l&&l.length)for(let e=0,t=l.length;e<t;e++){const t=l[e];a[o=c(t)]||(i[i.length++]=t,a[o]=!0)}}}}else i=t;if(!i.length)return null;if(1===i.length){const e=m.get(i[0]);if(e)return e;m.set(i[0],i)}return i}}),y=i({inherits:f,constructor:function(){this.length=0},unlink:function(){return this.map((function(e){return m.delete(e),e}))},forEach:function(e,t){return o(this,e,t),this},map:function(e,t){return a(this,e,t)},filter:function(e,t){return s(this,e,t)},every:function(e,t){return l(this,e,t)},some:function(e,t){return r(this,e,t)}});e.exports=f}).call(this,n(1))},430:function(e,t,n){"use strict";const i=n(423),o=n(427),a=n(424),s=n(401),l=n(431),r=n(428),p=n(425);t.register=function(){i.register(),o.register(),a.register(),s.register(),l.register(),r.register(),p.register()},t.unregister=function(){i.unregister(),o.unregister(),a.unregister(),s.unregister(),l.unregister(),r.unregister(),p.unregister()}},431:function(e,t,n){"use strict";const i=n(260),o=t.matches=/^spotify:user:[^:]+$/;let a;t.register=function(){a||(a=!0,i.register(o))},t.unregister=function(){a&&(a=!1,i.unregister(o))}},432:function(e,t,n){"use strict";var i=p(n(2)),o=n(148),a=n(22),s=p(n(45)),l=n(55),r=n(5);function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){e?(0,r.logError)(e):(0,i.default)(t.uri).update(t)}function k(e,t){const n={};t.includes("name")&&(n.name=!0),t.includes("description")&&(n.description=!0),(t.includes("image")||t.includes("annotatedImage"))&&(n.picture=!0),t.includes("added")&&(n.followed=!0),t.includes("formatListType")&&(n.formatListType=!0),t.includes("formatListAttributes")&&(n.formatListAttributes=!0),t.includes("annotatedImage")&&(n.pictureFromAnnotate=!0),t.includes("owner")&&(n.owner={link:!0,username:!0,name:!0},n.ownedBySelf=!0),t.includes("madeFor")&&(n.madeFor={link:!0,username:!0,name:!0}),t.includes("published")&&(n.published=!0),t.includes("collaborative")&&(n.collaborative=!0),t.includes("allows")&&(n.allows={insert:!0,remove:!0}),0!==Object.keys(n).length&&s.default.subscribeToMetadata(e.uri,n,(n,i={})=>{n?(0,r.logError)(n):(i&&"picture"in i&&(i.image=i.picture,delete i.picture),i&&"pictureFromAnnotate"in i&&(i.annotatedImage=i.pictureFromAnnotate&&i.image||null,delete i.pictureFromAnnotate),i&&"offline"in i&&(i.offlineStatus=i.offline,i.shouldBeOffline=(0,o.shouldBeOffline)(i.offline),delete i.offline),t.includes("formatListType")&&(i.formatListType=i.formatListType||"playlist"),"owner"in i&&"link"in i.owner&&(i.owner.uri=i.owner.link),"madeFor"in i&&"link"in i.madeFor&&(i.madeFor.uri=i.madeFor.link),"ownedBySelf"in i&&"owner"in i&&(i.owner.currentUser=i.ownedBySelf),i&&"allows"in i&&(i.allows={insertTracks:i.allows.insert,removeTracks:i.allows.remove}),e.update(i))})}function u(e,t){const n=s.default.formatListUtils.originalPlaylistUri(e.get("uri"));(0,i.default)(n).get("formatListAttributes",(function(e,o){if(e)return void(0,r.logError)(e);"1"===o.get("like-feedback-available")&&(0,l.messageProxy)({method:"POST",uri:"format-list-heart",body:{entityUri:n,trackUri:t}});const a=s.default.formatListUtils.makeFeedbackUri(n,t);(0,i.default)(a).update({thumb:"up"})}))}function c(e,t){const n=s.default.formatListUtils.originalPlaylistUri(e.get("uri"));(0,i.default)(n).get("formatListAttributes",(function(e,o){if(e)(0,r.logError)(e);else if("1"===o.get("like-feedback-available")){(0,l.messageProxy)({method:"POST",uri:"format-list-undo-feedback",body:{entityUri:n,trackUri:t}});const e=s.default.formatListUtils.makeFeedbackUri(n,t);(0,i.default)(e).update({thumb:null})}}))}const m=t.matches=/^spotify:(user:[^:]+:)?playlist:[^:]+$/;let f,y;t.register=function(){y||(y=!0,i.default.subscribe(m,"wait",k),i.default.subscribe(m,"heart",u),i.default.subscribe(m,"undo-heart",c),i.default.subscribe(m,"undo-ban",c),f=(0,a.cosmosJSON)({method:"SUB",uri:"sp://messages/v1/playliststate"},d))},t.unregister=function(){y&&(y=!1,i.default.unsubscribe(m,"wait",k),f(),f=null)}},437:function(e,t,n){"use strict";const i=n(514),o=n(52);e.exports={schema:i,log:o.bind(null,i)}},438:function(e,t,n){"use strict";(function(e){const i=n(29),o=n(93),a=n(303),s=n(17),l=n(5).logError,r="spotify:client-storage",p=n(2),d=n(20),k={broadcast:"sp://messages/v1/client-storage"};let u,c=[];function m(e){e.update({implemented:!0})}function f(t,n){c=o(c,n),e.top.postMessage({type:"client_storage",name:"broadcast_client_storage",data:n},"*")}function y(t,n){e.top.postMessage({type:"client_storage",name:"set_client_storage",data:n},"*"),t.update(n)}function g(e,t){if(e)return void l("Broadcast Error",e);const n={},o=p(r);i(t.body,(function(e,t){const i=s(c,t),l=void 0!==o.get(t);(i||l)&&(n[t]=e),i&&a(c,t)})),o.update(n)}const z=t.matches=new RegExp(`^${r}$`);let b;t.register=function(){b||(b=!0,p.subscribe(z,"init",m),p.subscribe(z,"wait",f),p.subscribe(z,"publish",y),u=d.subscribe({url:k.broadcast},g))},t.unregister=function(){b&&(b=!1,p.unsubscribe(z,"init",m),p.unsubscribe(z,"wait",f),p.unsubscribe(z,"publish",y),u&&(u.cancel(),u=null),c.length=0)},t._endpoints=k}).call(this,n(1))},439:function(e,t,n){"use strict";var i=d(n(17)),o=d(n(440)),a=d(n(441)),s=d(n(2)),l=d(n(37)),r=d(n(71)),p=d(n(7));function d(e){return e&&e.__esModule?e:{default:e}}const k=n(5).logError,u="spotify:session-storage",c="spotify:client-storage",m="list-filter-string-";function f(e,t){if(!(0,i.default)(t,"listVariant"))return;const n=function(e){let t=e;const n=l.default.parse(t);n&&(t=n.originUri);const i=r.default.parse(t);i&&(t=i.originUri);return t}(e.uri);let o=(0,s.default)(n).get("listVariant");o||(o=(0,s.default)({origin:{uri:n}})).on("wait",y.bind(null,o)),e.update({listVariant:o}),n!==e.uri&&(0,s.default)(n).update({listVariant:o})}function y(e,n){(0,i.default)(n,"currentUri")?function(e){function t(){const t="filterString, sortQuery, sortDirection, sortUri, showUnplayable, origin(uri)";e.query(t,(function(n,i){if(n)return void k("Error when getting",t,":",Error);let o=i.origin.uri;const a=[];i.filterString&&a.push(`text contains ${encodeURIComponent(i.filterString)}`),i.showUnplayable||a.push("playable eq true"),a.length&&(o=r.default.create(o,a.join(",")));const s=i.sortUri&&l.default.parse(i.sortUri);s&&(o=l.default.create(o,s.direction,s.query)),e.update({currentUri:o})}))}e.on("update",t),t()}(e):((0,i.default)(n,"filterString")&&function(e){const t=e.get("origin").uri,n=(0,s.default)(u),i=m+t;n.get("implemented")?(v(e,t,i),n.on("update",(function(n){n.hasOwnProperty(i)&&v(e,t,i)}))):e.update({filterString:""})}(e),((0,i.default)(n,"sortQuery")||(0,i.default)(n,"sortDirection")||(0,i.default)(n,"sortUri"))&&async function(e){const n=e.get("origin").uri,i=(0,s.default)(c),o=t.getSortVariantKey(n);if(i.get("implemented"))h(e,n,o),i.on("update",(function(t){t.hasOwnProperty(o)&&h(e,n,o)}));else{const t=_(n);e.update(t)}}(e),(0,i.default)(n,"showUnplayable")&&function(e){const t=e.get("origin").uri;if(!p.default.isPlaylistV1OrV2(t))return void e.update({showUnplayable:!0});(0,s.default)(t).get("formatListType",(function(t,n){t||"chart"!==n?function(e){if(b.push(e),g)return void e.update({showUnplayable:g});o.default.subscribe((function(e,t){let n=t;e&&(k(e),n=!1),g=n;for(let e=0;e<b.length;e++)b[e].update({showUnplayable:n})}))}(e):e.update({showUnplayable:!0})}))}(e))}let g,z,b=[];function h(e,t,n){const i=(0,s.default)(c);i.get(n,(function(o,s){const r=s&&l.default.parse(s);if(!o&&r){const o=a.default.legacyQueries[r.query];if(o&&o!==r.query){const e=l.default.create(t,r.direction,o),a={};return a[n]=e,void i.publish(a)}e.update({sortQuery:r.query,sortDirection:r.direction,sortUri:s})}else if(s===t)e.update({sortQuery:null,sortDirection:null,sortUri:null});else{const n=_(t);e.update(n)}}))}function _(e){let t=null,n=null,i=null;return"spotify:internal:local-files"===e&&(t="track(name)",n="asc",i=l.default.create(e,n,t)),{sortQuery:t,sortDirection:n,sortUri:i}}function v(e,t,n){(0,s.default)(u).get(n,(function(t,n){e.update({filterString:n||""})}),s.default.ASAP)}function w(e){z=e,(0,s.default)("spotify:list-variant").update({implemented:e})}t.getSortVariantKey=function(e){return"list-variant-"+e};const S=t.matches=/^spotify:/;t.register=function(){z||(s.default.subscribe(S,"wait",f),w(!0))},t.unregister=function(){z&&(b=[],g=null,s.default.unsubscribe(S,"wait",f),w(!1))}},44:function(e,t,n){"use strict";const i=n(27),o=n(30),a=n(23),s=n(32),l=Array.prototype.slice;let r=0;const p=a({constructor:function(e){this._stoppable=e},on:function(e,t){const n=this._listeners||(this._listeners={}),o=n[e]||(n[e]=[]);return-1===i(o,t)&&o.push(t),this},off:function(e,t){const n=this._listeners;if(n){const o=n[e];if(o){const a=i(o,t);a>-1&&o.splice(a,1),o.length||delete n[e];for(const e in n)if(n.hasOwnProperty(e))return this;delete this._listeners}}return this},emit:function(e){const t=l.call(arguments,1),n=()=>{const n=this._listeners;if(n){const i=n[e];i&&o(i.slice(0),e=>{const n=e.apply(this,t);if(this._stoppable)return n})}if(this._promiseWaiters&&this._promiseWaiters[e]){const n=this._promiseWaiters[e].slice();this._promiseWaiters[e]=[],n.forEach(e=>e(...t))}};if(t[t.length-1]===p.EMIT_SYNC)t.pop(),n();else{const e=r;s.immediate(()=>{e===r&&n()})}return this},reset:function(){r++,this._listeners={}},whenNextEvent:function(e){return new Promise(t=>{this._promiseWaiters=this._promiseWaiters||{},this._promiseWaiters[e]=[...this._promiseWaiters[e]||[],t]})}});p.EMIT_SYNC={},e.exports=p},440:function(e,t,n){"use strict";const i=n(192);t.subscribe=function(e){return new i("ui").subscribe("show_unplayable_tracks",(function(t,n){t?e(t):e(null,!!n)}))}},441:function(e,t,n){"use strict";t.legacyQueries={"track(album(name))":"track(album(name),disc,number)","track(artists(name))":"track(artists[0:1](name),album(name),disc,number)","track(addedBy)":"addedBy(name)","track(addedBy(name))":"addedBy(name)",timeSinceAdded:"timeSinceAdded,track(album(name),disc,number)"}},449:function(e,t,n){"use strict";(function(e){const i=n(29),o=n(93),a=n(303),s=n(17),l=n(5).logError,r="spotify:session-storage",p=n(2),d=n(20),k={broadcast:"sp://messages/v1/session-storage"};let u,c=[];function m(e){e.update({implemented:!0})}function f(t,n){c=o(c,n),e.top.postMessage({type:"session_storage",name:"broadcast_session_storage",data:n},"*")}function y(t,n){e.top.postMessage({type:"session_storage",name:"set_session_storage",data:n},"*"),t.update(n)}function g(e,t){if(e)return void l(e);const n={},o=p(r);i(t.body,(function(e,t){const i=s(c,t),l=void 0!==o.get(t);(i||l)&&(n[t]=e),i&&a(c,t)})),o.update(n)}const z=t.matches=new RegExp(`^${r}$`);let b;t.register=function(){b||(b=!0,p.subscribe(z,"init",m),p.subscribe(z,"wait",f),p.subscribe(z,"publish",y),u=d.subscribe({url:k.broadcast},g))},t.unregister=function(){b&&(b=!1,p.unsubscribe(z,"init",m),p.unsubscribe(z,"wait",f),p.unsubscribe(z,"publish",y),u&&(u.cancel(),u=null),c.length=0)},t._endpoints=k}).call(this,n(1))},45:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addAlbumToPlaylist=m,t.addStationToPlaylist=f,t.addStuffToPlaylist=y,t.getRefreshedPlaylistData=g,t.createRefreshedPlaylist=z,t.shouldPlaylistBeOffline=b,t.isPlaylist2Shows=h,t.resyncPlaylist=_,t.default=void 0;var i=c(n(7)),o=c(n(22)),a=c(n(2)),s=n(5),l=n(383),r=n(138),p=u(n(148)),d=u(n(130));function k(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return k=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=k();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function c(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n){const i=[t.toString(),0,-1];return o.default.request("album_tracks_snapshot",i,(t,i)=>{t?n(t):(0,l.addTracksToPlaylist)(e,i.array,n)})}function f(e,t,n){(0,a.default)(t.toString()).query("rows(track(uri))",(t,i)=>{if(t)return void n(t);const o=i.rows.map(e=>e.track.uri);(0,l.addTracksToPlaylist)(e,o,n)})}function y(e,t,n){if(t[0].type===i.default.Type.ALBUM)m(e,t[0],n),t.length>1&&(0,s.logWarn)("Passed more than a single album to addStuffToPlaylist(). Adding only one.");else if(t[0].type===i.default.Type.STATION||t[0].type===i.default.Type.DAILY_MIX)f(e,t[0],n);else{const i=t.map(e=>e.toString());(0,l.addTracksToPlaylist)(e,i,n)}}function g(e,t){!function(e,t){(0,r.fetchPlaylistMetadata)(e,{name:!0},(e,n)=>{n&&n.name?t(e,n.name):t(e)})}(e,async(n,i)=>{if(n)return void t(n);const a=await(0,r.fetchPlaylistV1UriFromPlaylist)(e.toString()),s=(0,l.refreshedPlaylistName)(i);o.default.cosmosJSON({method:"POST",uri:"hm://playlistfreshener/freshen",body:{playlistURI:a,type:"W2V_freshener"}},(e,n)=>{if(e)return void t(e);const i=n.recommendedTracks.map(e=>`spotify:track:${e.id}`);t(null,{name:s,tracks:i})})})}function z(e,t){g(e,(e,{name:n,tracks:i}={})=>{e?t(e):(0,l.createNewPlaylist)(n,(e,n)=>{e?t(e):(0,l.addTracksToPlaylist)(n,i,e=>{t(e,n)})})})}function b(e,t){(0,r.fetchPlaylistMetadata)(e,{offline:!0},(e,n)=>{if(n&&n.offline){const i=p.shouldBeOffline(n.offline);t(e,i)}else t(e,n)})}function h(e){return["format-shows","format-shows-shuffle"].includes(e)}function _(e,t){const n={method:"POST",uri:`sp://core-playlist/v1/playlist/${e}/resync`};return o.default.cosmos(n,(e,n)=>{if(t)if(e)t(e);else if(200!==n.status&&204!==n.status){const e=new Error(`Cosmos Request Error. Status: ${n.status}`);e.status=n.status,t(e)}else t(null,n)})}var v={OfflineStatus:p,addTracksToPlaylist:l.addTracksToPlaylist,getCollaborativeStatus:r.getCollaborativeStatus,createNewPlaylist:l.createNewPlaylist,createNewPlaylistPromised:l.createNewPlaylistPromised,createNewPlaylistBefore:l.createNewPlaylistBefore,createNewPlaylistAfter:l.createNewPlaylistAfter,setPlaylistCollaborative:l.setPlaylistCollaborative,setPlaylistPublished:l.setPlaylistPublished,logAddToPlaylist:l.logAddToPlaylist,setPlaylistName:l.setPlaylistName,setPlaylistNamePromised:l.setPlaylistNamePromised,removePlaylist:l.removePlaylist,removePlaylistFolderRecursively:l.removePlaylistFolderRecursively,followPlaylist:l.followPlaylist,offlineSyncPlaylist:l.offlineSyncPlaylist,fetchPlaylistMetadata:r.fetchPlaylistMetadata,subscribeToMetadata:r.subscribeToMetadata,fetchPlaylistV1UriFromPlaylist:r.fetchPlaylistV1UriFromPlaylist,getPlaylistV2UriFromPlaylist:r.getPlaylistV2UriFromPlaylist,fetchIsPlaylistOwnedByCurrentUser:r.fetchIsPlaylistOwnedByCurrentUser,playlistRequest:r.playlistRequest,getAvailablePlaylistName:r.getAvailablePlaylistName,formatListUtils:d,isPlaylist2Shows:h,addStuffToPlaylist:y,resyncPlaylist:_,createRefreshedPlaylist:z,shouldPlaylistBeOffline:b};t.default=v},
450:function(e,t,n){},454:function(e,t,n){"use strict";const i=n(2),o=n(7),a=n(57),s=n(17),l=n(40),r=n(79).request,p=n(5).logError;function d(e){return o.from(e).type===o.Type.LOCAL_ALBUM}function k(e){return o.from(e).type===o.Type.LOCAL_ARTIST}let u=1e3;function c(e){const t={type:"list",uri:e.uri};r("album_tracks_snapshot",[t,0,0,!1],(function(n,i){n?p(n):r("album_tracks_snapshot",[t,0,i.length,!1],(function(t,n){if(t)p(t);else{const t=[],i=o.from(e.uri).id,a=n.metadata&&n.metadata.map((function(e,a){const s=l({uri:n.array[a]},e),r=s.disc?s.disc-1:0;s.unavailable=!s.playable,function(e){e.album&&e.album.uri&&(e.album.local=d(e.album.uri));if(e.artists)for(let t=0,n=e.artists.length;t<n;t++){const n=e.artists[t];n.uri&&(n.local=k(n.uri))}}(s),t[r]||(t[r]={rows:[],uri:i?o.albumURI(i,r+1).toURI():""});const p={track:s,uri:function(e){return e.replace("spotify:",`spotify:row:${(++u).toString(36)}:`)}(s.uri)};return t[r].rows.push(p),p}));e.update({rows:a,discs:t})}}))}))}function m(e,t){const n=s(t,"local"),i=s(t,"rows"),l=s(t,"discs");!!a(t,["artists","image","images","name","playable","type","availability","date","label","copyrights"]).length&&function(e){if(d(e.uri)){const t=o.from(e.uri);if(t){const n={local:!0,name:t.album,artists:[{uri:"spotify:local:",name:"",local:!0}]};t.artist&&(n.artists[0].uri=o.localArtistURI(t.artist).toURI(),n.artists[0].name=t.artist,n.artists[0].local=!0),e.update(n)}}else r("album_metadata",[e.uri],(function(t,n){t?p(t):e.update(n)}))}(e),(i||l)&&c(e),n&&function(e){e.update({local:d(e.uri)})}(e)}const f=t.matches=/^spotify:album:[0-9a-zA-Z]+$|^spotify:local:[^:]*:[^:]*$/;let y;t.register=function(){y||(y=!0,i.subscribe(f,"wait",m))},t.unregister=function(){y&&(y=!1,i.unsubscribe(f,"wait",m))}},455:function(e,t,n){"use strict";(function(e){const i=n(2),o=n(7),a=n(57),s=n(17),l=n(79).request,r=n(20),p=n(456),d=n(5).logError,k=100;let u=null;const c=["album","artists","availability","disc","duration","explicit","image","local","name","number","placeholder","playable","linkedTrack"];function m(e,t){s(t,"unavailable")&&e.get("playable",(function(t,n){t?d(t):e.update({unavailable:!n})})),!!a(t,c).length&&function(e){l("track_metadata",[e.uri],(function(t,n){t?d(t):(p.setLocalProperties(n),n.image=function(e){let t,n=e.image;if(e.images)for(let i=0;i<e.images.length;i++){const o=e.images[i];(!t||o[0]>t)&&(t=o[0],n=o[1])}return n}(n),n.linkedTrack?n.linkedTrack={uri:n.linkedTrack}:n.linkedTrack=null,e.update(n))}))}(e);const n=s(t,"shouldBeOffline"),i=s(t,"offlineProgress");(n||i)&&function(e){if(o.fromString(e.uri).type===o.Type.LOCAL)return void e.get("playable",(function(t,n){t?d(t):e.update({shouldBeOffline:n,offlineProgress:n?1:0})}));r.subscribe({url:`sp://offline/v1/resources?uri=${e.uri}`},(function(t,n){if(t){const n=t.response&&t.response.getStatusCode();if(-104!==n&&404!==n)return void d(t);f(e,{offline_availability:"no"})}else{const t=n.body.resources;f(e,t)}}))}(e)}function f(e,t){let n=!1,i=0;switch(t.offline_availability){case"waiting":n=!0,i=0;break;case"downloading":n=!0,i=.5;break;case"yes":n=!0,i=1;break;case"no":n=!1,i=0;break;default:d("Unexpected resource.offline_availability",t.offline_availability)}e.update({shouldBeOffline:n,offlineProgress:i})}let y;const g=t.matches=/^spotify:track:|^spotify:local:[^:]*:[^:]*:[^:]*:\d*$/;t.register=function(){y||(y=!0,i.subscribe(g,"wait",m),function(){u=r.subscribe({url:"sp://local-files/v1/changes"},(function(e,t){if(!y)return;if(e){const t=e.response&&e.response.getStatusCode();if(-104===t||404===t)return;return void d(e)}const n=t.body,o=n.data,a=n.type,s="added"===a;(s||"removed"===a)&&o.tracks.forEach((function(e){i(e.uri).update({shouldBeOffline:s,offlineProgress:s?1:0,playable:s})}))}))}(),e._getSpotifyModule&&function e(){l("track_event_wait_any",[],(function(t,n){if(y){if(t)return setTimeout((function(){e()}),k),void d(t);e(),"change"===n.type&&(void 0!==n.data.playable&&(n.data.unavailable=!n.data.playable),i(n.data.uri).update(n.data))}}))}())},t.unregister=function(){y&&(y=!1,i.unsubscribe(g,"wait",m),u&&(u.cancel(),u=null))}}).call(this,n(1))},456:function(e,t,n){"use strict";const i=n(7);e.exports={setLocalProperties:function(e){if(e.album&&e.album.uri){const t=i.from(e.album.uri).type;e.album.local=t===i.Type.LOCAL_ALBUM}if(e.artists)for(let t=0,n=e.artists.length;t<n;t++){const n=e.artists[t];if(n.uri){const e=i.from(n.uri).type;n.local=e===i.Type.LOCAL_ARTIST}}}}},47:function(e,t,n){},470:function(e,t,n){"use strict";const i=n(2),o=n(7),a=n(17),s=n(57),l=n(79).request,r=n(5).logError;function p(e,t){const n=a(t,"artist");!!s(t,["currentUser","name","username","image","images","subscribed"]).length&&function(e){l("user_metadata",[e.uri],(function(t,n={}){t&&r(t),n.username=n.username||o.from(e.uri).username,n.name=n.name||n.username,n.image=n.image||"",n.images=n.images||[],n.subscribed||(n.subscribed=!1),n.currentUser||i("spotify:client").query("currentUser(uri)",(function(t,n){t?r(t):e.update({currentUser:e.uri===n.currentUser.uri})})),e.update(n)}))}(e),n&&function(e){l("user_associated_artist",[e.uri],(function(t,n){if(t)return void r(t);const i=n.artist?{uri:n.artist}:null;e.update({artist:i})}))}(e)}const d=t.matches=/^spotify:user:[^:]+$/;let k;t.register=function(){k||(k=!0,i.subscribe(d,"wait",p))},t.unregister=function(){k&&(k=!1,i.unsubscribe(d,"wait",p))}},471:function(e,t,n){"use strict";const i=n(2),o=n(20);function a(e){o.get({url:"sp://core-show/unstable/decorate",body:{items:[e.uri]}},(function(t,n){if(t)throw t;const i=n.body.items[e.uri],o=!(i.isExplicit&&window.top.isExplicitContentFiltered);i.show.uri=i.show.link,i.playable=i.playable&&o,i.unavailable=!i.playable,e.update(i)}))}const s=t.matches=/^spotify:episode:[^:]+$/;let l;t.register=function(){l||(l=!0,i.subscribe(s,"wait",a))},t.unregister=function(){l&&(l=!1,i.unsubscribe(s,"wait",a))}},474:function(e,t,n){"use strict";const i=n(2),o=n(40),a=n(88),s=n(37),l=n(124),r=n(475),p=n(480),d=n(5).logError;let k=0;const u={};function c(e){const t=f(e.uri);u[e.uri]=(++k).toString(36),t.on("update",(function(t){const n=o({},t);delete n.rows,e.update(n)})),e.on("publish",(function(e){const n=o({},e);delete n.rows,t.publish(n)}))}function m(e,t){const n=f(e.uri);t.forEach((function(t){"rows"===t?function(e,t){const n=s.parse(e.uri),i=n.direction,o=n.query;y(t,e,o,i),e.get("rows",(function(e,n){e?d(e):n.on("publish",(function(e){const n=t.get("rows");n&&g(n,e,"publish")}))})),t.get("rows",(function(n,a){n?d(n):a.on("update",(function(n){const a=e.get("rows");a&&g(a,n,"update")&&y(t,e,o,i)}))}))}(e,n):n.get(t,(function(n,i){if(n)return void d(n);const o={};o[t]=i,e.update(o)}))}))}function f(e){const t=s.parse(e),n=t.direction,o=t.originUri,a=t.query;return i("desc"===n?s.create(o,"asc",a):o)}function y(e,t,n,o){u[t.uri]=(++k).toString(36);const s=u[t.uri];e.get("rows",(function(e,l){if(e)return void d(e);const k=[],c=[];for(let e=0,t=l.length;e<t;e++)l.get(e)&&(k.push(l.get(e)),c.push(l.keys[e]));if(0===k.length){const e=t.get("rows");return void(e?e.update([{type:"remove",index:0,length:e.length}]):t.update({rows:[]}))}const m=i([]);m.update([{type:"insert",index:0,values:k,keys:c}]),m.query(n,(function(e,l){if(e)d(e);else if("desc"===o)!function(e,t){let n=e.get("rows");n||(n=new i.List,e.update({rows:n}));n.update([{type:"remove",index:0,length:n.length},{type:"insert",index:0,length:t.length,values:t.values.slice().reverse(),keys:t.keys.slice().reverse()}])}(t,m);else{const e=function(e,t,n){return e.map((function(e,i){const o=p(t,e);return o.push(i),{data:o,key:n.keys[i]}}))}(l,a(n).mask,m);r(t.uri,e,(function(e,n){e?d(e):u[t.uri]===s&&function(e,t,n){let o=e.get("rows");o||(o=new i.List,e.update({rows:o}));const a=n.length,s=new Array(a),l=new Array(a);for(let e=0,i=n.length;e<i;e++)s[e]=n[e].key,l[e]=t.valueOf(s[e]);o.update([{type:"remove",index:0,length:o.length},{type:"insert",index:0,keys:s,values:l}])}(t,m,n)}))}}))}))}function g(e,t,n){let i=!1;return t.forEach((function(t){let o=[];switch(t.type){case"remove":o=function(e,t){const n=[],i=t.keys;return e.keys.forEach((function(e,t){i.indexOf(e)>-1&&n.push(t)})),l.getRemoveOperations(n)}(e,t);break;case"insert":o=[{type:"insert",index:0,values:t.values,keys:t.keys}],i=!0;break;case"move":i=!0;break;default:d("Invalid operation type",t.type)}"publish"===n?e.publish(o):"update"===n&&e.update(o)})),i}const z=t.matches=/^spotify:internal:sortlist:(asc|desc):([^:]*):(.*)$/;let b=!1;t.register=function(){b||(b=!0,i.subscribe(z,"init",c),i.subscribe(z,"wait",m))},t.unregister=function(){b&&(b=!1,i.unsubscribe(z,"init",c),i.unsubscribe(z,"wait",m))}},475:function(e,t,n){"use strict";(function(t){const i=n(476),o=n(477),a=n(478),s=n(479),l=n(32);let r;const p={},d={},k={};let u=0;const c={};function m(e,t,n){const i=a(t);d[e]=n,l.immediate((function(){n===d[e]&&(delete d[e],n(null,i))}))}function f(e,t,n){let i=p[e];if(i){d[e]=n,k[e]=(k[e]||0)+1;const o=(++u).toString(36);return c[e]=o,i.postMessage({reset:!0,newId:o}),void y(t,i,o)}i=new Worker(r),p[e]=i,d[e]=n;const o=(++u).toString(36);c[e]=o,y(t,i,o);const a={items:[]};i.addEventListener("message",(function(t){!function(e,t,n){if(e.data.reset)return k[n]--,void(t.items.length=0);if(e.data.id!==c[n])return;if(k[n])return;if(t.items=t.items.concat(e.data.items),e.data.last){p[n].terminate();const e=d[n];delete d[n],delete p[n],e(null,t.items)}}(t,a,e)}),!1)}function y(e,t,n){const a=i(e);o(t,a,0,n)}function g(){return t.Worker&&t.Blob&&t.URL?(r||(r=function(){const e=s.toString(),t=[a.toString(),i.toString(),o.toString()].join(", "),n=new Blob([`(${e})(${t})`],{type:"text/javascript"});return URL.createObjectURL(n)}()),f):m}e.exports=function(e,t,n){g()(e,t,n)}}).call(this,n(1))},476:function(e,t,n){"use strict";e.exports=function(e,t=50){return function(e,t=2){const n=[];if(null===e)return n;const i=Math.floor(e.length/t),o=e.length%t;let a=0;const s=e.length;let l,r=0;for(;a<s;)l=i,r<o&&l++,n.push(e.slice(a,a+l)),r++,a+=l;return n}(e,Math.ceil(e.length/t))}},477:function(e,t,n){"use strict";e.exports=function e(t,n,i,o){const a={items:n[i],id:o};i===n.length-1&&(a.last=!0),t.postMessage(a),a.last||e(t,n,i+1,o)}},478:function(e,t,n){"use strict";e.exports=function(e){return e.sort((function(e,t){const n=e.data.length;for(let i=0;i<n;i++){const n=e.data[i],o=t.data[i],a=parseInt(n,10),s=parseInt(o,10),l=!isNaN(a),r=!isNaN(s);if(l&&r){if(a<s)return-1;if(a>s)return 1}else{if(l)return-1;if(r)return 1}if(n.localeCompare){const e=n.localeCompare(o);if(0!==e)return e}else{if(n<o)return-1;if(n>o)return 1}}return-1})),e}},479:function(e,t,n){"use strict";e.exports=function(e,t,n,i){const o=i||self;let a=[],s=null;o.addEventListener("message",(function(i){if(i.data.reset)return a.length=0,s=i.data.newId,void o.postMessage({reset:!0,newId:s});if(null===s&&(s=i.data.id),s===i.data.id&&(a=a.concat(i.data.items),i.data.last)){const i=e(a),l=t(i);n(o,l,0,s)}}),!1)}},48:function(e,t,n){"use strict";const i=n(9),o=n(2),a=[];function s(e){const t=a[e];return t&&t.getAttribute("data-uri")||null}t.elements=a,t.reset=function(){a.length=0},t.update=function(){const e=i(document).search(":not(.sticky-clone) > [data-list]");e&&e.forEach((function(e){a.includes(e)||(a.push(e),a.sort((e,t)=>{let n;return n=e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}))}))},t.getContainerLength=function(e){const t=i(a[e]);if(!t)return 0;const n=t.data("uri");if(!n)return 0;const s=o(n).get("rows");return s?s.length:0},t.getContainerIndex=function(e){for(let t=0,n=a.length;t<n;t++){if(s(t)===e)return t}return-1},t.getUri=s,t.getUris=function(){const e=[];for(let t=0,n=a.length;t<n;t++)e.push(s(t));return e},t.getLiveList=function(e){const t=s(e);return o(t).get("rows")||null}},480:function(e,t,n){"use strict";const i=(0,function(e){return e&&e.__esModule?e:{default:e}}(n(60)).default)({});e.exports=function e(t,n){let o=[];return t.forEach((function(t){const a=t.key,s=n[a];if(Array.isArray(s))if(t.mask){let n=[];for(let i=0,o=s.length;i<o;i++)n=n.concat(e(t.mask,s[i]));o.push(n.join(i.getSeparator()))}else o.push(s.join(i.getSeparator()));else t.mask?o.push.apply(o,e(t.mask,s)):o.push(s)})),o=function(e){const t=/\b[0-9]+\b/g,n="000000";return e.map((function(e){if("string"!=typeof e)return e;let i=e.toLowerCase();const o=["the ","(the) "];for(let e=0;e<o.length;e++){const t=o[e];if(0===i.indexOf(t)){i=i.replace(t,"");break}}return(i=i.replace(t,(function(e){return e.length>=n.length?e:n.substr(0,n.length-e.length)+e}))).trim()}))}(o)}},49:function(e,t,n){"use strict";const i={};t.add=function(e,t){i[e]||(i[e]=[]),i[e].push(t)},t.remove=function(e,t){if(i[e]){const n=i[e].indexOf(t);n>-1&&i[e].splice(n,1)}},t.run=function(e){const t=i[e];if(t&&t.length>0){const e=Array.prototype.slice.call(arguments,1);for(let n=0,i=t.length;n<i;n++)t[n].apply(null,e)}}},5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logInfo=function(...e){o(()=>{console.info(...e)})},t.logError=function(...e){o(()=>{console.error(...e)})},t.logWarn=function(...e){o(()=>{console.warn(...e)})},t.groupCollapsed=function(...e){o(()=>{console.groupCollapsed(...e)})},t.groupEnd=function(){o(()=>{console.groupEnd()})};const i=!1;function o(e){i&&e()}},50:function(e,t,n){"use strict";const i=n(9),o={},a={};let s=0,l=!1,r=null,p=null,d=null,k=!1;function u(){l=!1,r=null,p=null,d=null,k=!1}function c(e){const t=function(e){switch(e){case"dragenter":return m;case"dragleave":return f;case"dragend":return g;case"drop":return y}return null}(e.type);t?t(e):h(e)}function m(e){k=!0,l?r!==e.target&&(d=e):(l=!0,r=e.target,h(e))}function f(e){k=!1,r=null,h(e),l&&(d?(r=d.target,h(d),d=null):l=!1)}function y(e){u(),h(e)}function g(e){u(),h(e)}function z(e,t,n){t!==p&&(p=t,_(e,t,n))}function b(e,t,n,o){let a=!1;const s=d&&d.target;if(s){const e=t===s,n=!e&&t.contains(s),l=i(s).matches(o);e||n&&!l||(a=!0)}k||(a=!0),a&&(p=null,_(e,t,n))}function h(e){const t=e.type,n=a[t];n&&n.length>0&&n.forEach((function(n){const i=n.selector,o=e.target!==document&&e.target.closest(i);if(o){(function(e){switch(e){case"dragenter":return z;case"dragleave":return b}return null}(t)||_)(e,o,n.handler,i)}}))}function _(e,n,i){i.call(t,e,n)}function v(e){switch(e){case"dragenter":case"dragleave":case"dragend":case"drop":return!0}return!1}function w(e){o[e]||(o[e]=!0,document.addEventListener(e,c,!1))}function S(e){o[e]&&(o[e]=!1,document.removeEventListener(e,c,!1))}t.delegate=function(e,t,n){v(e)?1===++s&&(w("dragenter"),w("dragleave"),w("dragend"),w("drop")):o[e]||w(e),a[e]||(a[e]=[]),a[e].push({selector:t,handler:n})},t.undelegate=function(e,t,n){v(e)&&0===(s=Math.max(0,s-1))&&(S("dragenter"),S("dragleave"),S("dragend"),S("drop"));const i=a[e];if(i){for(let e=0,o=i.length;e<o;e++){const o=i[e];if(o.selector===t&&o.handler===n){i.splice(e,1);break}}v||0!==i.length||S(e)}}},51:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var a=o(n(97)),s=i(n(211)),l=i(n(24)),r=o(n(18)),p=o(n(212)),d=i(n(213));function k(){var e=new a.HandlebarsEnvironment;return r.extend(e,a),e.SafeString=s.default,e.Exception=l.default,e.Utils=r,e.escapeExpression=r.escapeExpression,e.VM=p,e.template=function(t){return p.template(t,e)},e}var u=k();u.create=k,d.default(u),u.default=u,t.default=u,e.exports=t.default},510:function(e,t,n){"use strict";var i=r(n(2)),o=r(n(20)),a=r(n(7)),s=r(n(19)),l=n(5);function r(e){return e&&e.__esModule?e:{default:e}}const p=t.matches=/^spotify:((internal:sortlist:(asc|desc):([^:]*):(internal:filterlist:[^:]*):)|(internal:sortlist:(asc|desc):([^:]*):)|(internal:filterlist:[^:]*):)?show:[^:]+$/;let d;const k=[];function u(e,t){if(!t.includes("show")&&!t.includes("rows"))return;if(k.includes(e.uri))return;k.push(e.uri);let n=e.uri,i="",r="number,publishDate,name";const p=s.default.parse(e.uri);p&&(n=p.originUri,p.sort&&p.sort.query&&(r=function(e){const t=e.direction.toUpperCase();let n="number,publishDate,name";switch(e.query){case"track(name)":n=`name ${t}`;break;case"track(duration)":n=`length ${t}`;break;case"track(timeLeft)":n=`progress ${t}`;break;case"timeSinceAdded,track(album(name),disc,number)":n=`number ${t},publishDate ${t},name ${t}`;break;default:(0,l.logError)("Invalid query",e.query)}return n}(p.sort)),p.filter&&p.filter.query&&(i=function(e){if(e.length>0)return`,${e}`;return""}(p.filter.query)));const d=a.default.from(n).getBase62Id();o.default.subscribe({url:`sp://core-show/unstable/show/${d}?filter=available eq true${i}&sort=${r}`},(t,n)=>{if(t)throw t;const{show:i,items:o}=n.body;i.uri=i.link,o.forEach(e=>{const t=!(e.isExplicit&&window.top.isExplicitContentFiltered);e.uri=e.link,e.show.uri=e.show.link,e.playable=e.playable&&t,e.unavailable=!e.playable}),e.update({show:i,rows:o.map(e=>({track:e})),lastUpdateTimestamp:Date.now()})})}t.register=()=>{d||(d=!0,k.length=0,i.default.subscribe(p,"wait",u))},t.unregister=()=>{d&&(d=!1,k.length=0,i.default.unsubscribe(p,"wait",u))}},511:function(e,t,n){"use strict";var i=l(n(2)),o=n(22),a=l(n(45)),s=l(n(7));function l(e){return e&&e.__esModule?e:{default:e}}let r;function p(e,t){if(e||!t)return;const n=s.default.from(t.subcontext_uri)?t.subcontext_uri:t.uri,o=a.default.formatListUtils.makeFeedbackUri(t.context_uri,n);let l=null;switch(t.type){case"like":l="up";break;case"dislike":l="down"}(0,i.default)(o).update({thumb:l}),(0,i.default)(n).update({thumb:l}),a.default.resyncPlaylist(t.context_uri)}t.register=function(){r=(0,o.cosmosJSON)({method:"SUB",uri:"sp://feedback/v1/feedback"},p)},t.unregister=function(){r(),r=null}},514:function(e){e.exports=JSON.parse('{"type":"record","name":"UIImpression","namespace":"com.spotify.Message","doc":"A UI impression log","fields":[{"name":"message_name","type":"string"},{"name":"message_version","type":"int"},{"name":"request_id","type":["null","string"],"doc":"Request ID from Spaces Log","default":null},{"name":"feature_id","type":["null","string"],"doc":"A name for a feature (e.g., browse-new-releases, collection, etc.)","default":null},{"name":"pageuri","type":["null","string"],"doc":"Uri of the page within the feature (e.g., spotify:hub:music, etc.)","default":null},{"name":"section_id","type":["null","string"],"doc":"Section of the page (e.g., Early Morning)","default":null},{"name":"item_index","type":["null","int"],"doc":"Index of item in block","default":null},{"name":"target_uri","type":["null","string"],"doc":"URI of item impressed (nullable for page and block impressions)","default":null},{"name":"impression_type","type":["null","string"],"doc":"Page, block, or item","default":null},{"name":"render_type","type":["null","string"],"doc":"Block container ceramic type (e.g. carousel, list, tile)","default":null},{"name":"timestamp","type":["null","double"],"doc":"Unix timestamp of event","default":null}],"schema_version":5}')},517:function(e,t,n){"use strict";const i=n(7),o=n(17),a=n(2),s=n(79).request,l=n(5).logError;function r(e){return i.from(e).type===i.Type.LOCAL_ARTIST}function p(e,t){const n=o(t,"local");let a=!1;const p=["image","images","name"];for(let e=0,n=t.length;e<n;e++)if(o(p,t[e])){a=!0;break}a&&function(e){if(r(e.uri)){const t=i.from(e.uri);t&&e.update({local:!0,name:t.artist})}else s("artist_metadata",[e.uri],(function(t,n){t?l(t):(n.image||e.get("image")||(n.image=""),n.images||e.get("images")||(n.images=[]),e.update(n))}))}(e),n&&function(e){e.update({local:r(e.uri)})}(e)}const d=t.matches=/^spotify:artist:|^spotify:local:[^:]*$/;let k;t.register=function(){k||(k=!0,a.subscribe(d,"wait",p))},t.unregister=function(){k&&(k=!1,a.unsubscribe(d,"wait",p))}},518:function(e,t,n){"use strict";const i=n(17),o=n(2),a=n(124),s=n(7),l=n(21),r=n(20),p=n(5).logError,d=/^spotify:internal:local-files$/;function k(e,t){i(t,"allows")&&function(e){e.update({allows:{insertTracks:!1,removeTracks:!1}})}(e),i(t,"rows")&&function(e){r.get({url:"sp://local-files/v1/tracks"},(function(t,n){t?p(t):(e.update({rows:u(n.body)}),r.subscribe({url:"sp://local-files/v1/changes"},(function(t,n){t?p(t):function(e,t){switch(t.type){case"removed":!function(e,t){const n=a.getRemoveOperations(t.positions);e.get("rows").update(n)}(e,t.data);break;case"added":!function(e,t){m(e,t.tracks,t.position)}(e,t.data);break;case"moved":!function(e,t){const n=a.getMoveOperations(t.positions,t.position);e.get("rows").update(n)}(e,t.data);break;case"changed":!function(e,t){const n=l.fromIndices(t.positions);let i=0;for(let o=0;o<n.length;o++){const s=n[o],l=s.toIndices(),r=s.length,p=new Array(l.length);for(let e=0;e<r;e++)p[e]=t.tracks[i+e];const d=a.getRemoveOperations(l);e.get("rows").update(d),m(e,p,l[0]),i+=r}}(e,t.data);break;default:p("Unexpected event type",t.type)}}(e,n.body)})))}))}(e)}function u(e){const t=new Array(e.length);for(let n=0,i=e.length;n<i;n++){const i=e[n];c(i);const o=1e3*i.dateAdded,a={uri:y(i.uri),track:i,dateAdded:o};t[n]=a,delete i.dateAdded,delete i.addedBy}return t}function c(e){if(e.album&&e.album.uri){const t=s.from(e.album.uri).type;e.album.local=t===s.Type.LOCAL_ALBUM}if(e.artists)for(let t=0,n=e.artists.length;t<n;t++){const n=e.artists[t];if(n.uri){const e=s.from(n.uri).type;n.local=e===s.Type.LOCAL_ARTIST}}}function m(e,t,n){const i=u(t),o=a.getInsertOperations(i,n);e.get("rows").update(o)}let f=1e3;function y(e){return e.replace("spotify:",`spotify:row:${(++f).toString(36)}:`)}let g=!1;t.register=function(){g||(g=!0,o.subscribe(d,"wait",k))},t.unregister=function(){g&&(g=!1,o.unsubscribe(d,"wait",k))},t.matches=d},52:function(e,t,n){"use strict";const i=n(259),o=n(11).default,a=n(14),s=n(5).logError;let l=0;function r(e,t){return null===e?"":"string"==typeof e?e:"object"==typeof e&&"object"==typeof t.type&&"map"===t.type.type?function(e,t){const n=Object.entries(e);if(0===n.length)return"";return n.map((function(e){return`${e[0]}:${r(e[1],t)}`})).join(",")}(e,t.type):JSON.stringify(e)}e.exports=function(e,t){const n=i(e,Object.assign({},{message_name:e.name,message_version:e.schema_version},t));n.fields=n.fields.map((function(t,n){return r(t,e.fields[n+2])}));const p=e.name+e.schema_version,d=a(`logger:${p}`),k=++l;d("REQ %s#%s %s",p,k,JSON.stringify(n)),o.resolver.post({url:"sp://logging/v3/log",body:n},(function(e,t){e?s(e,n):d("RES %s#%s %d",p,k,t.getStatusCode())}))}},521:function(e,t,n){"use strict";const i=n(454),o=n(350),a=n(517),s=n(299),l=n(438),r=n(449),p=n(382),d=n(432),k=n(474),u=n(455),c=n(470),m=n(430),f=n(518),y=n(439),g=n(471),z=n(510),b=n(511);t.register=function(){i.register(),o.register(),a.register(),s.register(),l.register(),r.register(),p.register(),d.register(),k.register(),u.register(),c.register(),m.register(),f.register(),y.register(),g.register(),z.register(),b.register()},t.unregister=function(){i.unregister(),o.unregister(),a.unregister(),s.unregister(),l.unregister(),r.unregister(),p.unregister(),d.unregister(),k.unregister(),u.unregister(),c.unregister(),m.unregister(),f.unregister(),y.unregister(),g.unregister(),z.unregister(),b.unregister()}},53:function(e,t,n){var i=n(34);e.exports=function(e,t){return i(e)===t}},54:function(e,t,n){"use strict";const i=n(2),o=n(11).default,a=n(7),s=i.ASAP;function l(e,n){const i=e.method;let o,a;return delete e.method,r(e.url,(function(s,l){if(s)return void n(s);if(a)return;const r=new t.cosmos.Request(i||t.cosmos.Action.GET,l,e.headers,e.body);o=t.cosmos.resolver.resolve(r,(function(e,t){if(n)if(e)n(e);else try{n(null,{body:JSON.parse(t.getBody()||"{}"),headers:t.getHeaders(),status:t.getStatusCode()})}catch(e){e.response=t,n(e)}}))})),{cancel:function(){return o&&o.cancel?(o.cancel(),o=null):a||(a=!0),null}}}function r(e,t){e.indexOf("@")>-1?i("spotify:client").query("currentUser(username)",(function(n,i){n?t(n):t(null,e.replace("@",a.getCanonicalUsername(i.currentUser.username)))}),s):t(null,e)}t.request=l,t.get=function(e,n){return e.method=t.cosmos.Action.GET,l(e,n)},t.post=function(e,n){return e.method=t.cosmos.Action.POST,l(e,n)},t.subscribe=function(e,n){return e.method=t.cosmos.Action.SUB,l(e,n)},t.delete=function(e,n){return e.method=t.cosmos.Action.DELETE,l(e,n)},t.put=function(e,n){return e.method=t.cosmos.Action.PUT,l(e,n)},t.head=function(e,n){return e.method=t.cosmos.Action.HEAD,l(e,n)},t.cosmos=o,t.sanitizeURL=r},55:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.messageProxy=function(e,t){if("undefined"==typeof window||!window.top||!window.top.postMessage)return!1;const n=e.uri;if(!e)throw new Error("Need a request object.");if(-1===s.indexOf(e.method))throw new Error("Need a valid method:",s);if(!t&&"POST"===!e.method)throw new Error("Callback needed");if(!o.default.hasOwnProperty(n))throw new Error("Uri need to be one of these: ",Object.keys(o.default));const i={},a=o.default[n][e.method]||[];if("GET"===e.method){a.forEach(t=>{if(!e.body.hasOwnProperty(t))throw new Error(`Uri 'GET' request body missing\n                        a required key: ${t}`);i[t]=e.body[t]});const o=e=>{d(e,`${l}-${n}-reply`)&&(r("getListener",n,e.data),e.data.error?t(e.data.error):(delete e.data.uri,t(null,e.data)),window.removeEventListener("message",o))};return window.addEventListener("message",o),i.uri=`${l}-${n}-get`,r("get",n,i),k(e.target,i)||(window.removeEventListener("message",o),t("No frame found to post to.")),!0}if("REPLY"===e.method){const e=e=>{d(e,`${l}-${n}-get`)&&(r("reply listener",n,e.data),delete e.data.uri,t(e.data,(function(t,i){const o={};t?o.error=t:a.forEach(e=>{if(!i.hasOwnProperty(e))throw new Error(`Reply data missing\n                              a required key: ${e}`);o[e]=i[e]}),o.uri=`${l}-${n}-reply`,r("reply post",n,o),e.source.postMessage(o,e.origin)})))};return window.addEventListener("message",e,!1),()=>{window.removeEventListener("message",e)}}if("POST"===e.method){a.forEach(t=>{if(!e.body.hasOwnProperty(t))throw new Error(`Uri 'POST' request body missing\n                        a required key: ${t}`);i[t]=e.body[t]}),i.uri=`${l}-${n}`,r("post",n,i);const o=k(e.target,i);return t&&t(o?null:"No frame found to post to."),!0}const p=e=>{d(e,`${l}-${n}`)&&(r("subscription event",n,e.data),t(e.data))};return r("subscription",n),window.addEventListener("message",p,!1),()=>{window.removeEventListener("message",p)}};var i=a(n(14)),o=a(n(307));function a(e){return e&&e.__esModule?e:{default:e}}const s=["POST","SUB","GET","REPLY"],l="message-proxy",r=(0,i.default)("message-proxy");const p=new RegExp("^https?://[a-zA-Z-]*.app.spotify.com");function d(e,t){return!!p.test(e.origin)&&e.data.uri===t}function k(e,t){if(("top"===e||!e)&&(r("postMessageToFrame target=top data=%o",t),window.top.postMessage(t,"*"),"top"===e))return!0;let n,i;if(window===window.top)n=window.top.frames;else{const e=Array.prototype.slice.call(window.top.frames,0,window.top.frames.length),t=Array.prototype.slice.call(window.frames,0,window.frames.length);n=e.concat(t)}const o=n.length;for(let a=0;a<o;a++)e&&e!==n[a].frameElement.src||(r("postMessageToFrame data=%o",t),n[a].postMessage(t,"*"),i=!0);return r("postMessageToFrame framesLength=%o frameFound=%o",o,i),i}},56:function(e,t){e.exports=function(e){return null==e?"":e.toString()}},57:function(e,t,n){var i=n(105),o=n(33),a=n(78),s=n(17),l=n(69);e.exports=function(e){var t=l(arguments,1);return o(i(e),(function(e){return a(t,(function(t){return s(t,e)}))}))}},58:function(e,t,n){"use strict";function i(){this._listeners=Object.create(null)}i.prototype.addEventListener=function(e,t,n=0){if(!e||!t)throw new Error("Both event type and callback need to be defined");this._listeners[e]||(this._listeners[e]=[]);const i=this._listeners[e];if(i.every((function(e){return e.callback!==t}))){const e={callback:t,priority:n};let o=0;for(;o<i.length&&i[o].priority>e.priority;)o++;i.splice(o,0,e)}},i.prototype.removeEventListener=function(e,t){const n=this._listeners[e]||[];for(let e=0;e<n.length;e++)if(n[e].callback===t)return void n.splice(e,1)},i.prototype.addEventListenerOnce=function(e,t,n=(()=>!0),i=0){const o=i=>{n(i)&&(this.removeEventListener(e,o),t(i))};this.addEventListener(e,o,i)},i.prototype.dispatchEvent=function(e){const t=this._listeners[e.type]?this._listeners[e.type].slice():[];for(let n=0,i=t.length;n<i;n++){t[n].callback(e)}},i.prototype.reset=function(){this._listeners=Object.create(null)},e.exports=new i},59:function(e,t){e.exports=function(e){return!!e&&"object"==typeof e&&e.constructor===Object}},60:function(e,t,n){"use strict";var i=l(n(145)),o=l(n(197)),a=l(n(61)),s=l(n(149));function l(e){return e&&e.__esModule?e:{default:e}}e.exports=function(e){if(!e||"object"!=typeof e)throw new Error("`appStringsByLocale` must be a plain object. See spotify-i18n/README.md");function t(){return"undefined"!=typeof window&&window&&window.__spotify&&window.__spotify.locale}function n(){const n=t();return n in e?n:"en"}const l={};function r(e,t,...i){const r=n(),p=e[r][t],d="object"!=typeof p?p:p[function(e,t){return(l[e]||(l[e]=new Intl.PluralRules((0,a.default)(e,"intl")))).select(t)}(r,i[0])]||p.other;return void 0===d?(0,s.default)(t):(0,o.default)(d,i,r)}return{locale:n,get:r.bind(null,e),getGlueString:r.bind(null,i.default),glueStrings:function(){return i.default[n()]},appStrings:function(){return e[n()]},getSeparator:function(){switch(t()){case"ar":return"، ";default:return", "}}}}},61:function(e,t,n){"use strict";const i=n(195);e.exports=function(e,t){const n=i[e];return n&&n[t]?n[t]:e},e.exports.all=function(){return Object.keys(i)}},62:function(e,t,n){"use strict";var i=n(254),o=function(e){return e&&e.__esModule?e:{default:e}}(n(113));const a=n(110);function s(e){this._uri=void 0,void 0!==e&&this.setURI(e),this._uuid=a.create().toString(),this._isInitialState=!1}s.unserialize=function(e){const t=JSON.parse(e),n=new s;return n.setURI(t.uri),n},s.prototype.equals=function(e){return"string"==typeof this._uri&&e instanceof s&&this._uri===e._uri},s.prototype.equalsApp=function(e){const t=this.getAppId();return e&&t&&e.getAppId()===t||!1},s.prototype.getAppId=function(){const e=this.getURI().split(":");if(!(e.length<3)&&"app"===e[1]&&""!==e[2])return e[2]},s.prototype.getAppURI=function(){return this.getURI().split(":").slice(0,3).join(":")},s.prototype.getArgs=function(){return this.getURI().split(":").slice(3).map((function(e){return decodeURIComponent(e)}))},s.prototype.getURI=function(){if(void 0===this._uri)throw new Error("URI not set");return this._uri},s.prototype.serialize=function(){return JSON.stringify({uri:this.getURI()})},s.prototype.setArgs=function(e){if(!Array.isArray(e))throw new TypeError("Args must be array");this._uri=this.getAppURI().split(":").concat(e.map((function(e){return encodeURIComponent(e)}))).join(":")},s.prototype.setURI=function(e){if("string"!=typeof e)throw new TypeError("URI must be string");this._uri=e},s.prototype.setIsInitialState=function(e){this._isInitialState=e},s.prototype.getIsInitialState=function(){return this._isInitialState},s.prototype.getUUID=function(){return this._uuid},s.prototype.getPageID=function(){return(0,i.getPageIdFromUri)(this.getAppId(),this.getURI())},s.prototype.isPageCovered=function(){return this.getPageID()!==o.default.unknownUncovered},e.exports=s},64:function(e,t,n){"use strict";const i=n(9),o=n(48),a=n(65);function s(e,t){let n=t;for(;n&&n.parentNode!==e;)n=n.parentNode;return!!n}t.getClosest=function(e,t){const n="down"===t;let i=e.containerIndex;const s=e.index;let l=o.getContainerLength(i),r=n?s+1:s-1;return r<l&&r>=0?new a(i,r):(i=n?i+1:i-1,(l=o.getContainerLength(i))?new a(i,r=n?0:l-1):null)},t.getFromNode=function(e){if(!e.parentNode)return null;if(!e.hasAttribute("data-index"))return null;const t=o.elements;if(0===t.length)return null;for(let n=0,i=t.length;n<i;n++)if(t[n]&&s(t[n],e)){const t=+e.getAttribute("data-index");return new a(n,t)}return null},t.getNodeFromPosition=function(e){const t=o.elements[e.containerIndex];if(!t)return null;const n=i(t).find(`[data-index=${e.index}]`);return n?n[0]:null},t.getDirection=function(e,t){return e&&t?e.containerIndex!==t.containerIndex?e.containerIndex<t.containerIndex?1:-1:e.index===t.index?0:e.index<t.index?1:-1:0},t.getPositionFromGlobalIndex=function(e){let t,n=e,i=0,s=0;for(let a=0,l=o.elements.length;a<l&&!((s+=t=o.getContainerLength(a))>e);a++)i=a+1,n-=t;return new a(i,n)},t.getGlobalIndexFromPosition=function(e){let t=e.index;for(let n=e.containerIndex-1;n>=0;n--)t+=o.getContainerLength(n);return t},t.getLastPosition=function(){const e=o.elements.length-1,t=o.getContainerLength(e)-1;return new a(e,t)},t.getLastPositionForSelectAll=function(){let e;o.elements.forEach((function(t,n){"false"!==t.getAttribute("data-list-may-select-all")&&(e=n)}));const t=o.getContainerLength(e)-1;return new a(e,t)}},65:function(e,t,n){"use strict";const i=function(e,t){this.containerIndex=e,this.index=t};i.prototype.isSame=function(e){return this.containerIndex===e.containerIndex&&this.index===e.index},e.exports=i},66:function(e,t,n){"use strict";var i=s(n(11)),o=s(n(187)),a=n(5);function s(e){return e&&e.__esModule?e:{default:e}}let l=[];function r(e,t){i.default.resolver.post({url:"sp://abba/v1/flags",body:{flags:e}},(e,n)=>{if(e)t(e);else{const{flags:e=[]}=n.getJSONBody();t(null,e)}})}function p(e,t){const n=d();if(n.hasOwnProperty(e))return(0,a.logWarn)(`Abba: Override for ${e} : ${n[e]}`),void setTimeout(()=>t(null,n[e]),0);r([e],(n,i)=>{if(n)return void t(n);const o=i[0]&&i[0].featureName===e&&i[0].cell;t(null,o||null)})}function d(){const e="undefined"!=typeof __spotify&&__spotify.product_state?__spotify.product_state.abbaOverrides||__spotify.product_state.abbaoverrides:"";if(e)try{return JSON.parse(e)}catch(t){(0,a.logError)("error parsing value=%o, error=%o",e,t)}return{}}e.exports={get:p,subscribe:function(e,t){let n;const o=e=>{e!==n&&(n=e,t(null,e))};let a=i.default.resolver.subscribe({url:"sp://abba/v1/flags",body:{flags:[e]}},n=>{n?t(n):p(e,(e,n)=>{e?t(e):o(n)})}),s={cancel:()=>{a&&a.cancel();const t=l[e].indexOf(s);-1!==t&&l[e].splice(t,1),s=a=null},_update:o};e in l||(l[e]=[]);return l[e].push(s),s},clearSubscriptions:function(){l=[]},fetch:function e(t){if("string"==typeof t)return e([t]).then(e=>e[t]);const n={},i=d(),o=t.reduce((e,t)=>(i.hasOwnProperty(t)?((0,a.logWarn)(`Abba: Override for ${t} : ${i[t]}`),n[t]=i[t]):e.push(t),e),[]);if(!o.length)return Promise.resolve(n);return new Promise((e,i)=>{r(o,(o,a)=>{o?i(o):(a.forEach(e=>{n[e.featureName]=e.cell}),Object.keys(n).length!==t.length&&t.forEach(e=>{n.hasOwnProperty(e)||(n[e]=null)}),e(n))})})}},"undefined"!=typeof window&&(window.abba={get:p,getAll:function(e){(0,a.logWarn)("Abba:getAll should only be used by TA tests for logging purposes."),i.default.resolver.get({url:"sp://abba/v1/all_flags",body:{}},(t,n)=>{if(t)e(t);else{const{flags:t=[]}=n.getJSONBody(),i=t.reduce((e,t)=>(e[t.featureName]=t.cell,e),{});e(null,(0,o.default)(i,{space:2}))}})},getRequestedFlagNames:function(e){i.default.resolver.get({url:"sp://abba/v1/requested_flag_names",body:{}},(t,n)=>{t?e(t):e(null,JSON.stringify(n.getJSONBody().sort(),null,2))})}})},67:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var i=n(12);function o(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===t?e:e.length<=t?e:e.substr(0,t)+"..."}function a(e,t){if(!Array.isArray(e))return"";for(var n=[],i=0;i<e.length;i++){var o=e[i];try{n.push(String(o))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function s(e,t){return Object(i.i)(t)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t)}},69:function(e,t){e.exports=function(e,t,n){var i=e.length;t=null==t?0:t<0?Math.max(i+t,0):Math.min(t,i),n=null==n?i:n<0?Math.max(i+n,0):Math.min(n,i);for(var o=[];t<n;)o.push(e[t++]);return o}},7:function(e,t,n){"use strict";var i=n(278),o=new TypeError("Invalid Spotify URI!"),a=(new TypeError("Not implemented!"),0),s=1,l=function(e,t){return e=encodeURIComponent(e),t===a&&(e=e.replace(/%20/g,"+")),e=(e=e.replace(/[!'()]/g,escape)).replace(/\*/g,"%2A")},r=function(e,t){var n=t==a?e.replace(/\+/g,"%20"):e;return decodeURIComponent(n)},p=function(e,t){var n,i,a,s;switch(e.id&&(n=e._base62Id),e.type){case c.Type.ALBUM:return i=[c.Type.ALBUM,n],e.disc&&i.push(e.disc),i;case c.Type.AD:return[c.Type.AD,e._base62Id];case c.Type.ARTIST:return[c.Type.ARTIST,n];case c.Type.ARTIST_TOPLIST:return[c.Type.ARTIST,n,c.Type.TOP,e.toplist];case c.Type.DAILY_MIX:return[c.Type.DAILY_MIX,n];case c.Type.SEARCH:return[c.Type.SEARCH,l(e.query,t)];case c.Type.TRACK:return(e.context||e.play)&&(n+=d({context:e.context,play:e.play})),e.anchor&&(n+="#"+e.anchor),[c.Type.TRACK,n];case c.Type.TRACKSET:var r=[];for(a=0,s=e.tracks.length;a<s;a++)r.push(e.tracks[a]._base62Id);return r=[r.join(",")],null!==e.index&&r.push("#",e.index),[c.Type.TRACKSET,l(e.name)].concat(r);case c.Type.FACEBOOK:return[c.Type.USER,c.Type.FACEBOOK,e.uid];case c.Type.AUDIO_FILE:return[c.Type.AUDIO_FILE,e.extension,e._base62Id];case c.Type.FOLDER:return[c.Type.USER,l(e.username,t),c.Type.FOLDER,e._base62Id];case c.Type.FOLLOWERS:return[c.Type.USER,l(e.username,t),c.Type.FOLLOWERS];case c.Type.FOLLOWING:return[c.Type.USER,l(e.username,t),c.Type.FOLLOWING];case c.Type.PLAYLIST:return[c.Type.USER,l(e.username,t),c.Type.PLAYLIST,n];case c.Type.PLAYLIST_V2:return[c.Type.PLAYLIST,n];case c.Type.STARRED:return[c.Type.USER,l(e.username,t),c.Type.STARRED];case c.Type.TEMP_PLAYLIST:return[c.Type.TEMP_PLAYLIST,e.origin,e.data];case c.Type.CONTEXT_GROUP:return[c.Type.CONTEXT_GROUP,e.origin,e.name];case c.Type.USER_TOPLIST:return[c.Type.USER,l(e.username,t),c.Type.TOP,e.toplist];case c.Type.USER_TOP_TRACKS:return[c.Type.USER,l(e.username,t),c.Type.TOPLIST];case c.Type.TOPLIST:return[c.Type.TOP,e.toplist].concat(e.global?[c.Type.GLOBAL]:["country",e.country]);case c.Type.INBOX:return[c.Type.USER,l(e.username,t),c.Type.INBOX];case c.Type.ROOTLIST:return[c.Type.USER,l(e.username,t),c.Type.ROOTLIST];case c.Type.PUBLISHED_ROOTLIST:return[c.Type.USER,l(e.username,t),c.Type.PUBLISHED_ROOTLIST];case c.Type.COLLECTION_TRACK_LIST:return[c.Type.USER,l(e.username,t),c.Type.COLLECTION_TRACK_LIST,n];case c.Type.PROFILE:return e.args&&e.args.length>0?[c.Type.USER,l(e.username,t)].concat(e.args):[c.Type.USER,l(e.username,t)];case c.Type.LOCAL_ARTIST:return[c.Type.LOCAL,l(e.artist,t)];case c.Type.LOCAL_ALBUM:return[c.Type.LOCAL,l(e.artist,t),l(e.album,t)];case c.Type.LOCAL:return[c.Type.LOCAL,l(e.artist,t),l(e.album,t),l(e.track,t),e.duration];case c.Type.LIBRARY:return[c.Type.USER,l(e.username,t),c.Type.LIBRARY].concat(e.category?[e.category]:[]);case c.Type.IMAGE:return[c.Type.IMAGE,e._base62Id];case c.Type.MOSAIC:return(i=e.ids.slice(0)).unshift(c.Type.MOSAIC),i;case c.Type.RADIO:return[c.Type.RADIO,e.args];case c.Type.SPECIAL:for(i=[c.Type.SPECIAL],a=0,s=(p=e.args||[]).length;a<s;++a)i.push(l(p[a],t));return i;case c.Type.STATION:for(i=[c.Type.STATION],a=0,s=(p=e.args||[]).length;a<s;a++)i.push(l(p[a],t));return i;case c.Type.APPLICATION:var p;for(i=[c.Type.APP,e._base62Id],a=0,s=(p=e.args||[]).length;a<s;++a)i.push(l(p[a],t));return i;case c.Type.COLLECTION_ALBUM:return[c.Type.USER,l(e.username,t),c.Type.COLLECTION,c.Type.ALBUM,n];case c.Type.COLLECTION_MISSING_ALBUM:return[c.Type.USER,l(e.username,t),c.Type.COLLECTION,c.Type.ALBUM,n,"missing"];case c.Type.COLLECTION_ARTIST:return[c.Type.USER,l(e.username,t),c.Type.COLLECTION,c.Type.ARTIST,n];case c.Type.COLLECTION:return[c.Type.USER,l(e.username,t),c.Type.COLLECTION].concat(e.category?[e.category]:[]);case c.Type.EPISODE:return(e.context||e.play)&&(n+=d({context:e.context,play:e.play})),[c.Type.EPISODE,n];case c.Type.SHOW:return[c.Type.SHOW,n];case c.Type.LIVE:return[c.Type.LIVE,n];case c.Type.CONCERT:return[c.Type.CONCERT,n];case c.Type.SOCIAL_SESSION:return[c.Type.SOCIAL_SESSION,n];case c.Type.INTERRUPTION:return[c.Type.INTERRUPTION,e.id];default:throw o}},d=function(e){var t="?";for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(t.length>1&&(t+="&"),t+=n+"="+encodeURIComponent(e[n]));return t},k=function(e){return e.split("&").reduce((function(e,t){return e[(t=t.split("="))[0]]=decodeURIComponent(t[1]),e}),{})},u=function(e,t,n){var i=0;n=n||{};var s,p,d,k=function(){return e[i++]},u=function(){var e=k();if(e.length>22)throw new Error("Invalid ID");return e},m=function(){return e.slice(i)},f=function(){var n=t==a?":":"/";return e.slice(i).join(n)},y=k();switch(y){case c.Type.ALBUM:return c.albumURI(u(),parseInt(k(),10));case c.Type.AD:return c.adURI(k());case c.Type.ARTIST:return s=u(),k()==c.Type.TOP?c.artistToplistURI(s,k()):c.artistURI(s);case c.Type.AUDIO_FILE:return c.audioFileURI(k(),k());case c.Type.DAILY_MIX:return c.dailyMixURI(u());case c.Type.TEMP_PLAYLIST:return c.temporaryPlaylistURI(k(),f());case c.Type.PLAYLIST:return c.playlistV2URI(u());case c.Type.SEARCH:return c.searchURI(r(f(),t));case c.Type.TRACK:return c.trackURI(u(),k(),n.context,n.play);case c.Type.TRACKSET:var g=r(k()),z=k(),b=k(),h=parseInt(k(),10);("%23"!==b||isNaN(h))&&(h=null);var _=[];if(z)for(p=0,d=(z=r(z).split(",")).length;p<d;p++){var v=z[p];_.push(c.trackURI(v))}return c.tracksetURI(_,g,h);case c.Type.CONTEXT_GROUP:return c.contextGroupURI(k(),k());case c.Type.TOP:var w=k();return k()==c.Type.GLOBAL?c.toplistURI(w,null,!0):c.toplistURI(w,k(),!1);case c.Type.USER:var S=r(k(),t),x=k();if(S==c.Type.FACEBOOK&&null!=x)return c.facebookURI(parseInt(x,10));if(null!=x)switch(x){case c.Type.PLAYLIST:return c.playlistURI(S,u());case c.Type.FOLDER:return c.folderURI(S,u());case c.Type.COLLECTION_TRACK_LIST:return c.collectionTrackList(S,u());case c.Type.COLLECTION:var P=k();switch(P){case c.Type.ALBUM:return s=u(),"missing"===k()?c.collectionMissingAlbumURI(S,s):c.collectionAlbumURI(S,s);case c.Type.ARTIST:return c.collectionArtistURI(S,u());default:return c.collectionURI(S,P)}case c.Type.STARRED:return c.starredURI(S);case c.Type.FOLLOWERS:return c.followersURI(S);case c.Type.FOLLOWING:return c.followingURI(S);case c.Type.TOP:return c.userToplistURI(S,k());case c.Type.INBOX:return c.inboxURI(S);case c.Type.ROOTLIST:return c.rootlistURI(S);case c.Type.PUBLISHED_ROOTLIST:return c.publishedRootlistURI(S);case c.Type.TOPLIST:return c.userTopTracksURI(S);case c.Type.LIBRARY:return c.libraryURI(S,k())}var T=m();return null!=x&&T.length>0?c.profileURI(S,[x].concat(T)):null!=x?c.profileURI(S,[x]):c.profileURI(S);case c.Type.LOCAL:var j=k(),A=j&&r(j,t),E=k(),L=E&&r(E,t),C=k(),O=C&&r(C,t),M=k(),R=parseInt(M,10);return void 0!==C?c.localURI(A,L,O,R):void 0!==E?c.localAlbumURI(A,L):c.localArtistURI(A);case c.Type.IMAGE:return c.imageURI(u());case c.Type.MOSAIC:return c.mosaicURI(e.slice(i));case c.Type.RADIO:return c.radioURI(f());case c.Type.SPECIAL:for(p=0,d=(I=m()).length;p<d;++p)I[p]=r(I[p],t);return c.specialURI(I);case c.Type.STATION:return c.stationURI(m());case c.Type.EPISODE:return c.episodeURI(u(),n.context,n.play);case c.Type.SHOW:return c.showURI(u());case c.Type.LIVE:return c.liveURI(u());case c.Type.CONCERT:return c.concertURI(u());case"":break;case c.Type.SOCIAL_SESSION:return c.socialSessionURI(k());case c.Type.INTERRUPTION:return c.interruptionURI(k());default:s=y===c.Type.APP?k():y;var I,N=r(s,t);if(l(N,t)!==s)break;for(p=0,d=(I=m()).length;p<d;++p)I[p]=r(I[p],t);return c.applicationURI(N,I)}throw o};function c(e,t){for(var n in this.type=e,t)"function"!=typeof t[n]&&(this[n]=t[n])}Object.defineProperty(c.prototype,"id",{get:function(){return this._hexId||(this._hexId=this._base62Id?c.idToHex(this._base62Id):void 0),this._hexId},set:function(e){this._base62Id=e?c.hexToId(e):void 0,this._hexId=void 0},enumerable:!0,configurable:!0}),c.prototype.toAppType=function(){if(this.type==c.Type.APPLICATION)return c.applicationURI(this.id,this.args);var e=p(this,s),t=e.shift(),n=e.length;if(n)for(;n--;)e[n]=r(e[n],s);return this.type==c.Type.RADIO&&(e=e.shift().split(":")),c.applicationURI(t,e)},c.prototype.toRealType=function(){return this.type==c.Type.APPLICATION?u([this.id].concat(this.args),a):new c(null,this)},c.prototype.toURI=function(){return"spotify:"+p(this,a).join(":")},c.prototype.toString=function(){return this.toURI()},c.prototype.toURLPath=function(e){var t=p(this,s);t[0]===c.Type.APP&&t.shift();var n=t[0]===c.Type.TRACKSET,i=t[0]===c.Type.LOCAL;if(!n&&!i){for(var o=[],a=0,l=t.length;a<l;a++){var r=t[a];r&&o.push(r)}t=o}var d=t.join("/");return e?"/"+d:d},c.prototype.toPlayURL=function(){return"https://play.spotify.com/"+this.toURLPath()},c.prototype.toURL=function(){return this.toPlayURL()},c.prototype.toOpenURL=function(){return"https://open.spotify.com/"+this.toURLPath()},c.prototype.toSecurePlayURL=function(){return this.toPlayURL()},c.prototype.toSecureURL=function(){return this.toPlayURL()},c.prototype.toSecureOpenURL=function(){return this.toOpenURL()},c.prototype.idToByteString=function(){var e=i.toHex(this._base62Id);if(!e){for(var t="",n=0;n<16;n++)t+=String.fromCharCode(0);return t}var o="";for(n=0;n<32;n+=2){var a=(i.ID16[e.charCodeAt(n)]<<4)+i.ID16[e.charCodeAt(n+1)];o+=String.fromCharCode(a)}return o},c.prototype.getPath=function(){return this.toString().replace(/[#?].*/,"")},c.prototype.getBase62Id=function(){return this._base62Id},c.prototype.isSameIdentity=function(e){var t=c.from(e);if(!t)return!1;if(this.toString()===e.toString())return!0;if(this.type!==c.Type.PLAYLIST&&this.type!==c.Type.PLAYLIST_V2||t.type!==c.Type.PLAYLIST&&t.type!==c.Type.PLAYLIST_V2){if(this.type===c.Type.STATION&&t.type===c.Type.STATION){var n=u(this.args,a);return!!n&&n.isSameIdentity(u(t.args,a))}return!1}return this.id===t.id},c.Type={EMPTY:"empty",ALBUM:"album",AD:"ad",APP:"app",APPLICATION:"application",ARTIST:"artist",ARTIST_TOPLIST:"artist-toplist",AUDIO_FILE:"audiofile",COLLECTION:"collection",COLLECTION_ALBUM:"collection-album",COLLECTION_MISSING_ALBUM:"collection-missing-album",COLLECTION_ARTIST:"collection-artist",CONTEXT_GROUP:"context-group",DAILY_MIX:"dailymix",EPISODE:"episode",FACEBOOK:"facebook",FOLDER:"folder",FOLLOWERS:"followers",FOLLOWING:"following",GLOBAL:"global",IMAGE:"image",INBOX:"inbox",INTERRUPTION:"interruption",LOCAL_ARTIST:"local-artist",LOCAL_ALBUM:"local-album",LOCAL:"local",LIBRARY:"library",LIVE:"live",MOSAIC:"mosaic",PLAYLIST:"playlist",PLAYLIST_V2:"playlist-v2",PROFILE:"profile",PUBLISHED_ROOTLIST:"published-rootlist",RADIO:"radio",ROOTLIST:"rootlist",COLLECTION_TRACK_LIST:"collectiontracklist",SEARCH:"search",SHOW:"show",SOCIAL_SESSION:"socialsession",CONCERT:"concert",SPECIAL:"special",STARRED:"starred",STATION:"station",TEMP_PLAYLIST:"temp-playlist",TOP:"top",TOPLIST:"toplist",TRACK:"track",TRACKSET:"trackset",USER:"user",USER_TOPLIST:"user-toplist",USER_TOP_TRACKS:"user-top-tracks",USET_TOP_TRACKS:"user-top-tracks"},c.fromString=function(e){var t=function(e){var t,n,i,l,r=e.split("?");if(r.length>1){e=r.shift();var p=(i=r.pop()).split("#");p.length>1&&(i=p.shift(),l=p.pop()),i=k(i)}var d=e.split("#");if(d.length>1&&(e=d.shift(),l=d.pop()),0===e.indexOf("spotify:"))t=e.slice("spotify:".length).split(":"),n=a;else{if(0===(e=e.split("?")[0]).indexOf("http://play.spotify.com/"))t=e.slice("http://play.spotify.com/".length).split("/");else if(0===e.indexOf("https://play.spotify.com/"))t=e.slice("https://play.spotify.com/".length).split("/");else if(0===e.indexOf("http://open.spotify.com/"))t=e.slice("http://open.spotify.com/".length).split("/");else if(0===e.indexOf("https://open.spotify.com/"))t=e.slice("https://open.spotify.com/".length).split("/");else{if(0!==e.indexOf("/"))throw o;t=e.slice("/".length).split("/")}n=s}return l&&t.push(l),{format:n,components:t,query:i}}(e);return u(t.components,t.format,t.query)},c.from=function(e){try{return e instanceof c?e:"object"==typeof e&&e.type?new c(null,e):c.fromString(e.toString())}catch(e){return null}},c.fromByteString=function(e,t,n){for(;16!=t.length;)t=String.fromCharCode(0)+t;for(var o="",a=0;a<t.length;a++){var s=t.charCodeAt(a);o+=i.HEX256[s]}var l=i.fromHex(o),r=n||{};return r.id=l,new c(e,r)},c.clone=function(e){return e instanceof c?new c(null,e):null},c.getCanonical=function(e){return this.getCanonical(e)},c.getCanonicalUsername=function(e){return l(e,a)},c.getDisplayUsername=function(e){return r(e,a)},c.idToHex=function(e){return 22==e.length?i.toHex(e):e},c.hexToId=function(e){return 32==e.length?i.fromHex(e):e},c.emptyURI=function(){return new c(c.Type.EMPTY,{})},c.albumURI=function(e,t){return new c(c.Type.ALBUM,{id:e,disc:t})},c.adURI=function(e){return new c(c.Type.AD,{id:e})},c.audioFileURI=function(e,t){return new c(c.Type.AUDIO_FILE,{id:t,extension:e})},c.artistURI=function(e){return new c(c.Type.ARTIST,{id:e})},c.artistToplistURI=function(e,t){return new c(c.Type.ARTIST_TOPLIST,{id:e,toplist:t})},c.dailyMixURI=function(e){return new c(c.Type.DAILY_MIX,{id:e})},c.searchURI=function(e){return new c(c.Type.SEARCH,{query:e})},c.trackURI=function(e,t,n,i){return new c(c.Type.TRACK,{id:e,anchor:t,context:n?c.fromString(n):n,play:i})},c.tracksetURI=function(e,t,n){return new c(c.Type.TRACKSET,{tracks:e,name:t||"",index:isNaN(n)?null:n})},c.facebookURI=function(e){return new c(c.Type.FACEBOOK,{uid:e})},c.followersURI=function(e){return new c(c.Type.FOLLOWERS,{username:e})},c.followingURI=function(e){return new c(c.Type.FOLLOWING,{username:e})},c.playlistURI=function(e,t){return new c(c.Type.PLAYLIST,{username:e,id:t})},c.playlistV2URI=function(e){return new c(c.Type.PLAYLIST_V2,{id:e})},c.folderURI=function(e,t){return new c(c.Type.FOLDER,{username:e,id:t})},c.collectionTrackList=function(e,t){return new c(c.Type.COLLECTION_TRACK_LIST,{username:e,id:t})},c.starredURI=function(e){return new c(c.Type.STARRED,{username:e})},c.userToplistURI=function(e,t){return new c(c.Type.USER_TOPLIST,{username:e,toplist:t})},c.userTopTracksURI=function(e){return new c(c.Type.USER_TOP_TRACKS,{username:e})},c.toplistURI=function(e,t,n){return new c(c.Type.TOPLIST,{toplist:e,country:t,global:!!n})},c.inboxURI=function(e){return new c(c.Type.INBOX,{username:e})},c.rootlistURI=function(e){return new c(c.Type.ROOTLIST,{username:e})},c.publishedRootlistURI=function(e){return new c(c.Type.PUBLISHED_ROOTLIST,{username:e})},c.localArtistURI=function(e){return new c(c.Type.LOCAL_ARTIST,{artist:e})},c.localAlbumURI=function(e,t){return new c(c.Type.LOCAL_ALBUM,{artist:e,album:t})},c.localURI=function(e,t,n,i){return new c(c.Type.LOCAL,{artist:e,album:t,track:n,duration:i})},c.libraryURI=function(e,t){return new c(c.Type.LIBRARY,{username:e,category:t})},c.collectionURI=function(e,t){return new c(c.Type.COLLECTION,{username:e,category:t})},c.temporaryPlaylistURI=function(e,t){return new c(c.Type.TEMP_PLAYLIST,{origin:e,data:t})},c.contextGroupURI=function(e,t){return new c(c.Type.CONTEXT_GROUP,{origin:e,name:t})},c.profileURI=function(e,t){return new c(c.Type.PROFILE,{username:e,args:t})},c.imageURI=function(e){return new c(c.Type.IMAGE,{id:e})},c.mosaicURI=function(e){return new c(c.Type.MOSAIC,{ids:e})},c.radioURI=function(e){return e=void 0===e?"":e,new c(c.Type.RADIO,{args:e})},c.specialURI=function(e){return e=void 0===e?[]:e,new c(c.Type.SPECIAL,{args:e})},c.stationURI=function(e){return e=void 0===e?[]:e,new c(c.Type.STATION,{args:e})},c.applicationURI=function(e,t){return t=void 0===t?[]:t,new c(c.Type.APPLICATION,{id:e,args:t})},c.collectionAlbumURI=function(e,t){return new c(c.Type.COLLECTION_ALBUM,{username:e,id:t})},c.collectionMissingAlbumURI=function(e,t){return new c(c.Type.COLLECTION_MISSING_ALBUM,{username:e,id:t})},c.collectionArtistURI=function(e,t){return new c(c.Type.COLLECTION_ARTIST,{username:e,id:t})},c.episodeURI=function(e,t,n){return new c(c.Type.EPISODE,{id:e,context:t?c.fromString(t):t,play:n})},c.showURI=function(e){return new c(c.Type.SHOW,{id:e})},c.liveURI=function(e){return new c(c.Type.LIVE,{id:e})},c.concertURI=function(e){return new c(c.Type.CONCERT,{id:e})},c.socialSessionURI=function(e){return new c(c.Type.SOCIAL_SESSION,{id:e})},c.interruptionURI=function(e){return new c(c.Type.INTERRUPTION,{id:e})},c.isAlbum=function(e){return(c.from(e)||{}).type===c.Type.ALBUM},c.isAd=function(e){return(c.from(e)||{}).type===c.Type.AD},c.isApplication=function(e){return(c.from(e)||{}).type===c.Type.APPLICATION},c.isArtist=function(e){return(c.from(e)||{}).type===c.Type.ARTIST},c.isCollection=function(e){return(c.from(e)||{}).type===c.Type.COLLECTION},c.isCollectionAlbum=function(e){return(c.from(e)||{}).type===c.Type.COLLECTION_ALBUM},c.isCollectionArtist=function(e){return(c.from(e)||{}).type===c.Type.COLLECTION_ARTIST},c.isDailyMix=function(e){return(c.from(e)||{}).type===c.Type.DAILY_MIX},c.isEpisode=function(e){return(c.from(e)||{}).type===c.Type.EPISODE},c.isFacebook=function(e){return(c.from(e)||{}).type===c.Type.FACEBOOK},c.isFolder=function(e){return(c.from(e)||{}).type===c.Type.FOLDER},c.isLocalArtist=function(e){return(c.from(e)||{}).type===c.Type.LOCAL_ARTIST},c.isLocalAlbum=function(e){return(c.from(e)||{}).type===c.Type.LOCAL_ALBUM},c.isLocalTrack=function(e){return(c.from(e)||{}).type===c.Type.LOCAL},c.isMosaic=function(e){return(c.from(e)||{}).type===c.Type.MOSAIC},c.isPlaylistV1=function(e){return(c.from(e)||{}).type===c.Type.PLAYLIST},c.isPlaylistV2=function(e){return(c.from(e)||{}).type===c.Type.PLAYLIST_V2},c.isRadio=function(e){return(c.from(e)||{}).type===c.Type.RADIO},c.isRootlist=function(e){return(c.from(e)||{}).type===c.Type.ROOTLIST},c.isSearch=function(e){return(c.from(e)||{}).type===c.Type.SEARCH},c.isShow=function(e){return(c.from(e)||{}).type===c.Type.SHOW},c.isLive=function(e){return(c.from(e)||{}).type===c.Type.LIVE},c.isConcert=function(e){return(c.from(e)||{}).type===c.Type.CONCERT},c.isStation=function(e){return(c.from(e)||{}).type===c.Type.STATION},c.isTrack=function(e){return(c.from(e)||{}).type===c.Type.TRACK},c.isProfile=function(e){return(c.from(e)||{}).type===c.Type.PROFILE},c.isPlaylistV1OrV2=function(e){var t=c.from(e);return!!t&&(t.type===c.Type.PLAYLIST||t.type===c.Type.PLAYLIST_V2)},c.isSocialSession=function(e){return(c.from(e)||{}).type===c.Type.SOCIAL_SESSION},c.isInterruption=function(e){return(c.from(e)||{}).type===c.Type.INTERRUPTION},e.exports=c},70:function(e,t,n){"use strict";const i=n(7),o=n(19).getOriginUri,a=n(5).logWarn;function s(e,t){return`[data-context][data-uri${e}${t}]`}function l(e){const t=i.from(e);let n=t?t.toString():e;return n=(n=n.replace(/^spotify:app:internal:/,"spotify:internal:")).replace(/:internal:filterlist:[^:]+/,(function(e){return e.replace(/\+/g,"%20")}))}t.getUriFromButton=function(e){const t=e.closest("[data-context]");return t&&t.getAttribute("data-uri")||""},t.getAttributeValueFromNode=function(e,t){const n=`[${t}]`,i=e.closest(n);return i&&i.getAttribute(t)||""},t.isFormOrLinkElement=function(e){const t=e.tagName.toLowerCase();return["input","textarea","button","select","optgroup","option","a"].indexOf(t)>-1},t.isInteractiveElement=function(e){const t=e.tagName.toLowerCase();return"a"===t||"button"===t},t.getContextSelector=s,t.getContextSelectorsWithVariants=function(e){const t=o(e)||e,n=l(t),i=l(t.replace(/^spotify:/,":")),a=[s("=",t)];return a.push(s("^=","spotify:internal:filterlist:")+s("$=",t.replace(/^spotify:/,":"))),a.push(s("^=","spotify:internal:sortlist:")+s("$=",t.replace(/^spotify:/,":"))),t!==n&&(a.push(s("=",n)),a.push(s("^=","spotify:internal:filterlist:")+s("$=",i)),a.push(s("^=","spotify:internal:sortlist:")+s("$=",i))),a},t.compareContexts=function(e,t){return!(!e||!t)&&l(o(e)||e)===l(o(t)||t)},t.normalizeUri=l,t.createEmptyMethod=function(e){return function(){a(`spotify-events/player: \`${e}\` is not implemented.`)}}},71:function(e,t,n){"use strict";const i="spotify:internal:filterlist",o=/^spotify:internal:filterlist:([^:]*):(.*)$/;t.create=function(e,t){const n=e.replace(/^spotify:/,""),o=encodeURIComponent(t);return[i,o,n].join(":")},t.getQuery=function(e){const t=e.match(o);return t?decodeURIComponent(t[1]):""},t.getOriginUri=function(e){const t=e.match(o);return t?`spotify:${t[2]}`:""},t.parse=function(e){const t=e.match(o);return t?{query:decodeURIComponent(t[1]),originUri:`spotify:${t[2]}`}:null},t.isValid=function(e){return o.test(e)},t.regExp=o},72:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},73:function(e,t,n){var i=n(53),o=Array.isArray||function(e){return i(e,"Array")};e.exports=o},74:function(e,t){e.exports=[" ","\n","\r","\t","\f","\v"," "," ","᠎"," "," "," "," "," "," "," "," "," "," "," ","\u2028","\u2029"," "," ","　"]},76:function(e,t,n){var i=n(105),o=n(33),a=n(104),s=n(17),l=n(69);e.exports=function(e){var t=l(arguments,1);return o(i(e),(function(e){return!a(t,(function(t){return s(t,e)}))}))}},78:function(e,t,n){var i=n(36);e.exports=function(e,t,n){t=i(t,n);var o=!0;if(null==e)return o;for(var a=-1,s=e.length;++a<s;)if(!t(e[a],a,e)){o=!1;break}return o}},79:function(e,t,n){"use strict";const i=n(22);e.exports={request:i.request}},81:function(e,t,n){"use strict";var i=l(n(283)),o=l(n(284)),a=l(n(281));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}t.gridOverlay=i,t.responsiveTitleType=o,t.attentionHighlight=a},819:function(e,t,n){"use strict";const i=n(2),o=n(820),a=n(5).logError;t.enable=function(e){n(299).register();const t=i("spotify:client");let s=document.createElement("div");s.innerHTML=o({offlineTitle:e.title,offlineMessage:e.message});const l=s.childNodes[0];s.removeChild(l),s=null,t.query("session(online)",(function(n,i){n?a("Failed to load client state:",n):(i.session.online||document.body.appendChild(l),t.get("session").on("update",(function(t){"online"in t&&(t.online?(document.body.removeChild(l),e.onWentOnline&&e.onWentOnline()):document.body.appendChild(l))})))}))}},82:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n(61)),o=n(5);e.exports=function(e){const t=function(e){switch(e){case"ar":case"cs":case"de":case"el":case"fi":case"he":case"hu":case"ja":case"ko":case"pl":case"ru":case"sv":case"ms":return e=>`${e}.`;case"it":case"pt-BR":return e=>`${e}º`;case"fr":case"fr-CA":return e=>`${e}${1===e?"er":"e"}`;case"es":case"es-419":return(e,t=e%10)=>`${e}${1===t||3===t?"er":2===t?"do":7===t||0===t?"mo":8===t?"vo":9===t?"no":"to"}`;case"id":return e=>`${e}`;case"nl":return(e,t=e%100)=>`${e}${0!==e&&t<=1||8===t||t>=20?"ste":"de"}`;case"tr":return e=>{if(0===e)return`${e}'ıncı`;const t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"},n=e%10;return`${e}${t[n]||t[e%100-n]||t[e>=100?100:null]}`};case"zh-Hant":return e=>`第${e}`;case"en":return(e,t=e%10)=>`${e}${1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"}`;case"th":return e=>`${e}`;case"vi":return e=>1===e?"thứ nhất":`thứ ${e}`;default:return(0,o.logWarn)(`No explicit ordinal formatter specified for "${e}" locale – please add to spotify-numeral`),e=>`${e}.`}}(e),n=new Intl.NumberFormat((0,i.default)(e,"intl"));return e=>({format:i=>((e,i="0,0")=>{if("0,0"===i)return n.format(e);if("0o"===i)return t(e);throw new Error(`Unsupported format ${i}`)})(e,i)})}},820:function(e,t,n){var i=n(3);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,i,o,a){var s;return'<div class="show-offline-screen" style="position: fixed; bottom: 0; left: 0; right: 0; top: 0; z-index: 90000;">\n'+(null!=(s=e.invokePartial(n(429),t,{name:"../glue/templates/error-and-offline.hbs",data:a,indent:"  ",helpers:i,partials:o,decorators:e.decorators}))?s:"")+"</div>\n"},usePartial:!0,useData:!0})},83:function(e,t,n){"use strict";const i=n(2),o=n(21),a=n(48),s=n(64),l=n(65),r=[];let p={},d=null,k=null,u=null,c=null,m=!1;function f(e){if(e){const t=a.getLiveList(e.containerIndex);if(t)return d=e.containerIndex,void(k=t.keys[e.index]||null)}d=null,k=null}function y(e,t){if(m=!(!t||!t.isTouch),e){const t=a.getLiveList(e.containerIndex);if(t)return u=e.containerIndex,void(c=t.keys[e.index])}u=null,c=null}function g(){r.length=0,f(null),y(null)}function z(e){const t=r[e];if(!t)return;const n=a.getLiveList(e);if(n)for(const i in t){let o=!n.hasKey(i);if(!o){const t=p[e];o=!!t&&t[i]}o&&delete t[i]}}function b(e,t){const n=[],o=e.containerIndex,s=t.containerIndex;for(let l=o;l<=s;l++){const r=l===o?e.index:0;let p;if(l===s)p=t.index;else{const e=a.getContainerLength(l);e>0&&(p=e-1)}if(void 0===p)n.push([]);else{const e=[];n.push(e);const t=a.getUri(l),o=i(t).get("rows");if(o){const t=o.keys;for(let n=r;n<p+1;n++)e.push(t[n])}}}return n}function h(e){const t=r[e];if(!t)return null;let n=[];const i=a.getLiveList(e),o=i.keys.filter((function(e){return!!t[e]}));return i&&o.length&&(n=o.length>1?i.indexOfMany(o):[i.indexOf(o[0])]),n.length?n:null}t.selections=r,t.getOrigin=function(){if(null===d)return null;if(null===k)return null;const e=a.getLiveList(d);if(e){const t=e.keys.indexOf(k);return-1===t?null:new l(d,t)}return null},t.getFocus=function(){if(null===u)return null;if(null===c)return null;const e=a.getLiveList(u);if(e){const t=e.keys.indexOf(c);return new l(u,t)}return null},t.setOrigin=f,t.setFocus=y,t.wasFocusTriggeredByTouch=function(){return m},t.setHiddenIndices=function(e,t){const n=i(t).get("rows");if(n){const i=n.keys,o={};for(let t=0,n=e.length;t<n;t++){const n=i[e[t]];n&&(o[n]=!0)}const s=a.getContainerIndex(t);p[s]=o,z(s)}},t.isPositionHidden=function(e){const t=b(e,e)[0][0],n=p[e.containerIndex];return n&&n[t]},t.add=function(e,t){let n=t||e,i=e;if(-1===s.getDirection(i,n)){const e=i;i=n,n=e}const o=b(i,n);for(let e=0,t=o.length;e<t;e++){const t=i.containerIndex+e,n=r[t]||(r[t]=Object.create(null)),a=o[e],s=p[t];for(let e=0;e<a.length;e++){const t=a[e];s&&s[t]||(n[t]=!0)}}},t.remove=function(e,t){let n=t||e,i=e;if(-1===s.getDirection(i,n)){const e=i;i=n,n=e}const o=b(i,n);for(let e=0,t=o.length;e<t;e++){const t=i.containerIndex+e,n=r[t]||(r[t]=Object.create(null)),a=o[e];for(let e=0;e<a.length;e++){delete n[a[e]]}}},t.clear=g,t.reset=function(){g(),p={}},t.updateContainer=z,t.isSelected=function(e){const t=r[e.containerIndex];if(!t)return!1;const n=a.getLiveList(e.containerIndex);if(n){return!!t[n.keys[e.index]]}return!1},t.hasHoles=function(){let e=0;for(let t=0;t<r.length;t++){const n=r[t],i=a.getLiveList(t),o=Object.keys(n);if(o.length>0&&(e++,i)){const t=[];for(let e=0,n=o.length;e<n;e++)t.push(i.indexOf(o[e]));let n;t.sort((function(e,t){return e-t}));for(let i=0,o=t.length;i<o;i++){const o=t[i];if(i>0&&o>n+1){e++;break}n=o}}if(e>1)return!0}return!1},t.hasSelection=function(){for(let e=0,t=r.length;e<t;e++)if(r[e]&&Object.keys(r[e]).length>0)return!0;return!1},t.getIndicesForContainer=h,t.getIndicesWithHiddenForContainer=function(e){let t=h(e);if(!t)return null;const n=p[e];if(!n)return t;const i=o.fromIndices(t);if(1===i.length)return t;const s=a.getLiveList(e);if(!s)return t;const l=Object.keys(n);let r=[];l.length&&(r=l.length>1?s.indexOfMany(l):[s.indexOf(l[0])]),r=r.filter((function(e){return e>-1}));const d=o.fromIndices(r),k=d.map((function(e){return e.start})),u=d.map((function(e){return e.end}));for(let e=0,n=i.length;e<n;e++){const n=i[e],o=i[e+1],a=k.indexOf(n.end);if(a>-1){const e=u[a];if(!o||e===o.start){const e=d[a].toIndices();e.length>0&&(t=t.concat(e))}}}return t.sort((function(e,t){return e-t})),t.length?t:null}},84:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=t.Action=void 0;var i=n(85);t.Action={DELETE:"DELETE",GET:"GET",HEAD:"HEAD",POST:"POST",PUT:"PUT",SUB:"SUB",PATCH:"PATCH"};class o extends i.Message{constructor(e,t,n,i){if("string"!=typeof e)throw new TypeError("Invalid `action` argument for Request.");super(t,n,i),this._action=e}static fromObject(e){return e&&e.action&&e.uri?new o(e.action,e.uri,e.headers,e.body):null}getAction(){return this._action}copy(e,t){return new o(this._action,this._uri,this._copyHeaders(e),void 0!==t?t:this._body)}toJSON(){return{action:this._action,uri:this._uri,headers:this._headers,body:this._body}}}t.Request=o},85:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;class i{constructor(e,t,n){if("string"!=typeof e)throw new TypeError("Invalid `uri` argument for Message.");this._uri=e,this._headers=this._headersToLowerCase(t),this._body=function(e){return"string"!=typeof e?JSON.stringify(e):e}(n||"")}static fromObject(e){return e&&e.uri?new i(e.uri,e.headers,e.body):null}getURI(){return this._uri}getMimeType(){return this._headers.accept}getHeader(e){return this._headers[e.toLowerCase()]||null}getHeaders(){return this._copyHeaders(null)}getBody(){return this._body}getJSONBody(){try{const e=window.top&&window.top.initialState&&window.top.initialState.isPlaylistV2UriEnabled,t=this.getBody();if(e){const e=t.replace(/\:user\:([^:]+)\:playlist\:/g,":playlist:").replace(/\/user\/([^:]+)\/playlist\//g,"/playlist/");return JSON.parse(e)}return JSON.parse(t)}catch(e){return null}}copy(e,t){return new i(this._uri,this._copyHeaders(e),void 0!==t?t:this._body)}serialize(){return this.toJSON()}toJSON(){return{uri:this._uri,headers:this._headers,body:this._body}}_headersToLowerCase(e){return null===e||"object"!=typeof e?{}:Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{})}_copyHeaders(e){return Object.assign({},this._headers,this._headersToLowerCase(e))}}t.Message=i},86:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Response=t.StatusCode=void 0;var i=n(85);t.StatusCode={OK:200,CREATED:201,ACCEPTED:202,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,TIMED_OUT:408,CONFLICT:409,GONE:410,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,ERROR_UNKNOWN:-100,ERROR_ALLOCATION_FAILED:-101,ERROR_INVALID_ENCODING:-102,ERROR_INFINITE_LOOP:-103,ERROR_RESOLVER_NOT_FOUND:-104};class o extends i.Message{constructor(e,t,n,i){if("number"!=typeof t)throw new TypeError("Invalid `status` argument for Response.");super(e,n,i),this._status=t}static fromObject(e){return e&&e.uri&&e.status?new o(e.uri,e.status,e.headers,e.body):null}getMimeType(){return this._headers["content-type"]}getStatusCode(){return this._status}copy(e,t){return new o(this._uri,this._status,this._copyHeaders(e),void 0!==t?t:this._body)}toJSON(){return{uri:this._uri,status:this._status,headers:this._headers,body:this._body}}}t.Response=o},87:function(e,t,n){"use strict";const i=n(2);function o(){return i("spotify:application").get("active")||!1}t.isActive=function(){return o()},t.isActiveAndFocused=function(){return o()&&function(){const e=window.top.document.activeElement,t=e&&e.contentWindow;return t?t===window:window.top===window}()}},88:function(e,t,n){"use strict";const i=function(e){return""===e||isNaN(e)?"true"===e||"false"!==e&&("null"===e?null:"undefined"!==e?e:void 0):+e};function o(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}const a=`[^${",()"+o("[")+o("]")+"=\\s"}]`,s=new RegExp(a),l=new RegExp(`^${a}+$`),r=new RegExp(["=","!=",">=","<=",">","<","^=","$=","~=","|=","*="].map(o).join("|")),p=/\$([\d]+)/,d=/^(\d*):(\d*)$/;e.exports=function(e,t=[]){let n={mask:[]};const o=[n];let a,k="",u="",c="",m="",f="";for(let y=0;y<e.length+1;y++){const g=e.charAt(y);if(a){if(u=u.trim(),","===g||"]"===g){const e=u.match(d),o=u.match(r),s=u.match(l);if(e)c=e[1],f=":",m=e[2];else if(o)c=u.substring(0,o.index),f=o[0],m=u.substring(o.index+f.length);else{if(!s)throw new SyntaxError(`syntax error: \`${u}\` contains characters not valid in a filter`);c=s[0]}u="";const k={};if(c){const e=c.match(p);c=e?t[+e[1]]:i(c),k.left=c}if(f&&(k.op=f),m){const e=m.match(p);m=e?t[+e[1]]:i(m),k.right=m}if(("left"in k||"right"in k)&&a.push(k),m="",c="",f="","]"===g){if(a.length){(n.filters||(n.filters=[])).push(a)}a=null}continue}u+=g}else{if(g&&s.test(g))k+=g;else if(!k||g&&","!==g&&"("!==g&&"["!==g&&")"!==g){if(g&&k)throw new SyntaxError(`syntax error: \`${g}\` is not a valid character in a key`)}else{const e=k.match(p);o[0].mask.push(n={key:e?t[+e[1]]:i(k)}),k=""}"("===g?(n.mask=[],o.unshift(n)):")"===g&&o.shift(),"["===g&&(a=[])}}if(1!==o.length)throw new SyntaxError("syntax error");return o[0]}},89:function(e,t,n){"use strict";const i=n(9),o=n(70);let a=[];const s={getPlayerVariantUri:o.createEmptyMethod("getPlayerVariantUri"),handlePlayButton:o.createEmptyMethod("handlePlayButton"),handlePlayFromRow:o.createEmptyMethod("handlePlayFromRow")};function l(e,t){const n=t[0],i=o.getUriFromButton(n);if(!i)return;const a=s.getPlayerVariantUri(),l="queue"!==s.getPlayerTrackProvider()&&o.compareContexts(a,i),r=o.getAttributeValueFromNode(n,"data-play-source");s.handlePlayButton(n,{isPlayingContext:l,contextUri:i,source:r,reason:"playbtn"})}function r(e){const t=e[0],n=i(t.closest("[data-context]"));if(n&&!t.classList.contains("thumbs-down")){const e=o.getAttributeValueFromNode(t,"data-play-source");s.handlePlayFromRow(t,{contextUri:n.data("uri"),source:e,reason:"clickrow"})}}function p(e,t){o.isInteractiveElement(e.target)||r(t)}function d(e,t){if(13===e.keyCode){if(o.isFormOrLinkElement(e.target))return;e.preventDefault(),e.stopPropagation(),r(t)}}function k(e){a.push(e.type)}function u(e){a.push(e.type)}function c(e){a.push(e.type)}function m(e,t){1===a.length&&"touchstart"===a[0]&&(o.isInteractiveElement(e.target)||(e.preventDefault(),r(t))),a=[]}const f={selectorPlayButton:"[data-button=play]",selectorListRow:"[data-context] [data-list-item]",selectorPlayContextButton:"[data-button=play-context]"};let y=f;t.attach=function(){const e=i(document);e.delegate("keydown",y.selectorListRow,d),e.delegate("click",y.selectorPlayButton,l),e.delegate("click",y.selectorPlayContextButton,l),e.delegate("dblclick",y.selectorListRow,p),e.delegate("touchstart",y.selectorListRow,u),e.delegate("touchend",y.selectorListRow,m),e.delegate("touchmove",y.selectorListRow,c),e.delegate("contextmenu",y.selectorListRow,k)},t.detach=function(){const e=i(document);e.undelegate("keydown",y.selectorListRow,d),e.undelegate("click",y.selectorPlayButton,l),e.undelegate("click",y.selectorPlayContextButton,l),e.undelegate("dblclick",y.selectorListRow,p),e.undelegate("touchstart",y.selectorListRow,u),e.undelegate("touchend",y.selectorListRow,m),e.undelegate("touchmove",y.selectorListRow,c),e.undelegate("contextmenu",y.selectorListRow,k)},t.setSelectors=function(e={}){t.detach(),y={...f,...e},t.attach()},t.setMethods=function(e){for(const t in e)e.hasOwnProperty(t)&&(s[t]=e[t])}},9:function(e,t,n){"use strict";const i=n(43);n(285),n(116),n(289),n(118),n(292),e.exports=i},90:function(e,t,n){var i=n(53);e.exports=function(e){return i(e,"Object")}},91:function(e,t){e.exports=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},93:function(e,t,n){var i=n(27);e.exports=function(e,t){if(null==t)return e;for(var n=-1,o=t.length;++n<o;)-1===i(e,t[n])&&e.push(t[n]);return e}},94:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){function e(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return e.prototype.memoize=function(e){if(this._hasWeakSet)return!!this._inner.has(e)||(this._inner.add(e),!1);for(var t=0;t<this._inner.length;t++){if(this._inner[t]===e)return!0}return this._inner.push(e),!1},e.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e){this._inner.splice(t,1);break}},e}()},95:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(10),o=/^[ \t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \t]*$/,a=function(){function e(e,t,n,o){void 0===e&&(e=Object(i.l)()),void 0===t&&(t=Object(i.l)().substring(16)),this._traceId=e,this._spanId=t,this._sampled=n,this._parent=o}return e.prototype.setParent=function(e){return this._parent=e,this},e.prototype.setSampled=function(e){return this._sampled=e,this},e.fromTraceparent=function(t){var n=t.match(o);if(n){var i=void 0;"1"===n[3]?i=!0:"0"===n[3]&&(i=!1);var a=new e(n[1],n[2],i);return new e(n[1],void 0,i,a)}},e.prototype.toTraceparent=function(){var e="";return!0===this._sampled?e="-1":!1===this._sampled&&(e="-0"),this._traceId+"-"+this._spanId+e},e.prototype.toJSON=function(){return{parent:this._parent&&this._parent.toJSON()||void 0,sampled:this._sampled,span_id:this._spanId,trace_id:this._traceId}},e}()},96:function(e,t,n){"use strict";const i=n(302),o=n(52);e.exports={schema:i,log:o.bind(null,i)}},97:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=p;var o=n(18),a=i(n(24)),s=n(98),l=n(208),r=i(n(210));t.VERSION="4.5.3";t.COMPILER_REVISION=8;t.LAST_COMPATIBLE_COMPILER_REVISION=7;t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};function p(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},s.registerDefaultHelpers(this),l.registerDefaultDecorators(this)}p.prototype={constructor:p,logger:r.default,log:r.default.log,registerHelper:function(e,t){if("[object Object]"===o.toString.call(e)){if(t)throw new a.default("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if("[object Object]"===o.toString.call(e))o.extend(this.partials,e);else{if(void 0===t)throw new a.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if("[object Object]"===o.toString.call(e)){if(t)throw new a.default("Arg not supported with multiple decorators");o.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var d=r.default.log;t.log=d,t.createFrame=o.createFrame,t.logger=r.default},98:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){o.default(e),a.default(e),s.default(e),l.default(e),r.default(e),p.default(e),d.default(e)},t.moveHelperToHooks=function(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])};var o=i(n(201)),a=i(n(202)),s=i(n(203)),l=i(n(204)),r=i(n(205)),p=i(n(206)),d=i(n(207))},99:function(e,t,n){"use strict";e.exports=function(e,t){const n=(e||"").match(/^spotify:(.+)$/);if(!n)return e||"";let i=n.pop().replace(/:$/,"").split(/:/);const o=i.shift();return"search"===o&&(i=[i.join(":")]),i.unshift(t,o),i.join("/")}}});
//# sourceMappingURL=lyrics.bundle.js.map
